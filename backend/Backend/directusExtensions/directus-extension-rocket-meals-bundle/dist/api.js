import{webcrypto as e}from"node:crypto";import*as t from"node:buffer";import n,{Readable as s}from"stream";import i,{sep as r,extname as a,resolve as o,dirname as c}from"path";import l,{statSync as u,readFileSync as d,stat as p,readFile as h}from"fs";import{createRequire as f}from"module";import m,{TextEncoder as g,promisify as _}from"util";import y from"http";import E from"https";import b from"url";import v from"assert";import T from"tty";import A from"os";import S,{gzip as w,gunzip as x}from"zlib";import k from"events";import C from"crypto";import N from"dns";import I from"net";import R from"tls";import D,{Buffer as O}from"buffer";import L from"string_decoder";import"cluster";const F="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",M=128;let P,B;var U=Object.freeze({__proto__:null,nanoid:function(t=21){var n;n=t-=0,!P||P.length<n?(P=Buffer.allocUnsafe(n*M),e.getRandomValues(P),B=0):B+n>P.length&&(e.getRandomValues(P),B=0),B+=n;let s="";for(let e=B-t;e<B;e++)s+=F[63&P[e]];return s},urlAlphabet:F}),H=(0).constructor;H.isFinite,H.isInteger,[].constructor.isArray;var j=function(){function e(e){this.size=e,this.reset()}return e.prototype.reset=function(){this.oldestIndex=0,this.map={},this.cachedKeys=new Array(this.size)},e.prototype.get=function(e){return this.map[e]},e.prototype.set=function(e,t){this.map[e]=t;var n=this.cachedKeys[this.oldestIndex];void 0!==n&&delete this.map[n],this.cachedKeys[this.oldestIndex]=e,this.oldestIndex++,this.oldestIndex%=this.size},e}();new j(1e3);var G="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function $(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q={exports:{}},z=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}};!function(e,t){const n=z;q.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:n(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}}(0,q.exports);var W=q.exports;const Y=W;var V=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new Y(t)}};const K=V,Q={};var X=function(e,t,n){if(!1===t||null==t)return e;"string"==typeof(n=n||{})&&(n={separator:n});const s=Array.isArray(t);K(!s||!n.separator,"Separator option is not valid for array-based chain");const i=s?t:t.split(n.separator||".");let r=e;for(let e=0;e<i.length;++e){let s=i[e];const a=n.iterables&&Q.iterables(r);if(Array.isArray(r)||"set"===a){const e=Number(s);Number.isInteger(e)&&(s=e<0?r.length+e:e)}if(!r||"function"==typeof r&&!1===n.functions||!a&&void 0===r[s]){K(!n.strict||e+1===i.length,"Missing segment",s,"in reach path ",t),K("object"==typeof r||!0===n.functions||"function"!=typeof r,"Invalid segment",s,"in reach path ",t),r=n.default;break}r=a?"set"===a?[...r][s]:r.get(s):r[s]}return r};Q.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0};var Z={exports:{}};!function(e,t){const n={};t=Z.exports={array:Array.prototype,buffer:Buffer&&Buffer.prototype,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},n.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(Buffer&&e instanceof Buffer)return t.buffer;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const s=Object.prototype.toString.call(e);return n.typeMap.get(s)||t.generic}}(0,Z.exports);var J=Z.exports,ee={keys:function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}};const te=X,ne=J,se=ee,ie={needsProtoHack:new Set([ne.set,ne.map,ne.weakSet,ne.weakMap])};var re=ie.clone=function(e,t={},n=null){if("object"!=typeof e||null===e)return e;let s=ie.clone,i=n;if(t.shallow){if(!0!==t.shallow)return ie.cloneWithShallow(e,t);s=e=>e}else if(i){const t=i.get(e);if(t)return t}else i=new Map;const r=ne.getInternalProto(e);if(r===ne.buffer)return Buffer&&Buffer.from(e);if(r===ne.date)return new Date(e.getTime());if(r===ne.regex)return new RegExp(e);const a=ie.base(e,r,t);if(a===e)return e;if(i&&i.set(e,a),r===ne.set)for(const n of e)a.add(s(n,t,i));else if(r===ne.map)for(const[n,r]of e)a.set(n,s(r,t,i));const o=se.keys(e,t);for(const n of o){if("__proto__"===n)continue;if(r===ne.array&&"length"===n){a.length=e.length;continue}const o=Object.getOwnPropertyDescriptor(e,n);o?o.get||o.set?Object.defineProperty(a,n,o):o.enumerable?a[n]=s(e[n],t,i):Object.defineProperty(a,n,{enumerable:!1,writable:!0,configurable:!0,value:s(e[n],t,i)}):Object.defineProperty(a,n,{enumerable:!0,writable:!0,configurable:!0,value:s(e[n],t,i)})}return a};ie.cloneWithShallow=function(e,t){const n=t.shallow;(t=Object.assign({},t)).shallow=!1;const s=new Map;for(const t of n){const n=te(e,t);"object"!=typeof n&&"function"!=typeof n||s.set(n,n)}return ie.clone(e,t,s)},ie.base=function(e,t,n){if(!1===n.prototype)return ie.needsProtoHack.has(t)?new t.constructor:t===ne.array?[]:{};const s=Object.getPrototypeOf(e);if(s&&s.isImmutable)return e;if(t===ne.array){const e=[];return s!==t&&Object.setPrototypeOf(e,s),e}if(ie.needsProtoHack.has(t)){const e=new s.constructor;return s!==t&&Object.setPrototypeOf(e,s),e}return Object.create(s)};const ae={};var oe=function(e){if(!e)return"";let t="";for(let n=0;n<e.length;++n){const s=e.charCodeAt(n);ae.isSafe(s)?t+=e[n]:t+=ae.escapeHtmlChar(s)}return t};ae.escapeHtmlChar=function(e){const t=ae.namedHtml.get(e);if(t)return t;if(e>=256)return"&#"+e+";";return`&#x${e.toString(16).padStart(2,"0")};`},ae.isSafe=function(e){return ae.safeCharCodes.has(e)},ae.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),ae.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}();var ce={};!function(e){const t={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};e.Parser=class{constructor(e,n={}){if(!n[t.settings]&&n.constants)for(const e in n.constants){const t=n.constants[e];if(null!==t&&!["boolean","number","string"].includes(typeof t))throw new Error(`Formula constant ${e} contains invalid ${typeof t} value type`)}this.settings=n[t.settings]?n:Object.assign({[t.settings]:!0,constants:{},functions:{}},n),this.single=null,this._parts=null,this._parse(e)}_parse(n){let s=[],i="",r=0,a=!1;const o=n=>{if(r)throw new Error("Formula missing closing parenthesis");const o=s.length?s[s.length-1]:null;if(a||i||n){if(o&&"reference"===o.type&&")"===n)return o.type="function",o.value=this._subFormula(i,o.value),void(i="");if(")"===n){const t=new e.Parser(i,this.settings);s.push({type:"segment",value:t})}else if(a){if("]"===a)return s.push({type:"reference",value:i}),void(i="");s.push({type:"literal",value:i})}else if(t.operatorCharacters.includes(i))o&&"operator"===o.type&&t.operators.includes(o.value+i)?o.value+=i:s.push({type:"operator",value:i});else if(i.match(t.numberRx))s.push({type:"constant",value:parseFloat(i)});else if(void 0!==this.settings.constants[i])s.push({type:"constant",value:this.settings.constants[i]});else{if(!i.match(t.tokenRx))throw new Error(`Formula contains invalid token: ${i}`);s.push({type:"reference",value:i})}i=""}};for(const e of n)a?e===a?(o(),a=!1):i+=e:r?"("===e?(i+=e,++r):")"===e?(--r,r?i+=e:o(e)):i+=e:e in t.literals?a=t.literals[e]:"("===e?(o(),++r):t.operatorCharacters.includes(e)?(o(),i=e,o()):" "!==e?i+=e:o();o(),s=s.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==s[t-1].type?e:{type:"operator",value:"n"}));let c=!1;for(const e of s){if("operator"===e.type){if(t.operatorsPrefix.includes(e.value))continue;if(!c)throw new Error("Formula contains an operator in invalid position");if(!t.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(c)throw new Error("Formula missing expected operator");c=!c}if(!c)throw new Error("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this._parts=s.map((e=>{if("operator"===e.type)return t.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):t.reference(e.value)}))}_subFormula(n,s){const i=this.settings.functions[s];if("function"!=typeof i)throw new Error(`Formula contains unknown function ${s}`);let r=[];if(n){let e="",i=0,a=!1;const o=()=>{if(!e)throw new Error(`Formula contains function ${s} with invalid arguments ${n}`);r.push(e),e=""};for(let s=0;s<n.length;++s){const r=n[s];a?(e+=r,r===a&&(a=!1)):r in t.literals&&!i?(e+=r,a=t.literals[r]):","!==r||i?(e+=r,"("===r?++i:")"===r&&--i):o()}o()}return r=r.map((t=>new e.Parser(t,this.settings))),function(e){const t=[];for(const n of r)t.push(n.evaluate(e));return i.call(e,...t)}}evaluate(e){const n=this._parts.slice();for(let s=n.length-2;s>=0;--s){const i=n[s];if(i&&"operator"===i.type){const r=n[s+1];n.splice(s+1,1);const a=t.evaluate(r,e);n[s]=t.single(i.value,a)}}return t.operatorsOrder.forEach((s=>{for(let i=1;i<n.length-1;)if(s.includes(n[i])){const s=n[i],r=t.evaluate(n[i-1],e),a=t.evaluate(n[i+1],e);n.splice(i,2);const o=t.calculate(s,r,a);n[i-1]=0===o?0:o}else i+=2})),t.evaluate(n[0],e)}},e.Parser.prototype[t.symbol]=!0,t.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},t.evaluate=function(e,n){return null===e?null:"function"==typeof e?e(n):e[t.symbol]?e.evaluate(n):e},t.single=function(e,t){if("!"===e)return!t;const n=-t;return 0===n?0:n},t.calculate=function(e,n,s){if("??"===e)return t.exists(n)?n:s;if("string"==typeof n||"string"==typeof s){if("+"===e)return(n=t.exists(n)?n:"")+(s=t.exists(s)?s:"")}else switch(e){case"^":return Math.pow(n,s);case"*":return n*s;case"/":return n/s;case"%":return n%s;case"+":return n+s;case"-":return n-s}switch(e){case"<":return n<s;case"<=":return n<=s;case">":return n>s;case">=":return n>=s;case"==":return n===s;case"!=":return n!==s;case"&&":return n&&s;case"||":return n||s}return null},t.exists=function(e){return null!=e}}(ce);const le=J,ue={mismatched:null};var de=function(e,t,n){return n=Object.assign({prototype:!0},n),!!ue.isDeepEqual(e,t,n,[])};ue.isDeepEqual=function(e,t,n,s){if(e===t)return 0!==e||1/e==1/t;const i=typeof e;if(i!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===i){if(!n.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==i)return e!=e&&t!=t;const r=ue.getSharedType(e,t,!!n.prototype);switch(r){case le.buffer:return Buffer&&Buffer.prototype.equals.call(e,t);case le.promise:return e===t;case le.regex:return e.toString()===t.toString();case ue.mismatched:return!1}for(let n=s.length-1;n>=0;--n)if(s[n].isSame(e,t))return!0;s.push(new ue.SeenEntry(e,t));try{return!!ue.isDeepEqualObj(r,e,t,n,s)}finally{s.pop()}},ue.getSharedType=function(e,t,n){if(n)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?ue.mismatched:le.getInternalProto(e);const s=le.getInternalProto(e);return s!==le.getInternalProto(t)?ue.mismatched:s},ue.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},ue.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},ue.isSetSimpleEqual=function(e,t){for(const n of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,n))return!1;return!0},ue.isDeepEqualObj=function(e,t,n,s,i){const{isDeepEqual:r,valueOf:a,hasOwnEnumerableProperty:o}=ue,{keys:c,getOwnPropertySymbols:l}=Object;if(e===le.array){if(!s.part){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!r(t[e],n[e],s,i))return!1;return!0}for(const e of t)for(const t of n)if(r(e,t,s,i))return!0}else if(e===le.set){if(t.size!==n.size)return!1;if(!ue.isSetSimpleEqual(t,n)){const e=new Set(Set.prototype.values.call(n));for(const n of Set.prototype.values.call(t)){if(e.delete(n))continue;let t=!1;for(const a of e)if(r(n,a,s,i)){e.delete(a),t=!0;break}if(!t)return!1}}}else if(e===le.map){if(t.size!==n.size)return!1;for(const[e,a]of Map.prototype.entries.call(t)){if(void 0===a&&!Map.prototype.has.call(n,e))return!1;if(!r(a,Map.prototype.get.call(n,e),s,i))return!1}}else if(e===le.error&&(t.name!==n.name||t.message!==n.message))return!1;const u=a(t),d=a(n);if((t!==u||n!==d)&&!r(u,d,s,i))return!1;const p=c(t);if(!s.part&&p.length!==c(n).length&&!s.skip)return!1;let h=0;for(const e of p)if(s.skip&&s.skip.includes(e))void 0===n[e]&&++h;else{if(!o(n,e))return!1;if(!r(t[e],n[e],s,i))return!1}if(!s.part&&p.length-h!==c(n).length)return!1;if(!1!==s.symbols){const e=l(t),a=new Set(l(n));for(const c of e){if(!s.skip||!s.skip.includes(c))if(o(t,c)){if(!o(n,c))return!1;if(!r(t[c],n[c],s,i))return!1}else if(o(n,c))return!1;a.delete(c)}for(const e of a)if(o(n,e))return!1}return!0},ue.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}};var pe={location:function(e=0){const t=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t;const n={};Error.captureStackTrace(n,this);const s=n.stack[e+1];return Error.prepareStackTrace=t,{filename:s.getFileName(),line:s.getLineNumber()}}};const he=V,fe=re,me=ee,ge={};var _e=ge.merge=function(e,t,n){if(he(e&&"object"==typeof e,"Invalid target value: must be an object"),he(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(n=Object.assign({nullOverride:!0,mergeArrays:!0},n),Array.isArray(t)){he(Array.isArray(e),"Cannot merge array onto an object"),n.mergeArrays||(e.length=0);for(let s=0;s<t.length;++s)e.push(fe(t[s],{symbols:n.symbols}));return e}const s=me.keys(t,n);for(let i=0;i<s.length;++i){const r=s[i];if("__proto__"===r||!Object.prototype.propertyIsEnumerable.call(t,r))continue;const a=t[r];if(a&&"object"==typeof a){if(e[r]===a)continue;!e[r]||"object"!=typeof e[r]||Array.isArray(e[r])!==Array.isArray(a)||a instanceof Date||Buffer&&Buffer.isBuffer(a)||a instanceof RegExp?e[r]=fe(a,{symbols:n.symbols}):ge.merge(e[r],a,n)}else(null!=a||n.nullOverride)&&(e[r]=a)}return e},ye=function(){};const Ee=V,be=re,ve=_e,Te=X,Ae={};var Se=function(e,t,n={}){if(Ee(e&&"object"==typeof e,"Invalid defaults value: must be an object"),Ee(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),Ee("object"==typeof n,"Invalid options: must be an object"),!t)return null;if(n.shallow)return Ae.applyToDefaultsWithShallow(e,t,n);const s=be(e);if(!0===t)return s;const i=void 0!==n.nullOverride&&n.nullOverride;return ve(s,t,{nullOverride:i,mergeArrays:!1})};Ae.applyToDefaultsWithShallow=function(e,t,n){const s=n.shallow;Ee(Array.isArray(s),"Invalid keys");const i=new Map,r=!0===t?null:new Set;for(let n of s){n=Array.isArray(n)?n:n.split(".");const s=Te(e,n);s&&"object"==typeof s?i.set(s,r&&Te(t,n)||s):r&&r.add(n)}const a=be(e,{},i);if(!r)return a;for(const e of r)Ae.reachCopy(a,t,e);const o=void 0!==n.nullOverride&&n.nullOverride;return ve(a,t,{nullOverride:o,mergeArrays:!1})},Ae.reachCopy=function(e,t,n){for(const e of n){if(!(e in t))return;const n=t[e];if("object"!=typeof n||null===n)return;t=n}const s=t;let i=e;for(let e=0;e<n.length-1;++e){const t=n[e];"object"!=typeof i[t]&&(i[t]={}),i=i[t]}i[n[n.length-1]]=s};var we={};const xe=V,ke={};we.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const n=[].concat((t=t||{}).before||[]),s=[].concat(t.after||[]),i=t.group||"?",r=t.sort||0;xe(!n.includes(i),`Item cannot come before itself: ${i}`),xe(!n.includes("?"),"Item cannot come before unassociated items"),xe(!s.includes(i),`Item cannot come after itself: ${i}`),xe(!s.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:r,before:n,after:s,group:i,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();xe(e,"item","?"!==i?`added into group ${i}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(ke.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return xe(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return xe(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),n=Object.create(null);for(const s of this._items){const i=s.seq,r=s.group;n[r]=n[r]||[],n[r].push(i),e[i]=s.before;for(const e of s.after)t[e]=t[e]||[],t[e].push(i)}for(const t in e){const s=[];for(const i in e[t]){const r=e[t][i];n[r]=n[r]||[],s.push(...n[r])}e[t]=s}for(const s in t)if(n[s])for(const i of n[s])e[i].push(...t[s]);const s={};for(const t in e){const n=e[t];for(const e of n)s[e]=s[e]||[],s[e].push(t)}const i={},r=[];for(let e=0;e<this._items.length;++e){let t=e;if(s[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===i[e])continue;s[e]||(s[e]=[]);const n=s[e].length;let r=0;for(let t=0;t<n;++t)i[s[e][t]]&&++r;if(r===n){t=e;break}}}null!==t&&(i[t]=!0,r.push(t))}if(r.length!==this._items.length)return!1;const a={};for(const e of this._items)a[e.seq]=e;this._items=[],this.nodes=[];for(const e of r){const t=a[e];this.nodes.push(t.node),this._items.push(t)}return!0}},ke.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1;var Ce,Ne={},Ie={};(Ce=Ie).codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},Ce.code=function(e){return{code:e,error:Ce.codes[e]}},function(e){const t=Ie,n={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:b.URL||URL};e.analyze=function(e,s={}){if(!e)return t.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return t.code("DOMAIN_TOO_LONG");if(!!n.nonAsciiRx.test(e)){if(!1===s.allowUnicode)return t.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(n.domainControlRx.test(e))return t.code("DOMAIN_INVALID_CHARS");e=n.punycode(e),s.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const i=s.minDomainSegments||n.minDomainSegments,r=e.split(".");if(r.length<i)return t.code("DOMAIN_SEGMENTS_COUNT");if(s.maxDomainSegments&&r.length>s.maxDomainSegments)return t.code("DOMAIN_SEGMENTS_COUNT_MAX");const a=s.tlds;if(a){const e=r[r.length-1].toLowerCase();if(a.deny&&a.deny.has(e)||a.allow&&!a.allow.has(e))return t.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<r.length;++e){const s=r[e];if(!s.length)return t.code("DOMAIN_EMPTY_SEGMENT");if(s.length>63)return t.code("DOMAIN_LONG_SEGMENT");if(e<r.length-1){if(!n.domainSegmentRx.test(s))return t.code("DOMAIN_INVALID_CHARS")}else if(!n.tldSegmentRx.test(s))return t.code("DOMAIN_INVALID_TLDS_CHARS")}return null},e.isValid=function(t,n){return!e.analyze(t,n)},n.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new n.URL(`http://${e}`).host}catch(t){return e}}}(Ne);var Re={};const De=Ne,Oe=Ie,Le={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(m.TextEncoder||TextEncoder)};Re.analyze=function(e,t){return Le.email(e,t)},Re.isValid=function(e,t){return!Le.email(e,t)},Le.email=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return Oe.code("EMPTY_STRING");const n=!Le.nonAsciiRx.test(e);if(!n){if(!1===t.allowUnicode)return Oe.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const s=e.split("@");if(2!==s.length)return s.length>2?Oe.code("MULTIPLE_AT_CHAR"):Oe.code("MISSING_AT_CHAR");const[i,r]=s;if(!i)return Oe.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return Oe.code("ADDRESS_TOO_LONG");if(Le.encoder.encode(i).length>64)return Oe.code("LOCAL_TOO_LONG")}return Le.local(i,n)||De.analyze(r,t)},Le.local=function(e,t){const n=e.split(".");for(const e of n){if(!e.length)return Oe.code("EMPTY_LOCAL_SEGMENT");if(t){if(!Le.atextRx.test(e))return Oe.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(Le.atextRx.test(t))continue;const e=Le.binary(t);if(!Le.atomRx.test(e))return Oe.code("INVALID_LOCAL_CHARS")}}},Le.binary=function(e){return Array.from(Le.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},Le.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,Le.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"));var Fe={},Me={},Pe=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")};const Be=V,Ue=Pe,He={generate:function(){const e={},t="\\dA-Fa-f",n="["+t+"]",s="\\w-\\.~",i="!\\$&'\\(\\)\\*\\+,;=",r="%"+t,a=s+r+i+":@",o="["+a+"]",c="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+c+"\\.){3}"+c;const l=n+"{1,4}",u="(?:"+l+":"+l+"|"+e.ipv4address+")",d="(?:"+l+":){6}"+u,p="::(?:"+l+":){5}"+u,h="(?:"+l+")?::(?:"+l+":){4}"+u,f="(?:(?:"+l+":){0,1}"+l+")?::(?:"+l+":){3}"+u,m="(?:(?:"+l+":){0,2}"+l+")?::(?:"+l+":){2}"+u,g="(?:(?:"+l+":){0,3}"+l+")?::"+l+":"+u,_="(?:(?:"+l+":){0,4}"+l+")?::"+u,y="(?:(?:"+l+":){0,5}"+l+")?::"+l,E="(?:(?:"+l+":){0,6}"+l+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+d+"|"+p+"|"+h+"|"+f+"|"+m+"|"+g+"|"+_+"|"+y+"|"+E+")",e.ipvFuture="v"+n+"+\\.["+s+i+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const b="["+s+r+i+":]*",v="["+s+r+i+"]{1,255}",T="(?:"+("\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]")+"|"+e.ipv4address+"|"+v+")",A="(?:"+b+"@)?"+T+"(?::\\d*)?",S="(?:"+b+"@)?("+T+")(?::\\d*)?",w=o+"*",x=o+"+",k="(?:\\/"+w+")*",C="\\/(?:"+x+k+")?",N=x+k,I="["+s+r+i+"@]+"+k,R="(?:\\/\\/\\/"+w+k+")";return e.hierPart="(?:(?:\\/\\/"+A+k+")|"+C+"|"+N+"|"+R+")",e.hierPartCapture="(?:(?:\\/\\/"+S+k+")|"+C+"|"+N+")",e.relativeRef="(?:(?:\\/\\/"+A+k+")|"+C+"|"+I+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+S+k+")|"+C+"|"+I+"|)",e.query="["+a+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+a+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+a+"\\/\\?]*",e}};He.rfc3986=He.generate(),Me.ip={v4Cidr:He.rfc3986.ipv4Cidr,v6Cidr:He.rfc3986.ipv6Cidr,ipv4:He.rfc3986.ipv4address,ipv6:He.rfc3986.ipv6address,ipvfuture:He.rfc3986.ipvFuture},He.createRegex=function(e){const t=He.rfc3986,n="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",s=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return He.wrap(s+n);let i="";if(e.scheme){Be(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const n=[].concat(e.scheme);Be(n.length>=1,"scheme must have at least 1 scheme specified");const s=[];for(let e=0;e<n.length;++e){const i=n[e];Be(i instanceof RegExp||"string"==typeof i,"scheme at position "+e+" must be a RegExp or String"),i instanceof RegExp?s.push(i.source.toString()):(Be(t.schemeRegex.test(i),"scheme at position "+e+" must be a valid scheme"),s.push(Ue(i)))}i=s.join("|")}const r="(?:"+(i?"(?:"+i+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",a=e.allowRelative?"(?:"+r+"|"+s+")":r;return He.wrap(a+n,i)},He.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},He.uriRegex=He.createRegex({}),Me.regex=function(e={}){return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?He.createRegex(e):He.uriRegex};const je=V,Ge=Me;Fe.regex=function(e={}){je(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";je(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),je(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let n=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(n)||(n=[n]),je(n.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<n.length;++e)je("string"==typeof n[e],"options.version must only contain strings"),n[e]=n[e].toLowerCase(),je(["ipv4","ipv6","ipvfuture"].includes(n[e]),"options.version contains unknown version "+n[e]+" - must be one of ipv4, ipv6, ipvfuture");n=Array.from(new Set(n));const s=n.map((e=>{if("forbidden"===t)return Ge.ip[e];const n=`\\/${"ipv4"===e?Ge.ip.v4Cidr:Ge.ip.v6Cidr}`;return"required"===t?`${Ge.ip[e]}${n}`:`${Ge.ip[e]}(?:${n})?`})),i=`(?:${s.join("|")})`,r=new RegExp(`^${i}$`);return{cidr:t,versions:n,regex:r,raw:i}};const $e={tlds:["AAA","AARP","ABB","ABBOTT","ABBVIE","ABC","ABLE","ABOGADO","ABUDHABI","AC","ACADEMY","ACCENTURE","ACCOUNTANT","ACCOUNTANTS","ACO","ACTOR","AD","ADS","ADULT","AE","AEG","AERO","AETNA","AF","AFL","AFRICA","AG","AGAKHAN","AGENCY","AI","AIG","AIRBUS","AIRFORCE","AIRTEL","AKDN","AL","ALIBABA","ALIPAY","ALLFINANZ","ALLSTATE","ALLY","ALSACE","ALSTOM","AM","AMAZON","AMERICANEXPRESS","AMERICANFAMILY","AMEX","AMFAM","AMICA","AMSTERDAM","ANALYTICS","ANDROID","ANQUAN","ANZ","AO","AOL","APARTMENTS","APP","APPLE","AQ","AQUARELLE","AR","ARAB","ARAMCO","ARCHI","ARMY","ARPA","ART","ARTE","AS","ASDA","ASIA","ASSOCIATES","AT","ATHLETA","ATTORNEY","AU","AUCTION","AUDI","AUDIBLE","AUDIO","AUSPOST","AUTHOR","AUTO","AUTOS","AVIANCA","AW","AWS","AX","AXA","AZ","AZURE","BA","BABY","BAIDU","BANAMEX","BAND","BANK","BAR","BARCELONA","BARCLAYCARD","BARCLAYS","BAREFOOT","BARGAINS","BASEBALL","BASKETBALL","BAUHAUS","BAYERN","BB","BBC","BBT","BBVA","BCG","BCN","BD","BE","BEATS","BEAUTY","BEER","BENTLEY","BERLIN","BEST","BESTBUY","BET","BF","BG","BH","BHARTI","BI","BIBLE","BID","BIKE","BING","BINGO","BIO","BIZ","BJ","BLACK","BLACKFRIDAY","BLOCKBUSTER","BLOG","BLOOMBERG","BLUE","BM","BMS","BMW","BN","BNPPARIBAS","BO","BOATS","BOEHRINGER","BOFA","BOM","BOND","BOO","BOOK","BOOKING","BOSCH","BOSTIK","BOSTON","BOT","BOUTIQUE","BOX","BR","BRADESCO","BRIDGESTONE","BROADWAY","BROKER","BROTHER","BRUSSELS","BS","BT","BUILD","BUILDERS","BUSINESS","BUY","BUZZ","BV","BW","BY","BZ","BZH","CA","CAB","CAFE","CAL","CALL","CALVINKLEIN","CAM","CAMERA","CAMP","CANON","CAPETOWN","CAPITAL","CAPITALONE","CAR","CARAVAN","CARDS","CARE","CAREER","CAREERS","CARS","CASA","CASE","CASH","CASINO","CAT","CATERING","CATHOLIC","CBA","CBN","CBRE","CC","CD","CENTER","CEO","CERN","CF","CFA","CFD","CG","CH","CHANEL","CHANNEL","CHARITY","CHASE","CHAT","CHEAP","CHINTAI","CHRISTMAS","CHROME","CHURCH","CI","CIPRIANI","CIRCLE","CISCO","CITADEL","CITI","CITIC","CITY","CK","CL","CLAIMS","CLEANING","CLICK","CLINIC","CLINIQUE","CLOTHING","CLOUD","CLUB","CLUBMED","CM","CN","CO","COACH","CODES","COFFEE","COLLEGE","COLOGNE","COM","COMCAST","COMMBANK","COMMUNITY","COMPANY","COMPARE","COMPUTER","COMSEC","CONDOS","CONSTRUCTION","CONSULTING","CONTACT","CONTRACTORS","COOKING","COOL","COOP","CORSICA","COUNTRY","COUPON","COUPONS","COURSES","CPA","CR","CREDIT","CREDITCARD","CREDITUNION","CRICKET","CROWN","CRS","CRUISE","CRUISES","CU","CUISINELLA","CV","CW","CX","CY","CYMRU","CYOU","CZ","DABUR","DAD","DANCE","DATA","DATE","DATING","DATSUN","DAY","DCLK","DDS","DE","DEAL","DEALER","DEALS","DEGREE","DELIVERY","DELL","DELOITTE","DELTA","DEMOCRAT","DENTAL","DENTIST","DESI","DESIGN","DEV","DHL","DIAMONDS","DIET","DIGITAL","DIRECT","DIRECTORY","DISCOUNT","DISCOVER","DISH","DIY","DJ","DK","DM","DNP","DO","DOCS","DOCTOR","DOG","DOMAINS","DOT","DOWNLOAD","DRIVE","DTV","DUBAI","DUNLOP","DUPONT","DURBAN","DVAG","DVR","DZ","EARTH","EAT","EC","ECO","EDEKA","EDU","EDUCATION","EE","EG","EMAIL","EMERCK","ENERGY","ENGINEER","ENGINEERING","ENTERPRISES","EPSON","EQUIPMENT","ER","ERICSSON","ERNI","ES","ESQ","ESTATE","ET","EU","EUROVISION","EUS","EVENTS","EXCHANGE","EXPERT","EXPOSED","EXPRESS","EXTRASPACE","FAGE","FAIL","FAIRWINDS","FAITH","FAMILY","FAN","FANS","FARM","FARMERS","FASHION","FAST","FEDEX","FEEDBACK","FERRARI","FERRERO","FI","FIDELITY","FIDO","FILM","FINAL","FINANCE","FINANCIAL","FIRE","FIRESTONE","FIRMDALE","FISH","FISHING","FIT","FITNESS","FJ","FK","FLICKR","FLIGHTS","FLIR","FLORIST","FLOWERS","FLY","FM","FO","FOO","FOOD","FOOTBALL","FORD","FOREX","FORSALE","FORUM","FOUNDATION","FOX","FR","FREE","FRESENIUS","FRL","FROGANS","FRONTIER","FTR","FUJITSU","FUN","FUND","FURNITURE","FUTBOL","FYI","GA","GAL","GALLERY","GALLO","GALLUP","GAME","GAMES","GAP","GARDEN","GAY","GB","GBIZ","GD","GDN","GE","GEA","GENT","GENTING","GEORGE","GF","GG","GGEE","GH","GI","GIFT","GIFTS","GIVES","GIVING","GL","GLASS","GLE","GLOBAL","GLOBO","GM","GMAIL","GMBH","GMO","GMX","GN","GODADDY","GOLD","GOLDPOINT","GOLF","GOO","GOODYEAR","GOOG","GOOGLE","GOP","GOT","GOV","GP","GQ","GR","GRAINGER","GRAPHICS","GRATIS","GREEN","GRIPE","GROCERY","GROUP","GS","GT","GU","GUARDIAN","GUCCI","GUGE","GUIDE","GUITARS","GURU","GW","GY","HAIR","HAMBURG","HANGOUT","HAUS","HBO","HDFC","HDFCBANK","HEALTH","HEALTHCARE","HELP","HELSINKI","HERE","HERMES","HIPHOP","HISAMITSU","HITACHI","HIV","HK","HKT","HM","HN","HOCKEY","HOLDINGS","HOLIDAY","HOMEDEPOT","HOMEGOODS","HOMES","HOMESENSE","HONDA","HORSE","HOSPITAL","HOST","HOSTING","HOT","HOTELS","HOTMAIL","HOUSE","HOW","HR","HSBC","HT","HU","HUGHES","HYATT","HYUNDAI","IBM","ICBC","ICE","ICU","ID","IE","IEEE","IFM","IKANO","IL","IM","IMAMAT","IMDB","IMMO","IMMOBILIEN","IN","INC","INDUSTRIES","INFINITI","INFO","ING","INK","INSTITUTE","INSURANCE","INSURE","INT","INTERNATIONAL","INTUIT","INVESTMENTS","IO","IPIRANGA","IQ","IR","IRISH","IS","ISMAILI","IST","ISTANBUL","IT","ITAU","ITV","JAGUAR","JAVA","JCB","JE","JEEP","JETZT","JEWELRY","JIO","JLL","JM","JMP","JNJ","JO","JOBS","JOBURG","JOT","JOY","JP","JPMORGAN","JPRS","JUEGOS","JUNIPER","KAUFEN","KDDI","KE","KERRYHOTELS","KERRYLOGISTICS","KERRYPROPERTIES","KFH","KG","KH","KI","KIA","KIDS","KIM","KINDLE","KITCHEN","KIWI","KM","KN","KOELN","KOMATSU","KOSHER","KP","KPMG","KPN","KR","KRD","KRED","KUOKGROUP","KW","KY","KYOTO","KZ","LA","LACAIXA","LAMBORGHINI","LAMER","LANCASTER","LAND","LANDROVER","LANXESS","LASALLE","LAT","LATINO","LATROBE","LAW","LAWYER","LB","LC","LDS","LEASE","LECLERC","LEFRAK","LEGAL","LEGO","LEXUS","LGBT","LI","LIDL","LIFE","LIFEINSURANCE","LIFESTYLE","LIGHTING","LIKE","LILLY","LIMITED","LIMO","LINCOLN","LINK","LIPSY","LIVE","LIVING","LK","LLC","LLP","LOAN","LOANS","LOCKER","LOCUS","LOL","LONDON","LOTTE","LOTTO","LOVE","LPL","LPLFINANCIAL","LR","LS","LT","LTD","LTDA","LU","LUNDBECK","LUXE","LUXURY","LV","LY","MA","MADRID","MAIF","MAISON","MAKEUP","MAN","MANAGEMENT","MANGO","MAP","MARKET","MARKETING","MARKETS","MARRIOTT","MARSHALLS","MATTEL","MBA","MC","MCKINSEY","MD","ME","MED","MEDIA","MEET","MELBOURNE","MEME","MEMORIAL","MEN","MENU","MERCKMSD","MG","MH","MIAMI","MICROSOFT","MIL","MINI","MINT","MIT","MITSUBISHI","MK","ML","MLB","MLS","MM","MMA","MN","MO","MOBI","MOBILE","MODA","MOE","MOI","MOM","MONASH","MONEY","MONSTER","MORMON","MORTGAGE","MOSCOW","MOTO","MOTORCYCLES","MOV","MOVIE","MP","MQ","MR","MS","MSD","MT","MTN","MTR","MU","MUSEUM","MUSIC","MV","MW","MX","MY","MZ","NA","NAB","NAGOYA","NAME","NATURA","NAVY","NBA","NC","NE","NEC","NET","NETBANK","NETFLIX","NETWORK","NEUSTAR","NEW","NEWS","NEXT","NEXTDIRECT","NEXUS","NF","NFL","NG","NGO","NHK","NI","NICO","NIKE","NIKON","NINJA","NISSAN","NISSAY","NL","NO","NOKIA","NORTON","NOW","NOWRUZ","NOWTV","NP","NR","NRA","NRW","NTT","NU","NYC","NZ","OBI","OBSERVER","OFFICE","OKINAWA","OLAYAN","OLAYANGROUP","OLLO","OM","OMEGA","ONE","ONG","ONL","ONLINE","OOO","OPEN","ORACLE","ORANGE","ORG","ORGANIC","ORIGINS","OSAKA","OTSUKA","OTT","OVH","PA","PAGE","PANASONIC","PARIS","PARS","PARTNERS","PARTS","PARTY","PAY","PCCW","PE","PET","PF","PFIZER","PG","PH","PHARMACY","PHD","PHILIPS","PHONE","PHOTO","PHOTOGRAPHY","PHOTOS","PHYSIO","PICS","PICTET","PICTURES","PID","PIN","PING","PINK","PIONEER","PIZZA","PK","PL","PLACE","PLAY","PLAYSTATION","PLUMBING","PLUS","PM","PN","PNC","POHL","POKER","POLITIE","PORN","POST","PR","PRAMERICA","PRAXI","PRESS","PRIME","PRO","PROD","PRODUCTIONS","PROF","PROGRESSIVE","PROMO","PROPERTIES","PROPERTY","PROTECTION","PRU","PRUDENTIAL","PS","PT","PUB","PW","PWC","PY","QA","QPON","QUEBEC","QUEST","RACING","RADIO","RE","READ","REALESTATE","REALTOR","REALTY","RECIPES","RED","REDSTONE","REDUMBRELLA","REHAB","REISE","REISEN","REIT","RELIANCE","REN","RENT","RENTALS","REPAIR","REPORT","REPUBLICAN","REST","RESTAURANT","REVIEW","REVIEWS","REXROTH","RICH","RICHARDLI","RICOH","RIL","RIO","RIP","RO","ROCKS","RODEO","ROGERS","ROOM","RS","RSVP","RU","RUGBY","RUHR","RUN","RW","RWE","RYUKYU","SA","SAARLAND","SAFE","SAFETY","SAKURA","SALE","SALON","SAMSCLUB","SAMSUNG","SANDVIK","SANDVIKCOROMANT","SANOFI","SAP","SARL","SAS","SAVE","SAXO","SB","SBI","SBS","SC","SCB","SCHAEFFLER","SCHMIDT","SCHOLARSHIPS","SCHOOL","SCHULE","SCHWARZ","SCIENCE","SCOT","SD","SE","SEARCH","SEAT","SECURE","SECURITY","SEEK","SELECT","SENER","SERVICES","SEVEN","SEW","SEX","SEXY","SFR","SG","SH","SHANGRILA","SHARP","SHAW","SHELL","SHIA","SHIKSHA","SHOES","SHOP","SHOPPING","SHOUJI","SHOW","SI","SILK","SINA","SINGLES","SITE","SJ","SK","SKI","SKIN","SKY","SKYPE","SL","SLING","SM","SMART","SMILE","SN","SNCF","SO","SOCCER","SOCIAL","SOFTBANK","SOFTWARE","SOHU","SOLAR","SOLUTIONS","SONG","SONY","SOY","SPA","SPACE","SPORT","SPOT","SR","SRL","SS","ST","STADA","STAPLES","STAR","STATEBANK","STATEFARM","STC","STCGROUP","STOCKHOLM","STORAGE","STORE","STREAM","STUDIO","STUDY","STYLE","SU","SUCKS","SUPPLIES","SUPPLY","SUPPORT","SURF","SURGERY","SUZUKI","SV","SWATCH","SWISS","SX","SY","SYDNEY","SYSTEMS","SZ","TAB","TAIPEI","TALK","TAOBAO","TARGET","TATAMOTORS","TATAR","TATTOO","TAX","TAXI","TC","TCI","TD","TDK","TEAM","TECH","TECHNOLOGY","TEL","TEMASEK","TENNIS","TEVA","TF","TG","TH","THD","THEATER","THEATRE","TIAA","TICKETS","TIENDA","TIPS","TIRES","TIROL","TJ","TJMAXX","TJX","TK","TKMAXX","TL","TM","TMALL","TN","TO","TODAY","TOKYO","TOOLS","TOP","TORAY","TOSHIBA","TOTAL","TOURS","TOWN","TOYOTA","TOYS","TR","TRADE","TRADING","TRAINING","TRAVEL","TRAVELERS","TRAVELERSINSURANCE","TRUST","TRV","TT","TUBE","TUI","TUNES","TUSHU","TV","TVS","TW","TZ","UA","UBANK","UBS","UG","UK","UNICOM","UNIVERSITY","UNO","UOL","UPS","US","UY","UZ","VA","VACATIONS","VANA","VANGUARD","VC","VE","VEGAS","VENTURES","VERISIGN","VERSICHERUNG","VET","VG","VI","VIAJES","VIDEO","VIG","VIKING","VILLAS","VIN","VIP","VIRGIN","VISA","VISION","VIVA","VIVO","VLAANDEREN","VN","VODKA","VOLVO","VOTE","VOTING","VOTO","VOYAGE","VU","WALES","WALMART","WALTER","WANG","WANGGOU","WATCH","WATCHES","WEATHER","WEATHERCHANNEL","WEBCAM","WEBER","WEBSITE","WED","WEDDING","WEIBO","WEIR","WF","WHOSWHO","WIEN","WIKI","WILLIAMHILL","WIN","WINDOWS","WINE","WINNERS","WME","WOLTERSKLUWER","WOODSIDE","WORK","WORKS","WORLD","WOW","WS","WTC","WTF","XBOX","XEROX","XFINITY","XIHUAN","XIN","XN--11B4C3D","XN--1CK2E1B","XN--1QQW23A","XN--2SCRJ9C","XN--30RR7Y","XN--3BST00M","XN--3DS443G","XN--3E0B707E","XN--3HCRJ9C","XN--3PXU8K","XN--42C2D9A","XN--45BR5CYL","XN--45BRJ9C","XN--45Q11C","XN--4DBRK0CE","XN--4GBRIM","XN--54B7FTA0CC","XN--55QW42G","XN--55QX5D","XN--5SU34J936BGSG","XN--5TZM5G","XN--6FRZ82G","XN--6QQ986B3XL","XN--80ADXHKS","XN--80AO21A","XN--80AQECDR1A","XN--80ASEHDB","XN--80ASWG","XN--8Y0A063A","XN--90A3AC","XN--90AE","XN--90AIS","XN--9DBQ2A","XN--9ET52U","XN--9KRT00A","XN--B4W605FERD","XN--BCK1B9A5DRE4C","XN--C1AVG","XN--C2BR7G","XN--CCK2B3B","XN--CCKWCXETD","XN--CG4BKI","XN--CLCHC0EA0B2G2A9GCD","XN--CZR694B","XN--CZRS0T","XN--CZRU2D","XN--D1ACJ3B","XN--D1ALF","XN--E1A4C","XN--ECKVDTC9D","XN--EFVY88H","XN--FCT429K","XN--FHBEI","XN--FIQ228C5HS","XN--FIQ64B","XN--FIQS8S","XN--FIQZ9S","XN--FJQ720A","XN--FLW351E","XN--FPCRJ9C3D","XN--FZC2C9E2C","XN--FZYS8D69UVGM","XN--G2XX48C","XN--GCKR3F0F","XN--GECRJ9C","XN--GK3AT1E","XN--H2BREG3EVE","XN--H2BRJ9C","XN--H2BRJ9C8C","XN--HXT814E","XN--I1B6B1A6A2E","XN--IMR513N","XN--IO0A7I","XN--J1AEF","XN--J1AMH","XN--J6W193G","XN--JLQ480N2RG","XN--JVR189M","XN--KCRX77D1X4A","XN--KPRW13D","XN--KPRY57D","XN--KPUT3I","XN--L1ACC","XN--LGBBAT1AD8J","XN--MGB9AWBF","XN--MGBA3A3EJT","XN--MGBA3A4F16A","XN--MGBA7C0BBN0A","XN--MGBAAM7A8H","XN--MGBAB2BD","XN--MGBAH1A3HJKRD","XN--MGBAI9AZGQP6J","XN--MGBAYH7GPA","XN--MGBBH1A","XN--MGBBH1A71E","XN--MGBC0A9AZCG","XN--MGBCA7DZDO","XN--MGBCPQ6GPA1A","XN--MGBERP4A5D4AR","XN--MGBGU82A","XN--MGBI4ECEXP","XN--MGBPL2FH","XN--MGBT3DHD","XN--MGBTX2B","XN--MGBX4CD0AB","XN--MIX891F","XN--MK1BU44C","XN--MXTQ1M","XN--NGBC5AZD","XN--NGBE9E0A","XN--NGBRX","XN--NODE","XN--NQV7F","XN--NQV7FS00EMA","XN--NYQY26A","XN--O3CW4H","XN--OGBPF8FL","XN--OTU796D","XN--P1ACF","XN--P1AI","XN--PGBS0DH","XN--PSSY2U","XN--Q7CE6A","XN--Q9JYB4C","XN--QCKA1PMC","XN--QXA6A","XN--QXAM","XN--RHQV96G","XN--ROVU88B","XN--RVC1E0AM3E","XN--S9BRJ9C","XN--SES554G","XN--T60B56A","XN--TCKWE","XN--TIQ49XQYJ","XN--UNUP4Y","XN--VERMGENSBERATER-CTB","XN--VERMGENSBERATUNG-PWB","XN--VHQUV","XN--VUQ861B","XN--W4R85EL8FHU5DNRA","XN--W4RS40L","XN--WGBH1C","XN--WGBL6A","XN--XHQ521B","XN--XKC2AL3HYE2A","XN--XKC2DL3A5EE0H","XN--Y9A3AQ","XN--YFRO4I67O","XN--YGBI2AMMX","XN--ZFR164B","XXX","XYZ","YACHTS","YAHOO","YAMAXUN","YANDEX","YE","YODOBASHI","YOGA","YOKOHAMA","YOU","YOUTUBE","YT","YUN","ZA","ZAPPOS","ZARA","ZERO","ZIP","ZM","ZONE","ZUERICH","ZW"]};var qe=new Set($e.tlds.map((e=>e.toLowerCase())));function ze(e,t){return function(){return e.apply(t,arguments)}}const{toString:We}=Object.prototype,{getPrototypeOf:Ye}=Object,Ve=(e=>t=>{const n=We.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ke=e=>(e=e.toLowerCase(),t=>Ve(t)===e),Qe=e=>t=>typeof t===e,{isArray:Xe}=Array,Ze=Qe("undefined");const Je=Ke("ArrayBuffer");const et=Qe("string"),tt=Qe("function"),nt=Qe("number"),st=e=>null!==e&&"object"==typeof e,it=e=>{if("object"!==Ve(e))return!1;const t=Ye(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},rt=Ke("Date"),at=Ke("File"),ot=Ke("Blob"),ct=Ke("FileList"),lt=Ke("URLSearchParams");function ut(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,i;if("object"!=typeof e&&(e=[e]),Xe(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let a;for(s=0;s<r;s++)a=i[s],t.call(null,e[a],a,e)}}function dt(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,i=n.length;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ht=e=>!Ze(e)&&e!==pt;const ft=(mt="undefined"!=typeof Uint8Array&&Ye(Uint8Array),e=>mt&&e instanceof mt);var mt;const gt=Ke("HTMLFormElement"),_t=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),yt=Ke("RegExp"),Et=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};ut(n,((n,i)=>{let r;!1!==(r=t(n,i,e))&&(s[i]=r||n)})),Object.defineProperties(e,s)},bt="abcdefghijklmnopqrstuvwxyz",vt="0123456789",Tt={DIGIT:vt,ALPHA:bt,ALPHA_DIGIT:bt+bt.toUpperCase()+vt};const At=Ke("AsyncFunction");var St={isArray:Xe,isArrayBuffer:Je,isBuffer:function(e){return null!==e&&!Ze(e)&&null!==e.constructor&&!Ze(e.constructor)&&tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||tt(e.append)&&("formdata"===(t=Ve(e))||"object"===t&&tt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Je(e.buffer),t},isString:et,isNumber:nt,isBoolean:e=>!0===e||!1===e,isObject:st,isPlainObject:it,isUndefined:Ze,isDate:rt,isFile:at,isBlob:ot,isRegExp:yt,isFunction:tt,isStream:e=>st(e)&&tt(e.pipe),isURLSearchParams:lt,isTypedArray:ft,isFileList:ct,forEach:ut,merge:function e(){const{caseless:t}=ht(this)&&this||{},n={},s=(s,i)=>{const r=t&&dt(n,i)||i;it(n[r])&&it(s)?n[r]=e(n[r],s):it(s)?n[r]=e({},s):Xe(s)?n[r]=s.slice():n[r]=s};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&ut(arguments[e],s);return n},extend:(e,t,n,{allOwnKeys:s}={})=>(ut(t,((t,s)=>{n&&tt(t)?e[s]=ze(t,n):e[s]=t}),{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let i,r,a;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)a=i[r],s&&!s(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&Ye(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Ve,kindOfTest:Ke,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(Xe(e))return e;let t=e.length;if(!nt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:gt,hasOwnProperty:_t,hasOwnProp:_t,reduceDescriptors:Et,freezeMethods:e=>{Et(e,((t,n)=>{if(tt(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];tt(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach((e=>{n[e]=!0}))};return Xe(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:dt,global:pt,isContextDefined:ht,ALPHABET:Tt,generateString:(e=16,t=Tt.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n},isSpecCompliantForm:function(e){return!!(e&&tt(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(st(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const i=Xe(e)?[]:{};return ut(e,((e,t)=>{const r=n(e,s+1);!Ze(r)&&(i[t]=r)})),t[s]=void 0,i}}return e};return n(e,0)},isAsyncFn:At,isThenable:e=>e&&(st(e)||tt(e))&&tt(e.then)&&tt(e.catch)};function wt(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i)}St.inherits(wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:St.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xt=wt.prototype,kt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{kt[e]={value:e}})),Object.defineProperties(wt,kt),Object.defineProperty(xt,"isAxiosError",{value:!0}),wt.from=(e,t,n,s,i,r)=>{const a=Object.create(xt);return St.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),wt.call(a,e.message,t,n,s,i),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};var Ct=n.Stream,Nt=It;function It(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}m.inherits(It,Ct),It.create=function(e,t){var n=new this;for(var s in t=t||{})n[s]=t[s];n.source=e;var i=e.emit;return e.emit=function(){return n._handleEmit(arguments),i.apply(e,arguments)},e.on("error",(function(){})),n.pauseStream&&e.pause(),n},Object.defineProperty(It.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),It.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},It.prototype.resume=function(){this._released||this.release(),this.source.resume()},It.prototype.pause=function(){this.source.pause()},It.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},It.prototype.pipe=function(){var e=Ct.prototype.pipe.apply(this,arguments);return this.resume(),e},It.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},It.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}};var Rt=m,Dt=n.Stream,Ot=Nt,Lt=Ft;function Ft(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}Rt.inherits(Ft,Dt),Ft.create=function(e){var t=new this;for(var n in e=e||{})t[n]=e[n];return t},Ft.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},Ft.prototype.append=function(e){if(Ft.isStreamLike(e)){if(!(e instanceof Ot)){var t=Ot.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},Ft.prototype.pipe=function(e,t){return Dt.prototype.pipe.call(this,e,t),this.resume(),e},Ft.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},Ft.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){Ft.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},Ft.prototype._pipeNext=function(e){if(this._currentStream=e,Ft.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},Ft.prototype._handleErrors=function(e){var t=this;e.on("error",(function(e){t._emitError(e)}))},Ft.prototype.write=function(e){this.emit("data",e)},Ft.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},Ft.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},Ft.prototype.end=function(){this._reset(),this.emit("end")},Ft.prototype.destroy=function(){this._reset(),this.emit("close")},Ft.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},Ft.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},Ft.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(t){t.dataSize&&(e.dataSize+=t.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},Ft.prototype._emitError=function(e){this._reset(),this.emit("error",e)};var Mt={},Pt={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
!function(e){var t=Pt,n=i.extname,s=/^\s*([^;\s]*)(?:;|\s|$)/,r=/^text\//i;function a(e){if(!e||"string"!=typeof e)return!1;var n=s.exec(e),i=n&&t[n[1].toLowerCase()];return i&&i.charset?i.charset:!(!n||!r.test(n[1]))&&"UTF-8"}e.charset=a,e.charsets={lookup:a},e.contentType=function(t){if(!t||"string"!=typeof t)return!1;var n=-1===t.indexOf("/")?e.lookup(t):t;if(!n)return!1;if(-1===n.indexOf("charset")){var s=e.charset(n);s&&(n+="; charset="+s.toLowerCase())}return n},e.extension=function(t){if(!t||"string"!=typeof t)return!1;var n=s.exec(t),i=n&&e.extensions[n[1].toLowerCase()];if(!i||!i.length)return!1;return i[0]},e.extensions=Object.create(null),e.lookup=function(t){if(!t||"string"!=typeof t)return!1;var s=n("x."+t).toLowerCase().substr(1);if(!s)return!1;return e.types[s]||!1},e.types=Object.create(null),function(e,n){var s=["nginx","apache",void 0,"iana"];Object.keys(t).forEach((function(i){var r=t[i],a=r.extensions;if(a&&a.length){e[i]=a;for(var o=0;o<a.length;o++){var c=a[o];if(n[c]){var l=s.indexOf(t[n[c]].source),u=s.indexOf(r.source);if("application/octet-stream"!==n[c]&&(l>u||l===u&&"application/"===n[c].substr(0,12)))continue}n[c]=i}}}))}(e.extensions,e.types)}(Mt);var Bt=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)},Ut=function(e){var t=!1;return Bt((function(){t=!0})),function(n,s){t?e(n,s):Bt((function(){e(n,s)}))}};var Ht=function(e){Object.keys(e.jobs).forEach(jt.bind(e)),e.jobs={}};function jt(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}var Gt=Ut,$t=Ht,qt=function(e,t,n,s){var i=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[i]=function(e,t,n,s){var i;i=2==e.length?e(n,Gt(s)):e(n,t,Gt(s));return i}(t,i,e[i],(function(e,t){i in n.jobs&&(delete n.jobs[i],e?$t(n):n.results[i]=t,s(e,n.results))}))};var zt=function(e,t){var n=!Array.isArray(e),s={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};t&&s.keyedList.sort(n?t:function(n,s){return t(e[n],e[s])});return s};var Wt=Ht,Yt=Ut,Vt=function(e){if(!Object.keys(this.jobs).length)return;this.index=this.size,Wt(this),Yt(e)(null,this.results)};var Kt=qt,Qt=zt,Xt=Vt,Zt=function(e,t,n){var s=Qt(e);for(;s.index<(s.keyedList||e).length;)Kt(e,t,s,(function(e,t){e?n(e,t):0!==Object.keys(s.jobs).length||n(null,s.results)})),s.index++;return Xt.bind(s,n)};var Jt={exports:{}},en=qt,tn=zt,nn=Vt;function sn(e,t){return e<t?-1:e>t?1:0}Jt.exports=function(e,t,n,s){var i=tn(e,n);return en(e,t,i,(function n(r,a){r?s(r,a):(i.index++,i.index<(i.keyedList||e).length?en(e,t,i,n):s(null,i.results))})),nn.bind(i,s)},Jt.exports.ascending=sn,Jt.exports.descending=function(e,t){return-1*sn(e,t)};var rn=Jt.exports,an=rn,on=function(e,t,n){return an(e,t,null,n)};var cn={parallel:Zt,serial:on,serialOrdered:rn},ln=Lt,un=m,dn=i,pn=y,hn=E,fn=b.parse,mn=l,gn=n.Stream,_n=Mt,yn=cn,En=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e},bn=vn;function vn(e){if(!(this instanceof vn))return new vn(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],ln.call(this),e=e||{})this[t]=e[t]}un.inherits(vn,ln),vn.LINE_BREAK="\r\n",vn.DEFAULT_CONTENT_TYPE="application/octet-stream",vn.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var s=ln.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),un.isArray(t))this._error(new Error("Arrays are not supported."));else{var i=this._multiPartHeader(e,t,n),r=this._multiPartFooter();s(i),s(t),s(r),this._trackLength(i,t,n)}},vn.prototype._trackLength=function(e,t,n){var s=0;null!=n.knownLength?s+=+n.knownLength:Buffer.isBuffer(t)?s=t.length:"string"==typeof t&&(s=Buffer.byteLength(t)),this._valueLength+=s,this._overheadLength+=Buffer.byteLength(e)+vn.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof gn)&&(n.knownLength||this._valuesToMeasure.push(t))},vn.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):mn.stat(e.path,(function(n,s){var i;n?t(n):(i=s.size-(e.start?e.start:0),t(null,i))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},vn.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var s,i=this._getContentDisposition(t,n),r=this._getContentType(t,n),a="",o={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(r||[])};for(var c in"object"==typeof n.header&&En(o,n.header),o)o.hasOwnProperty(c)&&null!=(s=o[c])&&(Array.isArray(s)||(s=[s]),s.length&&(a+=c+": "+s.join("; ")+vn.LINE_BREAK));return"--"+this.getBoundary()+vn.LINE_BREAK+a+vn.LINE_BREAK},vn.prototype._getContentDisposition=function(e,t){var n,s;return"string"==typeof t.filepath?n=dn.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=dn.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=dn.basename(e.client._httpMessage.path||"")),n&&(s='filename="'+n+'"'),s},vn.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=_n.lookup(e.name)),!n&&e.path&&(n=_n.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=_n.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=vn.DEFAULT_CONTENT_TYPE),n},vn.prototype._multiPartFooter=function(){return function(e){var t=vn.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},vn.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+vn.LINE_BREAK},vn.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},vn.prototype.setBoundary=function(e){this._boundary=e},vn.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},vn.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,s=this._streams.length;n<s;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(vn.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},vn.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},vn.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},vn.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},vn.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?yn.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,s){n?e(n):(s.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},vn.prototype.submit=function(e,t){var n,s,i={method:"post"};return"string"==typeof e?(e=fn(e),s=En({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(s=En(e,i)).port||(s.port="https:"==s.protocol?443:80),s.headers=this.getHeaders(e.headers),n="https:"==s.protocol?hn.request(s):pn.request(s),this.getLength(function(e,s){if(e&&"Unknown stream"!==e)this._error(e);else if(s&&n.setHeader("Content-Length",s),this.pipe(n),t){var i,r=function(e,s){return n.removeListener("error",r),n.removeListener("response",i),t.call(this,e,s)};i=r.bind(this,null),n.on("error",r),n.on("response",i)}}.bind(this)),n},vn.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},vn.prototype.toString=function(){return"[object FormData]"};var Tn=$(bn);function An(e){return St.isPlainObject(e)||St.isArray(e)}function Sn(e){return St.endsWith(e,"[]")?e.slice(0,-2):e}function wn(e,t,n){return e?e.concat(t).map((function(e,t){return e=Sn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const xn=St.toFlatObject(St,{},null,(function(e){return/^is[A-Z]/.test(e)}));function kn(e,t,n){if(!St.isObject(e))throw new TypeError("target must be an object");t=t||new(Tn||FormData);const s=(n=St.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!St.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,r=n.dots,a=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&St.isSpecCompliantForm(t);if(!St.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(St.isDate(e))return e.toISOString();if(!o&&St.isBlob(e))throw new wt("Blob is not supported. Use a Buffer instead.");return St.isArrayBuffer(e)||St.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let o=e;if(e&&!i&&"object"==typeof e)if(St.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(St.isArray(e)&&function(e){return St.isArray(e)&&!e.some(An)}(e)||(St.isFileList(e)||St.endsWith(n,"[]"))&&(o=St.toArray(e)))return n=Sn(n),o.forEach((function(e,s){!St.isUndefined(e)&&null!==e&&t.append(!0===a?wn([n],s,r):null===a?n:n+"[]",c(e))})),!1;return!!An(e)||(t.append(wn(i,n,r),c(e)),!1)}const u=[],d=Object.assign(xn,{defaultVisitor:l,convertValue:c,isVisitable:An});if(!St.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!St.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+s.join("."));u.push(n),St.forEach(n,(function(n,r){!0===(!(St.isUndefined(n)||null===n)&&i.call(t,n,St.isString(r)?r.trim():r,s,d))&&e(n,s?s.concat(r):[r])})),u.pop()}}(e),t}function Cn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Nn(e,t){this._pairs=[],e&&kn(e,this,t)}const In=Nn.prototype;function Rn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dn(e,t,n){if(!t)return e;const s=n&&n.encode||Rn,i=n&&n.serialize;let r;if(r=i?i(t,n):St.isURLSearchParams(t)?t.toString():new Nn(t,n).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}In.append=function(e,t){this._pairs.push([e,t])},In.toString=function(e){const t=e?function(t){return e.call(this,t,Cn)}:Cn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};let On=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){St.forEach(this.handlers,(function(t){null!==t&&e(t)}))}};var Ln={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Fn={isNode:!0,classes:{URLSearchParams:b.URLSearchParams,FormData:Tn,Blob:"undefined"!=typeof Blob&&Blob||null},protocols:["http","https","file","data"]};const Mn="undefined"!=typeof window&&"undefined"!=typeof document,Pn=(Bn="undefined"!=typeof navigator&&navigator.product,Mn&&["ReactNative","NativeScript","NS"].indexOf(Bn)<0);var Bn;const Un="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var Hn={...Object.freeze({__proto__:null,hasBrowserEnv:Mn,hasStandardBrowserEnv:Pn,hasStandardBrowserWebWorkerEnv:Un}),...Fn};function jn(e){function t(e,n,s,i){let r=e[i++];if("__proto__"===r)return!0;const a=Number.isFinite(+r),o=i>=e.length;if(r=!r&&St.isArray(s)?s.length:r,o)return St.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a;s[r]&&St.isObject(s[r])||(s[r]=[]);return t(e,n,s[r],i)&&St.isArray(s[r])&&(s[r]=function(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}(s[r])),!a}if(St.isFormData(e)&&St.isFunction(e.entries)){const n={};return St.forEachEntry(e,((e,s)=>{t(function(e){return St.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,n,0)})),n}return null}const Gn={transitional:Ln,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=St.isObject(e);i&&St.isHTMLForm(e)&&(e=new FormData(e));if(St.isFormData(e))return s?JSON.stringify(jn(e)):e;if(St.isArrayBuffer(e)||St.isBuffer(e)||St.isStream(e)||St.isFile(e)||St.isBlob(e))return e;if(St.isArrayBufferView(e))return e.buffer;if(St.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return kn(e,new Hn.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return Hn.isNode&&St.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=St.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return kn(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),function(e,t,n){if(St.isString(e))try{return(t||JSON.parse)(e),St.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Gn.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(e&&St.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw wt.from(e,wt.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn.classes.FormData,Blob:Hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};St.forEach(["delete","get","head","post","put","patch"],(e=>{Gn.headers[e]={}}));const $n=St.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const qn=Symbol("internals");function zn(e){return e&&String(e).trim().toLowerCase()}function Wn(e){return!1===e||null==e?e:St.isArray(e)?e.map(Wn):String(e)}function Yn(e,t,n,s,i){return St.isFunction(s)?s.call(this,t,n):(i&&(t=n),St.isString(t)?St.isString(s)?-1!==t.indexOf(s):St.isRegExp(s)?s.test(t):void 0:void 0)}let Vn=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(e,t,n){const i=zn(t);if(!i)throw new Error("header name must be a non-empty string");const r=St.findKey(s,i);(!r||void 0===s[r]||!0===n||void 0===n&&!1!==s[r])&&(s[r||t]=Wn(e))}const r=(e,t)=>St.forEach(e,((e,n)=>i(e,n,t)));return St.isPlainObject(e)||e instanceof this.constructor?r(e,t):St.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?r((e=>{const t={};let n,s,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),s=e.substring(i+1).trim(),!n||t[n]&&$n[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=zn(e)){const n=St.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(St.isFunction(t))return t.call(this,e,n);if(St.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=zn(e)){const n=St.findKey(this,e);return!(!n||void 0===this[n]||t&&!Yn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function i(e){if(e=zn(e)){const i=St.findKey(n,e);!i||t&&!Yn(0,n[i],i,t)||(delete n[i],s=!0)}}return St.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];e&&!Yn(0,this[i],i,e,!0)||(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return St.forEach(this,((s,i)=>{const r=St.findKey(n,i);if(r)return t[r]=Wn(s),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=Wn(s),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return St.forEach(this,((n,s)=>{null!=n&&!1!==n&&(t[s]=e&&St.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[qn]=this[qn]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=zn(e);t[s]||(!function(e,t){const n=St.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+n,{value:function(e,n,i){return this[s].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[s]=!0)}return St.isArray(e)?e.forEach(s):s(e),this}};function Kn(e,t){const n=this||Gn,s=t||n,i=Vn.from(s.headers);let r=s.data;return St.forEach(e,(function(e){r=e.call(n,r,i.normalize(),t?t.status:void 0)})),i.normalize(),r}function Qn(e){return!(!e||!e.__CANCEL__)}function Xn(e,t,n){wt.call(this,null==e?"canceled":e,wt.ERR_CANCELED,t,n),this.name="CanceledError"}function Zn(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new wt("Request failed with status code "+n.status,[wt.ERR_BAD_REQUEST,wt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function Jn(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}Vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),St.reduceDescriptors(Vn.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),St.freezeMethods(Vn),St.inherits(Xn,wt,{__CANCEL__:!0});var es={},ts=b.parse,ns={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},ss=String.prototype.endsWith||function(e){return e.length<=this.length&&-1!==this.indexOf(e,this.length-e.length)};function is(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}var rs,as,os,cs,ls,us=es.getProxyForUrl=function(e){var t="string"==typeof e?ts(e):e||{},n=t.protocol,s=t.host,i=t.port;if("string"!=typeof s||!s||"string"!=typeof n)return"";if(n=n.split(":",1)[0],!function(e,t){var n=(is("npm_config_no_proxy")||is("no_proxy")).toLowerCase();if(!n)return!0;if("*"===n)return!1;return n.split(/[,\s]/).every((function(n){if(!n)return!0;var s=n.match(/^(.+):(\d+)$/),i=s?s[1]:n,r=s?parseInt(s[2]):0;return!(!r||r===t)||(/^[.*]/.test(i)?("*"===i.charAt(0)&&(i=i.slice(1)),!ss.call(e,i)):e!==i)}))}(s=s.replace(/:\d*$/,""),i=parseInt(i)||ns[n]||0))return"";var r=is("npm_config_"+n+"_proxy")||is(n+"_proxy")||is("npm_config_proxy")||is("all_proxy");return r&&-1===r.indexOf("://")&&(r=n+"://"+r),r},ds={exports:{}},ps={exports:{}},hs={exports:{}};function fs(){if(as)return rs;as=1;var e=1e3,t=60*e,n=60*t,s=24*n,i=7*s,r=365.25*s;function a(e,t,n,s){var i=t>=1.5*n;return Math.round(e/n)+" "+s+(i?"s":"")}return rs=function(o,c){c=c||{};var l=typeof o;if("string"===l&&o.length>0)return function(a){if((a=String(a)).length>100)return;var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!o)return;var c=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*r;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*s;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(o);if("number"===l&&isFinite(o))return c.long?function(i){var r=Math.abs(i);if(r>=s)return a(i,r,s,"day");if(r>=n)return a(i,r,n,"hour");if(r>=t)return a(i,r,t,"minute");if(r>=e)return a(i,r,e,"second");return i+" ms"}(o):function(i){var r=Math.abs(i);if(r>=s)return Math.round(i/s)+"d";if(r>=n)return Math.round(i/n)+"h";if(r>=t)return Math.round(i/t)+"m";if(r>=e)return Math.round(i/e)+"s";return i+"ms"}(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))},rs}function ms(){if(cs)return os;return cs=1,os=function(e){function t(e){let s,i,r,a=null;function o(...e){if(!o.enabled)return;const n=o,i=Number(new Date),r=i-(s||i);n.diff=r,n.prev=s,n.curr=i,s=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((s,i)=>{if("%%"===s)return"%";a++;const r=t.formatters[i];if("function"==typeof r){const t=e[a];s=r.call(n,t),e.splice(a,1),a--}return s})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=n,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,r=t.enabled(e)),r),set:e=>{a=e}}),"function"==typeof t.init&&t.init(o),o}function n(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),i=s.length;for(n=0;n<i;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=fs(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},os}var gs,_s,ys,Es,bs,vs={exports:{}};function Ts(){return _s?gs:(_s=1,gs=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(n+e),i=t.indexOf("--");return-1!==s&&(-1===i||s<i)})}"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?ps.exports=(ls||(ls=1,function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let s=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(i=s))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=ms()(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(hs,hs.exports)),hs.exports):ps.exports=(bs||(bs=1,function(e,t){const n=T,s=m;t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let s=0;s<n.length;s++)e.inspectOpts[n[s]]=t.inspectOpts[n[s]]},t.log=function(...e){return process.stderr.write(s.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:s,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),r=`  ${i};1m${s} [0m`;n[0]=r+n[0].split("\n").join("\n"+r),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=s.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=function(){if(Es)return ys;Es=1;const e=A,t=T,n=Ts(),{env:s}=process;let i;function r(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function a(t,r){if(0===i)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(t&&!r&&void 0===i)return 0;const a=i||0;if("dumb"===s.TERM)return a;if("win32"===process.platform){const t=e.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in s))||"codeship"===s.CI_NAME?1:a;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:a}return n("no-color")||n("no-colors")||n("color=false")||n("color=never")?i=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(i=1),"FORCE_COLOR"in s&&(i="true"===s.FORCE_COLOR?1:"false"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),ys={supportsColor:function(e){return r(a(e,e&&e.isTTY))},stdout:r(a(!0,t.isatty(1))),stderr:r(a(!0,t.isatty(2)))},ys}();e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[n]=s,e}),{}),e.exports=ms()(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)}}(vs,vs.exports)),vs.exports);var As,Ss=ps.exports,ws=b,xs=ws.URL,ks=y,Cs=E,Ns=n.Writable,Is=v,Rs=function(){if(!As){try{As=Ss("follow-redirects")}catch(e){}"function"!=typeof As&&(As=function(){})}As.apply(null,arguments)},Ds=!1;try{Is(new xs)}catch(Zp){Ds="ERR_INVALID_URL"===Zp.code}var Os=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],Ls=["abort","aborted","connect","error","socket","timeout"],Fs=Object.create(null);Ls.forEach((function(e){Fs[e]=function(t,n,s){this._redirectable.emit(e,t,n,s)}}));var Ms=Ks("ERR_INVALID_URL","Invalid URL",TypeError),Ps=Ks("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Bs=Ks("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",Ps),Us=Ks("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Hs=Ks("ERR_STREAM_WRITE_AFTER_END","write after end"),js=Ns.prototype.destroy||qs;function Gs(e,t){Ns.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(e){try{n._processResponse(e)}catch(e){n.emit("error",e instanceof Ps?e:new Ps({cause:e}))}},this._performRequest()}function $s(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(s){var i=s+":",r=n[i]=e[s],a=t[s]=Object.create(r);Object.defineProperties(a,{request:{value:function(e,s,r){var a;return a=e,xs&&a instanceof xs?e=Ys(e):Xs(e)?e=Ys(zs(e)):(r=s,s=Ws(e),e={protocol:i}),Zs(s)&&(r=s,s=null),(s=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,s)).nativeProtocols=n,Xs(s.host)||Xs(s.hostname)||(s.hostname="::1"),Is.equal(s.protocol,i,"protocol mismatch"),Rs("options",s),new Gs(s,r)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,n){var s=a.request(e,t,n);return s.end(),s},configurable:!0,enumerable:!0,writable:!0}})})),t}function qs(){}function zs(e){var t;if(Ds)t=new xs(e);else if(!Xs((t=Ws(ws.parse(e))).protocol))throw new Ms({input:e});return t}function Ws(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new Ms({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new Ms({input:e.href||e});return e}function Ys(e,t){var n=t||{};for(var s of Os)n[s]=e[s];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),""!==n.port&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function Vs(e,t){var n;for(var s in t)e.test(s)&&(n=t[s],delete t[s]);return null==n?void 0:String(n).trim()}function Ks(e,t,n){function s(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return s.prototype=new(n||Error),Object.defineProperties(s.prototype,{constructor:{value:s,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),s}function Qs(e,t){for(var n of Ls)e.removeListener(n,Fs[n]);e.on("error",qs),e.destroy(t)}function Xs(e){return"string"==typeof e||e instanceof String}function Zs(e){return"function"==typeof e}Gs.prototype=Object.create(Ns.prototype),Gs.prototype.abort=function(){Qs(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},Gs.prototype.destroy=function(e){return Qs(this._currentRequest,e),js.call(this,e),this},Gs.prototype.write=function(e,t,n){if(this._ending)throw new Hs;if(!Xs(e)&&("object"!=typeof(s=e)||!("length"in s)))throw new TypeError("data should be a string, Buffer or Uint8Array");var s;Zs(t)&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new Us),this.abort()):n&&n()},Gs.prototype.end=function(e,t,n){if(Zs(e)?(n=e,e=t=null):Zs(t)&&(n=t,t=null),e){var s=this,i=this._currentRequest;this.write(e,t,(function(){s._ended=!0,i.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},Gs.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},Gs.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},Gs.prototype.setTimeout=function(e,t){var n=this;function s(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function i(t){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),r()}),e),s(t)}function r(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",r),n.removeListener("error",r),n.removeListener("response",r),n.removeListener("close",r),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",s),this.on("abort",r),this.on("error",r),this.on("response",r),this.on("close",r),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){Gs.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(Gs.prototype,e,{get:function(){return this._currentRequest[e]}})})),Gs.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},Gs.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var s=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var i of(s._redirectable=this,Ls))s.on(i,Fs[i]);if(this._currentUrl=/^\//.test(this._options.path)?ws.format(this._options):this._options.path,this._isRedirect){var r=0,a=this,o=this._requestBodyBuffers;!function e(t){if(s===a._currentRequest)if(t)a.emit("error",t);else if(r<o.length){var n=o[r++];s.finished||s.write(n.data,n.encoding,e)}else a._ended&&s.end()}()}},Gs.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n,s=e.headers.location;if(!s||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(Qs(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new Bs;var i=this._options.beforeRedirect;i&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var r=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Vs(/^content-/i,this._options.headers));var a=Vs(/^host$/i,this._options.headers),o=zs(this._currentUrl),c=a||o.host,l=/^\w+:/.test(s)?this._currentUrl:ws.format(Object.assign(o,{host:c})),u=function(e,t){return Ds?new xs(e,t):zs(ws.resolve(t,e))}(s,l);if(Rs("redirecting to",u.href),this._isRedirect=!0,Ys(u,this._options),(u.protocol!==o.protocol&&"https:"!==u.protocol||u.host!==c&&!function(e,t){Is(Xs(e)&&Xs(t));var n=e.length-t.length-1;return n>0&&"."===e[n]&&e.endsWith(t)}(u.host,c))&&Vs(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),Zs(i)){var d={headers:e.headers,statusCode:t},p={url:l,method:r,headers:n};i(this._options,d,p),this._sanitizeOptions(this._options)}this._performRequest()},ds.exports=$s({http:ks,https:Cs}),ds.exports.wrap=$s;var Js=ds.exports,ei=$(Js);const ti="1.6.7";function ni(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const si=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function ii(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i,r=0,a=0;return t=void 0!==t?t:1e3,function(o){const c=Date.now(),l=s[a];i||(i=c),n[r]=o,s[r]=c;let u=a,d=0;for(;u!==r;)d+=n[u++],u%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),c-i<t)return;const p=l&&c-l;return p?Math.round(1e3*d/p):void 0}}const ri=Symbol("internals");let ai=class extends n.Transform{constructor(e){e=St.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,((e,t)=>!St.isUndefined(t[e]))),super({readableHighWaterMark:e.chunkSize});const t=this,n=this[ri]={length:e.length,timeWindow:e.timeWindow,ticksRate:e.ticksRate,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},s=ii(n.ticksRate*e.samplesCount,n.timeWindow);this.on("newListener",(e=>{"progress"===e&&(n.isCaptured||(n.isCaptured=!0))}));let i=0;n.updateProgress=function(e,t){let n=0;const s=1e3/t;let i=null;return function(t,r){const a=Date.now();if(t||a-n>s)return i&&(clearTimeout(i),i=null),n=a,e.apply(null,r);i||(i=setTimeout((()=>(i=null,n=Date.now(),e.apply(null,r))),s-(a-n)))}}((function(){const e=n.length,r=n.bytesSeen,a=r-i;if(!a||t.destroyed)return;const o=s(a);i=r,process.nextTick((()=>{t.emit("progress",{loaded:r,total:e,progress:e?r/e:void 0,bytes:a,rate:o||void 0,estimated:o&&e&&r<=e?(e-r)/o:void 0})}))}),n.ticksRate);const r=()=>{n.updateProgress(!0)};this.once("end",r),this.once("error",r)}_read(e){const t=this[ri];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,n){const s=this,i=this[ri],r=i.maxRate,a=this.readableHighWaterMark,o=i.timeWindow,c=r/(1e3/o),l=!1!==i.minChunkSize?Math.max(i.minChunkSize,.01*c):0;const u=(e,t)=>{const n=Buffer.byteLength(e);let u,d=null,p=a,h=0;if(r){const e=Date.now();(!i.ts||(h=e-i.ts)>=o)&&(i.ts=e,u=c-i.bytes,i.bytes=u<0?-u:0,h=0),u=c-i.bytes}if(r){if(u<=0)return setTimeout((()=>{t(null,e)}),o-h);u<p&&(p=u)}p&&n>p&&n-p>l&&(d=e.subarray(p),e=e.subarray(0,p)),function(e,t){const n=Buffer.byteLength(e);i.bytesSeen+=n,i.bytes+=n,i.isCaptured&&i.updateProgress(),s.push(e)?process.nextTick(t):i.onReadCallback=()=>{i.onReadCallback=null,process.nextTick(t)}}(e,d?()=>{process.nextTick(t,null,d)}:t)};u(e,(function e(t,s){if(t)return n(t);s?u(s,e):n(null)}))}setLength(e){return this[ri].length=+e,this}};const{asyncIterator:oi}=Symbol,ci=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[oi]?yield*e[oi]():yield e},li=St.ALPHABET.ALPHA_DIGIT+"-_",ui=new g,di="\r\n",pi=ui.encode(di);let hi=class{constructor(e,t){const{escapeName:n}=this.constructor,s=St.isString(t);let i=`Content-Disposition: form-data; name="${n(e)}"${!s&&t.name?`; filename="${n(t.name)}"`:""}${di}`;s?t=ui.encode(String(t).replace(/\r?\n|\r\n?/g,di)):i+=`Content-Type: ${t.type||"application/octet-stream"}${di}`,this.headers=ui.encode(i+di),this.contentLength=s?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async*encode(){yield this.headers;const{value:e}=this;St.isTypedArray(e)?yield e:yield*ci(e),yield pi}static escapeName(e){return String(e).replace(/[\r\n"]/g,(e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e])))}};let fi=class extends n.Transform{__transform(e,t,n){this.push(e),n()}_transform(e,t,n){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){const e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,n)}};const mi=(e,t)=>St.isAsyncFn(e)?function(...n){const s=n.pop();e.apply(this,n).then((e=>{try{t?s(null,...t(e)):s(null,e)}catch(e){s(e)}}),s)}:e,gi={flush:S.constants.Z_SYNC_FLUSH,finishFlush:S.constants.Z_SYNC_FLUSH},_i={flush:S.constants.BROTLI_OPERATION_FLUSH,finishFlush:S.constants.BROTLI_OPERATION_FLUSH},yi=St.isFunction(S.createBrotliDecompress),{http:Ei,https:bi}=ei,vi=/https:?/,Ti=Hn.protocols.map((e=>e+":"));function Ai(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}function Si(e,t,n){let s=t;if(!s&&!1!==s){const e=us(n);e&&(s=new URL(e))}if(s){if(s.username&&(s.auth=(s.username||"")+":"+(s.password||"")),s.auth){(s.auth.username||s.auth.password)&&(s.auth=(s.auth.username||"")+":"+(s.auth.password||""));const t=Buffer.from(s.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");const t=s.hostname||s.host;e.hostname=t,e.host=t,e.port=s.port,e.path=n,s.protocol&&(e.protocol=s.protocol.includes(":")?s.protocol:`${s.protocol}:`)}e.beforeRedirects.proxy=function(e){Si(e,t,e.href)}}const wi="undefined"!=typeof process&&"process"===St.kindOf(process),xi=(e,t)=>(({address:e,family:t})=>{if(!St.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}})(St.isObject(e)?e:{address:e,family:t});var ki=wi&&function(e){return t=async function(t,i,r){let{data:a,lookup:o,family:c}=e;const{responseType:l,responseEncoding:u}=e,d=e.method.toUpperCase();let p,h,f=!1;if(o){const e=mi(o,(e=>St.isArray(e)?e:[e]));o=(t,n,s)=>{e(t,n,((e,t,i)=>{if(e)return s(e);const r=St.isArray(t)?t.map((e=>xi(e))):[xi(t,i)];n.all?s(e,r):s(e,r[0].address,r[0].family)}))}}const g=new k,_=()=>{e.cancelToken&&e.cancelToken.unsubscribe(b),e.signal&&e.signal.removeEventListener("abort",b),g.removeAllListeners()};function b(t){g.emit("abort",!t||t.type?new Xn(null,e,h):t)}r(((e,t)=>{p=!0,t&&(f=!0,_())})),g.once("abort",i),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(b),e.signal&&(e.signal.aborted?b():e.signal.addEventListener("abort",b)));const v=Jn(e.baseURL,e.url),T=new URL(v,"http://localhost"),A=T.protocol||Ti[0];if("data:"===A){let s;if("GET"!==d)return Zn(t,i,{status:405,statusText:"method not allowed",headers:{},config:e});try{s=function(e,t,n){const s=n&&n.Blob||Hn.classes.Blob,i=ni(e);if(void 0===t&&s&&(t=!0),"data"===i){e=i.length?e.slice(i.length+1):e;const n=si.exec(e);if(!n)throw new wt("Invalid URL",wt.ERR_INVALID_URL);const r=n[1],a=n[2],o=n[3],c=Buffer.from(decodeURIComponent(o),a?"base64":"utf8");if(t){if(!s)throw new wt("Blob is not supported",wt.ERR_NOT_SUPPORT);return new s([c],{type:r})}return c}throw new wt("Unsupported protocol "+i,wt.ERR_NOT_SUPPORT)}(e.url,"blob"===l,{Blob:e.env&&e.env.Blob})}catch(t){throw wt.from(t,wt.ERR_BAD_REQUEST,e)}return"text"===l?(s=s.toString(u),u&&"utf8"!==u||(s=St.stripBOM(s))):"stream"===l&&(s=n.Readable.from(s)),Zn(t,i,{data:s,status:200,statusText:"OK",headers:new Vn,config:e})}if(-1===Ti.indexOf(A))return i(new wt("Unsupported protocol "+A,wt.ERR_BAD_REQUEST,e));const w=Vn.from(e.headers).normalize();w.set("User-Agent","axios/"+ti,!1);const x=e.onDownloadProgress,C=e.onUploadProgress,N=e.maxRate;let I,R;if(St.isSpecCompliantForm(a)){const e=w.getContentType(/boundary=([-_\w\d]{10,70})/i);a=((e,t,n)=>{const{tag:i="form-data-boundary",size:r=25,boundary:a=i+"-"+St.generateString(r,li)}=n||{};if(!St.isFormData(e))throw TypeError("FormData instance required");if(a.length<1||a.length>70)throw Error("boundary must be 10-70 characters long");const o=ui.encode("--"+a+di),c=ui.encode("--"+a+"--"+di+di);let l=c.byteLength;const u=Array.from(e.entries()).map((([e,t])=>{const n=new hi(e,t);return l+=n.size,n}));l+=o.byteLength*u.length,l=St.toFiniteNumber(l);const d={"Content-Type":`multipart/form-data; boundary=${a}`};return Number.isFinite(l)&&(d["Content-Length"]=l),t&&t(d),s.from(async function*(){for(const e of u)yield o,yield*e.encode();yield c}())})(a,(e=>{w.set(e)}),{tag:`axios-${ti}-boundary`,boundary:e&&e[1]||void 0})}else if(St.isFormData(a)&&St.isFunction(a.getHeaders)){if(w.set(a.getHeaders()),!w.hasContentLength())try{const e=await m.promisify(a.getLength).call(a);Number.isFinite(e)&&e>=0&&w.setContentLength(e)}catch(e){}}else if(St.isBlob(a))a.size&&w.setContentType(a.type||"application/octet-stream"),w.setContentLength(a.size||0),a=n.Readable.from(ci(a));else if(a&&!St.isStream(a)){if(Buffer.isBuffer(a));else if(St.isArrayBuffer(a))a=Buffer.from(new Uint8Array(a));else{if(!St.isString(a))return i(new wt("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",wt.ERR_BAD_REQUEST,e));a=Buffer.from(a,"utf-8")}if(w.setContentLength(a.length,!1),e.maxBodyLength>-1&&a.length>e.maxBodyLength)return i(new wt("Request body larger than maxBodyLength limit",wt.ERR_BAD_REQUEST,e))}const D=St.toFiniteNumber(w.getContentLength());let O,L;St.isArray(N)?(I=N[0],R=N[1]):I=R=N,a&&(C||I)&&(St.isStream(a)||(a=n.Readable.from(a,{objectMode:!1})),a=n.pipeline([a,new ai({length:D,maxRate:St.toFiniteNumber(I)})],St.noop),C&&a.on("progress",(e=>{C(Object.assign(e,{upload:!0}))}))),e.auth&&(O=(e.auth.username||"")+":"+(e.auth.password||"")),!O&&T.username&&(O=T.username+":"+T.password),O&&w.delete("authorization");try{L=Dn(T.pathname+T.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){const n=new Error(t.message);return n.config=e,n.url=e.url,n.exists=!0,i(n)}w.set("Accept-Encoding","gzip, compress, deflate"+(yi?", br":""),!1);const F={path:L,method:d,headers:w.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:O,protocol:A,family:c,beforeRedirect:Ai,beforeRedirects:{}};let M;!St.isUndefined(o)&&(F.lookup=o),e.socketPath?F.socketPath=e.socketPath:(F.hostname=T.hostname,F.port=T.port,Si(F,e.proxy,A+"//"+T.hostname+(T.port?":"+T.port:"")+F.path));const P=vi.test(F.protocol);if(F.agent=P?e.httpsAgent:e.httpAgent,e.transport?M=e.transport:0===e.maxRedirects?M=P?E:y:(e.maxRedirects&&(F.maxRedirects=e.maxRedirects),e.beforeRedirect&&(F.beforeRedirects.config=e.beforeRedirect),M=P?bi:Ei),e.maxBodyLength>-1?F.maxBodyLength=e.maxBodyLength:F.maxBodyLength=1/0,e.insecureHTTPParser&&(F.insecureHTTPParser=e.insecureHTTPParser),h=M.request(F,(function(s){if(h.destroyed)return;const r=[s],a=+s.headers["content-length"];if(x){const e=new ai({length:St.toFiniteNumber(a),maxRate:St.toFiniteNumber(R)});x&&e.on("progress",(e=>{x(Object.assign(e,{download:!0}))})),r.push(e)}let o=s;const c=s.req||h;if(!1!==e.decompress&&s.headers["content-encoding"])switch("HEAD"!==d&&204!==s.statusCode||delete s.headers["content-encoding"],(s.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":r.push(S.createUnzip(gi)),delete s.headers["content-encoding"];break;case"deflate":r.push(new fi),r.push(S.createUnzip(gi)),delete s.headers["content-encoding"];break;case"br":yi&&(r.push(S.createBrotliDecompress(_i)),delete s.headers["content-encoding"])}o=r.length>1?n.pipeline(r,St.noop):r[0];const p=n.finished(o,(()=>{p(),_()})),m={status:s.statusCode,statusText:s.statusMessage,headers:new Vn(s.headers),config:e,request:c};if("stream"===l)m.data=o,Zn(t,i,m);else{const n=[];let s=0;o.on("data",(function(t){n.push(t),s+=t.length,e.maxContentLength>-1&&s>e.maxContentLength&&(f=!0,o.destroy(),i(new wt("maxContentLength size of "+e.maxContentLength+" exceeded",wt.ERR_BAD_RESPONSE,e,c)))})),o.on("aborted",(function(){if(f)return;const t=new wt("maxContentLength size of "+e.maxContentLength+" exceeded",wt.ERR_BAD_RESPONSE,e,c);o.destroy(t),i(t)})),o.on("error",(function(t){h.destroyed||i(wt.from(t,null,e,c))})),o.on("end",(function(){try{let e=1===n.length?n[0]:Buffer.concat(n);"arraybuffer"!==l&&(e=e.toString(u),u&&"utf8"!==u||(e=St.stripBOM(e))),m.data=e}catch(t){return i(wt.from(t,null,e,m.request,m))}Zn(t,i,m)}))}g.once("abort",(e=>{o.destroyed||(o.emit("error",e),o.destroy())}))})),g.once("abort",(e=>{i(e),h.destroy(e)})),h.on("error",(function(t){i(wt.from(t,null,e,h))})),h.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){const t=parseInt(e.timeout,10);if(Number.isNaN(t))return void i(new wt("error trying to parse `config.timeout` to int",wt.ERR_BAD_OPTION_VALUE,e,h));h.setTimeout(t,(function(){if(p)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||Ln;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new wt(t,n.clarifyTimeoutError?wt.ETIMEDOUT:wt.ECONNABORTED,e,h)),b()}))}if(St.isStream(a)){let t=!1,n=!1;a.on("end",(()=>{t=!0})),a.once("error",(e=>{n=!0,h.destroy(e)})),a.on("close",(()=>{t||n||b(new Xn("Request stream has been aborted",e,h))})),a.pipe(h)}else h.end(a)},new Promise(((e,n)=>{let s,i;const r=(e,t)=>{i||(i=!0,s&&s(e,t))},a=e=>{r(e,!0),n(e)};t((t=>{r(t),e(t)}),a,(e=>s=e)).catch(a)}));var t},Ci=Hn.hasStandardBrowserEnv?{write(e,t,n,s,i,r){const a=[e+"="+encodeURIComponent(t)];St.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),St.isString(s)&&a.push("path="+s),St.isString(i)&&a.push("domain="+i),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}},Ni=Hn.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function s(n){let s=n;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(e){const t=St.isString(e)?s(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function Ii(e,t){let n=0;const s=ii(50,250);return i=>{const r=i.loaded,a=i.lengthComputable?i.total:void 0,o=r-n,c=s(o);n=r;const l={loaded:r,total:a,progress:a?r/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&r<=a?(a-r)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var Ri="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let s=e.data;const i=Vn.from(e.headers).normalize();let r,a,{responseType:o,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}if(St.isFormData(s))if(Hn.hasStandardBrowserEnv||Hn.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(a=i.getContentType())){const[e,...t]=a?a.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const d=Jn(e.baseURL,e.url);function p(){if(!u)return;const s=Vn.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());Zn((function(e){t(e),l()}),(function(e){n(e),l()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:s,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),Dn(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(p)},u.onabort=function(){u&&(n(new wt("Request aborted",wt.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new wt("Network Error",wt.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const s=e.transitional||Ln;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new wt(t,s.clarifyTimeoutError?wt.ETIMEDOUT:wt.ECONNABORTED,e,u)),u=null},Hn.hasStandardBrowserEnv&&(c&&St.isFunction(c)&&(c=c(e)),c||!1!==c&&Ni(d))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&Ci.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===s&&i.setContentType(null),"setRequestHeader"in u&&St.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),St.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",Ii(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",Ii(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=t=>{u&&(n(!t||t.type?new Xn(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));const h=ni(d);h&&-1===Hn.protocols.indexOf(h)?n(new wt("Unsupported protocol "+h+":",wt.ERR_BAD_REQUEST,e)):u.send(s||null)}))};const Di={http:ki,xhr:Ri};St.forEach(Di,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Oi=e=>`- ${e}`,Li=e=>St.isFunction(e)||null===e||!1===e;var Fi=e=>{e=St.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let r=0;r<t;r++){let t;if(n=e[r],s=n,!Li(n)&&(s=Di[(t=String(n)).toLowerCase()],void 0===s))throw new wt(`Unknown adapter '${t}'`);if(s)break;i[t||"#"+r]=s}if(!s){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new wt("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Oi).join("\n"):" "+Oi(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function Mi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xn(null,e)}function Pi(e){Mi(e),e.headers=Vn.from(e.headers),e.data=Kn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Fi(e.adapter||Gn.adapter)(e).then((function(t){return Mi(e),t.data=Kn.call(e,e.transformResponse,t),t.headers=Vn.from(t.headers),t}),(function(t){return Qn(t)||(Mi(e),t&&t.response&&(t.response.data=Kn.call(e,e.transformResponse,t.response),t.response.headers=Vn.from(t.response.headers))),Promise.reject(t)}))}const Bi=e=>e instanceof Vn?e.toJSON():e;function Ui(e,t){t=t||{};const n={};function s(e,t,n){return St.isPlainObject(e)&&St.isPlainObject(t)?St.merge.call({caseless:n},e,t):St.isPlainObject(t)?St.merge({},t):St.isArray(t)?t.slice():t}function i(e,t,n){return St.isUndefined(t)?St.isUndefined(e)?void 0:s(void 0,e,n):s(e,t,n)}function r(e,t){if(!St.isUndefined(t))return s(void 0,t)}function a(e,t){return St.isUndefined(t)?St.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(n,i,r){return r in t?s(n,i):r in e?s(void 0,n):void 0}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t)=>i(Bi(e),Bi(t),!0)};return St.forEach(Object.keys(Object.assign({},e,t)),(function(s){const r=c[s]||i,a=r(e[s],t[s],s);St.isUndefined(a)&&r!==o||(n[s]=a)})),n}const Hi={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Hi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ji={};Hi.transitional=function(e,t,n){function s(e,t){return"[Axios v1.6.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,r)=>{if(!1===e)throw new wt(s(i," has been removed"+(t?" in "+t:"")),wt.ERR_DEPRECATED);return t&&!ji[i]&&(ji[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,r)}};var Gi={assertOptions:function(e,t,n){if("object"!=typeof e)throw new wt("options must be an object",wt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],a=t[r];if(a){const t=e[r],n=void 0===t||a(t,r,e);if(!0!==n)throw new wt("option "+r+" must be "+n,wt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new wt("Unknown option "+r,wt.ERR_BAD_OPTION)}},validators:Hi};const $i=Gi.validators;let qi=class{constructor(e){this.defaults=e,this.interceptors={request:new On,response:new On}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ui(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;void 0!==n&&Gi.assertOptions(n,{silentJSONParsing:$i.transitional($i.boolean),forcedJSONParsing:$i.transitional($i.boolean),clarifyTimeoutError:$i.transitional($i.boolean)},!1),null!=s&&(St.isFunction(s)?t.paramsSerializer={serialize:s}:Gi.assertOptions(s,{encode:$i.function,serialize:$i.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=i&&St.merge(i.common,i[t.method]);i&&St.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Vn.concat(r,i);const a=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[Pi.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=a.length;let p=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{p=e(p)}catch(e){t.call(this,e);break}}try{l=Pi.call(this,p)}catch(e){return Promise.reject(e)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return Dn(Jn((e=Ui(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};St.forEach(["delete","get","head","options"],(function(e){qi.prototype[e]=function(t,n){return this.request(Ui(n||{},{method:e,url:t,data:(n||{}).data}))}})),St.forEach(["post","put","patch"],(function(e){function t(t){return function(n,s,i){return this.request(Ui(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}qi.prototype[e]=t(),qi.prototype[e+"Form"]=t(!0)}));const zi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zi).forEach((([e,t])=>{zi[t]=e}));const Wi=function e(t){const n=new qi(t),s=ze(qi.prototype.request,n);return St.extend(s,qi.prototype,n,{allOwnKeys:!0}),St.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(Ui(t,n))},s}(Gn);Wi.Axios=qi,Wi.CanceledError=Xn,Wi.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{n.subscribe(e),t=e})).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e((function(e,s,i){n.reason||(n.reason=new Xn(e,s,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let t;const n=new e((function(e){t=e}));return{token:n,cancel:t}}},Wi.isCancel=Qn,Wi.VERSION=ti,Wi.toFormData=kn,Wi.AxiosError=wt,Wi.Cancel=Wi.CanceledError,Wi.all=function(e){return Promise.all(e)},Wi.spread=function(e){return function(t){return e.apply(null,t)}},Wi.isAxiosError=function(e){return St.isObject(e)&&!0===e.isAxiosError},Wi.mergeConfig=Ui,Wi.AxiosHeaders=Vn,Wi.formToJSON=e=>jn(St.isHTMLForm(e)?new FormData(e):e),Wi.getAdapter=Fi,Wi.HttpStatusCode=zi,Wi.default=Wi;var Yi,Vi,Ki=Wi;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),s={};for(const e of n)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Yi||(Yi={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Vi||(Vi={}));const Qi=Yi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xi=e=>{switch(typeof e){case"undefined":return Qi.undefined;case"string":return Qi.string;case"number":return isNaN(e)?Qi.nan:Qi.number;case"boolean":return Qi.boolean;case"function":return Qi.function;case"bigint":return Qi.bigint;case"symbol":return Qi.symbol;case"object":return Array.isArray(e)?Qi.array:null===e?Qi.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Qi.promise:"undefined"!=typeof Map&&e instanceof Map?Qi.map:"undefined"!=typeof Set&&e instanceof Set?Qi.set:"undefined"!=typeof Date&&e instanceof Date?Qi.date:Qi.object;default:return Qi.unknown}},Zi=Yi.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ji extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},s=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(s);else if("invalid_return_type"===i.code)s(i.returnTypeError);else if("invalid_arguments"===i.code)s(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,s=0;for(;s<i.path.length;){const n=i.path[s];s===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],s++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yi.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ji.create=e=>new Ji(e);const er=(e,t)=>{let n;switch(e.code){case Zi.invalid_type:n=e.received===Qi.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Zi.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Yi.jsonStringifyReplacer)}`;break;case Zi.unrecognized_keys:n=`Unrecognized key(s) in object: ${Yi.joinValues(e.keys,", ")}`;break;case Zi.invalid_union:n="Invalid input";break;case Zi.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Yi.joinValues(e.options)}`;break;case Zi.invalid_enum_value:n=`Invalid enum value. Expected ${Yi.joinValues(e.options)}, received '${e.received}'`;break;case Zi.invalid_arguments:n="Invalid function arguments";break;case Zi.invalid_return_type:n="Invalid function return type";break;case Zi.invalid_date:n="Invalid date";break;case Zi.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Yi.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Zi.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Zi.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Zi.custom:n="Invalid input";break;case Zi.invalid_intersection_types:n="Intersection results could not be merged";break;case Zi.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Zi.not_finite:n="Number must be finite";break;default:n=t.defaultError,Yi.assertNever(e)}return{message:n}};let tr=er;function nr(){return tr}const sr=e=>{const{data:t,path:n,errorMaps:s,issueData:i}=e,r=[...n,...i.path||[]],a={...i,path:r};let o="";const c=s.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(a,{data:t,defaultError:o}).message;return{...i,path:r,message:i.message||o}};function ir(e,t){const n=sr({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,nr(),er].filter((e=>!!e))});e.common.issues.push(n)}class rr{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if("aborted"===s.status)return ar;"dirty"===s.status&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t)n.push({key:await e.key,value:await e.value});return rr.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:t,value:i}=s;if("aborted"===t.status)return ar;if("aborted"===i.status)return ar;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!s.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const ar=Object.freeze({status:"aborted"}),or=e=>({status:"dirty",value:e}),cr=e=>({status:"valid",value:e}),lr=e=>"aborted"===e.status,ur=e=>"dirty"===e.status,dr=e=>"valid"===e.status,pr=e=>"undefined"!=typeof Promise&&e instanceof Promise;var hr;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(hr||(hr={}));class fr{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const mr=(e,t)=>{if(dr(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ji(e.common.issues);return this._error=t,this._error}}};function gr(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:i}=e;if(t&&(n||s))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=s?s:t.defaultError}:{message:null!=n?n:t.defaultError},description:i}}class _r{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Xi(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Xi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rr,ctx:{common:e.parent.common,data:e.data,parsedType:Xi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(pr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xi(e)},i=this._parseSync({data:e,path:s.path,parent:s});return mr(s,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xi(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(pr(s)?s:Promise.resolve(s));return mr(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,s)=>{const i=e(t),r=()=>s.addIssue({code:Zi.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(r(),!1))):!!i||(r(),!1)}))}refinement(e,t){return this._refinement(((n,s)=>!!e(n)||(s.addIssue("function"==typeof t?t(n,s):t),!1)))}_refinement(e){return new ra({schema:this,typeName:_a.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return aa.create(this,this._def)}nullable(){return oa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hr.create(this,this._def)}promise(){return ia.create(this,this._def)}or(e){return $r.create([this,e],this._def)}and(e){return Yr.create(this,e,this._def)}transform(e){return new ra({...gr(this._def),schema:this,typeName:_a.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ca({...gr(this._def),innerType:this,defaultValue:t,typeName:_a.ZodDefault})}brand(){return new pa({typeName:_a.ZodBranded,type:this,...gr(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new la({...gr(this._def),innerType:this,catchValue:t,typeName:_a.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ha.create(this,e)}readonly(){return fa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yr=/^c[^\s-]{8,}$/i,Er=/^[a-z][a-z0-9]*$/,br=/^[0-9A-HJKMNP-TV-Z]{26}$/,vr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Tr=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ar;const Sr=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,wr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;function xr(e,t){return!("v4"!==t&&t||!Sr.test(e))||!("v6"!==t&&t||!wr.test(e))}class kr extends _r{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Qi.string){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.string,received:t.parsedType}),ar}const t=new rr;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),ir(n,{code:Zi.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),ir(n,{code:Zi.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const s=e.data.length>i.value,r=e.data.length<i.value;(s||r)&&(n=this._getOrReturnCtx(e,n),s?ir(n,{code:Zi.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):r&&ir(n,{code:Zi.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)Tr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"email",code:Zi.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)Ar||(Ar=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ar.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"emoji",code:Zi.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)vr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"uuid",code:Zi.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)yr.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"cuid",code:Zi.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)Er.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"cuid2",code:Zi.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)br.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"ulid",code:Zi.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(s){n=this._getOrReturnCtx(e,n),ir(n,{validation:"url",code:Zi.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"regex",code:Zi.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Zi.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Zi.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Zi.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){((s=i).precision?s.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}Z$`):0===s.precision?s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(n=this._getOrReturnCtx(e,n),ir(n,{code:Zi.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else"ip"===i.kind?xr(e.data,i.version)||(n=this._getOrReturnCtx(e,n),ir(n,{validation:"ip",code:Zi.invalid_string,message:i.message}),t.dirty()):Yi.assertNever(i);var s;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:Zi.invalid_string,...hr.errToObj(n)})}_addCheck(e){return new kr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...hr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...hr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...hr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...hr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...hr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...hr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...hr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...hr.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...hr.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...hr.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...hr.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...hr.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...hr.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...hr.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...hr.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...hr.errToObj(t)})}nonempty(e){return this.min(1,hr.errToObj(e))}trim(){return new kr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new kr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new kr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Cr(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,i=n>s?n:s;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}kr.create=e=>{var t;return new kr({checks:[],typeName:_a.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...gr(e)})};class Nr extends _r{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Qi.number){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.number,received:t.parsedType}),ar}let t;const n=new rr;for(const s of this._def.checks)if("int"===s.kind)Yi.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ir(t,{code:Zi.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Zi.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Zi.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty())}else"multipleOf"===s.kind?0!==Cr(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Zi.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ir(t,{code:Zi.not_finite,message:s.message}),n.dirty()):Yi.assertNever(s);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,hr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,hr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,hr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,hr.toString(t))}setLimit(e,t,n,s){return new Nr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:hr.toString(s)}]})}_addCheck(e){return new Nr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:hr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:hr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:hr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:hr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:hr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:hr.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:hr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:hr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:hr.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Yi.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Nr.create=e=>new Nr({checks:[],typeName:_a.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...gr(e)});class Ir extends _r{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==Qi.bigint){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.bigint,received:t.parsedType}),ar}let t;const n=new rr;for(const s of this._def.checks)if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Zi.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Zi.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ir(t,{code:Zi.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):Yi.assertNever(s);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,hr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,hr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,hr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,hr.toString(t))}setLimit(e,t,n,s){return new Ir({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:hr.toString(s)}]})}_addCheck(e){return new Ir({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:hr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:hr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:hr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:hr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:hr.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Ir.create=e=>{var t;return new Ir({checks:[],typeName:_a.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...gr(e)})};class Rr extends _r{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Qi.boolean){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.boolean,received:t.parsedType}),ar}return cr(e.data)}}Rr.create=e=>new Rr({typeName:_a.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...gr(e)});class Dr extends _r{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Qi.date){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.date,received:t.parsedType}),ar}if(isNaN(e.data.getTime())){return ir(this._getOrReturnCtx(e),{code:Zi.invalid_date}),ar}const t=new rr;let n;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(n=this._getOrReturnCtx(e,n),ir(n,{code:Zi.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(n=this._getOrReturnCtx(e,n),ir(n,{code:Zi.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):Yi.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Dr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:hr.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:hr.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Dr.create=e=>new Dr({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:_a.ZodDate,...gr(e)});class Or extends _r{_parse(e){if(this._getType(e)!==Qi.symbol){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.symbol,received:t.parsedType}),ar}return cr(e.data)}}Or.create=e=>new Or({typeName:_a.ZodSymbol,...gr(e)});class Lr extends _r{_parse(e){if(this._getType(e)!==Qi.undefined){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.undefined,received:t.parsedType}),ar}return cr(e.data)}}Lr.create=e=>new Lr({typeName:_a.ZodUndefined,...gr(e)});class Fr extends _r{_parse(e){if(this._getType(e)!==Qi.null){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.null,received:t.parsedType}),ar}return cr(e.data)}}Fr.create=e=>new Fr({typeName:_a.ZodNull,...gr(e)});class Mr extends _r{constructor(){super(...arguments),this._any=!0}_parse(e){return cr(e.data)}}Mr.create=e=>new Mr({typeName:_a.ZodAny,...gr(e)});class Pr extends _r{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cr(e.data)}}Pr.create=e=>new Pr({typeName:_a.ZodUnknown,...gr(e)});class Br extends _r{_parse(e){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.never,received:t.parsedType}),ar}}Br.create=e=>new Br({typeName:_a.ZodNever,...gr(e)});class Ur extends _r{_parse(e){if(this._getType(e)!==Qi.undefined){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.void,received:t.parsedType}),ar}return cr(e.data)}}Ur.create=e=>new Ur({typeName:_a.ZodVoid,...gr(e)});class Hr extends _r{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==Qi.array)return ir(t,{code:Zi.invalid_type,expected:Qi.array,received:t.parsedType}),ar;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,i=t.data.length<s.exactLength.value;(e||i)&&(ir(t,{code:e?Zi.too_big:Zi.too_small,minimum:i?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(ir(t,{code:Zi.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(ir(t,{code:Zi.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>s.type._parseAsync(new fr(t,e,t.path,n))))).then((e=>rr.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>s.type._parseSync(new fr(t,e,t.path,n))));return rr.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Hr({...this._def,minLength:{value:e,message:hr.toString(t)}})}max(e,t){return new Hr({...this._def,maxLength:{value:e,message:hr.toString(t)}})}length(e,t){return new Hr({...this._def,exactLength:{value:e,message:hr.toString(t)}})}nonempty(e){return this.min(1,e)}}function jr(e){if(e instanceof Gr){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=aa.create(jr(s))}return new Gr({...e._def,shape:()=>t})}return e instanceof Hr?new Hr({...e._def,type:jr(e.element)}):e instanceof aa?aa.create(jr(e.unwrap())):e instanceof oa?oa.create(jr(e.unwrap())):e instanceof Vr?Vr.create(e.items.map((e=>jr(e)))):e}Hr.create=(e,t)=>new Hr({type:e,minLength:null,maxLength:null,exactLength:null,typeName:_a.ZodArray,...gr(t)});class Gr extends _r{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Yi.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Qi.object){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.object,received:t.parsedType}),ar}const{status:t,ctx:n}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof Br&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||r.push(e);const a=[];for(const e of i){const t=s[e],i=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new fr(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Br){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of r)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)r.length>0&&(ir(n,{code:Zi.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const s=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new fr(n,s,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>rr.mergeObjectSync(t,e))):rr.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return hr.errToObj,new Gr({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var s,i,r,a;const o=null!==(r=null===(i=(s=this._def).errorMap)||void 0===i?void 0:i.call(s,t,n).message)&&void 0!==r?r:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=hr.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new Gr({...this._def,unknownKeys:"strip"})}passthrough(){return new Gr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Gr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Gr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_a.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Gr({...this._def,catchall:e})}pick(e){const t={};return Yi.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new Gr({...this._def,shape:()=>t})}omit(e){const t={};return Yi.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new Gr({...this._def,shape:()=>t})}deepPartial(){return jr(this)}partial(e){const t={};return Yi.objectKeys(this.shape).forEach((n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()})),new Gr({...this._def,shape:()=>t})}required(e){const t={};return Yi.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof aa;)e=e._def.innerType;t[n]=e}})),new Gr({...this._def,shape:()=>t})}keyof(){return ta(Yi.objectKeys(this.shape))}}Gr.create=(e,t)=>new Gr({shape:()=>e,unknownKeys:"strip",catchall:Br.create(),typeName:_a.ZodObject,...gr(t)}),Gr.strictCreate=(e,t)=>new Gr({shape:()=>e,unknownKeys:"strict",catchall:Br.create(),typeName:_a.ZodObject,...gr(t)}),Gr.lazycreate=(e,t)=>new Gr({shape:e,unknownKeys:"strip",catchall:Br.create(),typeName:_a.ZodObject,...gr(t)});class $r extends _r{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new Ji(e.ctx.common.issues)));return ir(t,{code:Zi.invalid_union,unionErrors:n}),ar}));{let e;const s=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},r=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:n}),n.common.issues.length&&s.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=s.map((e=>new Ji(e)));return ir(t,{code:Zi.invalid_union,unionErrors:i}),ar}}get options(){return this._def.options}}$r.create=(e,t)=>new $r({options:e,typeName:_a.ZodUnion,...gr(t)});const qr=e=>e instanceof Jr?qr(e.schema):e instanceof ra?qr(e.innerType()):e instanceof ea?[e.value]:e instanceof na?e.options:e instanceof sa?Object.keys(e.enum):e instanceof ca?qr(e._def.innerType):e instanceof Lr?[void 0]:e instanceof Fr?[null]:null;class zr extends _r{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Qi.object)return ir(t,{code:Zi.invalid_type,expected:Qi.object,received:t.parsedType}),ar;const n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(ir(t,{code:Zi.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ar)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const n of t){const t=qr(n.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(s.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);s.set(i,n)}}return new zr({typeName:_a.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...gr(n)})}}function Wr(e,t){const n=Xi(e),s=Xi(t);if(e===t)return{valid:!0,data:e};if(n===Qi.object&&s===Qi.object){const n=Yi.objectKeys(t),s=Yi.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const n of s){const s=Wr(e[n],t[n]);if(!s.valid)return{valid:!1};i[n]=s.data}return{valid:!0,data:i}}if(n===Qi.array&&s===Qi.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let s=0;s<e.length;s++){const i=Wr(e[s],t[s]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===Qi.date&&s===Qi.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Yr extends _r{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(e,s)=>{if(lr(e)||lr(s))return ar;const i=Wr(e.value,s.value);return i.valid?((ur(e)||ur(s))&&t.dirty(),{status:t.value,value:i.data}):(ir(n,{code:Zi.invalid_intersection_types}),ar)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>s(e,t))):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Yr.create=(e,t,n)=>new Yr({left:e,right:t,typeName:_a.ZodIntersection,...gr(n)});class Vr extends _r{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qi.array)return ir(n,{code:Zi.invalid_type,expected:Qi.array,received:n.parsedType}),ar;if(n.data.length<this._def.items.length)return ir(n,{code:Zi.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ar;!this._def.rest&&n.data.length>this._def.items.length&&(ir(n,{code:Zi.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map(((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new fr(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(s).then((e=>rr.mergeArray(t,e))):rr.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Vr({...this._def,rest:e})}}Vr.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Vr({items:e,typeName:_a.ZodTuple,rest:null,...gr(t)})};class Kr extends _r{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qi.object)return ir(n,{code:Zi.invalid_type,expected:Qi.object,received:n.parsedType}),ar;const s=[],i=this._def.keyType,r=this._def.valueType;for(const e in n.data)s.push({key:i._parse(new fr(n,e,n.path,e)),value:r._parse(new fr(n,n.data[e],n.path,e))});return n.common.async?rr.mergeObjectAsync(t,s):rr.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return new Kr(t instanceof _r?{keyType:e,valueType:t,typeName:_a.ZodRecord,...gr(n)}:{keyType:kr.create(),valueType:e,typeName:_a.ZodRecord,...gr(t)})}}class Qr extends _r{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qi.map)return ir(n,{code:Zi.invalid_type,expected:Qi.map,received:n.parsedType}),ar;const s=this._def.keyType,i=this._def.valueType,r=[...n.data.entries()].map((([e,t],r)=>({key:s._parse(new fr(n,e,n.path,[r,"key"])),value:i._parse(new fr(n,t,n.path,[r,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of r){const s=await n.key,i=await n.value;if("aborted"===s.status||"aborted"===i.status)return ar;"dirty"!==s.status&&"dirty"!==i.status||t.dirty(),e.set(s.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of r){const s=n.key,i=n.value;if("aborted"===s.status||"aborted"===i.status)return ar;"dirty"!==s.status&&"dirty"!==i.status||t.dirty(),e.set(s.value,i.value)}return{status:t.value,value:e}}}}Qr.create=(e,t,n)=>new Qr({valueType:t,keyType:e,typeName:_a.ZodMap,...gr(n)});class Xr extends _r{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Qi.set)return ir(n,{code:Zi.invalid_type,expected:Qi.set,received:n.parsedType}),ar;const s=this._def;null!==s.minSize&&n.data.size<s.minSize.value&&(ir(n,{code:Zi.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&n.data.size>s.maxSize.value&&(ir(n,{code:Zi.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function r(e){const n=new Set;for(const s of e){if("aborted"===s.status)return ar;"dirty"===s.status&&t.dirty(),n.add(s.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>i._parse(new fr(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>r(e))):r(a)}min(e,t){return new Xr({...this._def,minSize:{value:e,message:hr.toString(t)}})}max(e,t){return new Xr({...this._def,maxSize:{value:e,message:hr.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Xr.create=(e,t)=>new Xr({valueType:e,minSize:null,maxSize:null,typeName:_a.ZodSet,...gr(t)});class Zr extends _r{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Qi.function)return ir(t,{code:Zi.invalid_type,expected:Qi.function,received:t.parsedType}),ar;function n(e,n){return sr({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nr(),er].filter((e=>!!e)),issueData:{code:Zi.invalid_arguments,argumentsError:n}})}function s(e,n){return sr({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nr(),er].filter((e=>!!e)),issueData:{code:Zi.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof ia){const e=this;return cr((async function(...t){const a=new Ji([]),o=await e._def.args.parseAsync(t,i).catch((e=>{throw a.addIssue(n(t,e)),a})),c=await Reflect.apply(r,this,o),l=await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw a.addIssue(s(c,e)),a}));return l}))}{const e=this;return cr((function(...t){const a=e._def.args.safeParse(t,i);if(!a.success)throw new Ji([n(t,a.error)]);const o=Reflect.apply(r,this,a.data),c=e._def.returns.safeParse(o,i);if(!c.success)throw new Ji([s(o,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Zr({...this._def,args:Vr.create(e).rest(Pr.create())})}returns(e){return new Zr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Zr({args:e||Vr.create([]).rest(Pr.create()),returns:t||Pr.create(),typeName:_a.ZodFunction,...gr(n)})}}class Jr extends _r{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Jr.create=(e,t)=>new Jr({getter:e,typeName:_a.ZodLazy,...gr(t)});class ea extends _r{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ir(t,{received:t.data,code:Zi.invalid_literal,expected:this._def.value}),ar}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ta(e,t){return new na({values:e,typeName:_a.ZodEnum,...gr(t)})}ea.create=(e,t)=>new ea({value:e,typeName:_a.ZodLiteral,...gr(t)});class na extends _r{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ir(t,{expected:Yi.joinValues(n),received:t.parsedType,code:Zi.invalid_type}),ar}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ir(t,{received:t.data,code:Zi.invalid_enum_value,options:n}),ar}return cr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return na.create(e)}exclude(e){return na.create(this.options.filter((t=>!e.includes(t))))}}na.create=ta;class sa extends _r{_parse(e){const t=Yi.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Qi.string&&n.parsedType!==Qi.number){const e=Yi.objectValues(t);return ir(n,{expected:Yi.joinValues(e),received:n.parsedType,code:Zi.invalid_type}),ar}if(-1===t.indexOf(e.data)){const e=Yi.objectValues(t);return ir(n,{received:n.data,code:Zi.invalid_enum_value,options:e}),ar}return cr(e.data)}get enum(){return this._def.values}}sa.create=(e,t)=>new sa({values:e,typeName:_a.ZodNativeEnum,...gr(t)});class ia extends _r{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Qi.promise&&!1===t.common.async)return ir(t,{code:Zi.invalid_type,expected:Qi.promise,received:t.parsedType}),ar;const n=t.parsedType===Qi.promise?t.data:Promise.resolve(t.data);return cr(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ia.create=(e,t)=>new ia({type:e,typeName:_a.ZodPromise,...gr(t)});class ra extends _r{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_a.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:e=>{ir(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===s.type){const e=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n}))):this._def.schema._parseSync({data:e,path:n.path,parent:n})}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===s.status?ar:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?ar:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===s.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!dr(e))return e;const r=s.transform(e.value,i);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>dr(e)?Promise.resolve(s.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}Yi.assertNever(s)}}ra.create=(e,t,n)=>new ra({schema:e,typeName:_a.ZodEffects,effect:t,...gr(n)}),ra.createWithPreprocess=(e,t,n)=>new ra({schema:t,effect:{type:"preprocess",transform:e},typeName:_a.ZodEffects,...gr(n)});class aa extends _r{_parse(e){return this._getType(e)===Qi.undefined?cr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}aa.create=(e,t)=>new aa({innerType:e,typeName:_a.ZodOptional,...gr(t)});class oa extends _r{_parse(e){return this._getType(e)===Qi.null?cr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oa.create=(e,t)=>new oa({innerType:e,typeName:_a.ZodNullable,...gr(t)});class ca extends _r{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Qi.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ca.create=(e,t)=>new ca({innerType:e,typeName:_a.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...gr(t)});class la extends _r{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return pr(s)?s.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Ji(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new Ji(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}la.create=(e,t)=>new la({innerType:e,typeName:_a.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...gr(t)});class ua extends _r{_parse(e){if(this._getType(e)!==Qi.nan){const t=this._getOrReturnCtx(e);return ir(t,{code:Zi.invalid_type,expected:Qi.nan,received:t.parsedType}),ar}return{status:"valid",value:e.data}}}ua.create=e=>new ua({typeName:_a.ZodNaN,...gr(e)});const da=Symbol("zod_brand");class pa extends _r{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ha extends _r{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ar:"dirty"===e.status?(t.dirty(),or(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ar:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new ha({in:e,out:t,typeName:_a.ZodPipeline})}}class fa extends _r{_parse(e){const t=this._def.innerType._parse(e);return dr(t)&&(t.value=Object.freeze(t.value)),t}}fa.create=(e,t)=>new fa({innerType:e,typeName:_a.ZodReadonly,...gr(t)});const ma=(e,t={},n)=>e?Mr.create().superRefine(((s,i)=>{var r,a;if(!e(s)){const e="function"==typeof t?t(s):"string"==typeof t?{message:t}:t,o=null===(a=null!==(r=e.fatal)&&void 0!==r?r:n)||void 0===a||a,c="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:o})}})):Mr.create(),ga={object:Gr.lazycreate};var _a;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(_a||(_a={}));const ya=kr.create,Ea=Nr.create,ba=ua.create,va=Ir.create,Ta=Rr.create,Aa=Dr.create,Sa=Or.create,wa=Lr.create,xa=Fr.create,ka=Mr.create,Ca=Pr.create,Na=Br.create,Ia=Ur.create,Ra=Hr.create,Da=Gr.create,Oa=Gr.strictCreate,La=$r.create,Fa=zr.create,Ma=Yr.create,Pa=Vr.create,Ba=Kr.create,Ua=Qr.create,Ha=Xr.create,ja=Zr.create,Ga=Jr.create,$a=ea.create,qa=na.create,za=sa.create,Wa=ia.create,Ya=ra.create,Va=aa.create,Ka=oa.create,Qa=ra.createWithPreprocess,Xa=ha.create,Za={string:e=>kr.create({...e,coerce:!0}),number:e=>Nr.create({...e,coerce:!0}),boolean:e=>Rr.create({...e,coerce:!0}),bigint:e=>Ir.create({...e,coerce:!0}),date:e=>Dr.create({...e,coerce:!0})},Ja=ar;var eo=Object.freeze({__proto__:null,defaultErrorMap:er,setErrorMap:function(e){tr=e},getErrorMap:nr,makeIssue:sr,EMPTY_PATH:[],addIssueToContext:ir,ParseStatus:rr,INVALID:ar,DIRTY:or,OK:cr,isAborted:lr,isDirty:ur,isValid:dr,isAsync:pr,get util(){return Yi},get objectUtil(){return Vi},ZodParsedType:Qi,getParsedType:Xi,ZodType:_r,ZodString:kr,ZodNumber:Nr,ZodBigInt:Ir,ZodBoolean:Rr,ZodDate:Dr,ZodSymbol:Or,ZodUndefined:Lr,ZodNull:Fr,ZodAny:Mr,ZodUnknown:Pr,ZodNever:Br,ZodVoid:Ur,ZodArray:Hr,ZodObject:Gr,ZodUnion:$r,ZodDiscriminatedUnion:zr,ZodIntersection:Yr,ZodTuple:Vr,ZodRecord:Kr,ZodMap:Qr,ZodSet:Xr,ZodFunction:Zr,ZodLazy:Jr,ZodLiteral:ea,ZodEnum:na,ZodNativeEnum:sa,ZodPromise:ia,ZodEffects:ra,ZodTransformer:ra,ZodOptional:aa,ZodNullable:oa,ZodDefault:ca,ZodCatch:la,ZodNaN:ua,BRAND:da,ZodBranded:pa,ZodPipeline:ha,ZodReadonly:fa,custom:ma,Schema:_r,ZodSchema:_r,late:ga,get ZodFirstPartyTypeKind(){return _a},coerce:Za,any:ka,array:Ra,bigint:va,boolean:Ta,date:Aa,discriminatedUnion:Fa,effect:Ya,enum:qa,function:ja,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>ma((t=>t instanceof e),t),intersection:Ma,lazy:Ga,literal:$a,map:Ua,nan:ba,nativeEnum:za,never:Na,null:xa,nullable:Ka,number:Ea,object:Da,oboolean:()=>Ta().optional(),onumber:()=>Ea().optional(),optional:Va,ostring:()=>ya().optional(),pipeline:Xa,preprocess:Qa,promise:Wa,record:Ba,set:Ha,strictObject:Oa,string:ya,symbol:Sa,transformer:Ya,tuple:Pa,undefined:wa,union:La,unknown:Ca,void:Ia,NEVER:Ja,ZodIssueCode:Zi,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Ji}),to=["interface","display","layout","module","panel","theme"],no=["hook","endpoint"],so=["operation"],io="directus:extension",ro=eo.object({app:eo.string(),api:eo.string()}),ao=eo.object({request:eo.optional(eo.object({urls:eo.array(eo.string()),methods:eo.array(eo.union([eo.literal("GET"),eo.literal("POST"),eo.literal("PATCH"),eo.literal("PUT"),eo.literal("DELETE")]))})),log:eo.optional(eo.object({})),sleep:eo.optional(eo.object({}))}),oo=eo.optional(eo.object({enabled:eo.boolean(),requestedScopes:ao})),co=eo.union([eo.object({type:eo.enum(no),name:eo.string(),source:eo.string()}),eo.object({type:eo.enum(to),name:eo.string(),source:eo.string()}),eo.object({type:eo.enum(so),name:eo.string(),source:ro})]),lo=eo.object({host:eo.string(),hidden:eo.boolean().optional()}),uo=eo.object({type:eo.enum(to),path:eo.string(),source:eo.string()}),po=eo.object({type:eo.enum(no),path:eo.string(),source:eo.string(),sandbox:oo}),ho=eo.object({type:eo.enum(so),path:ro,source:ro,sandbox:oo}),fo=eo.object({type:eo.literal("bundle"),partial:eo.boolean().optional(),path:ro,entries:eo.array(co)});eo.array(co);var mo=lo.and(eo.union([uo,po,ho,fo]));eo.object({name:eo.string(),version:eo.string(),type:eo.union([eo.literal("module"),eo.literal("commonjs")]).optional(),description:eo.string().optional(),icon:eo.string().optional(),dependencies:eo.record(eo.string()).optional(),devDependencies:eo.record(eo.string()).optional(),[io]:mo});var go=(e=>(e.APP_SETTINGS="app_settings",e.APP_FEEDBACKS="app_feedbacks",e.CASHREGISTERS="cashregisters",e.CASHREGISTERS_TRANSACTIONS="cashregisters_transactions",e.COLLECTIONS_DATES_LAST_UPDATE="collections_dates_last_update",e.BUILDINGS="buildings",e.FOODS="foods",e.FOODS_FEEDBACKS="foods_feedbacks",e.FOODS_CATEGORIES="foods_categories",e.FOODS_ATTRIBUTES="foods_attributes",e.MAILS="mails",e.MAILS_FILES="mails_files",e.DIRECTUS_FILES="directus_files",e.FILES_SHARES="files_shares",e.FORMS="forms",e.FORM_EXTRACTS="form_extracts",e.FORM_EXTRACTS_FORM_FIELDS="form_extracts_form_fields",e.FORM_FIELDS="form_fields",e.FORM_SUBMISSIONS="form_submissions",e.FORM_ANSWERS="form_answers",e.CANTEENS_FEEDBACK_LABELS="canteens_feedbacks_labels",e.CANTEENS_FEEDBACKS_LABELS_ENTRIES="canteens_feedbacks_labels_entries",e.FOODS_FEEDBACKS_LABELS_ENTRIES="foods_feedbacks_labels_entries",e.FOODS_MARKINGS="foods_markings",e.MARKINGS="markings",e.MARKINGS_EXCLUSIONS="markings_exclusions",e.FOODOFFER_MARKINGS="foodoffers_markings",e.FOODS_FEEDBACK_LABELS="foods_feedbacks_labels",e.APARTMENTS="apartments",e.WASHINGMACHINES="washingmachines",e.WASHINGMACHINES_JOBS="washingmachines_jobs",e.NEWS="news",e.PROFILES="profiles",e.UTILIZATION_GROUPS="utilizations_groups",e.UTILIZATION_ENTRIES="utilizations_entries",e.BUSINESSHOURS="businesshours",e.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES="canteen_food_feedback_report_schedules",e.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_REPORT_RECIPIENTS="canteen_food_feedback_report_schedules_report_recipients",e.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_CANTEENS="canteen_food_feedback_report_schedules_canteens",e.REPORT_RECIPIENTS="report_recipients",e.USERS="directus_users",e.ROLES="directus_roles",e.PERMISSIONS="directus_permissions",e.POLICIES="directus_policies",e.CANTEENS="canteens",e.PUSH_NOTIFICATIONS="push_notifications",e.DEVICES="devices",e.FOODOFFERS="foodoffers",e.FOODOFFER_CATEGORIES="foodoffers_categories",e.WORKFLOWS="workflows",e.WORKFLOWS_RUNS="workflows_runs",e))(go||{});const _o="directus-extension-rocket-meals-bundle";class yo{static async checkAllTablesExistWithApiContext(e,t){return await yo.checkTablesExist(e,t,Object.values(go))}static async getTableNamesFromApiContext(e){return await yo.getTableNames(e.getSchema)}static async getTableNames(e){try{let t=await e(),n=Object.keys(t.collections),s={};for(let e of n){let n=t.collections[e];n&&(s[n.collection]=n.collection)}return Object.keys(s)}catch(e){return console.error("++ "+_o+" - getTableNames: Error: ",e),[]}}static async checkTablesExist(e,t,n){let s=[],i=await yo.getTableNamesFromApiContext(t);for(let e of n)i.includes(e)||s.push(e);let r=0===s.length;if(!r){let t="++ "+_o+" - "+e+`: Database not initialized yet. Missing tables: ${s.join(", ")}`;console.log(t)}return r}}class Eo{constructor(e){this.apiContext=e}}class bo extends Eo{constructor(e,t){super(e),this.eventContext=t}async getItemsService(e){var t,n;const{ItemsService:s}=this.apiContext.services;let i=null==(t=this.eventContext)?void 0:t.schema;return i||(i=await this.apiContext.getSchema()),new s(e,{accountability:null,knex:(null==(n=this.eventContext)?void 0:n.database)||this.apiContext.database,schema:i})}}class vo extends Eo{constructor(e,t){super(e),this.eventContext=t}async getFileService(){const{FilesService:e}=this.apiContext.services,t=await this.apiContext.getSchema();return new e({accountability:null,knex:this.apiContext.database,schema:t})}async importByUrl(e,t){const n=await this.getFileService();return await n.importOne(e,t)}async deleteOne(e){const t=await this.getFileService();return await t.deleteOne(e)}}class To extends Eo{async getActivityService(){const{ActivityService:e}=this.apiContext.services,t=await this.apiContext.getSchema();return new e({accountability:null,knex:this.apiContext.database,schema:t})}}class Ao extends Eo{async getServerService(){const{ServerService:e}=this.apiContext.services,t=await this.apiContext.getSchema();return new e({accountability:null,knex:this.apiContext.database,schema:t})}async getServerInfo(){const e=await this.getServerService();return await e.serverInfo()}}const So="activity_auto_cleanup";var wo=async({schedule:e},t)=>{if(!await yo.checkAllTablesExistWithApiContext(So,t))return;e("0 4 * * *",(async()=>{t.logger.info(So+": start schedule run: "+(new Date).toISOString());const e=new To(t),n=await e.getActivityService();{const e="timestamp";t.logger.info(So+": Deleting old logs");let s=new Date,i=new Date;i.setMinutes(s.getMinutes()-43200);let r=i.toISOString();t.logger.info(So+": nowMinusMaxDaysISO: "+r);const a={limit:-1,filter:{_and:[{[e]:{_lte:r}}]}};await n.deleteByQuery(a)}}))};class xo{}xo.INIT_APP_STARTED="app.after";const ko="languages_code",Co="code",No=class{};let Io=No;Io._codes={de:"de-DE",en:"en-US"},Io.DE=No._codes.de,Io.EN=No._codes.en;const Ro=["id","be_source_for_translations","let_be_translated","languages_code","translation_settings"],Do=class{static getTranslation(e,t,n){let s=(e=e||[]).find((e=>e.languages_code===t)),i=e.find((e=>e.languages_code===Do.DefaultLanguage)),r=e.find((e=>e.languages_code===Do.FallBackLanguage));return(null==s?void 0:s[n])||(null==i?void 0:i[n])||(null==r?void 0:r[n])}static hasSignificantTranslationChange(e,t){for(const n in e)if(e.hasOwnProperty(n)&&!Ro.includes(n)&&n in t&&e[n]!==t[n])return!0;return!1}static async updateItemTranslationsForItemWithTranslationsFetched(e,t,n,s,i,r){const a=new bo(i,r),o=await a.getItemsService(s);if(e){const{updateObject:s,updateNeeded:i}=await Do._getUpdateInformationForTranslations(e,e,t,n);i&&await o.updateOne(null==e?void 0:e.id,{id:null==e?void 0:e.id,...s})}}static async updateItemTranslations(e,t,n,s,i,r){const a=new bo(i,r),o=await a.getItemsService(s);let c=await o.readOne(null==e?void 0:e.id,{...Do.QUERY_FIELDS_FOR_ALL_FIELDS_AND_FOR_TRANSLATION_FETCHING});return Do.updateItemTranslationsForItemWithTranslationsFetched(c,t,n,s,i,r)}static async _getUpdateInformationForTranslations(e,t,n,s){let i=JSON.parse(JSON.stringify(n)),r=[],a=[],o=(null==e?void 0:e.translations)||[],c=!1,l=!1,u=Do.LANGUAGE_CODE_DE;for(let e of o)(null==e?void 0:e.be_source_for_translations)&&(null==e?void 0:e.languages_code)&&"string"==typeof(null==e?void 0:e.languages_code)&&(u=null==e?void 0:e.languages_code);for(let e of o){let t=null==e?void 0:e[ko];if(!t||"string"!=typeof t)continue;const s=n[t];if(s){const n=JSON.parse(JSON.stringify(s));if(delete i[t],Do.hasSignificantTranslationChange(e,n)){c=!0;let s=!1;t===u&&(s=!0),a.push({id:null==e?void 0:e.id,let_be_translated:!1,be_source_for_translations:s,...n,[ko]:{[Co]:t}})}}else delete i[t]}let d=Object.keys(i);for(let e=0;e<(null==d?void 0:d.length);e++){let i=d[e];if(i){let e=n[i];if(e){l=!0;let n=!1;i===Do.LANGUAGE_CODE_DE&&(n=!0),r.push({[s]:null==t?void 0:t.id,be_source_for_translations:n,let_be_translated:!1,...e,[ko]:{[Co]:i}})}}}return{updateObject:{translations:{create:r,update:a,delete:[]}},updateNeeded:c||l}}};let Oo=Do;Oo.LANGUAGE_CODE_DE=Io.DE,Oo.LANGUAGE_CODE_EN=Io.EN,Oo.DefaultLanguage=Do.LANGUAGE_CODE_DE,Oo.FallBackLanguage=Do.LANGUAGE_CODE_EN,Oo.FIELD_FOR_TRANSLATION_FETCHING="translations.*",Oo.QUERY_FIELDS_FOR_ALL_FIELDS_AND_FOR_TRANSLATION_FETCHING={fields:["*",Do.FIELD_FOR_TRANSLATION_FETCHING]};const Lo=class{constructor(e,t){this.myDatabaseHelper=e,this.apiContext=e.apiContext,this.tablename=t,this.eventContext=e.eventContext,this.knex=e.apiContext.database}async getItemsService(){const e=new bo(this.apiContext,this.eventContext);return await e.getItemsService(this.tablename)}async upsertOne(e,t){let n=await this.getItemsService(),s=this.getOptsCustom(t);return await n.upsertOne(e,s)}async updateOne(e,t,n){let s=await this.getItemsService(),i=this.getOptsCustom(n);return await s.updateOne(e,t,i)}async updateOneItemWithoutHookTrigger(e,t,n){let s=e.id;return await this.updateOneWithoutHookTrigger(s,t,n)}async updateOneWithoutHookTrigger(e,t,n){let s=this.apiContext.database;s(this.tablename),await s(this.tablename).update(t).where("id",e)}async updateManyByItems(e,t,n){let s=e.map((e=>e.id));return await this.updateManyByPrimaryKeys(s,t,n)}async updateManyByPrimaryKeys(e,t,n){let s=await this.getItemsService(),i=this.getOptsCustom(n);return await s.updateMany(e,t,i)}getOptsCustom(e){let t={};return(null==e?void 0:e.disableEventEmit)&&(t.emitEvents=!1),t}async calculateAverage(e){var t,n;let s=await this.getItemsService(),i={aggregate:{avg:[e]},limit:-1},r=await s.readByQuery(i);return r&&r[0]&&r[0].avg&&(null==(t=r[0].avg)?void 0:t[e])?parseFloat(null==(n=r[0].avg)?void 0:n[e]):void 0}async countItems(e){let t=await this.getItemsService(),n={...e,aggregate:{count:["*"]},limit:-1},s=await t.readByQuery(n);return s&&s[0]?parseInt(s[0].count):0}async readMany(e,t,n){let s=await this.getItemsService();return await s.readMany(e,t,n)}async findFirstItem(e,t){return(await this.findItems(e,t))[0]}async findItems(e,t){let n=await this.getItemsService(),s=[],i=Object.keys(e);for(let t of i){let n={},i=e[t];n[t]={_eq:i},s.push(n)}let r={filter:{_and:s},limit:(null==t?void 0:t.limit)||-1};return(null==t?void 0:t.withTranslations)&&(r={...r,...Oo.QUERY_FIELDS_FOR_ALL_FIELDS_AND_FOR_TRANSLATION_FETCHING}),await n.readByQuery(r)}async findOrCreateItem(e,t,n){let s=await this.getItemsService(),i=await this.findItems(e,n),r=i[0],a=JSON.parse(JSON.stringify(t));return r||(a=Lo.setStatusPublished(a),await s.createOne(a)),i=await this.findItems(e,n),r=i[0],r}async createOne(e){let t=await this.getItemsService();return e=Lo.setStatusPublished(e),await t.createOne(e)}async createManyItems(e,t){let n=await this.getItemsService();e=e.map(Lo.setStatusPublished);let s=this.getOptsCustom(t);return await n.createMany(e,s)}async existsItem(e){return(await this.findItems(e)).length>0}async readOneWithTranslations(e,t,n){let s={...t,...Oo.QUERY_FIELDS_FOR_ALL_FIELDS_AND_FOR_TRANSLATION_FETCHING};return await this.readOne(e,s,n)}async readOne(e,t,n){let s=await this.getItemsService();return await s.readOne(e,t,n)}async readAllItems(){let e=await this.getItemsService();return await e.readByQuery({limit:-1})}async deleteOne(e){let t=await this.getItemsService();return await t.deleteOne(e)}async deleteManyItems(e){let t=e.map((e=>e.id));return await this.deleteMany(t)}async deleteMany(e){let t=await this.getItemsService();return await t.deleteMany(e)}static setStatusPublished(e){return e[Lo.FIELD_STATUS]=Lo.FIELD_STATUS_PUBLISHED,e}static isStatusPublished(e){return e[Lo.FIELD_STATUS]===Lo.FIELD_STATUS_PUBLISHED}async readByQuery(e,t){let n=await this.getItemsService();return await n.readByQuery(e,t)}async createMany(e,t){let n=await this.getItemsService();return await n.createMany(e,t)}async deleteByQuery(e,t){let n=await this.getItemsService();return await n.deleteByQuery(e,t)}async getKeysByQuery(e){let t=await this.getItemsService();return await t.getKeysByQuery(e)}async readSingleton(e,t){let n=await this.getItemsService();return await n.readSingleton(e,t)}async updateBatch(e,t){let n=await this.getItemsService();return await n.updateBatch(e,t)}async updateByQuery(e,t,n){let s=await this.getItemsService();return await s.updateByQuery(e,t,n)}async updateMany(e,t,n){let s=await this.getItemsService();return await s.updateMany(e,t,n)}async upsertMany(e,t){let n=await this.getItemsService();return await n.upsertMany(e,t)}async upsertSingleton(e,t){let n=await this.getItemsService();return await n.upsertSingleton(e,t)}};let Fo=Lo;Fo.FIELD_STATUS="status",Fo.FIELD_STATUS_PUBLISHED="published";var Mo=(e=>(e.MONDAY="MONDAY",e.TUESDAY="TUESDAY",e.WEDNESDAY="WEDNESDAY",e.THURSDAY="THURSDAY",e.FRIDAY="FRIDAY",e.SATURDAY="SATURDAY",e.SUNDAY="SUNDAY",e))(Mo||{});class Po{static getWeekdayList(){return["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"]}static getWeekdayListFromDate(e){const t=Po.getWeekdayList(),n=Po.getWeekdayFromDate(e),s=t.indexOf(n),i=t.slice(s),r=t.slice(0,s);return i.concat(r)}static getWeekdayFromDate(e){const t=e.getDay();switch(t){case 0:return"SUNDAY";case 1:return"MONDAY";case 2:return"TUESDAY";case 3:return"WEDNESDAY";case 4:return"THURSDAY";case 5:return"FRIDAY";case 6:return"SATURDAY";default:throw new Error(`Invalid weekday: ${t}`)}}static getHumanReadableDate(e,t){const n=e.toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}),s=e.toLocaleDateString("de-DE",{weekday:"long"});let i=n;return t&&(i+=` (${s})`),i}static getHumanReadableTime(e){return e.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}static getHumanReadableDateAndTime(e){return`${Po.getHumanReadableDate(e,!1)} ${Po.getHumanReadableTime(e)}`}static getFoodofferDateTypeFromDate(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}static foodofferDateTypeToString(e){return`${e.year}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}static parseDD_MM_YYYY(e){const t=e.split(".");if(3!==t.length)throw new Error(`Invalid date string: ${e}`);if(null==t[0]||null==t[1]||null==t[2])throw new Error(`Invalid date string: ${e}`);const n=parseInt(t[0]),s=parseInt(t[1]),i=parseInt(t[2]);return new Date(i,s-1,n)}static formateDateToDatabaseDateOnlyString(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}static formatDateToIso8601WithoutTimezone(e,t=!0){const n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");let o=String(e.getSeconds()).padStart(2,"0");return t&&(o="00"),`${n}-${s}-${i}T${r}:${a}:${o}`}static getDate(e){return new Date(e.year,e.month-1,e.day,e.hours,e.minutes,e.seconds,e.milliseconds)}}class Bo{constructor(e){this.cashregisterServiceHelper=new Fo(e,go.CASHREGISTERS),this.cashregisterTransactionsServiceHelper=new Fo(e,go.CASHREGISTERS_TRANSACTIONS)}async getCashregistersForCanteen(e){return await this.cashregisterServiceHelper.readByQuery({filter:{canteen:{_eq:e}},limit:-1})}async getTransactionIdsForCashregister(e,t,n,s){return(await this.cashregisterTransactionsServiceHelper.readByQuery({filter:{_and:[{cashregister:{_eq:e}},{date:{_gte:Po.formatDateToIso8601WithoutTimezone(t)}},{date:{_lt:Po.formatDateToIso8601WithoutTimezone(n)}}]},fields:["id"],limit:s})).map((e=>e.id))}async findOrCreateCashregisterTransaction(e,t){let n=e.baseData;n.id=e.baseData.id;const s={id:e.baseData.id},i={...n,cashregister:t};return await this.cashregisterTransactionsServiceHelper.findOrCreateItem(s,i)}async findOrCreateCashregister(e){let t={external_identifier:e};return await this.cashregisterServiceHelper.findOrCreateItem(t,t)}async deleteAllTransactions(){let e=!0;console.log("deleteAllTransactions");let t=0;for(;e;){let n=await this.cashregisterTransactionsServiceHelper.readByQuery({filter:{},limit:1e4});if(n.length>0){let e=n.map((e=>e.id));await this.cashregisterTransactionsServiceHelper.deleteMany(e)}else e=!1;t++,console.log("-- "+t)}console.log("FINISHED DELETION")}}const Uo=class{};let Ho=Uo;Ho._statuses={start:"start",finished:"finished",running:"running",failed:"failed"},Ho.START=Uo._statuses.start,Ho.FINISHED=Uo._statuses.finished,Ho.RUNNING=Uo._statuses.running,Ho.FAILED=Uo._statuses.failed;const jo=class{constructor(e,t){this.apiExtensionContext=e,this.eventContext=t}getDatabase(){return this.apiExtensionContext.database}async setAppSettings(e){const t=new bo(this.apiExtensionContext,this.eventContext),n=await t.getItemsService(go.APP_SETTINGS);await n.upsertSingleton(e)}async getAppSettings(){const e=new bo(this.apiExtensionContext),t=await e.getItemsService(go.APP_SETTINGS);return await t.readSingleton({})}async getRedirectWhitelist(){let e=await this.getAppSettings(),t=null==e?void 0:e.redirect_whitelist;if(t)return t}async getFoodNotificationStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.notifications_foods_status)return e.notifications_foods_status}async setFoodNotificationStatus(e){let t=this.getDatabase();await t(go.APP_SETTINGS).update({notifications_foods_status:e})}async isNewsParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.news_parsing_enabled)&&e.news_parsing_enabled}async setNewsParsingStatus(e){let t=this.getDatabase();await t(go.APP_SETTINGS).update({news_parsing_status:e})}async getNewsParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.news_parsing_status)return e.news_parsing_status}async getApartmentParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.housing_parsing_status)return e.housing_parsing_status}async isApartmentParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.housing_parsing_enabled)&&e.housing_parsing_enabled}async setApartmentParsingStatus(e,t){let n=this.getDatabase();await n(go.APP_SETTINGS).update({housing_parsing_status:e,housing_parsing_last_date:t})}async setWashingmachineParsingStatus(e,t){let n=this.getDatabase();await n(go.APP_SETTINGS).update({washingmachine_parsing_status:e,washingmachine_parsing_last_date:t})}async getWashingmachineParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.washingmachine_parsing_status)return e.washingmachine_parsing_status}async isWashingmachineParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.washingmachine_parsing_enabled)&&e.washingmachine_parsing_enabled}async getCashregisterParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.cashregisters_parsing_status)return e.cashregisters_parsing_status}async setCashregisterParsingStatus(e,t){let n=this.getDatabase();await n(go.APP_SETTINGS).update({cashregisters_parsing_status:e,cashregisters_parsing_last_date:t})}async isCashregisterParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.cashregisters_parsing_enabled)&&e.cashregisters_parsing_enabled}async setUtilizationForecastCalculationStatus(e,t){let n=this.getDatabase();await n(go.APP_SETTINGS).update({utilization_forecast_calculation_status:e,utilization_forecast_calculation_last_date:t})}async getUtilizationForecastCalculationStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.utilization_forecast_calculation_status)return e.utilization_forecast_calculation_status}async isUtilizationForecastCalculationEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.utilization_forecast_calculation_enabled)&&e.utilization_forecast_calculation_enabled}async getFoodParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.foods_parsing_status)return e.foods_parsing_status}async setFoodParsingStatus(e,t){let n=this.getDatabase();await n(go.APP_SETTINGS).update({foods_parsing_status:e,foods_parsing_last_date:t})}async isFoodParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.foods_parsing_enabled)&&e.foods_parsing_enabled}async getFoodParsingHash(){const e=await this.getAppSettings();if(null==e?void 0:e.foods_parsing_hash)return e.foods_parsing_hash}async setFoodParsingHash(e){await this.setAppSettings({[jo.FIELD_APP_SETTINGS_FOODS_PARSING_HASH]:e})}};let Go=jo;Go.FIELD_APP_SETTINGS_FOODS_PARSING_STATUS="foods_parsing_status",Go.FIELD_APP_SETTINGS_FOODS_PARSING_HASH="foods_parsing_hash",Go.FIELD_APP_SETTINGS_FOODS_PARSING_LAST_RUN="foods_parsing_last_date";const $o=class{constructor(e,t){this.apiExtensionContext=e,this.eventContext=t}async setAutoTranslationSettings(e){const t=new bo(this.apiExtensionContext,this.eventContext),n=await t.getItemsService($o.TABLENAME);await n.upsertSingleton(e)}async getAppSettings(){const e=new bo(this.apiExtensionContext,this.eventContext),t=await e.getItemsService($o.TABLENAME);return await t.readSingleton({})}};let qo=$o;qo.TABLENAME="auto_translation_settings";var zo=(e=>(e.RUNNING="running",e.SUCCESS="success",e.FAILED="failed",e.SKIPPED="skipped",e.DELETE="delete",e))(zo||{});class Wo extends Fo{async getPreviousResultHash(e,t){let n;return e&&(n="string"==typeof e.workflow?e.workflow:e.workflow.id),n?await this.readByQuery({filter:{workflow:{_eq:n},date_finished:{_nempty:!0},state:{_eq:zo.SUCCESS},result_hash:{_nempty:!0}},fields:["*"],sort:["-date_finished"],limit:1}).then((e=>{let t=e[0];return t?t.result_hash:null})).catch((async e=>(await t.appendLog("Error while getting previous result hash: "+e.toString()),null))):null}}var Yo=(e=>(e.TEST="Test",e.OSNABRUECK="Osnabrck",e.HANNOVER="Hannover",e))(Yo||{});class Vo{static getEnvVariable(e){let t=process.env[e];if(null==t)throw new Error("Environment Variable "+e+" not set.");return t}static getFoodSyncMode(){return this.getEnvVariable("FOOD_SYNC_MODE")}static getFoodSyncTL1FileExportCsvFilePath(){return this.getEnvVariable("FOOD_SYNC_TL1FILE_EXPORT_CSV_FILE_PATH")}static getMarkingSyncTL1FileCreateOnlyFromExportCsvFile(){return"true"===this.getEnvVariable("MARKING_SYNC_TL1FILE_CREATE_ONLY_FROM_EXPORT_CSV_FILE")}static getFoodSyncTL1FileExportCsvFileEncoding(){return this.getEnvVariable("FOOD_SYNC_TL1FILE_EXPORT_CSV_FILE_ENCODING")||"latin1"}static getFoodSyncTL1WebExportUrl(){return this.getEnvVariable("FOOD_SYNC_TL1WEB_EXPORT_URL")}static getHousingContractCsvFilePath(){return this.getEnvVariable("HOUSING_CONTRACT_SYNC_TL1FILE_EXPORT_CSV_FILE_PATH")}static getFoodImageSyncSwosyApiServerUrl(){return this.getEnvVariable("FOOD_IMAGE_SYNC_SWOSY_API_SERVER_URL")}static getMarkingSyncMode(){return this.getEnvVariable("MARKING_SYNC_MODE")}static getMarkingSyncTL1FileExportCsvFilePath(){return this.getEnvVariable("MARKING_SYNC_TL1FILE_EXPORT_CSV_FILE_PATH")}static getMarkingSyncTL1FileExportCsvFileEncoding(){return this.getEnvVariable("MARKING_SYNC_TL1FILE_EXPORT_CSV_FILE_ENCODING")||"utf8"}static getEnvFieldNameForAutoTranslateApiKey(){return"AUTO_TRANSLATE_API_KEY"}static getAutoTranslateApiKey(){return this.getEnvVariable(Vo.getEnvFieldNameForAutoTranslateApiKey())}static getPublicUrl(){return this.getEnvVariable("PUBLIC_URL")}static getAdminEmail(){return this.getEnvVariable("ADMIN_EMAIL")}static getAdminPassword(){return this.getEnvVariable("ADMIN_PASSWORD")}static getSyncForCustomer(){let e=this.getEnvVariable("SYNC_FOR_CUSTOMER");return Object.values(Yo).includes(e)?e:null}}class Ko{constructor(e){this.myDatabaseHelper=e,this.apiContext=e.apiContext,this.eventContext=e.eventContext}async createDirectusFilesShareLink(e){let t=new Fo(this.myDatabaseHelper,go.FILES_SHARES),n=await t.createOne({file:e.directus_files_id});return await this.createShareLink({collection:go.FILES_SHARES,id:n,name:e.name})}async createShareLink(e){var t,n;let s,i=await this.myDatabaseHelper.getUsersHelper(),r=Vo.getAdminEmail(),a=await i.findFirstItem({email:r,provider:"default"});if(!a)return console.error("FilesServiceHelper.createShareLink: admin user not found"),null;let o=a.role;if(o&&(s="string"==typeof o?o:o.id),!s)return console.error("FilesServiceHelper.createShareLink: admin role not found"),null;let c=this.apiContext.services.SharesService,l=(null==(t=null==this?void 0:this.eventContext)?void 0:t.schema)||await this.apiContext.getSchema(),u=new c({accountability:{role:s,user:a.id,roles:[s],admin:!0},knex:(null==(n=null==this?void 0:this.eventContext)?void 0:n.database)||this.apiContext.database,schema:l}),d=s,p=e.name||"Share of "+e.collection+" item "+e.id,h=await u.createOne({role:d,collection:e.collection,item:e.id,name:p,max_uses:e.max_uses,password:e.password,date_start:e.date_start,date_end:e.date_end});return Vo.getPublicUrl()+"/admin/shared/"+h}}class Qo extends Fo{constructor(e){super(e,go.DIRECTUS_FILES)}async getItemsService(){const e=new vo(this.apiContext,this.eventContext);return await e.getFileService()}async uploadOne(e,t,n,s){return(await this.getItemsService()).uploadOne(e,t,n,s)}async importOne(e,t){return(await this.getItemsService()).importOne(e,t)}async readFileContent(e){console.log("FilesServiceHelper.readFileContent: ",e);const n=this.apiContext.services.AssetsService;let s=await this.apiContext.getSchema(),i=new n({accountability:null,knex:this.knex,schema:s});console.log(" - getAsset: ",e);let r=await i.getAsset(e,{transformationParams:{}});console.log(" - read the file buffer");let a=[];return new Promise(((e,n)=>{r.stream.on("data",(e=>{a.push(e)})),r.stream.on("end",(()=>{e(t.concat(a))})),r.stream.on("error",(e=>{n(e)}))}))}createDirectusFilesShareLink(e){return new Ko(this.myDatabaseHelper).createDirectusFilesShareLink(e)}}class Xo{constructor(e,t){this.apiContext=e,this.eventContext=t}async getServerInfo(){const e=new Ao(this.apiContext);return await e.getServerInfo()}getAppSettingsHelper(){return new Go(this.apiContext)}getAutoTranslationSettingsHelper(){return new qo(this.apiContext)}getAppFeedbacksHelper(){return new Fo(this,go.APP_FEEDBACKS)}getCashregisterHelper(){return new Bo(this.apiContext)}getCollectionDatesLastUpdateHelper(){return new Fo(this,go.COLLECTIONS_DATES_LAST_UPDATE)}getFoodFeedbacksHelper(){return new Fo(this,go.FOODS_FEEDBACKS)}getFoodsHelper(){return new Fo(this,go.FOODS)}getFoodFeedbackLabelsHelper(){return new Fo(this,go.FOODS_FEEDBACK_LABELS)}getFoodsCategoriesHelper(){return new Fo(this,go.FOODS_CATEGORIES)}getFoodsAttributesHelper(){return new Fo(this,go.FOODS_ATTRIBUTES)}getFoodFeedbackLabelEntriesHelper(){return new Fo(this,go.FOODS_FEEDBACKS_LABELS_ENTRIES)}getCanteenFeedbackLabelsHelper(){return new Fo(this,go.CANTEENS_FEEDBACK_LABELS)}getCanteenFeedbackLabelsEntriesHelper(){return new Fo(this,go.CANTEENS_FEEDBACKS_LABELS_ENTRIES)}getFormsHelper(){return new Fo(this,go.FORMS)}getFormExtractsHelper(){return new Fo(this,go.FORM_EXTRACTS)}getFormExtractFormFieldsHelper(){return new Fo(this,go.FORM_EXTRACTS_FORM_FIELDS)}getFormsFieldsHelper(){return new Fo(this,go.FORM_FIELDS)}getFormsSubmissionsHelper(){return new Fo(this,go.FORM_SUBMISSIONS)}getFormsAnswersHelper(){return new Fo(this,go.FORM_ANSWERS)}getFoodoffersHelper(){return new Fo(this,go.FOODOFFERS)}getFoodofferCategoriesHelper(){return new Fo(this,go.FOODOFFER_CATEGORIES)}getDevicesHelper(){return new Fo(this,go.DEVICES)}getPushNotificationsHelper(){return new Fo(this,go.PUSH_NOTIFICATIONS)}getProfilesHelper(){return new Fo(this,go.PROFILES)}getMarkingsHelper(){return new Fo(this,go.MARKINGS)}getMarkingsExclusionsHelper(){return new Fo(this,go.MARKINGS_EXCLUSIONS)}getCanteensHelper(){return new Fo(this,go.CANTEENS)}getApartmentsHelper(){return new Fo(this,go.APARTMENTS)}getBuildingsHelper(){return new Fo(this,go.BUILDINGS)}getNewsHelper(){return new Fo(this,go.NEWS)}getUsersHelper(){return new Fo(this,go.USERS)}getShareServiceHelper(){return new Ko(this)}getUtilizationEntriesHelper(){return new Fo(this,go.UTILIZATION_ENTRIES)}getUtilizationGroupsHelper(){return new Fo(this,go.UTILIZATION_GROUPS)}getWashingmachinesHelper(){return new Fo(this,go.WASHINGMACHINES)}getWashingmachinesJobsHelper(){return new Fo(this,go.WASHINGMACHINES_JOBS)}getWorkflowsHelper(){return new Fo(this,go.WORKFLOWS)}getWorkflowsRunsHelper(){return new Wo(this,go.WORKFLOWS_RUNS)}getItemsServiceHelper(e){return new Fo(this,e)}async sendMail(e){let t=this.getMailsHelper();return await t.createOne(e)}getMailsHelper(){return new Fo(this,go.MAILS)}getMailsFilesHelper(){return new Fo(this,go.MAILS_FILES)}getFilesHelper(){return new Qo(this)}}const Zo="activity_auto_cleanup";var Jo=async({init:e},t)=>{const n=new Xo(t);let s=Vo.getAdminEmail(),i=Vo.getAdminPassword();s&&i||console.log(Zo+": Admin email or password not set in environment variables. Skipping reset of admin password.");const r=n.getUsersHelper();e(xo.INIT_APP_STARTED,(async()=>{const e=await r.readByQuery({filter:{_and:[{email:{_eq:s}},{provider:{_eq:"default"}}]}});if(0==e.length)return void console.log(Zo+": Admin user with email "+s+" not found. Skipping reset of admin password.");if(e.length>1)return void console.log(Zo+": Found multiple users with email "+s+". Skipping reset of admin password.");let t=e[0];t?await r.updateOne(t.id,{password:i}):console.log(Zo+": Admin user with email "+s+" not found. Skipping reset of admin password.")}))};let ec=class{constructor(e,t,n,s,i){this.kind=e,this.input=t,this.begin=n,this.end=s,this.file=i}getText(){return this.input.slice(this.begin,this.end)}getPosition(){let[e,t]=[1,1];for(let n=0;n<this.begin;n++)"\n"===this.input[n]?(e++,t=1):t++;return[e,t]}size(){return this.end-this.begin}};class tc{liquidMethodMissing(e){}}const nc=Object.prototype.toString,sc=String.prototype.toLowerCase;function ic(e){return"string"==typeof e}function rc(e){return"function"==typeof e}function ac(e){return function(...t){return new Promise(((n,s)=>{e(...t,((e,t)=>{e?s(e):n(t)}))}))}}function oc(e){return ic(e=lc(e))?e:uc(e)?"":dc(e)?e.map((e=>oc(e))).join(""):String(e)}function cc(e){return uc(e=lc(e))?[]:dc(e)?e:[e]}function lc(e){return e instanceof tc&&rc(e.valueOf)?e.valueOf():e}function uc(e){return null==e}function dc(e){return"[object Array]"===nc.call(e)}function pc(e,t,n=1){const s=[];for(let i=e;i<t;i+=n)s.push(i);return s}function hc(e,t,n=" "){return fc(e,t,n,((e,t)=>t+e))}function fc(e,t,n,s){let i=t-(e=String(e)).length;for(;i-- >0;)e=s(e,n);return e}function mc(e){return e}function gc(e,t){return null==e&&null==t?0:null==e?1:null==t||(e=sc.call(e))<(t=sc.call(t))?-1:e>t?1:0}function _c(e){return function(...t){return e.call(this,...t.map(lc))}}function yc(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const Ec="__liquidClass__";class bc extends Error{constructor(e,t){super("string"==typeof e?e:e.message),this.context="","string"!=typeof e&&Object.defineProperty(this,"originalError",{value:e,enumerable:!1}),Object.defineProperty(this,"token",{value:t,enumerable:!1}),Object.defineProperty(this,Ec,{value:"LiquidError",enumerable:!1})}update(){Object.defineProperty(this,"context",{value:Sc(this.token),enumerable:!1}),this.message=function(e,t){t.file&&(e+=`, file:${t.file}`);const[n,s]=t.getPosition();return e+=`, line:${n}, col:${s}`}(this.message,this.token),this.stack=this.message+"\n"+this.context+"\n"+this.stack,this.originalError&&(this.stack+="\nFrom "+this.originalError.stack)}static is(e){return"LiquidError"===(null==e?void 0:e[Ec])}}class vc extends bc{constructor(e,t){super(e,t),this.name="TokenizationError",super.update()}}class Tc extends bc{constructor(e,t){super(e,t),this.name="UndefinedVariableError",this.message=e.message,super.update()}}class Ac extends Error{constructor(e){super(e),this.name="AssertionError",this.message=e+""}}function Sc(e){const[t,n]=e.getPosition(),s=e.input.split("\n"),i=Math.max(t-2,1),r=Math.min(t+3,s.length),a=pc(i,r+1).map((e=>{let i=`${e===t?">> ":"   "}${hc(String(e),String(r).length)}| `;const a=e===t?"\n"+hc("^",n+i.length):"";return i+=s[e-1],i+=a,i})).join("\n");return a}const wc=[0,0,0,0,0,0,0,0,0,20,4,4,4,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,2,8,0,0,0,0,8,0,0,0,64,0,65,0,0,33,33,33,33,33,33,33,33,33,33,0,0,2,2,2,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],xc=1,kc=4,Cc=16;function Nc(e){const t=e.charCodeAt(0);return t>=128?!wc[t]:!!(wc[t]&xc)}function Ic(e,t){if(!e){const n="function"==typeof t?t():t||`expect ${e} to be true`;throw new Ac(n)}}wc[160]=wc[5760]=wc[6158]=wc[8192]=wc[8193]=wc[8194]=wc[8195]=wc[8196]=wc[8197]=wc[8198]=wc[8199]=wc[8200]=wc[8201]=wc[8202]=wc[8232]=wc[8233]=wc[8239]=wc[8287]=wc[12288]=kc,wc[8220]=wc[8221]=128;class Rc extends tc{equals(e){return!(e instanceof Rc)&&(ic(e=lc(e))||dc(e)?0===e.length:!!function(e){const t=typeof e;return null!==e&&("object"===t||"function"===t)}(e)&&0===Object.keys(e).length)}gt(){return!1}geq(){return!1}lt(){return!1}leq(){return!1}valueOf(){return""}static is(e){return e instanceof Rc}}class Dc extends Rc{equals(e){return!1===e||(!!uc(lc(e))||(ic(e)?/^\s*$/.test(e):super.equals(e)))}static is(e){return e instanceof Dc}}function Oc(e){return e&&rc(e.equals)&&rc(e.gt)&&rc(e.geq)&&rc(e.lt)&&rc(e.leq)}const Lc=new class extends tc{equals(e){return uc(lc(e))}gt(){return!1}geq(){return!1}lt(){return!1}leq(){return!1}valueOf(){return null}},Fc={true:!0,false:!1,nil:Lc,null:Lc,empty:new Rc,blank:new Dc};function Mc(e){const t={};for(const[n,s]of Object.entries(e)){let e=t;for(let t=0;t<n.length;t++){const s=n[t];e[s]=e[s]||{},t===n.length-1&&Nc(n[t])&&(e[s].needBoundary=!0),e=e[s]}e.data=s,e.end=!0}return t}function Pc(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))}const Bc=/%([-_0^#:]+)?(\d+)?([EO])?(.)/;function Uc(e){const t=function(e){const t=e.getFullYear();return!(3&t||!(t%100||t%400==0&&t))}(e)?29:28;return[31,t,31,30,31,30,31,31,30,31,30,31]}function Hc(e){let t=0;for(let n=0;n<e.getMonth();++n)t+=Uc(e)[n];return t+e.getDate()}function jc(e,t){const n=Hc(e)+(t-e.getDay()),s=7-new Date(e.getFullYear(),0,1).getDay()+t;return String(Math.floor((n-s)/7)+1)}const Gc={d:2,e:2,H:2,I:2,j:3,k:2,l:2,L:3,m:2,M:2,S:2,U:2,W:2},$c=new Set("aAbBceklpP");function qc(e,t){const n=Math.abs(e.getTimezoneOffset()),s=Math.floor(n/60),i=n%60;return(e.getTimezoneOffset()>0?"-":"+")+hc(s,2,"0")+(t.flags[":"]?":":"")+hc(i,2,"0")}const zc={a:e=>e.getShortWeekdayName(),A:e=>e.getLongWeekdayName(),b:e=>e.getShortMonthName(),B:e=>e.getLongMonthName(),c:e=>e.toLocaleString(),C:e=>function(e){return parseInt(e.getFullYear().toString().substring(0,2),10)}(e),d:e=>e.getDate(),e:e=>e.getDate(),H:e=>e.getHours(),I:e=>String(e.getHours()%12||12),j:e=>Hc(e),k:e=>e.getHours(),l:e=>String(e.getHours()%12||12),L:e=>e.getMilliseconds(),m:e=>e.getMonth()+1,M:e=>e.getMinutes(),N:(e,t)=>{const n=Number(t.width)||9;return function(e,t,n=" "){return fc(e,t,n,((e,t)=>e+t))}(String(e.getMilliseconds()).slice(0,n),n,"0")},p:e=>e.getHours()<12?"AM":"PM",P:e=>e.getHours()<12?"am":"pm",q:e=>function(e){const t=e.getDate();if([11,12,13].includes(t))return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(e),s:e=>Math.round(e.getTime()/1e3),S:e=>e.getSeconds(),u:e=>e.getDay()||7,U:e=>jc(e,0),w:e=>e.getDay(),W:e=>jc(e,1),x:e=>e.toLocaleDateString(),X:e=>e.toLocaleTimeString(),y:e=>e.getFullYear().toString().slice(2,4),Y:e=>e.getFullYear(),z:qc,Z:(e,t)=>e.getTimeZoneName()||qc(e,t),t:()=>"\t",n:()=>"\n","%":()=>"%"};function Wc(e,t){let n,s="",i=t;for(;n=Bc.exec(i);)s+=i.slice(0,n.index),i=i.slice(n.index+n[0].length),s+=Yc(e,n);return s+i}function Yc(e,t){const[n,s="",i,r,a]=t,o=zc[a];if(!o)return n;const c={};for(const e of s)c[e]=!0;let l=String(o(e,{flags:c,width:i,modifier:r})),u=$c.has(a)?" ":"0",d=i||Gc[a]||0;var p;return c["^"]?l=l.toUpperCase():c["#"]&&(p=l,l=[...p].some((e=>e>="a"&&e<="z"))?p.toUpperCase():p.toLowerCase()),c._?u=" ":c[0]&&(u="0"),c["-"]&&(d=0),hc(l,d,u)}zc.h=zc.b;const Vc=/([zZ]|([+-])(\d{2}):(\d{2}))$/,Kc=["January","February","March","April","May","June","July","August","September","October","November","December"],Qc=Kc.map((e=>e.slice(0,3))),Xc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Zc=Xc.map((e=>e.slice(0,3)));class Jc{constructor(e,t,n){this.locale=t,this.DateTimeFormat="undefined"!=typeof Intl?Intl.DateTimeFormat:void 0,this.date=new Date(e),this.timezoneFixed=void 0!==n,void 0===n&&(n=this.date.getTimezoneOffset()),this.timezoneOffset=ic(n)?Jc.getTimezoneOffset(n,this.date):n,this.timezoneName=ic(n)?n:"";const s=6e4*(this.date.getTimezoneOffset()-this.timezoneOffset),i=this.date.getTime()+s;this.displayDate=new Date(i)}getTime(){return this.displayDate.getTime()}getMilliseconds(){return this.displayDate.getMilliseconds()}getSeconds(){return this.displayDate.getSeconds()}getMinutes(){return this.displayDate.getMinutes()}getHours(){return this.displayDate.getHours()}getDay(){return this.displayDate.getDay()}getDate(){return this.displayDate.getDate()}getMonth(){return this.displayDate.getMonth()}getFullYear(){return this.displayDate.getFullYear()}toLocaleString(e,t){return(null==t?void 0:t.timeZone)?this.date.toLocaleString(e,t):this.displayDate.toLocaleString(e,t)}toLocaleTimeString(e){return this.displayDate.toLocaleTimeString(e)}toLocaleDateString(e){return this.displayDate.toLocaleDateString(e)}getTimezoneOffset(){return this.timezoneOffset}getTimeZoneName(){return this.timezoneFixed?this.timezoneName:this.DateTimeFormat?this.DateTimeFormat().resolvedOptions().timeZone:void 0}getLongMonthName(){var e;return null!==(e=this.format({month:"long"}))&&void 0!==e?e:Kc[this.getMonth()]}getShortMonthName(){var e;return null!==(e=this.format({month:"short"}))&&void 0!==e?e:Qc[this.getMonth()]}getLongWeekdayName(){var e;return null!==(e=this.format({weekday:"long"}))&&void 0!==e?e:Xc[this.displayDate.getDay()]}getShortWeekdayName(){var e;return null!==(e=this.format({weekday:"short"}))&&void 0!==e?e:Zc[this.displayDate.getDay()]}valid(){return!isNaN(this.getTime())}format(e){return this.DateTimeFormat&&this.DateTimeFormat(this.locale,e).format(this.displayDate)}static createDateFixedToTimezone(e,t){const n=e.match(Vc);if(n&&"Z"===n[1])return new Jc(+new Date(e),t,0);if(n&&n[2]&&n[3]&&n[4]){const[,,s,i,r]=n,a=("+"===s?-1:1)*(60*parseInt(i,10)+parseInt(r,10));return new Jc(+new Date(e),t,a)}return new Jc(e,t)}static getTimezoneOffset(e,t){const n=t.toLocaleString("en-US",{timeZone:e}),s=t.toLocaleString("en-US",{timeZone:"UTC"}),i=new Date(n);return(+new Date(s)-+i)/6e4}}class el extends ec{constructor(e,[t,n],s,i,r,a,o,c){super(e,s,i,r,c),this.trimLeft=!1,this.trimRight=!1;const l="-"===s[t],u="-"===s[n-1];let d=l?t+1:t,p=u?n-1:n;for(;d<p&&wc[s.charCodeAt(d)]&kc;)d++;for(;p>d&&wc[s.charCodeAt(p-1)]&kc;)p--;this.contentRange=[d,p],this.trimLeft=l||a,this.trimRight=u||o}get content(){return this.input.slice(this.contentRange[0],this.contentRange[1])}}class tl extends el{constructor(e,t,n,s,i){const{trimTagLeft:r,trimTagRight:a,tagDelimiterLeft:o,tagDelimiterRight:c}=s,[l,u]=[t+o.length,n-c.length];super(zl.Tag,[l,u],e,t,n,r,a,i),this.tokenizer=new jl(e,s.operators,i,this.contentRange),this.name=this.tokenizer.readTagName(),this.tokenizer.assert(this.name,"illegal tag syntax, tag name expected"),this.tokenizer.skipBlank()}get args(){return this.tokenizer.input.slice(this.tokenizer.p,this.contentRange[1])}}class nl extends el{constructor(e,t,n,s,i){const{trimOutputLeft:r,trimOutputRight:a,outputDelimiterLeft:o,outputDelimiterRight:c}=s,l=[t+o.length,n-c.length];super(zl.Output,l,e,t,n,r,a,i)}}class sl extends ec{constructor(e,t,n,s){super(zl.HTML,e,t,n,s),this.input=e,this.begin=t,this.end=n,this.file=s,this.trimLeft=0,this.trimRight=0}getContent(){return this.input.slice(this.begin+this.trimLeft,this.end-this.trimRight)}}class il extends ec{constructor(e,t,n,s){super(zl.Number,e,t,n,s),this.input=e,this.begin=t,this.end=n,this.file=s,this.content=Number(this.getText())}}class rl extends ec{constructor(e,t,n,s){super(zl.Word,e,t,n,s),this.input=e,this.begin=t,this.end=n,this.file=s,this.content=this.getText()}}class al extends ec{constructor(e,t,n,s){super(zl.Literal,e,t,n,s),this.input=e,this.begin=t,this.end=n,this.file=s,this.literal=this.getText(),this.content=Fc[this.literal]}}const ol={"==":2,"!=":2,">":2,"<":2,">=":2,"<=":2,contains:2,not:1,and:0,or:0},cl={"==":0,"!=":0,">":0,"<":0,">=":0,"<=":0,contains:0,not:1,and:0,or:0};class ll extends ec{constructor(e,t,n,s){super(zl.Operator,e,t,n,s),this.input=e,this.begin=t,this.end=n,this.file=s,this.operator=this.getText()}getPrecedence(){const e=this.getText();return e in ol?ol[e]:1}}class ul extends ec{constructor(e,t,n,s,i,r){super(zl.PropertyAccess,n,s,i,r),this.variable=e,this.props=t}}class dl extends ec{constructor(e,t,n,s,i,r){super(zl.Filter,n,s,i,r),this.name=e,this.args=t}}class pl extends ec{constructor(e,t,n,s,i,r){super(zl.Hash,e,t,n,r),this.input=e,this.begin=t,this.end=n,this.name=s,this.value=i,this.file=r}}const hl=/[\da-fA-F]/,fl=/[0-7]/,ml={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v"};function gl(e){const t=e.charCodeAt(0);return t>=97?t-87:t>=65?t-55:t-48}class _l extends ec{constructor(e,t,n,s){super(zl.Quoted,e,t,n,s),this.input=e,this.begin=t,this.end=n,this.file=s,this.content=function(e){let t="";for(let n=1;n<e.length-1;n++)if("\\"===e[n])if(void 0!==ml[e[n+1]])t+=ml[e[++n]];else if("u"===e[n+1]){let s=0,i=n+2;for(;i<=n+5&&hl.test(e[i]);)s=16*s+gl(e[i++]);n=i-1,t+=String.fromCharCode(s)}else if(fl.test(e[n+1])){let s=n+1,i=0;for(;s<=n+3&&fl.test(e[s]);)i=8*i+gl(e[s++]);n=s-1,t+=String.fromCharCode(i)}else t+=e[++n];else t+=e[n];return t}(this.getText())}}class yl extends ec{constructor(e,t,n,s,i,r){super(zl.Range,e,t,n,r),this.input=e,this.begin=t,this.end=n,this.lhs=s,this.rhs=i,this.file=r}}class El extends el{constructor(e,t,n,s,i){super(zl.Tag,[t,n],e,t,n,!1,!1,i),this.tokenizer=new jl(e,s.operators,i,this.contentRange),this.name=this.tokenizer.readTagName(),this.tokenizer.assert(this.name,"illegal liquid tag syntax"),this.tokenizer.skipBlank(),this.args=this.tokenizer.remaining()}}class bl extends ec{constructor(e,t,n,s,i,r){super(zl.FilteredValue,n,s,i,r),this.initial=e,this.filters=t,this.input=n,this.begin=s,this.end=i,this.file=r}}class vl{constructor(e){this.postfix=[...Al(e)]}*evaluate(e,t){Ic(e,"unable to evaluate: context not defined");const n=[];for(const s of this.postfix)if(Vl(s)){const t=n.pop();let i;if(1===cl[s.operator])i=yield e.opts.operators[s.operator](t,e);else{const r=n.pop();i=yield e.opts.operators[s.operator](r,t,e)}n.push(i)}else n.push(yield Tl(s,e,t));return n[0]}valid(){return!!this.postfix.length}}function*Tl(e,t,n=!1){if(e)return"content"in e?e.content:function(e){return Xl(e)===zl.PropertyAccess}(e)?yield function*(e,t,n){const s=[];for(const n of e.props)s.push(yield Tl(n,t,!1));try{if(e.variable){const i=yield Tl(e.variable,t,n);return yield t._getFromScope(i,s)}return yield t._get(s)}catch(t){if(n&&"InternalUndefinedVariableError"===t.name)return null;throw new Tc(t,e)}}(e,t,n):function(e){return Xl(e)===zl.Range}(e)?yield function*(e,t){const n=yield Tl(e.lhs,t),s=yield Tl(e.rhs,t);return pc(+n,+s+1)}(e,t):void 0}function*Al(e){const t=[];for(const n of e)if(Vl(n)){for(;t.length&&t[t.length-1].getPrecedence()>n.getPrecedence();)yield t.pop();t.push(n)}else yield n;for(;t.length;)yield t.pop()}function Sl(e,t){return!wl(e,t)}function wl(e,t){return e=lc(e),t.opts.jsTruthy?!e:!1===e||null==e}const xl={"==":kl,"!=":(e,t)=>!kl(e,t),">":(e,t)=>Oc(e)?e.gt(t):Oc(t)?t.lt(e):lc(e)>lc(t),"<":(e,t)=>Oc(e)?e.lt(t):Oc(t)?t.gt(e):lc(e)<lc(t),">=":(e,t)=>Oc(e)?e.geq(t):Oc(t)?t.leq(e):lc(e)>=lc(t),"<=":(e,t)=>Oc(e)?e.leq(t):Oc(t)?t.geq(e):lc(e)<=lc(t),contains:(e,t)=>dc(e=lc(e))?e.some((e=>kl(e,t))):!!rc(null==e?void 0:e.indexOf)&&e.indexOf(lc(t))>-1,not:(e,t)=>wl(lc(e),t),and:(e,t,n)=>Sl(lc(e),n)&&Sl(lc(t),n),or:(e,t,n)=>Sl(lc(e),n)||Sl(lc(t),n)};function kl(e,t){return Oc(e)?e.equals(t):Oc(t)?t.equals(e):(e=lc(e),t=lc(t),dc(e)?dc(t)&&function(e,t){return e.length===t.length&&!e.some(((e,n)=>!kl(e,t[n])))}(e,t):e===t)}const Cl=ac(p),Nl=ac(h);var Il=Object.freeze({__proto__:null,exists:function(e){return Pc(this,void 0,void 0,(function*(){try{return yield Cl(e),!0}catch(e){return!1}}))},readFile:function(e){return Nl(e,"utf8")},existsSync:function(e){try{return u(e),!0}catch(e){return!1}},readFileSync:function(e){return d(e,"utf8")},resolve:function(e,t,n){return a(t)||(t+=n),o(e,t)},fallback:function(e){try{return function(e){return f(process.cwd()+"/").resolve(e)}(e)}catch(e){}},dirname:function(e){return c(e)},contains:function(e,t){return e=(e=o(e)).endsWith(r)?e:e+r,t.startsWith(e)},sep:r});function Rl(e,t=0){return JSON.stringify(e,null,t)}var Dl={default:function(e,t,...n){return dc(e=lc(e))||ic(e)?e.length?e:t:(!1!==e||!new Map(n).get("allow_false"))&&(wl(e,this.context)?t:e)},raw:{raw:!0,handler:mc},jsonify:Rl,to_integer:function(e){return Number(e)},json:Rl,inspect:function(e,t=0){const n=[];return JSON.stringify(e,(function(e,t){if("object"!=typeof t||null===t)return t;for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(t)?"[Circular]":(n.push(t),t)}),t)}};const Ol={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},Ll={"&amp;":"&","&lt;":"<","&gt;":">","&#34;":'"',"&#39;":"'"};function Fl(e){return e=oc(e),this.context.memoryLimit.use(e.length),e.replace(/&|<|>|"|'/g,(e=>Ol[e]))}function Ml(e){return e=oc(e),this.context.memoryLimit.use(e.length),e.replace(/&(amp|lt|gt|#34|#39);/g,(e=>Ll[e]))}var Pl=Object.freeze({__proto__:null,escape:Fl,xml_escape:function(e){return Fl.call(this,e)},escape_once:function(e){return Fl.call(this,Ml.call(this,e))},newline_to_br:function(e){const t=oc(e);return this.context.memoryLimit.use(t.length),t.replace(/\r?\n/gm,"<br />\n")},strip_html:function(e){const t=oc(e);return this.context.memoryLimit.use(t.length),t.replace(/<script[\s\S]*?<\/script>|<style[\s\S]*?<\/style>|<.*?>|<!--[\s\S]*?-->/g,"")}});const Bl={root:["."],layouts:["."],partials:["."],relativeReference:!0,jekyllInclude:!1,keyValueSeparator:":",cache:void 0,extname:"",fs:Il,dynamicPartials:!0,jsTruthy:!1,dateFormat:"%A, %B %-e, %Y at %-l:%M %P %z",locale:"",trimTagRight:!1,trimTagLeft:!1,trimOutputRight:!1,trimOutputLeft:!1,greedy:!0,tagDelimiterLeft:"{%",tagDelimiterRight:"%}",outputDelimiterLeft:"{{",outputDelimiterRight:"}}",preserveTimezones:!1,strictFilters:!1,strictVariables:!1,ownPropertyOnly:!0,lenientIf:!1,globals:{},keepOutputType:!1,operators:xl,memoryLimit:1/0,parseLimit:1/0,renderLimit:1/0};function Ul(e,t){if(!e||!Kl(e))return;const n=t?kc:Cc;for(;wc[e.input.charCodeAt(e.end-1-e.trimRight)]&n;)e.trimRight++}function Hl(e,t){if(!e||!Kl(e))return;const n=t?kc:Cc;for(;wc[e.input.charCodeAt(e.begin+e.trimLeft)]&n;)e.trimLeft++;"\n"===e.input.charAt(e.begin+e.trimLeft)&&e.trimLeft++}let jl=class{constructor(e,t=Bl.operators,n,s){this.input=e,this.file=n,this.rawBeginAt=-1,this.p=s?s[0]:0,this.N=s?s[1]:e.length,this.opTrie=Mc(t),this.literalTrie=Mc(Fc)}readExpression(){return new vl(this.readExpressionTokens())}*readExpressionTokens(){for(;this.p<this.N;){const e=this.readOperator();if(e){yield e;continue}const t=this.readValue();if(!t)return;yield t}}readOperator(){this.skipBlank();const e=this.matchTrie(this.opTrie);if(-1!==e)return new ll(this.input,this.p,this.p=e,this.file)}matchTrie(e){let t,n=e,s=this.p;for(;n[this.input[s]]&&s<this.N;)n=n[this.input[s++]],n.end&&(t=n);return t?t.needBoundary&&Nc(this.peek(s-this.p))?-1:s:-1}readFilteredValue(){const e=this.p,t=this.readExpression();this.assert(t.valid(),`invalid value expression: ${this.snapshot()}`);const n=this.readFilters();return new bl(t,n,this.input,e,this.p,this.file)}readFilters(){const e=[];for(;;){const t=this.readFilter();if(!t)return e;e.push(t)}}readFilter(){if(this.skipBlank(),this.end())return null;this.assert("|"===this.read(),'expected "|" before filter');const e=this.readIdentifier();if(!e.size())return this.assert(this.end(),"expected filter name"),null;const t=[];if(this.skipBlank(),":"===this.peek())do{++this.p;const e=this.readFilterArg();e&&t.push(e),this.skipBlank(),this.assert(this.end()||","===this.peek()||"|"===this.peek(),(()=>`unexpected character ${this.snapshot()}`))}while(","===this.peek());else if("|"!==this.peek()&&!this.end())throw this.error('expected ":" after filter name');return new dl(e.getText(),t,this.input,e.begin,this.p,this.file)}readFilterArg(){const e=this.readValue();if(!e)return;if(this.skipBlank(),":"!==this.peek())return e;++this.p;const t=this.readValue();return[e.getText(),t]}readTopLevelTokens(e=Bl){const t=[];for(;this.p<this.N;){const n=this.readTopLevelToken(e);t.push(n)}return function(e,t){let n=!1;for(let s=0;s<e.length;s++){const i=e[s];Yl(i)&&(!n&&i.trimLeft&&Ul(e[s-1],t.greedy),Ql(i)&&("raw"===i.name?n=!0:"endraw"===i.name&&(n=!1)),!n&&i.trimRight&&Hl(e[s+1],t.greedy))}}(t,e),t}readTopLevelToken(e){const{tagDelimiterLeft:t,outputDelimiterLeft:n}=e;return this.rawBeginAt>-1?this.readEndrawOrRawContent(e):this.match(t)?this.readTagToken(e):this.match(n)?this.readOutputToken(e):this.readHTMLToken([t,n])}readHTMLToken(e){const t=this.p;for(;this.p<this.N&&!e.some((e=>this.match(e)));)++this.p;return new sl(this.input,t,this.p,this.file)}readTagToken(e){const{file:t,input:n}=this,s=this.p;if(-1===this.readToDelimiter(e.tagDelimiterRight))throw this.error(`tag ${this.snapshot(s)} not closed`,s);const i=new tl(n,s,this.p,e,t);return"raw"===i.name&&(this.rawBeginAt=s),i}readToDelimiter(e,t=!1){for(this.skipBlank();this.p<this.N;)if(t&&8&this.peekType())this.readQuoted();else if(++this.p,this.rmatch(e))return this.p;return-1}readOutputToken(e=Bl){const{file:t,input:n}=this,{outputDelimiterRight:s}=e,i=this.p;if(-1===this.readToDelimiter(s,!0))throw this.error(`output ${this.snapshot(i)} not closed`,i);return new nl(n,i,this.p,e,t)}readEndrawOrRawContent(e){const{tagDelimiterLeft:t,tagDelimiterRight:n}=e,s=this.p;let i=this.readTo(t)-t.length;for(;this.p<this.N;)if("endraw"===this.readIdentifier().getText())for(;this.p<=this.N;){if(this.rmatch(n)){const t=this.p;return s===i?(this.rawBeginAt=-1,new tl(this.input,s,t,e,this.file)):(this.p=i,new sl(this.input,s,i,this.file))}if(this.rmatch(t))break;this.p++}else i=this.readTo(t)-t.length;throw this.error(`raw ${this.snapshot(this.rawBeginAt)} not closed`,s)}readLiquidTagTokens(e=Bl){const t=[];for(;this.p<this.N;){const n=this.readLiquidTagToken(e);n&&t.push(n)}return t}readLiquidTagToken(e){if(this.skipBlank(),this.end())return;const t=this.p;this.readToDelimiter("\n");const n=this.p;return new El(this.input,t,n,e,this.file)}error(e,t=this.p){return new vc(e,new rl(this.input,t,this.N,this.file))}assert(e,t,n){if(!e)throw this.error("function"==typeof t?t():t,n)}snapshot(e=this.p){return JSON.stringify(function(e,t){return e.length>t?e.slice(0,t-3)+"...":e}(this.input.slice(e,this.N),32))}readWord(){return this.readIdentifier()}readIdentifier(){this.skipBlank();const e=this.p;for(;!this.end()&&Nc(this.peek());)++this.p;return new rl(this.input,e,this.p,this.file)}readNonEmptyIdentifier(){const e=this.readIdentifier();return e.size()?e:void 0}readTagName(){return this.skipBlank(),"#"===this.input[this.p]?this.input.slice(this.p,++this.p):this.readIdentifier().getText()}readHashes(e){const t=[];for(;;){const n=this.readHash(e);if(!n)return t;t.push(n)}}readHash(e){this.skipBlank(),","===this.peek()&&++this.p;const t=this.p,n=this.readNonEmptyIdentifier();if(!n)return;let s;this.skipBlank();const i=ic(e)?e:e?"=":":";return this.peek()===i&&(++this.p,s=this.readValue()),new pl(this.input,t,this.p,n,s,this.file)}remaining(){return this.input.slice(this.p,this.N)}advance(e=1){this.p+=e}end(){return this.p>=this.N}read(){return this.input[this.p++]}readTo(e){for(;this.p<this.N;)if(++this.p,this.rmatch(e))return this.p;return-1}readValue(){this.skipBlank();const e=this.p,t=this.readLiteral()||this.readQuoted()||this.readRange()||this.readNumber(),n=this.readProperties(!t);return n.length?new ul(t,n,this.input,e,this.p):t}readScopeValue(){this.skipBlank();const e=this.p,t=this.readProperties();if(t.length)return new ul(void 0,t,this.input,e,this.p)}readProperties(e=!0){const t=[];for(;;)if("["!==this.peek()){if(e&&!t.length){const e=this.readNonEmptyIdentifier();if(e){t.push(e);continue}}if("."!==this.peek()||"."===this.peek(1))break;{this.p++;const e=this.readNonEmptyIdentifier();if(!e)break;t.push(e)}}else{this.p++;const e=this.readValue()||new rl(this.input,this.p,this.p,this.file);this.assert(-1!==this.readTo("]"),"[ not closed"),t.push(e)}return t}readNumber(){this.skipBlank();let e=!1,t=!1,n=0;for(64&this.peekType()&&n++;this.p+n<=this.N;)if(32&this.peekType(n))t=!0,n++;else{if("."!==this.peek(n)||"."===this.peek(n+1))break;if(e||!t)return;e=!0,n++}if(t&&!Nc(this.peek(n))){const e=new il(this.input,this.p,this.p+n,this.file);return this.advance(n),e}}readLiteral(){this.skipBlank();const e=this.matchTrie(this.literalTrie);if(-1===e)return;const t=new al(this.input,this.p,e,this.file);return this.p=e,t}readRange(){this.skipBlank();const e=this.p;if("("!==this.peek())return;++this.p;const t=this.readValueOrThrow();this.p+=2;const n=this.readValueOrThrow();return++this.p,new yl(this.input,e,this.p,t,n,this.file)}readValueOrThrow(){const e=this.readValue();return this.assert(e,(()=>`unexpected token ${this.snapshot()}, value expected`)),e}readQuoted(){this.skipBlank();const e=this.p;if(!(8&this.peekType()))return;++this.p;let t=!1;for(;this.p<this.N&&(++this.p,this.input[this.p-1]!==this.input[e]||t);)t?t=!1:"\\"===this.input[this.p-1]&&(t=!0);return new _l(this.input,e,this.p,this.file)}*readFileNameTemplate(e){const{outputDelimiterLeft:t}=e,n=[","," ",t],s=new Set(n);for(;this.p<this.N&&!s.has(this.peek());)yield this.match(t)?this.readOutputToken(e):this.readHTMLToken(n)}match(e){for(let t=0;t<e.length;t++)if(e[t]!==this.input[this.p+t])return!1;return!0}rmatch(e){for(let t=0;t<e.length;t++)if(e[e.length-1-t]!==this.input[this.p-1-t])return!1;return!0}peekType(e=0){return this.p+e>=this.N?0:wc[this.input.charCodeAt(this.p+e)]}peek(e=0){return this.p+e>=this.N?"":this.input[this.p+e]}skipBlank(){for(;this.peekType()&kc;)++this.p}};class Gl{constructor(e,t,n){this.token=e,this.name=e.name,this.handler=rc(t)?t:rc(null==t?void 0:t.handler)?t.handler:mc,this.raw=!rc(t)&&!!(null==t?void 0:t.raw),this.args=e.args,this.liquid=n}*render(e,t){const n=[];for(const e of this.args)dc(e)?n.push([e[0],yield Tl(e[1],t)]):n.push(yield Tl(e,t));return yield this.handler.apply({context:t,token:this.token,liquid:this.liquid},[e,...n])}}class $l{constructor(e,t){this.filters=[];const n="string"==typeof e?new jl(e,t.options.operators).readFilteredValue():e;this.initial=n.initial,this.filters=n.filters.map((e=>new Gl(e,this.getFilter(t,e.name),t)))}*value(e,t){t=t||e.opts.lenientIf&&this.filters.length>0&&"default"===this.filters[0].name;let n=yield this.initial.evaluate(e,t);for(const t of this.filters)n=yield t.render(n,e);return n}getFilter(e,t){const n=e.filters[t];return Ic(n||!e.options.strictFilters,(()=>`undefined filter: ${t}`)),n}}var ql,zl,Wl;function Yl(e){return!!(Xl(e)&zl.Delimited)}function Vl(e){return Xl(e)===zl.Operator}function Kl(e){return Xl(e)===zl.HTML}function Ql(e){return Xl(e)===zl.Tag}function Xl(e){return e?e.kind:-1}!function(e){e.Partials="partials",e.Layouts="layouts",e.Root="root"}(ql||(ql={})),function(e){e[e.Number=1]="Number",e[e.Literal=2]="Literal",e[e.Tag=4]="Tag",e[e.Output=8]="Output",e[e.HTML=16]="HTML",e[e.Filter=32]="Filter",e[e.Hash=64]="Hash",e[e.PropertyAccess=128]="PropertyAccess",e[e.Word=256]="Word",e[e.Range=512]="Range",e[e.Quoted=1024]="Quoted",e[e.Operator=2048]="Operator",e[e.FilteredValue=4096]="FilteredValue",e[e.Delimited=12]="Delimited"}(zl||(zl={})),function(e){e[e.OUTPUT=0]="OUTPUT",e[e.STORE=1]="STORE"}(Wl||(Wl={}));const Zl=_c(Math.abs),Jl=_c(Math.max),eu=_c(Math.min),tu=_c(Math.ceil),nu=_c(((e,t,n=!1)=>n?Math.floor(e/t):e/t)),su=_c(Math.floor),iu=_c(((e,t)=>e-t)),ru=_c(((e,t)=>e%t)),au=_c(((e,t)=>e*t));var ou=Object.freeze({__proto__:null,abs:Zl,at_least:Jl,at_most:eu,ceil:tu,divided_by:nu,floor:su,minus:iu,modulo:ru,times:au,round:function(e,t=0){e=lc(e),t=lc(t);const n=Math.pow(10,t);return Math.round(e*n)/n},plus:function(e,t){return e=lc(e),t=lc(t),Number(e)+Number(t)}});const cu=/[^\p{M}\p{L}\p{Nd}]+/gu,lu={raw:/\s+/g,default:cu,pretty:/[^\p{M}\p{L}\p{Nd}._~!$&'()+,;=@]+/gu,ascii:/[^A-Za-z0-9]+/g,latin:cu,none:null};var uu=Object.freeze({__proto__:null,url_decode:e=>decodeURIComponent(oc(e)).replace(/\+/g," "),url_encode:e=>encodeURIComponent(oc(e)).replace(/%20/g,"+"),cgi_escape:e=>encodeURIComponent(oc(e)).replace(/%20/g,"+").replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())),uri_escape:e=>encodeURI(oc(e)).replace(/%5B/g,"[").replace(/%5D/g,"]"),slugify:function(e,t="default",n=!1){e=oc(e);const s=lu[t];return s&&("latin"===t&&(e=function(e){return e.replace(/[]/g,"a").replace(/[]/g,"ae").replace(/[]/g,"c").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"d").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[]/g,"ss").replace(/[]/g,"oe").replace(/[]/g,"th").replace(/[]/g,"SS").replace(/[]/g,"OE").replace(/[]/g,"TH")}(e)),e=e.replace(s,"-").replace(/^-|-$/g,"")),n?e:e.toLowerCase()}});const du=_c((function(e,t){const n=cc(e),s=uc(t)?" ":oc(t),i=n.length*(1+s.length);return this.context.memoryLimit.use(i),n.join(s)})),pu=_c((e=>{return dc(e)?(t=e)[t.length-1]:"";var t})),hu=_c((e=>dc(e)?e[0]:"")),fu=_c((function(e){const t=cc(e);return this.context.memoryLimit.use(t.length),[...t].reverse()}));function mu(e,t=[]){const n=cc(e),s=cc(t);return this.context.memoryLimit.use(n.length+s.length),n.concat(s)}var gu=Object.freeze({__proto__:null,join:du,last:pu,first:hu,reverse:fu,sort:function*(e,t){const n=[],s=cc(e);this.context.memoryLimit.use(s.length);for(const e of s)n.push([e,t?yield this.context._getFromScope(e,oc(t).split("."),!1):e]);return n.sort(((e,t)=>{const n=e[1],s=t[1];return n<s?-1:n>s?1:0})).map((e=>e[0]))},sort_natural:function(e,t){const n=oc(t),s=void 0===t?gc:(e,t)=>gc(e[n],t[n]),i=cc(e);return this.context.memoryLimit.use(i.length),[...i].sort(s)},size:e=>e&&e.length||0,map:function*(e,t){const n=[],s=cc(e);this.context.memoryLimit.use(s.length);for(const e of s)n.push(yield this.context._getFromScope(e,oc(t),!1));return n},sum:function*(e,t){let n=0;const s=cc(e);for(const e of s){const s=Number(t?yield this.context._getFromScope(e,oc(t),!1):e);n+=Number.isNaN(s)?0:s}return n},compact:function(e){const t=cc(e);return this.context.memoryLimit.use(t.length),t.filter((e=>!uc(lc(e))))},concat:mu,push:function(e,t){return mu.call(this,e,[t])},unshift:function(e,t){const n=cc(e);this.context.memoryLimit.use(n.length);const s=[...n];return s.unshift(t),s},pop:function(e){const t=[...cc(e)];return t.pop(),t},shift:function(e){const t=cc(e);this.context.memoryLimit.use(t.length);const n=[...t];return n.shift(),n},slice:function(e,t,n=1){return uc(e=lc(e))?[]:(dc(e)||(e=oc(e)),t=t<0?e.length+t:t,this.context.memoryLimit.use(n),e.slice(t,t+n))},where:function*(e,t,n){const s=[];e=cc(e),this.context.memoryLimit.use(e.length);const i=new jl(oc(t)).readScopeValue();for(const t of e)s.push(yield Tl(i,this.context.spawn(t)));const r=this.context.opts.jekyllWhere?e=>Rc.is(n)?kl(e,n):dc(e)?function(e,t){return e.some((e=>kl(e,t)))}(e,n):kl(e,n):e=>kl(e,n);return e.filter(((e,t)=>void 0===n?Sl(s[t],this.context):r(s[t])))},where_exp:function*(e,t,n){const s=[],i=new $l(oc(n),this.liquid),r=cc(e);this.context.memoryLimit.use(r.length);for(const e of r){(yield i.value(this.context.spawn({[t]:e})))&&s.push(e)}return s},group_by:function*(e,t){const n=new Map;e=cc(e);const s=new jl(oc(t)).readScopeValue();this.context.memoryLimit.use(e.length);for(const t of e){const e=yield Tl(s,this.context.spawn(t));n.has(e)||n.set(e,[]),n.get(e).push(t)}return[...n.entries()].map((([e,t])=>({name:e,items:t})))},group_by_exp:function*(e,t,n){const s=new Map,i=new $l(oc(n),this.liquid);e=cc(e),this.context.memoryLimit.use(e.length);for(const n of e){const e=yield i.value(this.context.spawn({[t]:n}));s.has(e)||s.set(e,[]),s.get(e).push(n)}return[...s.entries()].map((([e,t])=>({name:e,items:t})))},find:function*(e,t,n){const s=new jl(oc(t)).readScopeValue(),i=cc(e);for(const e of i){if(kl(yield Tl(s,this.context.spawn(e)),n))return e}},find_exp:function*(e,t,n){const s=new $l(oc(n),this.liquid),i=cc(e);for(const e of i){if(yield s.value(this.context.spawn({[t]:e})))return e}},uniq:function(e){return e=cc(e),this.context.memoryLimit.use(e.length),[...new Set(e)]},sample:function(e,t=1){if(uc(e=lc(e)))return[];dc(e)||(e=oc(e)),this.context.memoryLimit.use(t);const n=[...e].sort((()=>Math.random()-.5));return 1===t?n[0]:n.slice(0,t)}});function _u(e,t,n){var s,i,r;const a=(null!==(s=null==e?void 0:e.length)&&void 0!==s?s:0)+(null!==(i=null==t?void 0:t.length)&&void 0!==i?i:0)+(null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0);this.context.memoryLimit.use(a);const o=Eu(e,this.context.opts,n);return o?Wc(o,t=uc(t=lc(t))?this.context.opts.dateFormat:oc(t)):e}function yu(e,t,n,s){const i=Eu(e,this.context.opts);if(!i)return e;if("ordinal"===n){const e=i.getDate();return Wc(i,"US"===s?`${t} ${e}%q, %Y`:`${e}%q ${t} %Y`)}return Wc(i,`%d ${t} %Y`)}function Eu(e,t,n){let s;const i=null!=n?n:t.timezoneOffset,r=t.locale;return"now"===(e=lc(e))||"today"===e?s=new Jc(Date.now(),r,i):s="number"==typeof e?new Jc(1e3*e,r,i):ic(e)?/^\d+$/.test(e)?new Jc(1e3*+e,r,i):t.preserveTimezones&&void 0===n?Jc.createDateFixedToTimezone(e,r):new Jc(e,r,i):new Jc(e,r,i),s.valid()?s:void 0}var bu=Object.freeze({__proto__:null,date:_u,date_to_xmlschema:function(e){return _u.call(this,e,"%Y-%m-%dT%H:%M:%S%:z")},date_to_rfc822:function(e){return _u.call(this,e,"%a, %d %b %Y %H:%M:%S %z")},date_to_string:function(e,t,n){return yu.call(this,e,"%b",t,n)},date_to_long_string:function(e,t,n){return yu.call(this,e,"%B",t,n)}});const vu=/[\u4E00-\u9FFF\uF900-\uFAFF\u3400-\u4DBF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF]/gu,Tu=/[^\u4E00-\u9FFF\uF900-\uFAFF\u3400-\u4DBF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF\s]+/gu;var Au=Object.freeze({__proto__:null,append:function(e,t){Ic(2===arguments.length,"append expect 2 arguments");const n=oc(e),s=oc(t);return this.context.memoryLimit.use(n.length+s.length),n+s},prepend:function(e,t){Ic(2===arguments.length,"prepend expect 2 arguments");const n=oc(e),s=oc(t);return this.context.memoryLimit.use(n.length+s.length),s+n},lstrip:function(e,t){const n=oc(e);return this.context.memoryLimit.use(n.length),t?(t=yc(oc(t)),n.replace(new RegExp(`^[${t}]+`,"g"),"")):n.replace(/^\s+/,"")},downcase:function(e){const t=oc(e);return this.context.memoryLimit.use(t.length),t.toLowerCase()},upcase:function(e){const t=oc(e);return this.context.memoryLimit.use(t.length),oc(t).toUpperCase()},remove:function(e,t){const n=oc(e);return this.context.memoryLimit.use(n.length),n.split(oc(t)).join("")},remove_first:function(e,t){const n=oc(e);return this.context.memoryLimit.use(n.length),n.replace(oc(t),"")},remove_last:function(e,t){const n=oc(e);this.context.memoryLimit.use(n.length);const s=oc(t),i=n.lastIndexOf(s);return-1===i?n:n.substring(0,i)+n.substring(i+s.length)},rstrip:function(e,t){return e=oc(e),this.context.memoryLimit.use(e.length),t?(t=yc(oc(t)),e.replace(new RegExp(`[${t}]+$`,"g"),"")):e.replace(/\s+$/,"")},split:function(e,t){const n=oc(e);this.context.memoryLimit.use(n.length);const s=n.split(oc(t));for(;s.length&&""===s[s.length-1];)s.pop();return s},strip:function(e,t){const n=oc(e);return this.context.memoryLimit.use(n.length),t?(t=yc(oc(t)),n.replace(new RegExp(`^[${t}]+`,"g"),"").replace(new RegExp(`[${t}]+$`,"g"),"")):n.trim()},strip_newlines:function(e){const t=oc(e);return this.context.memoryLimit.use(t.length),t.replace(/\r?\n/gm,"")},capitalize:function(e){return e=oc(e),this.context.memoryLimit.use(e.length),e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},replace:function(e,t,n){const s=oc(e);return this.context.memoryLimit.use(s.length),s.split(oc(t)).join(n)},replace_first:function(e,t,n){const s=oc(e);return this.context.memoryLimit.use(s.length),s.replace(oc(t),n)},replace_last:function(e,t,n){const s=oc(e);this.context.memoryLimit.use(s.length);const i=oc(t),r=s.lastIndexOf(i);if(-1===r)return s;const a=oc(n);return s.substring(0,r)+a+s.substring(r+i.length)},truncate:function(e,t=50,n="..."){const s=oc(e);return this.context.memoryLimit.use(s.length),s.length<=t?e:s.substring(0,t-n.length)+n},truncatewords:function(e,t=15,n="..."){const s=oc(e);this.context.memoryLimit.use(s.length);const i=s.split(/\s+/);t<=0&&(t=1);let r=i.slice(0,t).join(" ");return i.length>=t&&(r+=n),r},normalize_whitespace:function(e){const t=oc(e);return this.context.memoryLimit.use(t.length),t.replace(/\s+/g," ")},number_of_words:function(e,t){const n=oc(e);if(this.context.memoryLimit.use(n.length),!(e=n.trim()))return 0;switch(t){case"cjk":return(e.match(vu)||[]).length+(e.match(Tu)||[]).length;case"auto":return vu.test(e)?e.match(vu).length+(e.match(Tu)||[]).length:e.split(/\s+/).length;default:return e.split(/\s+/).length}},array_to_sentence_string:function(e,t="and"){switch(this.context.memoryLimit.use(e.length),e.length){case 0:return"";case 1:return e[0];case 2:return`${e[0]} ${t} ${e[1]}`;default:return`${e.slice(0,-1).join(", ")}, ${t} ${e[e.length-1]}`}}});Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Pl),ou),uu),gu),bu),Au),Dl);const Su={};function wu(e,t){"string"!=typeof t&&(t=wu.defaultChars);const n=function(e){let t=Su[e];if(t)return t;t=Su[e]=[];for(let e=0;e<128;e++){const n=String.fromCharCode(e);t.push(n)}for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);t[s]="%"+("0"+s.toString(16).toUpperCase()).slice(-2)}return t}(t);return e.replace(/(%[a-f0-9]{2})+/gi,(function(e){let t="";for(let s=0,i=e.length;s<i;s+=3){const r=parseInt(e.slice(s+1,s+3),16);if(r<128)t+=n[r];else{if(192==(224&r)&&s+3<i){const n=parseInt(e.slice(s+4,s+6),16);if(128==(192&n)){const e=r<<6&1984|63&n;t+=e<128?"":String.fromCharCode(e),s+=3;continue}}if(224==(240&r)&&s+6<i){const n=parseInt(e.slice(s+4,s+6),16),i=parseInt(e.slice(s+7,s+9),16);if(128==(192&n)&&128==(192&i)){const e=r<<12&61440|n<<6&4032|63&i;t+=e<2048||e>=55296&&e<=57343?"":String.fromCharCode(e),s+=6;continue}}if(240==(248&r)&&s+9<i){const n=parseInt(e.slice(s+4,s+6),16),i=parseInt(e.slice(s+7,s+9),16),a=parseInt(e.slice(s+10,s+12),16);if(128==(192&n)&&128==(192&i)&&128==(192&a)){let e=r<<18&1835008|n<<12&258048|i<<6&4032|63&a;e<65536||e>1114111?t+="":(e-=65536,t+=String.fromCharCode(55296+(e>>10),56320+(1023&e))),s+=9;continue}}t+=""}}return t}))}wu.defaultChars=";/?:@&=+$,#",wu.componentChars="";const xu={};function ku(e,t,n){"string"!=typeof t&&(n=t,t=ku.defaultChars),void 0===n&&(n=!0);const s=function(e){let t=xu[e];if(t)return t;t=xu[e]=[];for(let e=0;e<128;e++){const n=String.fromCharCode(e);/^[0-9a-z]$/i.test(n)?t.push(n):t.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}(t);let i="";for(let t=0,r=e.length;t<r;t++){const a=e.charCodeAt(t);if(n&&37===a&&t+2<r&&/^[0-9a-f]{2}$/i.test(e.slice(t+1,t+3)))i+=e.slice(t,t+3),t+=2;else if(a<128)i+=s[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&t+1<r){const n=e.charCodeAt(t+1);if(n>=56320&&n<=57343){i+=encodeURIComponent(e[t]+e[t+1]),t++;continue}}i+="%EF%BF%BD"}else i+=encodeURIComponent(e[t])}return i}function Cu(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Nu(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}ku.defaultChars=";/?:@&=+$,-_.!~*'()#",ku.componentChars="-_.!~*'()";const Iu=/^([a-z0-9.+-]+:)/i,Ru=/:[0-9]*$/,Du=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ou=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Lu=["'"].concat(Ou),Fu=["%","/","?",";","#"].concat(Lu),Mu=["/","?","#"],Pu=/^[+a-z0-9A-Z_-]{0,63}$/,Bu=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Uu={javascript:!0,"javascript:":!0},Hu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ju(e,t){if(e&&e instanceof Nu)return e;const n=new Nu;return n.parse(e,t),n}Nu.prototype.parse=function(e,t){let n,s,i,r=e;if(r=r.trim(),!t&&1===e.split("#").length){const e=Du.exec(r);if(e)return this.pathname=e[1],e[2]&&(this.search=e[2]),this}let a=Iu.exec(r);if(a&&(a=a[0],n=a.toLowerCase(),this.protocol=a,r=r.substr(a.length)),(t||a||r.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i="//"===r.substr(0,2),!i||a&&Uu[a]||(r=r.substr(2),this.slashes=!0)),!Uu[a]&&(i||a&&!Hu[a])){let e,t,n=-1;for(let e=0;e<Mu.length;e++)s=r.indexOf(Mu[e]),-1!==s&&(-1===n||s<n)&&(n=s);t=-1===n?r.lastIndexOf("@"):r.lastIndexOf("@",n),-1!==t&&(e=r.slice(0,t),r=r.slice(t+1),this.auth=e),n=-1;for(let e=0;e<Fu.length;e++)s=r.indexOf(Fu[e]),-1!==s&&(-1===n||s<n)&&(n=s);-1===n&&(n=r.length),":"===r[n-1]&&n--;const i=r.slice(0,n);r=r.slice(n),this.parseHost(i),this.hostname=this.hostname||"";const a="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!a){const e=this.hostname.split(/\./);for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n&&!n.match(Pu)){let s="";for(let e=0,t=n.length;e<t;e++)n.charCodeAt(e)>127?s+="x":s+=n[e];if(!s.match(Pu)){const s=e.slice(0,t),i=e.slice(t+1),a=n.match(Bu);a&&(s.push(a[1]),i.unshift(a[2])),i.length&&(r=i.join(".")+r),this.hostname=s.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),a&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=r.indexOf("#");-1!==o&&(this.hash=r.substr(o),r=r.slice(0,o));const c=r.indexOf("?");return-1!==c&&(this.search=r.substr(c),r=r.slice(0,c)),r&&(this.pathname=r),Hu[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Nu.prototype.parseHost=function(e){let t=Ru.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Gu,$u=Object.freeze({__proto__:null,decode:wu,encode:ku,format:Cu,parse:ju}),qu=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,zu=/[\0-\x1F\x7F-\x9F]/,Wu=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Yu=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Vu=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Ku=Object.freeze({__proto__:null,Any:qu,Cc:zu,Cf:/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P:Wu,S:Yu,Z:Vu}),Qu=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0)))),Xu=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((e=>e.charCodeAt(0))));const Zu=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Ju=null!==(Gu=String.fromCodePoint)&&void 0!==Gu?Gu:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};var ed;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(ed||(ed={}));var td,nd,sd;function id(e){return e>=ed.ZERO&&e<=ed.NINE}function rd(e){return e>=ed.UPPER_A&&e<=ed.UPPER_F||e>=ed.LOWER_A&&e<=ed.LOWER_F}function ad(e){return e===ed.EQUALS||function(e){return e>=ed.UPPER_A&&e<=ed.UPPER_Z||e>=ed.LOWER_A&&e<=ed.LOWER_Z||id(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(td||(td={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(nd||(nd={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(sd||(sd={}));let od=class{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=nd.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=sd.Strict}startEntity(e){this.decodeMode=e,this.state=nd.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case nd.EntityStart:return e.charCodeAt(t)===ed.NUM?(this.state=nd.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=nd.NamedEntity,this.stateNamedEntity(e,t));case nd.NumericStart:return this.stateNumericStart(e,t);case nd.NumericDecimal:return this.stateNumericDecimal(e,t);case nd.NumericHex:return this.stateNumericHex(e,t);case nd.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===ed.LOWER_X?(this.state=nd.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=nd.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,s){if(t!==n){const i=n-t;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(t,i),s),this.consumed+=i}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const s=e.charCodeAt(t);if(!id(s)&&!rd(s))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(s,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const s=e.charCodeAt(t);if(!id(s))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(s,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===ed.SEMI)this.consumed+=1;else if(this.decodeMode===sd.Strict)return 0;return this.emitCodePoint(function(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=Zu.get(e))&&void 0!==t?t:e}(this.result),this.consumed),this.errors&&(e!==ed.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&td.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const r=e.charCodeAt(t);if(this.treeIndex=ld(n,s,this.treeIndex+Math.max(1,i),r),this.treeIndex<0)return 0===this.result||this.decodeMode===sd.Attribute&&(0===i||ad(r))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&td.VALUE_LENGTH)>>14,0!==i){if(r===ed.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==sd.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,s=(n[t]&td.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,s,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:s}=this;return this.emitCodePoint(1===t?s[e]&~td.VALUE_LENGTH:s[e+1],n),3===t&&this.emitCodePoint(s[e+2],n),n}end(){var e;switch(this.state){case nd.NamedEntity:return 0===this.result||this.decodeMode===sd.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case nd.NumericDecimal:return this.emitNumericEntity(0,2);case nd.NumericHex:return this.emitNumericEntity(0,3);case nd.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case nd.EntityStart:return 0}}};function cd(e){let t="";const n=new od(e,(e=>t+=Ju(e)));return function(e,s){let i=0,r=0;for(;(r=e.indexOf("&",r))>=0;){t+=e.slice(i,r),n.startEntity(s);const a=n.write(e,r+1);if(a<0){i=r+n.end();break}i=r+a,r=0===a?i+1:i}const a=t+e.slice(i);return t="",a}}function ld(e,t,n,s){const i=(t&td.BRANCH_LENGTH)>>7,r=t&td.JUMP_TABLE;if(0===i)return 0!==r&&s===r?n:-1;if(r){const t=s-r;return t<0||t>=i?-1:e[n+t]-1}let a=n,o=a+i-1;for(;a<=o;){const t=a+o>>>1,n=e[t];if(n<s)a=t+1;else{if(!(n>s))return e[t+i];o=t-1}}return-1}const ud=cd(Qu);function dd(e,t=sd.Legacy){return ud(e,t)}function pd(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)}cd(Xu);const hd=Object.prototype.hasOwnProperty;function fd(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(n){e[n]=t[n]}))}})),e}function md(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function gd(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(!!(65535&~e&&65534!=(65535&e))&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function _d(e){if(e>65535){const t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const yd=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Ed=new RegExp(yd.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),bd=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function vd(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Ed,(function(e,t,n){return t||function(e,t){if(35===t.charCodeAt(0)&&bd.test(t)){const n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return gd(n)?_d(n):e}const n=dd(e);return n!==e?n:e}(e,n)}))}const Td=/[&<>"]/,Ad=/[&<>"]/g,Sd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function wd(e){return Sd[e]}function xd(e){return Td.test(e)?e.replace(Ad,wd):e}const kd=/[.?*+^$[\]\\(){}|-]/g;function Cd(e){switch(e){case 9:case 32:return!0}return!1}function Nd(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Id(e){return Wu.test(e)||Yu.test(e)}function Rd(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Dd(e){return e=e.trim().replace(/\s+/g," "),""==="".toLowerCase()&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Od={mdurl:$u,ucmicro:Ku};var Ld=Object.freeze({__proto__:null,arrayReplaceAt:md,assign:fd,escapeHtml:xd,escapeRE:function(e){return e.replace(kd,"\\$&")},fromCodePoint:_d,has:function(e,t){return hd.call(e,t)},isMdAsciiPunct:Rd,isPunctChar:Id,isSpace:Cd,isString:pd,isValidEntityCode:gd,isWhiteSpace:Nd,lib:Od,normalizeReference:Dd,unescapeAll:vd,unescapeMd:function(e){return e.indexOf("\\")<0?e:e.replace(yd,"$1")}});var Fd=Object.freeze({__proto__:null,parseLinkDestination:function(e,t,n){let s,i=t;const r={ok:!1,pos:0,str:""};if(60===e.charCodeAt(i)){for(i++;i<n;){if(s=e.charCodeAt(i),10===s)return r;if(60===s)return r;if(62===s)return r.pos=i+1,r.str=vd(e.slice(t+1,i)),r.ok=!0,r;92===s&&i+1<n?i+=2:i++}return r}let a=0;for(;i<n&&(s=e.charCodeAt(i),32!==s)&&!(s<32||127===s);)if(92===s&&i+1<n){if(32===e.charCodeAt(i+1))break;i+=2}else{if(40===s&&(a++,a>32))return r;if(41===s){if(0===a)break;a--}i++}return t===i||0!==a||(r.str=vd(e.slice(t,i)),r.pos=i,r.ok=!0),r},parseLinkLabel:function(e,t,n){let s,i,r,a;const o=e.posMax,c=e.pos;for(e.pos=t+1,s=1;e.pos<o;){if(r=e.src.charCodeAt(e.pos),93===r&&(s--,0===s)){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),91===r)if(a===e.pos-1)s++;else if(n)return e.pos=c,-1}let l=-1;return i&&(l=e.pos),e.pos=c,l},parseLinkTitle:function(e,t,n,s){let i,r=t;const a={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(s)a.str=s.str,a.marker=s.marker;else{if(r>=n)return a;let s=e.charCodeAt(r);if(34!==s&&39!==s&&40!==s)return a;t++,r++,40===s&&(s=41),a.marker=s}for(;r<n;){if(i=e.charCodeAt(r),i===a.marker)return a.pos=r+1,a.str+=vd(e.slice(t,r)),a.ok=!0,a;if(40===i&&41===a.marker)return a;92===i&&r+1<n&&r++,r++}return a.can_continue=!0,a.str+=vd(e.slice(t,r)),a}});const Md={};function Pd(){this.rules=fd({},Md)}function Bd(){this.__rules__=[],this.__cache__=null}function Ud(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}function Hd(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Md.code_inline=function(e,t,n,s,i){const r=e[t];return"<code"+i.renderAttrs(r)+">"+xd(r.content)+"</code>"},Md.code_block=function(e,t,n,s,i){const r=e[t];return"<pre"+i.renderAttrs(r)+"><code>"+xd(e[t].content)+"</code></pre>\n"},Md.fence=function(e,t,n,s,i){const r=e[t],a=r.info?vd(r.info).trim():"";let o,c="",l="";if(a){const e=a.split(/(\s+)/g);c=e[0],l=e.slice(2).join("")}if(o=n.highlight&&n.highlight(r.content,c,l)||xd(r.content),0===o.indexOf("<pre"))return o+"\n";if(a){const e=r.attrIndex("class"),t=r.attrs?r.attrs.slice():[];e<0?t.push(["class",n.langPrefix+c]):(t[e]=t[e].slice(),t[e][1]+=" "+n.langPrefix+c);const s={attrs:t};return`<pre><code${i.renderAttrs(s)}>${o}</code></pre>\n`}return`<pre><code${i.renderAttrs(r)}>${o}</code></pre>\n`},Md.image=function(e,t,n,s,i){const r=e[t];return r.attrs[r.attrIndex("alt")][1]=i.renderInlineAsText(r.children,n,s),i.renderToken(e,t,n)},Md.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},Md.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},Md.text=function(e,t){return xd(e[t].content)},Md.html_block=function(e,t){return e[t].content},Md.html_inline=function(e,t){return e[t].content},Pd.prototype.renderAttrs=function(e){let t,n,s;if(!e.attrs)return"";for(s="",t=0,n=e.attrs.length;t<n;t++)s+=" "+xd(e.attrs[t][0])+'="'+xd(e.attrs[t][1])+'"';return s},Pd.prototype.renderToken=function(e,t,n){const s=e[t];let i="";if(s.hidden)return"";s.block&&-1!==s.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===s.nesting?"</":"<")+s.tag,i+=this.renderAttrs(s),0===s.nesting&&n.xhtmlOut&&(i+=" /");let r=!1;if(s.block&&(r=!0,1===s.nesting&&t+1<e.length)){const n=e[t+1];("inline"===n.type||n.hidden||-1===n.nesting&&n.tag===s.tag)&&(r=!1)}return i+=r?">\n":">",i},Pd.prototype.renderInline=function(e,t,n){let s="";const i=this.rules;for(let r=0,a=e.length;r<a;r++){const a=e[r].type;void 0!==i[a]?s+=i[a](e,r,t,n,this):s+=this.renderToken(e,r,t)}return s},Pd.prototype.renderInlineAsText=function(e,t,n){let s="";for(let i=0,r=e.length;i<r;i++)switch(e[i].type){case"text":case"html_inline":case"html_block":s+=e[i].content;break;case"image":s+=this.renderInlineAsText(e[i].children,t,n);break;case"softbreak":case"hardbreak":s+="\n"}return s},Pd.prototype.render=function(e,t,n){let s="";const i=this.rules;for(let r=0,a=e.length;r<a;r++){const a=e[r].type;"inline"===a?s+=this.renderInline(e[r].children,t,n):void 0!==i[a]?s+=i[a](e,r,t,n,this):s+=this.renderToken(e,r,t,n)}return s},Bd.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},Bd.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))}))}))},Bd.prototype.at=function(e,t,n){const s=this.__find__(e),i=n||{};if(-1===s)throw new Error("Parser rule not found: "+e);this.__rules__[s].fn=t,this.__rules__[s].alt=i.alt||[],this.__cache__=null},Bd.prototype.before=function(e,t,n,s){const i=this.__find__(e),r=s||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null},Bd.prototype.after=function(e,t,n,s){const i=this.__find__(e),r=s||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:r.alt||[]}),this.__cache__=null},Bd.prototype.push=function(e,t,n){const s=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null},Bd.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach((function(e){const s=this.__find__(e);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[s].enabled=!0,n.push(e)}),this),this.__cache__=null,n},Bd.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},Bd.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach((function(e){const s=this.__find__(e);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[s].enabled=!1,n.push(e)}),this),this.__cache__=null,n},Bd.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},Ud.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let n=0,s=t.length;n<s;n++)if(t[n][0]===e)return n;return-1},Ud.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},Ud.prototype.attrSet=function(e,t){const n=this.attrIndex(e),s=[e,t];n<0?this.attrPush(s):this.attrs[n]=s},Ud.prototype.attrGet=function(e){const t=this.attrIndex(e);let n=null;return t>=0&&(n=this.attrs[t][1]),n},Ud.prototype.attrJoin=function(e,t){const n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},Hd.prototype.Token=Ud;const jd=/\r\n?|\n/g,Gd=/\0/g;function $d(e){return/^<\/a\s*>/i.test(e)}const qd=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,zd=/\((c|tm|r)\)/i,Wd=/\((c|tm|r)\)/gi,Yd={c:"",r:"",tm:""};function Vd(e,t){return Yd[t.toLowerCase()]}function Kd(e){let t=0;for(let n=e.length-1;n>=0;n--){const s=e[n];"text"!==s.type||t||(s.content=s.content.replace(Wd,Vd)),"link_open"===s.type&&"auto"===s.info&&t--,"link_close"===s.type&&"auto"===s.info&&t++}}function Qd(e){let t=0;for(let n=e.length-1;n>=0;n--){const s=e[n];"text"!==s.type||t||qd.test(s.content)&&(s.content=s.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1").replace(/(^|\s)--(?=\s|$)/gm,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1")),"link_open"===s.type&&"auto"===s.info&&t--,"link_close"===s.type&&"auto"===s.info&&t++}}const Xd=/['"]/,Zd=/['"]/g,Jd="";function ep(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function tp(e,t){let n;const s=[];for(let i=0;i<e.length;i++){const r=e[i],a=e[i].level;for(n=s.length-1;n>=0&&!(s[n].level<=a);n--);if(s.length=n+1,"text"!==r.type)continue;let o=r.content,c=0,l=o.length;e:for(;c<l;){Zd.lastIndex=c;const u=Zd.exec(o);if(!u)break;let d=!0,p=!0;c=u.index+1;const h="'"===u[0];let f=32;if(u.index-1>=0)f=o.charCodeAt(u.index-1);else for(n=i-1;n>=0&&("softbreak"!==e[n].type&&"hardbreak"!==e[n].type);n--)if(e[n].content){f=e[n].content.charCodeAt(e[n].content.length-1);break}let m=32;if(c<l)m=o.charCodeAt(c);else for(n=i+1;n<e.length&&("softbreak"!==e[n].type&&"hardbreak"!==e[n].type);n++)if(e[n].content){m=e[n].content.charCodeAt(0);break}const g=Rd(f)||Id(String.fromCharCode(f)),_=Rd(m)||Id(String.fromCharCode(m)),y=Nd(f),E=Nd(m);if(E?d=!1:_&&(y||g||(d=!1)),y?p=!1:g&&(E||_||(p=!1)),34===m&&'"'===u[0]&&f>=48&&f<=57&&(p=d=!1),d&&p&&(d=g,p=_),d||p){if(p)for(n=s.length-1;n>=0;n--){let d=s[n];if(s[n].level<a)break;if(d.single===h&&s[n].level===a){let a,p;d=s[n],h?(a=t.md.options.quotes[2],p=t.md.options.quotes[3]):(a=t.md.options.quotes[0],p=t.md.options.quotes[1]),r.content=ep(r.content,u.index,p),e[d.token].content=ep(e[d.token].content,d.pos,a),c+=p.length-1,d.token===i&&(c+=a.length-1),o=r.content,l=o.length,s.length=n;continue e}}d?s.push({token:i,pos:u.index,single:h,level:a}):p&&h&&(r.content=ep(r.content,u.index,Jd))}else h&&(r.content=ep(r.content,u.index,Jd))}}}const np=[["normalize",function(e){let t;t=e.src.replace(jd,"\n"),t=t.replace(Gd,""),e.src=t}],["block",function(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}],["inline",function(e){const t=e.tokens;for(let n=0,s=t.length;n<s;n++){const s=t[n];"inline"===s.type&&e.md.inline.parse(s.content,e.md,e.env,s.children)}}],["linkify",function(e){const t=e.tokens;var n;if(e.md.options.linkify)for(let s=0,i=t.length;s<i;s++){if("inline"!==t[s].type||!e.md.linkify.pretest(t[s].content))continue;let i=t[s].children,r=0;for(let a=i.length-1;a>=0;a--){const o=i[a];if("link_close"!==o.type){if("html_inline"===o.type&&(n=o.content,/^<a[>\s]/i.test(n)&&r>0&&r--,$d(o.content)&&r++),!(r>0)&&"text"===o.type&&e.md.linkify.test(o.content)){const n=o.content;let r=e.md.linkify.match(n);const c=[];let l=o.level,u=0;r.length>0&&0===r[0].index&&a>0&&"text_special"===i[a-1].type&&(r=r.slice(1));for(let t=0;t<r.length;t++){const s=r[t].url,i=e.md.normalizeLink(s);if(!e.md.validateLink(i))continue;let a=r[t].text;a=r[t].schema?"mailto:"!==r[t].schema||/^mailto:/i.test(a)?e.md.normalizeLinkText(a):e.md.normalizeLinkText("mailto:"+a).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+a).replace(/^http:\/\//,"");const o=r[t].index;if(o>u){const t=new e.Token("text","",0);t.content=n.slice(u,o),t.level=l,c.push(t)}const d=new e.Token("link_open","a",1);d.attrs=[["href",i]],d.level=l++,d.markup="linkify",d.info="auto",c.push(d);const p=new e.Token("text","",0);p.content=a,p.level=l,c.push(p);const h=new e.Token("link_close","a",-1);h.level=--l,h.markup="linkify",h.info="auto",c.push(h),u=r[t].lastIndex}if(u<n.length){const t=new e.Token("text","",0);t.content=n.slice(u),t.level=l,c.push(t)}t[s].children=i=md(i,a,c)}}else for(a--;i[a].level!==o.level&&"link_open"!==i[a].type;)a--}}}],["replacements",function(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(zd.test(e.tokens[t].content)&&Kd(e.tokens[t].children),qd.test(e.tokens[t].content)&&Qd(e.tokens[t].children))}],["smartquotes",function(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&Xd.test(e.tokens[t].content)&&tp(e.tokens[t].children,e)}],["text_join",function(e){let t,n;const s=e.tokens,i=s.length;for(let e=0;e<i;e++){if("inline"!==s[e].type)continue;const i=s[e].children,r=i.length;for(t=0;t<r;t++)"text_special"===i[t].type&&(i[t].type="text");for(t=n=0;t<r;t++)"text"===i[t].type&&t+1<r&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}}]];function sp(){this.ruler=new Bd;for(let e=0;e<np.length;e++)this.ruler.push(np[e][0],np[e][1])}function ip(e,t,n,s){this.src=e,this.md=t,this.env=n,this.tokens=s,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let e=0,t=0,n=0,s=0,r=i.length,a=!1;t<r;t++){const o=i.charCodeAt(t);if(!a){if(Cd(o)){n++,9===o?s+=4-s%4:s++;continue}a=!0}10!==o&&t!==r-1||(10!==o&&t++,this.bMarks.push(e),this.eMarks.push(t),this.tShift.push(n),this.sCount.push(s),this.bsCount.push(0),a=!1,n=0,s=0,e=t+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}sp.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,s=t.length;n<s;n++)t[n](e)},sp.prototype.State=Hd,ip.prototype.push=function(e,t,n){const s=new Ud(e,t,n);return s.block=!0,n<0&&this.level--,s.level=this.level,n>0&&this.level++,this.tokens.push(s),s},ip.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},ip.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},ip.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){if(!Cd(this.src.charCodeAt(e)))break}return e},ip.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Cd(this.src.charCodeAt(--e)))return e+1;return e},ip.prototype.skipChars=function(e,t){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},ip.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},ip.prototype.getLines=function(e,t,n,s){if(e>=t)return"";const i=new Array(t-e);for(let r=0,a=e;a<t;a++,r++){let e=0;const o=this.bMarks[a];let c,l=o;for(c=a+1<t||s?this.eMarks[a]+1:this.eMarks[a];l<c&&e<n;){const t=this.src.charCodeAt(l);if(Cd(t))9===t?e+=4-(e+this.bsCount[a])%4:e++;else{if(!(l-o<this.tShift[a]))break;e++}l++}i[r]=e>n?new Array(e-n+1).join(" ")+this.src.slice(l,c):this.src.slice(l,c)}return i.join("")},ip.prototype.Token=Ud;function rp(e,t){const n=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];return e.src.slice(n,s)}function ap(e){const t=[],n=e.length;let s=0,i=e.charCodeAt(s),r=!1,a=0,o="";for(;s<n;)124===i&&(r?(o+=e.substring(a,s-1),a=s):(t.push(o+e.substring(a,s)),o="",a=s+1)),r=92===i,s++,i=e.charCodeAt(s);return t.push(o+e.substring(a)),t}function op(e,t){const n=e.eMarks[t];let s=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(s++);if(42!==i&&45!==i&&43!==i)return-1;if(s<n){if(!Cd(e.src.charCodeAt(s)))return-1}return s}function cp(e,t){const n=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];let i=n;if(i+1>=s)return-1;let r=e.src.charCodeAt(i++);if(r<48||r>57)return-1;for(;;){if(i>=s)return-1;if(r=e.src.charCodeAt(i++),!(r>=48&&r<=57)){if(41===r||46===r)break;return-1}if(i-n>=10)return-1}return i<s&&(r=e.src.charCodeAt(i),!Cd(r))?-1:i}const lp="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",up="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",dp=new RegExp("^(?:"+lp+"|"+up+"|\x3c!---?>|\x3c!--(?:[^-]|-[^-]|--[^>])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Za-z][^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),pp=new RegExp("^(?:"+lp+"|"+up+")"),hp=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"].join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(pp.source+"\\s*$"),/^$/,!1]];const fp=[["table",function(e,t,n,s){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent)return!1;if(e.sCount[i]-e.blkIndent>=4)return!1;let r=e.bMarks[i]+e.tShift[i];if(r>=e.eMarks[i])return!1;const a=e.src.charCodeAt(r++);if(124!==a&&45!==a&&58!==a)return!1;if(r>=e.eMarks[i])return!1;const o=e.src.charCodeAt(r++);if(124!==o&&45!==o&&58!==o&&!Cd(o))return!1;if(45===a&&Cd(o))return!1;for(;r<e.eMarks[i];){const t=e.src.charCodeAt(r);if(124!==t&&45!==t&&58!==t&&!Cd(t))return!1;r++}let c=rp(e,t+1),l=c.split("|");const u=[];for(let e=0;e<l.length;e++){const t=l[e].trim();if(!t){if(0===e||e===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(t))return!1;58===t.charCodeAt(t.length-1)?u.push(58===t.charCodeAt(0)?"center":"right"):58===t.charCodeAt(0)?u.push("left"):u.push("")}if(c=rp(e,t).trim(),-1===c.indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;l=ap(c),l.length&&""===l[0]&&l.shift(),l.length&&""===l[l.length-1]&&l.pop();const d=l.length;if(0===d||d!==u.length)return!1;if(s)return!0;const p=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),f=[t,0];e.push("table_open","table",1).map=f,e.push("thead_open","thead",1).map=[t,t+1],e.push("tr_open","tr",1).map=[t,t+1];for(let t=0;t<l.length;t++){const n=e.push("th_open","th",1);u[t]&&(n.attrs=[["style","text-align:"+u[t]]]);const s=e.push("inline","",0);s.content=l[t].trim(),s.children=[],e.push("th_close","th",-1)}let m;e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let g=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let s=!1;for(let t=0,r=h.length;t<r;t++)if(h[t](e,i,n,!0)){s=!0;break}if(s)break;if(c=rp(e,i).trim(),!c)break;if(e.sCount[i]-e.blkIndent>=4)break;if(l=ap(c),l.length&&""===l[0]&&l.shift(),l.length&&""===l[l.length-1]&&l.pop(),g+=d-l.length,g>65536)break;if(i===t+2){e.push("tbody_open","tbody",1).map=m=[t+2,0]}e.push("tr_open","tr",1).map=[i,i+1];for(let t=0;t<d;t++){const n=e.push("td_open","td",1);u[t]&&(n.attrs=[["style","text-align:"+u[t]]]);const s=e.push("inline","",0);s.content=l[t]?l[t].trim():"",s.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return m&&(e.push("tbody_close","tbody",-1),m[1]=i),e.push("table_close","table",-1),f[1]=i,e.parentType=p,e.line=i,!0},["paragraph","reference"]],["code",function(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let s=t+1,i=s;for(;s<n;)if(e.isEmpty(s))s++;else{if(!(e.sCount[s]-e.blkIndent>=4))break;s++,i=s}e.line=i;const r=e.push("code_block","code",0);return r.content=e.getLines(t,i,4+e.blkIndent,!1)+"\n",r.map=[t,e.line],!0}],["fence",function(e,t,n,s){let i=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(i+3>r)return!1;const a=e.src.charCodeAt(i);if(126!==a&&96!==a)return!1;let o=i;i=e.skipChars(i,a);let c=i-o;if(c<3)return!1;const l=e.src.slice(o,i),u=e.src.slice(i,r);if(96===a&&u.indexOf(String.fromCharCode(a))>=0)return!1;if(s)return!0;let d=t,p=!1;for(;(d++,!(d>=n))&&(i=o=e.bMarks[d]+e.tShift[d],r=e.eMarks[d],!(i<r&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(i)===a&&!(e.sCount[d]-e.blkIndent>=4||(i=e.skipChars(i,a),i-o<c||(i=e.skipSpaces(i),i<r)))){p=!0;break}c=e.sCount[t],e.line=d+(p?1:0);const h=e.push("fence","code",0);return h.info=u,h.content=e.getLines(t+1,d,c,!0),h.markup=l,h.map=[t,e.line],!0},["paragraph","reference","blockquote","list"]],["blockquote",function(e,t,n,s){let i=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];const a=e.lineMax;if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(i))return!1;if(s)return!0;const o=[],c=[],l=[],u=[],d=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let h,f=!1;for(h=t;h<n;h++){const t=e.sCount[h]<e.blkIndent;if(i=e.bMarks[h]+e.tShift[h],r=e.eMarks[h],i>=r)break;if(62===e.src.charCodeAt(i++)&&!t){let t,n,s=e.sCount[h]+1;32===e.src.charCodeAt(i)?(i++,s++,n=!1,t=!0):9===e.src.charCodeAt(i)?(t=!0,(e.bsCount[h]+s)%4==3?(i++,s++,n=!1):n=!0):t=!1;let a=s;for(o.push(e.bMarks[h]),e.bMarks[h]=i;i<r;){const t=e.src.charCodeAt(i);if(!Cd(t))break;9===t?a+=4-(a+e.bsCount[h]+(n?1:0))%4:a++,i++}f=i>=r,c.push(e.bsCount[h]),e.bsCount[h]=e.sCount[h]+1+(t?1:0),l.push(e.sCount[h]),e.sCount[h]=a-s,u.push(e.tShift[h]),e.tShift[h]=i-e.bMarks[h];continue}if(f)break;let s=!1;for(let t=0,i=d.length;t<i;t++)if(d[t](e,h,n,!0)){s=!0;break}if(s){e.lineMax=h,0!==e.blkIndent&&(o.push(e.bMarks[h]),c.push(e.bsCount[h]),u.push(e.tShift[h]),l.push(e.sCount[h]),e.sCount[h]-=e.blkIndent);break}o.push(e.bMarks[h]),c.push(e.bsCount[h]),u.push(e.tShift[h]),l.push(e.sCount[h]),e.sCount[h]=-1}const m=e.blkIndent;e.blkIndent=0;const g=e.push("blockquote_open","blockquote",1);g.markup=">";const _=[t,0];g.map=_,e.md.block.tokenize(e,t,h),e.push("blockquote_close","blockquote",-1).markup=">",e.lineMax=a,e.parentType=p,_[1]=e.line;for(let n=0;n<u.length;n++)e.bMarks[n+t]=o[n],e.tShift[n+t]=u[n],e.sCount[n+t]=l[n],e.bsCount[n+t]=c[n];return e.blkIndent=m,!0},["paragraph","reference","blockquote","list"]],["hr",function(e,t,n,s){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(42!==a&&45!==a&&95!==a)return!1;let o=1;for(;r<i;){const t=e.src.charCodeAt(r++);if(t!==a&&!Cd(t))return!1;t===a&&o++}if(o<3)return!1;if(s)return!0;e.line=t+1;const c=e.push("hr","hr",0);return c.map=[t,e.line],c.markup=Array(o+1).join(String.fromCharCode(a)),!0},["paragraph","reference","blockquote","list"]],["list",function(e,t,n,s){let i,r,a,o,c=t,l=!0;if(e.sCount[c]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[c]-e.listIndent>=4&&e.sCount[c]<e.blkIndent)return!1;let u,d,p,h=!1;if(s&&"paragraph"===e.parentType&&e.sCount[c]>=e.blkIndent&&(h=!0),(p=cp(e,c))>=0){if(u=!0,a=e.bMarks[c]+e.tShift[c],d=Number(e.src.slice(a,p-1)),h&&1!==d)return!1}else{if(!((p=op(e,c))>=0))return!1;u=!1}if(h&&e.skipSpaces(p)>=e.eMarks[c])return!1;if(s)return!0;const f=e.src.charCodeAt(p-1),m=e.tokens.length;u?(o=e.push("ordered_list_open","ol",1),1!==d&&(o.attrs=[["start",d]])):o=e.push("bullet_list_open","ul",1);const g=[c,0];o.map=g,o.markup=String.fromCharCode(f);let _=!1;const y=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";c<n;){r=p,i=e.eMarks[c];const t=e.sCount[c]+p-(e.bMarks[c]+e.tShift[c]);let s=t;for(;r<i;){const t=e.src.charCodeAt(r);if(9===t)s+=4-(s+e.bsCount[c])%4;else{if(32!==t)break;s++}r++}const d=r;let h;h=d>=i?1:s-t,h>4&&(h=1);const m=t+h;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(f);const g=[c,0];o.map=g,u&&(o.info=e.src.slice(a,p-1));const E=e.tight,b=e.tShift[c],v=e.sCount[c],T=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=m,e.tight=!0,e.tShift[c]=d-e.bMarks[c],e.sCount[c]=s,d>=i&&e.isEmpty(c+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,c,n,!0),e.tight&&!_||(l=!1),_=e.line-c>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=T,e.tShift[c]=b,e.sCount[c]=v,e.tight=E,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(f),c=e.line,g[1]=c,c>=n)break;if(e.sCount[c]<e.blkIndent)break;if(e.sCount[c]-e.blkIndent>=4)break;let A=!1;for(let t=0,s=y.length;t<s;t++)if(y[t](e,c,n,!0)){A=!0;break}if(A)break;if(u){if(p=cp(e,c),p<0)break;a=e.bMarks[c]+e.tShift[c]}else if(p=op(e,c),p<0)break;if(f!==e.src.charCodeAt(p-1))break}return o=u?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(f),g[1]=c,e.line=c,e.parentType=E,l&&function(e,t){const n=e.level+2;for(let s=t+2,i=e.tokens.length-2;s<i;s++)e.tokens[s].level===n&&"paragraph_open"===e.tokens[s].type&&(e.tokens[s+2].hidden=!0,e.tokens[s].hidden=!0,s+=2)}(e,m),!0},["paragraph","reference","blockquote"]],["reference",function(e,t,n,s){let i=e.bMarks[t]+e.tShift[t],r=e.eMarks[t],a=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(i))return!1;function o(t){const n=e.lineMax;if(t>=n||e.isEmpty(t))return null;let s=!1;if(e.sCount[t]-e.blkIndent>3&&(s=!0),e.sCount[t]<0&&(s=!0),!s){const s=e.md.block.ruler.getRules("reference"),i=e.parentType;e.parentType="reference";let r=!1;for(let i=0,a=s.length;i<a;i++)if(s[i](e,t,n,!0)){r=!0;break}if(e.parentType=i,r)return null}const i=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(i,r+1)}let c=e.src.slice(i,r+1);r=c.length;let l=-1;for(i=1;i<r;i++){const e=c.charCodeAt(i);if(91===e)return!1;if(93===e){l=i;break}if(10===e){const e=o(a);null!==e&&(c+=e,r=c.length,a++)}else if(92===e&&(i++,i<r&&10===c.charCodeAt(i))){const e=o(a);null!==e&&(c+=e,r=c.length,a++)}}if(l<0||58!==c.charCodeAt(l+1))return!1;for(i=l+2;i<r;i++){const e=c.charCodeAt(i);if(10===e){const e=o(a);null!==e&&(c+=e,r=c.length,a++)}else if(!Cd(e))break}const u=e.md.helpers.parseLinkDestination(c,i,r);if(!u.ok)return!1;const d=e.md.normalizeLink(u.str);if(!e.md.validateLink(d))return!1;i=u.pos;const p=i,h=a,f=i;for(;i<r;i++){const e=c.charCodeAt(i);if(10===e){const e=o(a);null!==e&&(c+=e,r=c.length,a++)}else if(!Cd(e))break}let m,g=e.md.helpers.parseLinkTitle(c,i,r);for(;g.can_continue;){const t=o(a);if(null===t)break;c+=t,i=r,r=c.length,a++,g=e.md.helpers.parseLinkTitle(c,i,r,g)}for(i<r&&f!==i&&g.ok?(m=g.str,i=g.pos):(m="",i=p,a=h);i<r;){if(!Cd(c.charCodeAt(i)))break;i++}if(i<r&&10!==c.charCodeAt(i)&&m)for(m="",i=p,a=h;i<r;){if(!Cd(c.charCodeAt(i)))break;i++}if(i<r&&10!==c.charCodeAt(i))return!1;const _=Dd(c.slice(1,l));return!!_&&(s||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[_]&&(e.env.references[_]={title:m,href:d}),e.line=a),!0)}],["html_block",function(e,t,n,s){let i=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(i))return!1;let a=e.src.slice(i,r),o=0;for(;o<hp.length&&!hp[o][0].test(a);o++);if(o===hp.length)return!1;if(s)return hp[o][2];let c=t+1;if(!hp[o][1].test(a))for(;c<n&&!(e.sCount[c]<e.blkIndent);c++)if(i=e.bMarks[c]+e.tShift[c],r=e.eMarks[c],a=e.src.slice(i,r),hp[o][1].test(a)){0!==a.length&&c++;break}e.line=c;const l=e.push("html_block","",0);return l.map=[t,c],l.content=e.getLines(t,c,e.blkIndent,!0),!0},["paragraph","reference","blockquote"]],["heading",function(e,t,n,s){let i=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.src.charCodeAt(i);if(35!==a||i>=r)return!1;let o=1;for(a=e.src.charCodeAt(++i);35===a&&i<r&&o<=6;)o++,a=e.src.charCodeAt(++i);if(o>6||i<r&&!Cd(a))return!1;if(s)return!0;r=e.skipSpacesBack(r,i);const c=e.skipCharsBack(r,35,i);c>i&&Cd(e.src.charCodeAt(c-1))&&(r=c),e.line=t+1;const l=e.push("heading_open","h"+String(o),1);l.markup="########".slice(0,o),l.map=[t,e.line];const u=e.push("inline","",0);return u.content=e.src.slice(i,r).trim(),u.map=[t,e.line],u.children=[],e.push("heading_close","h"+String(o),-1).markup="########".slice(0,o),!0},["paragraph","reference","blockquote"]],["lheading",function(e,t,n){const s=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let r,a=0,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let t=e.bMarks[o]+e.tShift[o];const n=e.eMarks[o];if(t<n&&(r=e.src.charCodeAt(t),(45===r||61===r)&&(t=e.skipChars(t,r),t=e.skipSpaces(t),t>=n))){a=61===r?1:2;break}}if(e.sCount[o]<0)continue;let t=!1;for(let i=0,r=s.length;i<r;i++)if(s[i](e,o,n,!0)){t=!0;break}if(t)break}if(!a)return!1;const c=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const l=e.push("heading_open","h"+String(a),1);l.markup=String.fromCharCode(r),l.map=[t,e.line];const u=e.push("inline","",0);return u.content=c,u.map=[t,e.line-1],u.children=[],e.push("heading_close","h"+String(a),-1).markup=String.fromCharCode(r),e.parentType=i,!0}],["paragraph",function(e,t,n){const s=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let r=t+1;for(e.parentType="paragraph";r<n&&!e.isEmpty(r);r++){if(e.sCount[r]-e.blkIndent>3)continue;if(e.sCount[r]<0)continue;let t=!1;for(let i=0,a=s.length;i<a;i++)if(s[i](e,r,n,!0)){t=!0;break}if(t)break}const a=e.getLines(t,r,e.blkIndent,!1).trim();e.line=r,e.push("paragraph_open","p",1).map=[t,e.line];const o=e.push("inline","",0);return o.content=a,o.map=[t,e.line],o.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}]];function mp(){this.ruler=new Bd;for(let e=0;e<fp.length;e++)this.ruler.push(fp[e][0],fp[e][1],{alt:(fp[e][2]||[]).slice()})}function gp(e,t,n,s){this.src=e,this.env=n,this.md=t,this.tokens=s,this.tokens_meta=Array(s.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}function _p(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}mp.prototype.tokenize=function(e,t,n){const s=this.ruler.getRules(""),i=s.length,r=e.md.options.maxNesting;let a=t,o=!1;for(;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n))&&!(e.sCount[a]<e.blkIndent);){if(e.level>=r){e.line=n;break}const t=e.line;let c=!1;for(let r=0;r<i;r++)if(c=s[r](e,a,n,!1),c){if(t>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),a=e.line,a<n&&e.isEmpty(a)&&(o=!0,a++,e.line=a)}},mp.prototype.parse=function(e,t,n,s){if(!e)return;const i=new this.State(e,t,n,s);this.tokenize(i,i.line,i.lineMax)},mp.prototype.State=ip,gp.prototype.pushPending=function(){const e=new Ud("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},gp.prototype.push=function(e,t,n){this.pending&&this.pushPending();const s=new Ud(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),s.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(s),this.tokens_meta.push(i),s},gp.prototype.scanDelims=function(e,t){const n=this.posMax,s=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let r=e;for(;r<n&&this.src.charCodeAt(r)===s;)r++;const a=r-e,o=r<n?this.src.charCodeAt(r):32,c=Rd(i)||Id(String.fromCharCode(i)),l=Rd(o)||Id(String.fromCharCode(o)),u=Nd(i),d=Nd(o),p=!d&&(!l||u||c),h=!u&&(!c||d||l);return{can_open:p&&(t||!h||c),can_close:h&&(t||!p||l),length:a}},gp.prototype.Token=Ud;const yp=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;const Ep=[];for(let e=0;e<256;e++)Ep.push(0);function bp(e,t){let n;const s=[],i=t.length;for(let r=0;r<i;r++){const i=t[r];if(126!==i.marker)continue;if(-1===i.end)continue;const a=t[i.end];n=e.tokens[i.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="","text"===e.tokens[a.token-1].type&&"~"===e.tokens[a.token-1].content&&s.push(a.token-1)}for(;s.length;){const t=s.pop();let i=t+1;for(;i<e.tokens.length&&"s_close"===e.tokens[i].type;)i++;i--,t!==i&&(n=e.tokens[i],e.tokens[i]=e.tokens[t],e.tokens[t]=n)}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){Ep[e.charCodeAt(0)]=1}));var vp={tokenize:function(e,t){const n=e.pos,s=e.src.charCodeAt(n);if(t)return!1;if(126!==s)return!1;const i=e.scanDelims(e.pos,!0);let r=i.length;const a=String.fromCharCode(s);if(r<2)return!1;let o;r%2&&(o=e.push("text","",0),o.content=a,r--);for(let t=0;t<r;t+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:s,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0},postProcess:function(e){const t=e.tokens_meta,n=e.tokens_meta.length;bp(e,e.delimiters);for(let s=0;s<n;s++)t[s]&&t[s].delimiters&&bp(e,t[s].delimiters)}};function Tp(e,t){for(let n=t.length-1;n>=0;n--){const s=t[n];if(95!==s.marker&&42!==s.marker)continue;if(-1===s.end)continue;const i=t[s.end],r=n>0&&t[n-1].end===s.end+1&&t[n-1].marker===s.marker&&t[n-1].token===s.token-1&&t[s.end+1].token===i.token+1,a=String.fromCharCode(s.marker),o=e.tokens[s.token];o.type=r?"strong_open":"em_open",o.tag=r?"strong":"em",o.nesting=1,o.markup=r?a+a:a,o.content="";const c=e.tokens[i.token];c.type=r?"strong_close":"em_close",c.tag=r?"strong":"em",c.nesting=-1,c.markup=r?a+a:a,c.content="",r&&(e.tokens[t[n-1].token].content="",e.tokens[t[s.end+1].token].content="",n--)}}var Ap={tokenize:function(e,t){const n=e.pos,s=e.src.charCodeAt(n);if(t)return!1;if(95!==s&&42!==s)return!1;const i=e.scanDelims(e.pos,42===s);for(let t=0;t<i.length;t++){e.push("text","",0).content=String.fromCharCode(s),e.delimiters.push({marker:s,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0},postProcess:function(e){const t=e.tokens_meta,n=e.tokens_meta.length;Tp(e,e.delimiters);for(let s=0;s<n;s++)t[s]&&t[s].delimiters&&Tp(e,t[s].delimiters)}};const Sp=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,wp=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;const xp=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,kp=/^&([a-z][a-z0-9]{1,31});/i;function Cp(e){const t={},n=e.length;if(!n)return;let s=0,i=-2;const r=[];for(let a=0;a<n;a++){const n=e[a];if(r.push(0),e[s].marker===n.marker&&i===n.token-1||(s=a),i=n.token,n.length=n.length||0,!n.close)continue;t.hasOwnProperty(n.marker)||(t[n.marker]=[-1,-1,-1,-1,-1,-1]);const o=t[n.marker][(n.open?3:0)+n.length%3];let c=s-r[s]-1,l=c;for(;c>o;c-=r[c]+1){const t=e[c];if(t.marker===n.marker&&(t.open&&t.end<0)){let s=!1;if((t.close||n.open)&&(t.length+n.length)%3==0&&(t.length%3==0&&n.length%3==0||(s=!0)),!s){const s=c>0&&!e[c-1].open?r[c-1]+1:0;r[a]=a-c+s,r[c]=s,n.open=!1,t.end=a,t.close=!1,l=-1,i=-2;break}}}-1!==l&&(t[n.marker][(n.open?3:0)+(n.length||0)%3]=l)}}const Np=[["text",function(e,t){let n=e.pos;for(;n<e.posMax&&!_p(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}],["linkify",function(e,t){if(!e.md.options.linkify)return!1;if(e.linkLevel>0)return!1;const n=e.pos;if(n+3>e.posMax)return!1;if(58!==e.src.charCodeAt(n))return!1;if(47!==e.src.charCodeAt(n+1))return!1;if(47!==e.src.charCodeAt(n+2))return!1;const s=e.pending.match(yp);if(!s)return!1;const i=s[1],r=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!r)return!1;let a=r.url;if(a.length<=i.length)return!1;a=a.replace(/\*+$/,"");const o=e.md.normalizeLink(a);if(!e.md.validateLink(o))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const t=e.push("link_open","a",1);t.attrs=[["href",o]],t.markup="linkify",t.info="auto";e.push("text","",0).content=e.md.normalizeLinkText(a);const n=e.push("link_close","a",-1);n.markup="linkify",n.info="auto"}return e.pos+=a.length-i.length,!0}],["newline",function(e,t){let n=e.pos;if(10!==e.src.charCodeAt(n))return!1;const s=e.pending.length-1,i=e.posMax;if(!t)if(s>=0&&32===e.pending.charCodeAt(s))if(s>=1&&32===e.pending.charCodeAt(s-1)){let t=s-1;for(;t>=1&&32===e.pending.charCodeAt(t-1);)t--;e.pending=e.pending.slice(0,t),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Cd(e.src.charCodeAt(n));)n++;return e.pos=n,!0}],["escape",function(e,t){let n=e.pos;const s=e.posMax;if(92!==e.src.charCodeAt(n))return!1;if(n++,n>=s)return!1;let i=e.src.charCodeAt(n);if(10===i){for(t||e.push("hardbreak","br",0),n++;n<s&&(i=e.src.charCodeAt(n),Cd(i));)n++;return e.pos=n,!0}let r=e.src[n];if(i>=55296&&i<=56319&&n+1<s){const t=e.src.charCodeAt(n+1);t>=56320&&t<=57343&&(r+=e.src[n+1],n++)}const a="\\"+r;if(!t){const t=e.push("text_special","",0);i<256&&0!==Ep[i]?t.content=r:t.content=a,t.markup=a,t.info="escape"}return e.pos=n+1,!0}],["backticks",function(e,t){let n=e.pos;if(96!==e.src.charCodeAt(n))return!1;const s=n;n++;const i=e.posMax;for(;n<i&&96===e.src.charCodeAt(n);)n++;const r=e.src.slice(s,n),a=r.length;if(e.backticksScanned&&(e.backticks[a]||0)<=s)return t||(e.pending+=r),e.pos+=a,!0;let o,c=n;for(;-1!==(o=e.src.indexOf("`",c));){for(c=o+1;c<i&&96===e.src.charCodeAt(c);)c++;const s=c-o;if(s===a){if(!t){const t=e.push("code_inline","code",0);t.markup=r,t.content=e.src.slice(n,o).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=c,!0}e.backticks[s]=o}return e.backticksScanned=!0,t||(e.pending+=r),e.pos+=a,!0}],["strikethrough",vp.tokenize],["emphasis",Ap.tokenize],["link",function(e,t){let n,s,i,r,a="",o="",c=e.pos,l=!0;if(91!==e.src.charCodeAt(e.pos))return!1;const u=e.pos,d=e.posMax,p=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let f=h+1;if(f<d&&40===e.src.charCodeAt(f)){for(l=!1,f++;f<d&&(n=e.src.charCodeAt(f),Cd(n)||10===n);f++);if(f>=d)return!1;if(c=f,i=e.md.helpers.parseLinkDestination(e.src,f,e.posMax),i.ok){for(a=e.md.normalizeLink(i.str),e.md.validateLink(a)?f=i.pos:a="",c=f;f<d&&(n=e.src.charCodeAt(f),Cd(n)||10===n);f++);if(i=e.md.helpers.parseLinkTitle(e.src,f,e.posMax),f<d&&c!==f&&i.ok)for(o=i.str,f=i.pos;f<d&&(n=e.src.charCodeAt(f),Cd(n)||10===n);f++);}(f>=d||41!==e.src.charCodeAt(f))&&(l=!0),f++}if(l){if(void 0===e.env.references)return!1;if(f<d&&91===e.src.charCodeAt(f)?(c=f+1,f=e.md.helpers.parseLinkLabel(e,f),f>=0?s=e.src.slice(c,f++):f=h+1):f=h+1,s||(s=e.src.slice(p,h)),r=e.env.references[Dd(s)],!r)return e.pos=u,!1;a=r.href,o=r.title}if(!t){e.pos=p,e.posMax=h;const t=[["href",a]];e.push("link_open","a",1).attrs=t,o&&t.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=f,e.posMax=d,!0}],["image",function(e,t){let n,s,i,r,a,o,c,l,u="";const d=e.pos,p=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;const h=e.pos+2,f=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(f<0)return!1;if(r=f+1,r<p&&40===e.src.charCodeAt(r)){for(r++;r<p&&(n=e.src.charCodeAt(r),Cd(n)||10===n);r++);if(r>=p)return!1;for(l=r,o=e.md.helpers.parseLinkDestination(e.src,r,e.posMax),o.ok&&(u=e.md.normalizeLink(o.str),e.md.validateLink(u)?r=o.pos:u=""),l=r;r<p&&(n=e.src.charCodeAt(r),Cd(n)||10===n);r++);if(o=e.md.helpers.parseLinkTitle(e.src,r,e.posMax),r<p&&l!==r&&o.ok)for(c=o.str,r=o.pos;r<p&&(n=e.src.charCodeAt(r),Cd(n)||10===n);r++);else c="";if(r>=p||41!==e.src.charCodeAt(r))return e.pos=d,!1;r++}else{if(void 0===e.env.references)return!1;if(r<p&&91===e.src.charCodeAt(r)?(l=r+1,r=e.md.helpers.parseLinkLabel(e,r),r>=0?i=e.src.slice(l,r++):r=f+1):r=f+1,i||(i=e.src.slice(h,f)),a=e.env.references[Dd(i)],!a)return e.pos=d,!1;u=a.href,c=a.title}if(!t){s=e.src.slice(h,f);const t=[];e.md.inline.parse(s,e.md,e.env,t);const n=e.push("image","img",0),i=[["src",u],["alt",""]];n.attrs=i,n.children=t,n.content=s,c&&i.push(["title",c])}return e.pos=r,e.posMax=p,!0}],["autolink",function(e,t){let n=e.pos;if(60!==e.src.charCodeAt(n))return!1;const s=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const t=e.src.charCodeAt(n);if(60===t)return!1;if(62===t)break}const r=e.src.slice(s+1,n);if(wp.test(r)){const n=e.md.normalizeLink(r);if(!e.md.validateLink(n))return!1;if(!t){const t=e.push("link_open","a",1);t.attrs=[["href",n]],t.markup="autolink",t.info="auto";e.push("text","",0).content=e.md.normalizeLinkText(r);const s=e.push("link_close","a",-1);s.markup="autolink",s.info="auto"}return e.pos+=r.length+2,!0}if(Sp.test(r)){const n=e.md.normalizeLink("mailto:"+r);if(!e.md.validateLink(n))return!1;if(!t){const t=e.push("link_open","a",1);t.attrs=[["href",n]],t.markup="autolink",t.info="auto";e.push("text","",0).content=e.md.normalizeLinkText(r);const s=e.push("link_close","a",-1);s.markup="autolink",s.info="auto"}return e.pos+=r.length+2,!0}return!1}],["html_inline",function(e,t){if(!e.md.options.html)return!1;const n=e.posMax,s=e.pos;if(60!==e.src.charCodeAt(s)||s+2>=n)return!1;const i=e.src.charCodeAt(s+1);if(33!==i&&63!==i&&47!==i&&!function(e){const t=32|e;return t>=97&&t<=122}(i))return!1;const r=e.src.slice(s).match(dp);if(!r)return!1;if(!t){const t=e.push("html_inline","",0);t.content=r[0],a=t.content,/^<a[>\s]/i.test(a)&&e.linkLevel++,function(e){return/^<\/a\s*>/i.test(e)}(t.content)&&e.linkLevel--}var a;return e.pos+=r[0].length,!0}],["entity",function(e,t){const n=e.pos,s=e.posMax;if(38!==e.src.charCodeAt(n))return!1;if(n+1>=s)return!1;if(35===e.src.charCodeAt(n+1)){const s=e.src.slice(n).match(xp);if(s){if(!t){const t="x"===s[1][0].toLowerCase()?parseInt(s[1].slice(1),16):parseInt(s[1],10),n=e.push("text_special","",0);n.content=gd(t)?_d(t):_d(65533),n.markup=s[0],n.info="entity"}return e.pos+=s[0].length,!0}}else{const s=e.src.slice(n).match(kp);if(s){const n=dd(s[0]);if(n!==s[0]){if(!t){const t=e.push("text_special","",0);t.content=n,t.markup=s[0],t.info="entity"}return e.pos+=s[0].length,!0}}}return!1}]],Ip=[["balance_pairs",function(e){const t=e.tokens_meta,n=e.tokens_meta.length;Cp(e.delimiters);for(let e=0;e<n;e++)t[e]&&t[e].delimiters&&Cp(t[e].delimiters)}],["strikethrough",vp.postProcess],["emphasis",Ap.postProcess],["fragments_join",function(e){let t,n,s=0;const i=e.tokens,r=e.tokens.length;for(t=n=0;t<r;t++)i[t].nesting<0&&s--,i[t].level=s,i[t].nesting>0&&s++,"text"===i[t].type&&t+1<r&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}]];function Rp(){this.ruler=new Bd;for(let e=0;e<Np.length;e++)this.ruler.push(Np[e][0],Np[e][1]);this.ruler2=new Bd;for(let e=0;e<Ip.length;e++)this.ruler2.push(Ip[e][0],Ip[e][1])}function Dp(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function Op(e){return Object.prototype.toString.call(e)}function Lp(e){return"[object Function]"===Op(e)}function Fp(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}Rp.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),s=n.length,i=e.md.options.maxNesting,r=e.cache;if(void 0!==r[t])return void(e.pos=r[t]);let a=!1;if(e.level<i){for(let i=0;i<s;i++)if(e.level++,a=n[i](e,!0),e.level--,a){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;a||e.pos++,r[t]=e.pos},Rp.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,s=e.posMax,i=e.md.options.maxNesting;for(;e.pos<s;){const r=e.pos;let a=!1;if(e.level<i)for(let s=0;s<n;s++)if(a=t[s](e,!1),a){if(r>=e.pos)throw new Error("inline rule didn't increment state.pos");break}if(a){if(e.pos>=s)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},Rp.prototype.parse=function(e,t,n,s){const i=new this.State(e,t,n,s);this.tokenize(i);const r=this.ruler2.getRules(""),a=r.length;for(let e=0;e<a;e++)r[e](i)},Rp.prototype.State=gp;const Mp={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};const Pp={"http:":{validate:function(e,t,n){const s=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(s)?s.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const s=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(s)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:s.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const s=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(s)?s.match(n.re.mailto)[0].length:0}}},Bp="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Up="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Hp(e){const t=e.re=function(e){const t={};e=e||{},t.src_Any=qu.source,t.src_Cc=zu.source,t.src_Z=Vu.source,t.src_P=Wu.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?![><]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><]|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}(e.__opts__),n=e.__tlds__.slice();function s(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||n.push(Bp),n.push(t.src_xn),t.src_tlds=n.join("|"),t.email_fuzzy=RegExp(s(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(s(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(s(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(s(t.tpl_host_fuzzy_test),"i");const i=[];function r(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){const n=e.__schemas__[t];if(null===n)return;const s={validate:null,link:null};if(e.__compiled__[t]=s,"[object Object]"===Op(n))return!function(e){return"[object RegExp]"===Op(e)}(n.validate)?Lp(n.validate)?s.validate=n.validate:r(t,n):s.validate=function(e){return function(t,n){const s=t.slice(n);return e.test(s)?s.match(e)[0].length:0}}(n.validate),void(Lp(n.normalize)?s.normalize=n.normalize:n.normalize?r(t,n):s.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===Op(e)}(n)?r(t,n):i.push(t)})),i.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};const a=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(Fp).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+a+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+a+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function jp(e,t){const n=e.__index__,s=e.__last_index__,i=e.__text_cache__.slice(n,s);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=s+t,this.raw=i,this.text=i,this.url=i}function Gp(e,t){const n=new jp(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function $p(e,t){if(!(this instanceof $p))return new $p(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||Mp.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=Dp({},Mp,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Dp({},Pp,e),this.__compiled__={},this.__tlds__=Up,this.__tlds_replaced__=!1,this.re={},Hp(this)}$p.prototype.add=function(e,t){return this.__schemas__[e]=t,Hp(this),this},$p.prototype.set=function(e){return this.__opts__=Dp(this.__opts__,e),this},$p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,n,s,i,r,a,o,c,l;if(this.re.schema_test.test(e))for(o=this.re.schema_search,o.lastIndex=0;null!==(t=o.exec(e));)if(i=this.testSchemaAt(e,t[2],o.lastIndex),i){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(r=n.index+n[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=e.indexOf("@"),l>=0&&null!==(s=e.match(this.re.email_fuzzy))&&(r=s.index+s[1].length,a=s.index+s[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=a))),this.__index__>=0},$p.prototype.pretest=function(e){return this.re.pretest.test(e)},$p.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},$p.prototype.match=function(e){const t=[];let n=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(Gp(this,n)),n=this.__last_index__);let s=n?e.slice(n):e;for(;this.test(s);)t.push(Gp(this,n)),s=s.slice(this.__last_index__),n+=this.__last_index__;return t.length?t:null},$p.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const n=this.testSchemaAt(e,t[2],t[0].length);return n?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n,Gp(this,0)):null},$p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),Hp(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Hp(this),this)},$p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},$p.prototype.onCompile=function(){};const qp=2147483647,zp=36,Wp=/^xn--/,Yp=/[^\0-\x7F]/,Vp=/[\x2E\u3002\uFF0E\uFF61]/g,Kp={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Qp=Math.floor,Xp=String.fromCharCode;function Zp(e){throw new RangeError(Kp[e])}function Jp(e,t){const n=e.split("@");let s="";n.length>1&&(s=n[0]+"@",e=n[1]);const i=function(e,t){const n=[];let s=e.length;for(;s--;)n[s]=t(e[s]);return n}((e=e.replace(Vp,".")).split("."),t).join(".");return s+i}function eh(e){const t=[];let n=0;const s=e.length;for(;n<s;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<s){const s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),n--)}else t.push(i)}return t}const th=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},nh=function(e,t,n){let s=0;for(e=n?Qp(e/700):e>>1,e+=Qp(e/t);e>455;s+=zp)e=Qp(e/35);return Qp(s+36*e/(e+38))},sh=function(e){const t=[],n=e.length;let s=0,i=128,r=72,a=e.lastIndexOf("-");a<0&&(a=0);for(let n=0;n<a;++n)e.charCodeAt(n)>=128&&Zp("not-basic"),t.push(e.charCodeAt(n));for(let c=a>0?a+1:0;c<n;){const a=s;for(let t=1,i=zp;;i+=zp){c>=n&&Zp("invalid-input");const a=(o=e.charCodeAt(c++))>=48&&o<58?o-48+26:o>=65&&o<91?o-65:o>=97&&o<123?o-97:zp;a>=zp&&Zp("invalid-input"),a>Qp((qp-s)/t)&&Zp("overflow"),s+=a*t;const l=i<=r?1:i>=r+26?26:i-r;if(a<l)break;const u=zp-l;t>Qp(qp/u)&&Zp("overflow"),t*=u}const l=t.length+1;r=nh(s-a,l,0==a),Qp(s/l)>qp-i&&Zp("overflow"),i+=Qp(s/l),s%=l,t.splice(s++,0,i)}var o;return String.fromCodePoint(...t)},ih=function(e){const t=[],n=(e=eh(e)).length;let s=128,i=0,r=72;for(const n of e)n<128&&t.push(Xp(n));const a=t.length;let o=a;for(a&&t.push("-");o<n;){let n=qp;for(const t of e)t>=s&&t<n&&(n=t);const c=o+1;n-s>Qp((qp-i)/c)&&Zp("overflow"),i+=(n-s)*c,s=n;for(const n of e)if(n<s&&++i>qp&&Zp("overflow"),n===s){let e=i;for(let n=zp;;n+=zp){const s=n<=r?1:n>=r+26?26:n-r;if(e<s)break;const i=e-s,a=zp-s;t.push(Xp(th(s+i%a,0))),e=Qp(i/a)}t.push(Xp(th(e,0))),r=nh(i,c,o===a),i=0,++o}++i,++s}return t.join("")},rh={version:"2.3.1",ucs2:{decode:eh,encode:e=>String.fromCodePoint(...e)},decode:sh,encode:ih,toASCII:function(e){return Jp(e,(function(e){return Yp.test(e)?"xn--"+ih(e):e}))},toUnicode:function(e){return Jp(e,(function(e){return Wp.test(e)?sh(e.slice(4).toLowerCase()):e}))}};const ah={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},zero:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},oh=/^(vbscript|javascript|file|data):/,ch=/^data:image\/(gif|png|jpeg|webp);/;function lh(e){const t=e.trim().toLowerCase();return!oh.test(t)||ch.test(t)}const uh=["http:","https:","mailto:"];function dh(e){const t=ju(e,!0);if(t.hostname&&(!t.protocol||uh.indexOf(t.protocol)>=0))try{t.hostname=rh.toASCII(t.hostname)}catch(e){}return ku(Cu(t))}function ph(e){const t=ju(e,!0);if(t.hostname&&(!t.protocol||uh.indexOf(t.protocol)>=0))try{t.hostname=rh.toUnicode(t.hostname)}catch(e){}return wu(Cu(t),wu.defaultChars+"%")}function hh(e,t){if(!(this instanceof hh))return new hh(e,t);t||pd(e)||(t=e||{},e="default"),this.inline=new Rp,this.block=new mp,this.core=new sp,this.renderer=new Pd,this.linkify=new $p,this.validateLink=lh,this.normalizeLink=dh,this.normalizeLinkText=ph,this.utils=Ld,this.helpers=fd({},Fd),this.options={},this.configure(e),t&&this.set(t)}hh.prototype.set=function(e){return fd(this.options,e),this},hh.prototype.configure=function(e){const t=this;if(pd(e)){const t=e;if(!(e=ah[t]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach((function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)})),this},hh.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.enable(e,!0))}),this),n=n.concat(this.inline.ruler2.enable(e,!0));const s=e.filter((function(e){return n.indexOf(e)<0}));if(s.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+s);return this},hh.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.disable(e,!0))}),this),n=n.concat(this.inline.ruler2.disable(e,!0));const s=e.filter((function(e){return n.indexOf(e)<0}));if(s.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+s);return this},hh.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},hh.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},hh.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},hh.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},hh.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var fh=(e=>(e.BASE_GERMAN="base-german",e.BASE_GERMAN_MARKDOWN_CONTENT="base-german-markdown-content",e.CANTEEN_FOOD_FEEDBACK_REPORT="canteen-food-feedback-report",e.APP_FEEDBACKS="app-feedbacks",e))(fh||{});i.resolve(process.cwd(),"../templates");var mh=async({schedule:e,action:t},n)=>{if(!await yo.checkAllTablesExistWithApiContext("activity_auto_cleanup",n))return;const s=new Xo(n),i=s.getAppFeedbacksHelper(),r=Vo.getPublicUrl();t(go.APP_FEEDBACKS+".items.create",(async e=>{let t=e.key,n=await i.readOne(t);if(!n)return;const a=(await s.getServerInfo()).project.project_name||"Rocket Meals",o=new Date,c=a+" - App Feedbacks - "+Po.getHumanReadableDateAndTime(o),l=new Date(n.date_created||new Date),u=Po.getHumanReadableDateAndTime(l),d=r+"/admin/content/app_feedbacks/"+t,p={device_platform:n.device_platform,device_brand:n.device_brand,device_system_version:n.device_system_version,display_height:n.display_height,display_width:n.display_width,display_fontscale:n.display_fontscale,display_pixelratio:n.display_pixelratio,display_scale:n.display_scale},h={subject:c,feedbacks:[{id:n.id,positive:n.positive,title:n.title||"Kein Titel",content:n.content||"Kein Inhalt",contract_email:n.contact_email,profile_id:n.profile,answer_to_feedback_url:d,date_created:u,device:p}]};await s.sendMail({recipient:"info@baumgartner-software.de",subject:c,template_name:fh.APP_FEEDBACKS,template_data:h})}))},gh={},_h={},yh={};Object.defineProperty(yh,"__esModule",{value:!0}),yh.DocumentNotReadyError=yh.GlossaryNotFoundError=yh.DocumentTranslationError=yh.ConnectionError=yh.TooManyRequestsError=yh.QuotaExceededError=yh.AuthorizationError=yh.DeepLError=void 0;class Eh extends Error{constructor(e,t){super(e),this.message=e,this.error=t}}yh.DeepLError=Eh;yh.AuthorizationError=class extends Eh{};yh.QuotaExceededError=class extends Eh{};yh.TooManyRequestsError=class extends Eh{};yh.ConnectionError=class extends Eh{constructor(e,t,n){super(e,n),this.shouldRetry=t||!1}};yh.DocumentTranslationError=class extends Eh{constructor(e,t,n){super(e,n),this.documentHandle=t}};yh.GlossaryNotFoundError=class extends Eh{};yh.DocumentNotReadyError=class extends Eh{};var bh={},vh={exports:{}};!function(e){!function(t,n){e.exports?e.exports=n():t.log=n()}(G,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],i={},r=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),i=0;i<s.length;i++){var r=s[i];this[r]=i<n?e:this.methodFactory(r,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(s,i,r){return function(s){return"debug"===s&&(s="log"),typeof console!==t&&("trace"===s&&n?o:void 0!==console[s]?a(console,s):void 0!==console.log?a(console,"log"):e)}(s)||l.apply(this,arguments)}function d(e,n){var a,o,l,d=this,p="loglevel";function h(){var e;if(typeof window!==t&&p){try{e=window.localStorage[p]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,s=encodeURIComponent(p),i=n.indexOf(s+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i+s.length+1))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?p+=":"+e:"symbol"==typeof e&&(p=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return null!=l?l:null!=o?o:a},d.setLevel=function(e,n){return l=f(e),!1!==n&&function(e){var n=(s[e]||"silent").toUpperCase();if(typeof window!==t&&p){try{return void(window.localStorage[p]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"="+n+";"}catch(e){}}}(l),c.call(d)},d.setDefaultLevel=function(e){o=f(e),h()||d.setLevel(e,!1)},d.resetLevel=function(){l=null,function(){if(typeof window!==t&&p){try{window.localStorage.removeItem(p)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(r!==d&&(a=f(r.getLevel())),c.call(d),r===d)for(var e in i)i[e].rebuild()},a=f(r?r.getLevel():"WARN");var m=h();null!=m&&(l=f(m)),c.call(d)}(r=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new d(e,r.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return r.noConflict=function(){return typeof window!==t&&window.log===r&&(window.log=p),r},r.getLoggers=function(){return i},r.default=r,r}))}(vh);var Th=vh.exports,Ah=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bh,"__esModule",{value:!0}),bh.toBoolString=bh.isString=bh.timeout=bh.streamToString=bh.streamToBuffer=bh.logInfo=bh.logDebug=void 0;const Sh=Ah(Th).default.getLogger("deepl");function wh(e){let t="";if(e)for(const[n,s]of Object.entries(e))t+=`, ${n} = ${s}`;return t}async function xh(e){const t=[];return new Promise(((n,s)=>{e.on("data",(e=>t.push(e))),e.on("error",(e=>s(e))),e.on("end",(()=>n(Buffer.concat(t))))}))}bh.logDebug=function(e,t){Sh.debug(e+wh(t))},bh.logInfo=function(e,t){Sh.info(e+wh(t))},bh.streamToBuffer=xh,bh.streamToString=async function(e){return(await xh(e)).toString("utf8")};bh.timeout=e=>new Promise((t=>setTimeout(t,e))),bh.isString=function(e){return"string"==typeof e},bh.toBoolString=function(e){return e?"1":"0"};var kh=Lt,Ch=m,Nh=i,Ih=y,Rh=E,Dh=b.parse,Oh=l,Lh=n.Stream,Fh=Mt,Mh=cn,Ph=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e},Bh=Uh;function Uh(e){if(!(this instanceof Uh))return new Uh(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],kh.call(this),e=e||{})this[t]=e[t]}Ch.inherits(Uh,kh),Uh.LINE_BREAK="\r\n",Uh.DEFAULT_CONTENT_TYPE="application/octet-stream",Uh.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var s=kh.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),Ch.isArray(t))this._error(new Error("Arrays are not supported."));else{var i=this._multiPartHeader(e,t,n),r=this._multiPartFooter();s(i),s(t),s(r),this._trackLength(i,t,n)}},Uh.prototype._trackLength=function(e,t,n){var s=0;null!=n.knownLength?s+=+n.knownLength:Buffer.isBuffer(t)?s=t.length:"string"==typeof t&&(s=Buffer.byteLength(t)),this._valueLength+=s,this._overheadLength+=Buffer.byteLength(e)+Uh.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof Lh)&&(n.knownLength||this._valuesToMeasure.push(t))},Uh.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):Oh.stat(e.path,(function(n,s){var i;n?t(n):(i=s.size-(e.start?e.start:0),t(null,i))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},Uh.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var s,i=this._getContentDisposition(t,n),r=this._getContentType(t,n),a="",o={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(r||[])};for(var c in"object"==typeof n.header&&Ph(o,n.header),o)o.hasOwnProperty(c)&&null!=(s=o[c])&&(Array.isArray(s)||(s=[s]),s.length&&(a+=c+": "+s.join("; ")+Uh.LINE_BREAK));return"--"+this.getBoundary()+Uh.LINE_BREAK+a+Uh.LINE_BREAK},Uh.prototype._getContentDisposition=function(e,t){var n,s;return"string"==typeof t.filepath?n=Nh.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=Nh.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=Nh.basename(e.client._httpMessage.path||"")),n&&(s='filename="'+n+'"'),s},Uh.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=Fh.lookup(e.name)),!n&&e.path&&(n=Fh.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=Fh.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=Uh.DEFAULT_CONTENT_TYPE),n},Uh.prototype._multiPartFooter=function(){return function(e){var t=Uh.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},Uh.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+Uh.LINE_BREAK},Uh.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},Uh.prototype.setBoundary=function(e){this._boundary=e},Uh.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},Uh.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,s=this._streams.length;n<s;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(Uh.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},Uh.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},Uh.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},Uh.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},Uh.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?Mh.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,s){n?e(n):(s.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},Uh.prototype.submit=function(e,t){var n,s,i={method:"post"};return"string"==typeof e?(e=Dh(e),s=Ph({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(s=Ph(e,i)).port||(s.port="https:"==s.protocol?443:80),s.headers=this.getHeaders(e.headers),n="https:"==s.protocol?Rh.request(s):Ih.request(s),this.getLength(function(e,s){if(e&&"Unknown stream"!==e)this._error(e);else if(s&&n.setHeader("Content-Length",s),this.pipe(n),t){var i,r=function(e,s){return n.removeListener("error",r),n.removeListener("response",i),t.call(this,e,s)};i=r.bind(this,null),n.on("error",r),n.on("response",i)}}.bind(this)),n},Uh.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},Uh.prototype.toString=function(){return"[object FormData]"};const Hh=b,jh=es,Gh=y,$h=E,qh=m,zh=Js,Wh=S,Yh=n,Vh=k;function Kh(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}const Qh=Kh(Bh),Xh=Kh(Hh),Zh=Kh(Gh),Jh=Kh($h),ef=Kh(qh),tf=Kh(zh),nf=Kh(Wh),sf=Kh(Yh);function rf(e,t){return function(){return e.apply(t,arguments)}}const{toString:af}=Object.prototype,{getPrototypeOf:of}=Object,cf=(e=>t=>{const n=af.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),lf=e=>(e=e.toLowerCase(),t=>cf(t)===e),uf=e=>t=>typeof t===e,{isArray:df}=Array,pf=uf("undefined");const hf=lf("ArrayBuffer");const ff=uf("string"),mf=uf("function"),gf=uf("number"),_f=e=>null!==e&&"object"==typeof e,yf=e=>{if("object"!==cf(e))return!1;const t=of(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Ef=lf("Date"),bf=lf("File"),vf=lf("Blob"),Tf=lf("FileList"),Af=lf("URLSearchParams"),[Sf,wf,xf,kf]=["ReadableStream","Request","Response","Headers"].map(lf);function Cf(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,i;if("object"!=typeof e&&(e=[e]),df(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let a;for(s=0;s<r;s++)a=i[s],t.call(null,e[a],a,e)}}function Nf(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,i=n.length;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const If="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:G,Rf=e=>!pf(e)&&e!==If;const Df=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&of(Uint8Array)),Of=lf("HTMLFormElement"),Lf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ff=lf("RegExp"),Mf=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Cf(n,((n,i)=>{let r;!1!==(r=t(n,i,e))&&(s[i]=r||n)})),Object.defineProperties(e,s)},Pf="abcdefghijklmnopqrstuvwxyz",Bf="0123456789",Uf={DIGIT:Bf,ALPHA:Pf,ALPHA_DIGIT:Pf+Pf.toUpperCase()+Bf};const Hf=lf("AsyncFunction"),jf=(Gf="function"==typeof setImmediate,$f=mf(If.postMessage),Gf?setImmediate:$f?(qf=`axios@${Math.random()}`,zf=[],If.addEventListener("message",(({source:e,data:t})=>{e===If&&t===qf&&zf.length&&zf.shift()()}),!1),e=>{zf.push(e),If.postMessage(qf,"*")}):e=>setTimeout(e));var Gf,$f,qf,zf;const Wf="undefined"!=typeof queueMicrotask?queueMicrotask.bind(If):"undefined"!=typeof process&&process.nextTick||jf,Yf={isArray:df,isArrayBuffer:hf,isBuffer:function(e){return null!==e&&!pf(e)&&null!==e.constructor&&!pf(e.constructor)&&mf(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||mf(e.append)&&("formdata"===(t=cf(e))||"object"===t&&mf(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&hf(e.buffer),t},isString:ff,isNumber:gf,isBoolean:e=>!0===e||!1===e,isObject:_f,isPlainObject:yf,isReadableStream:Sf,isRequest:wf,isResponse:xf,isHeaders:kf,isUndefined:pf,isDate:Ef,isFile:bf,isBlob:vf,isRegExp:Ff,isFunction:mf,isStream:e=>_f(e)&&mf(e.pipe),isURLSearchParams:Af,isTypedArray:Df,isFileList:Tf,forEach:Cf,merge:function e(){const{caseless:t}=Rf(this)&&this||{},n={},s=(s,i)=>{const r=t&&Nf(n,i)||i;yf(n[r])&&yf(s)?n[r]=e(n[r],s):yf(s)?n[r]=e({},s):df(s)?n[r]=s.slice():n[r]=s};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Cf(arguments[e],s);return n},extend:(e,t,n,{allOwnKeys:s}={})=>(Cf(t,((t,s)=>{n&&mf(t)?e[s]=rf(t,n):e[s]=t}),{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let i,r,a;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)a=i[r],s&&!s(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&of(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:cf,kindOfTest:lf,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(df(e))return e;let t=e.length;if(!gf(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:Of,hasOwnProperty:Lf,hasOwnProp:Lf,reduceDescriptors:Mf,freezeMethods:e=>{Mf(e,((t,n)=>{if(mf(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];mf(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach((e=>{n[e]=!0}))};return df(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Nf,global:If,isContextDefined:Rf,ALPHABET:Uf,generateString:(e=16,t=Uf.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n},isSpecCompliantForm:function(e){return!!(e&&mf(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(_f(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const i=df(e)?[]:{};return Cf(e,((e,t)=>{const r=n(e,s+1);!pf(r)&&(i[t]=r)})),t[s]=void 0,i}}return e};return n(e,0)},isAsyncFn:Hf,isThenable:e=>e&&(_f(e)||mf(e))&&mf(e.then)&&mf(e.catch),setImmediate:jf,asap:Wf};function Vf(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Yf.inherits(Vf,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Yf.toJSONObject(this.config),code:this.code,status:this.status}}});const Kf=Vf.prototype,Qf={};function Xf(e){return Yf.isPlainObject(e)||Yf.isArray(e)}function Zf(e){return Yf.endsWith(e,"[]")?e.slice(0,-2):e}function Jf(e,t,n){return e?e.concat(t).map((function(e,t){return e=Zf(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Qf[e]={value:e}})),Object.defineProperties(Vf,Qf),Object.defineProperty(Kf,"isAxiosError",{value:!0}),Vf.from=(e,t,n,s,i,r)=>{const a=Object.create(Kf);return Yf.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Vf.call(a,e.message,t,n,s,i),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};const em=Yf.toFlatObject(Yf,{},null,(function(e){return/^is[A-Z]/.test(e)}));function tm(e,t,n){if(!Yf.isObject(e))throw new TypeError("target must be an object");t=t||new(Qh.default||FormData);const s=(n=Yf.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Yf.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,r=n.dots,a=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Yf.isSpecCompliantForm(t);if(!Yf.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Yf.isDate(e))return e.toISOString();if(!o&&Yf.isBlob(e))throw new Vf("Blob is not supported. Use a Buffer instead.");return Yf.isArrayBuffer(e)||Yf.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let o=e;if(e&&!i&&"object"==typeof e)if(Yf.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(Yf.isArray(e)&&function(e){return Yf.isArray(e)&&!e.some(Xf)}(e)||(Yf.isFileList(e)||Yf.endsWith(n,"[]"))&&(o=Yf.toArray(e)))return n=Zf(n),o.forEach((function(e,s){!Yf.isUndefined(e)&&null!==e&&t.append(!0===a?Jf([n],s,r):null===a?n:n+"[]",c(e))})),!1;return!!Xf(e)||(t.append(Jf(i,n,r),c(e)),!1)}const u=[],d=Object.assign(em,{defaultVisitor:l,convertValue:c,isVisitable:Xf});if(!Yf.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!Yf.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+s.join("."));u.push(n),Yf.forEach(n,(function(n,r){!0===(!(Yf.isUndefined(n)||null===n)&&i.call(t,n,Yf.isString(r)?r.trim():r,s,d))&&e(n,s?s.concat(r):[r])})),u.pop()}}(e),t}function nm(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function sm(e,t){this._pairs=[],e&&tm(e,this,t)}const im=sm.prototype;function rm(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function am(e,t,n){if(!t)return e;const s=n&&n.encode||rm,i=n&&n.serialize;let r;if(r=i?i(t,n):Yf.isURLSearchParams(t)?t.toString():new sm(t,n).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}im.append=function(e,t){this._pairs.push([e,t])},im.toString=function(e){const t=e?function(t){return e.call(this,t,nm)}:nm;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const om=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Yf.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},cm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lm={isNode:!0,classes:{URLSearchParams:Xh.default.URLSearchParams,FormData:Qh.default,Blob:"undefined"!=typeof Blob&&Blob||null},protocols:["http","https","file","data"]},um="undefined"!=typeof window&&"undefined"!=typeof document,dm="object"==typeof navigator&&navigator||void 0,pm=um&&(!dm||["ReactNative","NativeScript","NS"].indexOf(dm.product)<0),hm="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,fm=um&&window.location.href||"http://localhost",mm={...Object.freeze({__proto__:null,hasBrowserEnv:um,hasStandardBrowserWebWorkerEnv:hm,hasStandardBrowserEnv:pm,navigator:dm,origin:fm}),...lm};function gm(e){function t(e,n,s,i){let r=e[i++];if("__proto__"===r)return!0;const a=Number.isFinite(+r),o=i>=e.length;if(r=!r&&Yf.isArray(s)?s.length:r,o)return Yf.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a;s[r]&&Yf.isObject(s[r])||(s[r]=[]);return t(e,n,s[r],i)&&Yf.isArray(s[r])&&(s[r]=function(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}(s[r])),!a}if(Yf.isFormData(e)&&Yf.isFunction(e.entries)){const n={};return Yf.forEachEntry(e,((e,s)=>{t(function(e){return Yf.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,n,0)})),n}return null}const _m={transitional:cm,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=Yf.isObject(e);i&&Yf.isHTMLForm(e)&&(e=new FormData(e));if(Yf.isFormData(e))return s?JSON.stringify(gm(e)):e;if(Yf.isArrayBuffer(e)||Yf.isBuffer(e)||Yf.isStream(e)||Yf.isFile(e)||Yf.isBlob(e)||Yf.isReadableStream(e))return e;if(Yf.isArrayBufferView(e))return e.buffer;if(Yf.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return tm(e,new mm.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return mm.isNode&&Yf.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=Yf.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return tm(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),function(e,t,n){if(Yf.isString(e))try{return(t||JSON.parse)(e),Yf.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||_m.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(Yf.isResponse(e)||Yf.isReadableStream(e))return e;if(e&&Yf.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Vf.from(e,Vf.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mm.classes.FormData,Blob:mm.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Yf.forEach(["delete","get","head","post","put","patch"],(e=>{_m.headers[e]={}}));const ym=_m,Em=Yf.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bm=Symbol("internals");function vm(e){return e&&String(e).trim().toLowerCase()}function Tm(e){return!1===e||null==e?e:Yf.isArray(e)?e.map(Tm):String(e)}function Am(e,t,n,s,i){return Yf.isFunction(s)?s.call(this,t,n):(i&&(t=n),Yf.isString(t)?Yf.isString(s)?-1!==t.indexOf(s):Yf.isRegExp(s)?s.test(t):void 0:void 0)}class Sm{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(e,t,n){const i=vm(t);if(!i)throw new Error("header name must be a non-empty string");const r=Yf.findKey(s,i);(!r||void 0===s[r]||!0===n||void 0===n&&!1!==s[r])&&(s[r||t]=Tm(e))}const r=(e,t)=>Yf.forEach(e,((e,n)=>i(e,n,t)));if(Yf.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(Yf.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,s,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),s=e.substring(i+1).trim(),!n||t[n]&&Em[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)})),t})(e),t);else if(Yf.isHeaders(e))for(const[t,s]of e.entries())i(s,t,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=vm(e)){const n=Yf.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(Yf.isFunction(t))return t.call(this,e,n);if(Yf.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=vm(e)){const n=Yf.findKey(this,e);return!(!n||void 0===this[n]||t&&!Am(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function i(e){if(e=vm(e)){const i=Yf.findKey(n,e);!i||t&&!Am(0,n[i],i,t)||(delete n[i],s=!0)}}return Yf.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];e&&!Am(0,this[i],i,e,!0)||(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return Yf.forEach(this,((s,i)=>{const r=Yf.findKey(n,i);if(r)return t[r]=Tm(s),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=Tm(s),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Yf.forEach(this,((n,s)=>{null!=n&&!1!==n&&(t[s]=e&&Yf.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[bm]=this[bm]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=vm(e);t[s]||(!function(e,t){const n=Yf.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+n,{value:function(e,n,i){return this[s].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[s]=!0)}return Yf.isArray(e)?e.forEach(s):s(e),this}}Sm.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Yf.reduceDescriptors(Sm.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Yf.freezeMethods(Sm);const wm=Sm;function xm(e,t){const n=this||ym,s=t||n,i=wm.from(s.headers);let r=s.data;return Yf.forEach(e,(function(e){r=e.call(n,r,i.normalize(),t?t.status:void 0)})),i.normalize(),r}function km(e){return!(!e||!e.__CANCEL__)}function Cm(e,t,n){Vf.call(this,null==e?"canceled":e,Vf.ERR_CANCELED,t,n),this.name="CanceledError"}function Nm(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new Vf("Request failed with status code "+n.status,[Vf.ERR_BAD_REQUEST,Vf.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function Im(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}Yf.inherits(Cm,Vf,{__CANCEL__:!0});const Rm="1.7.7";function Dm(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const Om=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;const Lm=Symbol("internals");class Fm extends sf.default.Transform{constructor(e){e=Yf.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,((e,t)=>!Yf.isUndefined(t[e]))),super({readableHighWaterMark:e.chunkSize});const t=this[Lm]={timeWindow:e.timeWindow,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null};this.on("newListener",(e=>{"progress"===e&&(t.isCaptured||(t.isCaptured=!0))}))}_read(e){const t=this[Lm];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,n){const s=this[Lm],i=s.maxRate,r=this.readableHighWaterMark,a=s.timeWindow,o=i/(1e3/a),c=!1!==s.minChunkSize?Math.max(s.minChunkSize,.01*o):0,l=(e,t)=>{const n=Buffer.byteLength(e);s.bytesSeen+=n,s.bytes+=n,s.isCaptured&&this.emit("progress",s.bytesSeen),this.push(e)?process.nextTick(t):s.onReadCallback=()=>{s.onReadCallback=null,process.nextTick(t)}},u=(e,t)=>{const n=Buffer.byteLength(e);let u,d=null,p=r,h=0;if(i){const e=Date.now();(!s.ts||(h=e-s.ts)>=a)&&(s.ts=e,u=o-s.bytes,s.bytes=u<0?-u:0,h=0),u=o-s.bytes}if(i){if(u<=0)return setTimeout((()=>{t(null,e)}),a-h);u<p&&(p=u)}p&&n>p&&n-p>c&&(d=e.subarray(p),e=e.subarray(0,p)),l(e,d?()=>{process.nextTick(t,null,d)}:t)};u(e,(function e(t,s){if(t)return n(t);s?u(s,e):n(null)}))}}const Mm=Fm,{asyncIterator:Pm}=Symbol,Bm=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[Pm]?yield*e[Pm]():yield e},Um=Yf.ALPHABET.ALPHA_DIGIT+"-_",Hm=new qh.TextEncoder,jm="\r\n",Gm=Hm.encode(jm);class $m{constructor(e,t){const{escapeName:n}=this.constructor,s=Yf.isString(t);let i=`Content-Disposition: form-data; name="${n(e)}"${!s&&t.name?`; filename="${n(t.name)}"`:""}${jm}`;s?t=Hm.encode(String(t).replace(/\r?\n|\r\n?/g,jm)):i+=`Content-Type: ${t.type||"application/octet-stream"}${jm}`,this.headers=Hm.encode(i+jm),this.contentLength=s?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async*encode(){yield this.headers;const{value:e}=this;Yf.isTypedArray(e)?yield e:yield*Bm(e),yield Gm}static escapeName(e){return String(e).replace(/[\r\n"]/g,(e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e])))}}const qm=(e,t,n)=>{const{tag:s="form-data-boundary",size:i=25,boundary:r=s+"-"+Yf.generateString(i,Um)}=n||{};if(!Yf.isFormData(e))throw TypeError("FormData instance required");if(r.length<1||r.length>70)throw Error("boundary must be 10-70 characters long");const a=Hm.encode("--"+r+jm),o=Hm.encode("--"+r+"--"+jm+jm);let c=o.byteLength;const l=Array.from(e.entries()).map((([e,t])=>{const n=new $m(e,t);return c+=n.size,n}));c+=a.byteLength*l.length,c=Yf.toFiniteNumber(c);const u={"Content-Type":`multipart/form-data; boundary=${r}`};return Number.isFinite(c)&&(u["Content-Length"]=c),t&&t(u),Yh.Readable.from(async function*(){for(const e of l)yield a,yield*e.encode();yield o}())};class zm extends sf.default.Transform{__transform(e,t,n){this.push(e),n()}_transform(e,t,n){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){const e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,n)}}const Wm=zm,Ym=(e,t)=>Yf.isAsyncFn(e)?function(...n){const s=n.pop();e.apply(this,n).then((e=>{try{t?s(null,...t(e)):s(null,e)}catch(e){s(e)}}),s)}:e;const Vm=(e,t,n=3)=>{let s=0;const i=function(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i,r=0,a=0;return t=void 0!==t?t:1e3,function(o){const c=Date.now(),l=s[a];i||(i=c),n[r]=o,s[r]=c;let u=a,d=0;for(;u!==r;)d+=n[u++],u%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),c-i<t)return;const p=l&&c-l;return p?Math.round(1e3*d/p):void 0}}(50,250);return function(e,t){let n,s,i=0,r=1e3/t;const a=(t,r=Date.now())=>{i=r,n=null,s&&(clearTimeout(s),s=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-i;o>=r?a(e,t):(n=e,s||(s=setTimeout((()=>{s=null,a(n)}),r-o)))},()=>n&&a(n)]}((n=>{const r=n.loaded,a=n.lengthComputable?n.total:void 0,o=r-s,c=i(o);s=r;e({loaded:r,total:a,progress:a?r/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&r<=a?(a-r)/c:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},Km=(e,t)=>{const n=null!=e;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Qm=e=>(...t)=>Yf.asap((()=>e(...t))),Xm={flush:nf.default.constants.Z_SYNC_FLUSH,finishFlush:nf.default.constants.Z_SYNC_FLUSH},Zm={flush:nf.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:nf.default.constants.BROTLI_OPERATION_FLUSH},Jm=Yf.isFunction(nf.default.createBrotliDecompress),{http:eg,https:tg}=tf.default,ng=/https:?/,sg=mm.protocols.map((e=>e+":")),ig=(e,[t,n])=>(e.on("end",n).on("error",n),t);function rg(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}function ag(e,t,n){let s=t;if(!s&&!1!==s){const e=jh.getProxyForUrl(n);e&&(s=new URL(e))}if(s){if(s.username&&(s.auth=(s.username||"")+":"+(s.password||"")),s.auth){(s.auth.username||s.auth.password)&&(s.auth=(s.auth.username||"")+":"+(s.auth.password||""));const t=Buffer.from(s.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");const t=s.hostname||s.host;e.hostname=t,e.host=t,e.port=s.port,e.path=n,s.protocol&&(e.protocol=s.protocol.includes(":")?s.protocol:`${s.protocol}:`)}e.beforeRedirects.proxy=function(e){ag(e,t,e.href)}}const og="undefined"!=typeof process&&"process"===Yf.kindOf(process),cg=(e,t)=>(({address:e,family:t})=>{if(!Yf.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}})(Yf.isObject(e)?e:{address:e,family:t}),lg=og&&function(e){return t=async function(t,n,s){let{data:i,lookup:r,family:a}=e;const{responseType:o,responseEncoding:c}=e,l=e.method.toUpperCase();let u,d,p=!1;if(r){const e=Ym(r,(e=>Yf.isArray(e)?e:[e]));r=(t,n,s)=>{e(t,n,((e,t,i)=>{if(e)return s(e);const r=Yf.isArray(t)?t.map((e=>cg(e))):[cg(t,i)];n.all?s(e,r):s(e,r[0].address,r[0].family)}))}}const h=new Vh.EventEmitter,f=()=>{e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m),h.removeAllListeners()};function m(t){h.emit("abort",!t||t.type?new Cm(null,e,d):t)}s(((e,t)=>{u=!0,t&&(p=!0,f())})),h.once("abort",n),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m)));const g=Im(e.baseURL,e.url),_=new URL(g,mm.hasBrowserEnv?mm.origin:void 0),y=_.protocol||sg[0];if("data:"===y){let s;if("GET"!==l)return Nm(t,n,{status:405,statusText:"method not allowed",headers:{},config:e});try{s=function(e,t,n){const s=n&&n.Blob||mm.classes.Blob,i=Dm(e);if(void 0===t&&s&&(t=!0),"data"===i){e=i.length?e.slice(i.length+1):e;const n=Om.exec(e);if(!n)throw new Vf("Invalid URL",Vf.ERR_INVALID_URL);const r=n[1],a=n[2],o=n[3],c=Buffer.from(decodeURIComponent(o),a?"base64":"utf8");if(t){if(!s)throw new Vf("Blob is not supported",Vf.ERR_NOT_SUPPORT);return new s([c],{type:r})}return c}throw new Vf("Unsupported protocol "+i,Vf.ERR_NOT_SUPPORT)}(e.url,"blob"===o,{Blob:e.env&&e.env.Blob})}catch(t){throw Vf.from(t,Vf.ERR_BAD_REQUEST,e)}return"text"===o?(s=s.toString(c),c&&"utf8"!==c||(s=Yf.stripBOM(s))):"stream"===o&&(s=sf.default.Readable.from(s)),Nm(t,n,{data:s,status:200,statusText:"OK",headers:new wm,config:e})}if(-1===sg.indexOf(y))return n(new Vf("Unsupported protocol "+y,Vf.ERR_BAD_REQUEST,e));const E=wm.from(e.headers).normalize();E.set("User-Agent","axios/"+Rm,!1);const{onUploadProgress:b,onDownloadProgress:v}=e,T=e.maxRate;let A,S;if(Yf.isSpecCompliantForm(i)){const e=E.getContentType(/boundary=([-_\w\d]{10,70})/i);i=qm(i,(e=>{E.set(e)}),{tag:`axios-${Rm}-boundary`,boundary:e&&e[1]||void 0})}else if(Yf.isFormData(i)&&Yf.isFunction(i.getHeaders)){if(E.set(i.getHeaders()),!E.hasContentLength())try{const e=await ef.default.promisify(i.getLength).call(i);Number.isFinite(e)&&e>=0&&E.setContentLength(e)}catch(e){}}else if(Yf.isBlob(i))i.size&&E.setContentType(i.type||"application/octet-stream"),E.setContentLength(i.size||0),i=sf.default.Readable.from(Bm(i));else if(i&&!Yf.isStream(i)){if(Buffer.isBuffer(i));else if(Yf.isArrayBuffer(i))i=Buffer.from(new Uint8Array(i));else{if(!Yf.isString(i))return n(new Vf("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",Vf.ERR_BAD_REQUEST,e));i=Buffer.from(i,"utf-8")}if(E.setContentLength(i.length,!1),e.maxBodyLength>-1&&i.length>e.maxBodyLength)return n(new Vf("Request body larger than maxBodyLength limit",Vf.ERR_BAD_REQUEST,e))}const w=Yf.toFiniteNumber(E.getContentLength());let x,k;Yf.isArray(T)?(A=T[0],S=T[1]):A=S=T,i&&(b||A)&&(Yf.isStream(i)||(i=sf.default.Readable.from(i,{objectMode:!1})),i=sf.default.pipeline([i,new Mm({maxRate:Yf.toFiniteNumber(A)})],Yf.noop),b&&i.on("progress",ig(i,Km(w,Vm(Qm(b),!1,3))))),e.auth&&(x=(e.auth.username||"")+":"+(e.auth.password||"")),!x&&_.username&&(x=_.username+":"+_.password),x&&E.delete("authorization");try{k=am(_.pathname+_.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){const s=new Error(t.message);return s.config=e,s.url=e.url,s.exists=!0,n(s)}E.set("Accept-Encoding","gzip, compress, deflate"+(Jm?", br":""),!1);const C={path:k,method:l,headers:E.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:x,protocol:y,family:a,beforeRedirect:rg,beforeRedirects:{}};let N;!Yf.isUndefined(r)&&(C.lookup=r),e.socketPath?C.socketPath=e.socketPath:(C.hostname=_.hostname.startsWith("[")?_.hostname.slice(1,-1):_.hostname,C.port=_.port,ag(C,e.proxy,y+"//"+_.hostname+(_.port?":"+_.port:"")+C.path));const I=ng.test(C.protocol);if(C.agent=I?e.httpsAgent:e.httpAgent,e.transport?N=e.transport:0===e.maxRedirects?N=I?Jh.default:Zh.default:(e.maxRedirects&&(C.maxRedirects=e.maxRedirects),e.beforeRedirect&&(C.beforeRedirects.config=e.beforeRedirect),N=I?tg:eg),e.maxBodyLength>-1?C.maxBodyLength=e.maxBodyLength:C.maxBodyLength=1/0,e.insecureHTTPParser&&(C.insecureHTTPParser=e.insecureHTTPParser),d=N.request(C,(function(s){if(d.destroyed)return;const i=[s],r=+s.headers["content-length"];if(v||S){const e=new Mm({maxRate:Yf.toFiniteNumber(S)});v&&e.on("progress",ig(e,Km(r,Vm(Qm(v),!0,3)))),i.push(e)}let a=s;const u=s.req||d;if(!1!==e.decompress&&s.headers["content-encoding"])switch("HEAD"!==l&&204!==s.statusCode||delete s.headers["content-encoding"],(s.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":i.push(nf.default.createUnzip(Xm)),delete s.headers["content-encoding"];break;case"deflate":i.push(new Wm),i.push(nf.default.createUnzip(Xm)),delete s.headers["content-encoding"];break;case"br":Jm&&(i.push(nf.default.createBrotliDecompress(Zm)),delete s.headers["content-encoding"])}a=i.length>1?sf.default.pipeline(i,Yf.noop):i[0];const m=sf.default.finished(a,(()=>{m(),f()})),g={status:s.statusCode,statusText:s.statusMessage,headers:new wm(s.headers),config:e,request:u};if("stream"===o)g.data=a,Nm(t,n,g);else{const s=[];let i=0;a.on("data",(function(t){s.push(t),i+=t.length,e.maxContentLength>-1&&i>e.maxContentLength&&(p=!0,a.destroy(),n(new Vf("maxContentLength size of "+e.maxContentLength+" exceeded",Vf.ERR_BAD_RESPONSE,e,u)))})),a.on("aborted",(function(){if(p)return;const t=new Vf("maxContentLength size of "+e.maxContentLength+" exceeded",Vf.ERR_BAD_RESPONSE,e,u);a.destroy(t),n(t)})),a.on("error",(function(t){d.destroyed||n(Vf.from(t,null,e,u))})),a.on("end",(function(){try{let e=1===s.length?s[0]:Buffer.concat(s);"arraybuffer"!==o&&(e=e.toString(c),c&&"utf8"!==c||(e=Yf.stripBOM(e))),g.data=e}catch(t){return n(Vf.from(t,null,e,g.request,g))}Nm(t,n,g)}))}h.once("abort",(e=>{a.destroyed||(a.emit("error",e),a.destroy())}))})),h.once("abort",(e=>{n(e),d.destroy(e)})),d.on("error",(function(t){n(Vf.from(t,null,e,d))})),d.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){const t=parseInt(e.timeout,10);if(Number.isNaN(t))return void n(new Vf("error trying to parse `config.timeout` to int",Vf.ERR_BAD_OPTION_VALUE,e,d));d.setTimeout(t,(function(){if(u)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const s=e.transitional||cm;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Vf(t,s.clarifyTimeoutError?Vf.ETIMEDOUT:Vf.ECONNABORTED,e,d)),m()}))}if(Yf.isStream(i)){let t=!1,n=!1;i.on("end",(()=>{t=!0})),i.once("error",(e=>{n=!0,d.destroy(e)})),i.on("close",(()=>{t||n||m(new Cm("Request stream has been aborted",e,d))})),i.pipe(d)}else d.end(i)},new Promise(((e,n)=>{let s,i;const r=(e,t)=>{i||(i=!0,s&&s(e,t))},a=e=>{r(e,!0),n(e)};t((t=>{r(t),e(t)}),a,(e=>s=e)).catch(a)}));var t},ug=mm.hasStandardBrowserEnv?function(){const e=mm.navigator&&/(msie|trident)/i.test(mm.navigator.userAgent),t=document.createElement("a");let n;function s(n){let s=n;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(e){const t=Yf.isString(e)?s(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},dg=mm.hasStandardBrowserEnv?{write(e,t,n,s,i,r){const a=[e+"="+encodeURIComponent(t)];Yf.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Yf.isString(s)&&a.push("path="+s),Yf.isString(i)&&a.push("domain="+i),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}},pg=e=>e instanceof wm?{...e}:e;function hg(e,t){t=t||{};const n={};function s(e,t,n){return Yf.isPlainObject(e)&&Yf.isPlainObject(t)?Yf.merge.call({caseless:n},e,t):Yf.isPlainObject(t)?Yf.merge({},t):Yf.isArray(t)?t.slice():t}function i(e,t,n){return Yf.isUndefined(t)?Yf.isUndefined(e)?void 0:s(void 0,e,n):s(e,t,n)}function r(e,t){if(!Yf.isUndefined(t))return s(void 0,t)}function a(e,t){return Yf.isUndefined(t)?Yf.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(n,i,r){return r in t?s(n,i):r in e?s(void 0,n):void 0}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t)=>i(pg(e),pg(t),!0)};return Yf.forEach(Object.keys(Object.assign({},e,t)),(function(s){const r=c[s]||i,a=r(e[s],t[s],s);Yf.isUndefined(a)&&r!==o||(n[s]=a)})),n}const fg=e=>{const t=hg({},e);let n,{data:s,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:a,headers:o,auth:c}=t;if(t.headers=o=wm.from(o),t.url=am(Im(t.baseURL,t.url),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Yf.isFormData(s))if(mm.hasStandardBrowserEnv||mm.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(mm.hasStandardBrowserEnv&&(i&&Yf.isFunction(i)&&(i=i(t)),i||!1!==i&&ug(t.url))){const e=r&&a&&dg.read(a);e&&o.set(r,e)}return t},mg="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const s=fg(e);let i=s.data;const r=wm.from(s.headers).normalize();let a,o,c,l,u,{responseType:d,onUploadProgress:p,onDownloadProgress:h}=s;function f(){l&&l(),u&&u(),s.cancelToken&&s.cancelToken.unsubscribe(a),s.signal&&s.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const s=wm.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Nm((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:s,config:e,request:m}),m=null}m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Vf("Request aborted",Vf.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Vf("Network Error",Vf.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const i=s.transitional||cm;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),n(new Vf(t,i.clarifyTimeoutError?Vf.ETIMEDOUT:Vf.ECONNABORTED,e,m)),m=null},void 0===i&&r.setContentType(null),"setRequestHeader"in m&&Yf.forEach(r.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Yf.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),d&&"json"!==d&&(m.responseType=s.responseType),h&&([c,u]=Vm(h,!0),m.addEventListener("progress",c)),p&&m.upload&&([o,l]=Vm(p),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",l)),(s.cancelToken||s.signal)&&(a=t=>{m&&(n(!t||t.type?new Cm(null,e,m):t),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(a),s.signal&&(s.signal.aborted?a():s.signal.addEventListener("abort",a)));const _=Dm(s.url);_&&-1===mm.protocols.indexOf(_)?n(new Vf("Unsupported protocol "+_+":",Vf.ERR_BAD_REQUEST,e)):m.send(i||null)}))},gg=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,s=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;s.abort(t instanceof Vf?t:new Cm(t instanceof Error?t.message:t))}};let r=t&&setTimeout((()=>{r=null,i(new Vf(`timeout ${t} of ms exceeded`,Vf.ETIMEDOUT))}),t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:o}=s;return o.unsubscribe=()=>Yf.asap(a),o}},_g=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let s,i=0;for(;i<n;)s=i+t,yield e.slice(i,s),i=s},yg=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Eg=(e,t,n,s)=>{const i=async function*(e,t){for await(const n of yg(e))yield*_g(n,t)}(e,t);let r,a=0,o=e=>{r||(r=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await i.next();if(t)return o(),void e.close();let r=s.byteLength;if(n){let e=a+=r;n(e)}e.enqueue(new Uint8Array(s))}catch(e){throw o(e),e}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},bg="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,vg=bg&&"function"==typeof ReadableStream,Tg=bg&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ag=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Sg=vg&&Ag((()=>{let e=!1;const t=new Request(mm.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),wg=vg&&Ag((()=>Yf.isReadableStream(new Response("").body))),xg={stream:wg&&(e=>e.body)};var kg;bg&&(kg=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!xg[e]&&(xg[e]=Yf.isFunction(kg[e])?t=>t[e]():(t,n)=>{throw new Vf(`Response type '${e}' is not supported`,Vf.ERR_NOT_SUPPORT,n)})})));const Cg=async(e,t)=>{const n=Yf.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Yf.isBlob(e))return e.size;if(Yf.isSpecCompliantForm(e)){const t=new Request(mm.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Yf.isArrayBufferView(e)||Yf.isArrayBuffer(e)?e.byteLength:(Yf.isURLSearchParams(e)&&(e+=""),Yf.isString(e)?(await Tg(e)).byteLength:void 0)})(t):n},Ng=bg&&(async e=>{let{url:t,method:n,data:s,signal:i,cancelToken:r,timeout:a,onDownloadProgress:o,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:p}=fg(e);l=l?(l+"").toLowerCase():"text";let h,f=gg([i,r&&r.toAbortSignal()],a);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&Sg&&"get"!==n&&"head"!==n&&0!==(g=await Cg(u,s))){let e,n=new Request(t,{method:"POST",body:s,duplex:"half"});if(Yf.isFormData(s)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Km(g,Vm(Qm(c)));s=Eg(n.body,65536,e,t)}}Yf.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;h=new Request(t,{...p,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:i?d:void 0});let r=await fetch(h);const a=wg&&("stream"===l||"response"===l);if(wg&&(o||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=r[t]}));const t=Yf.toFiniteNumber(r.headers.get("content-length")),[n,s]=o&&Km(t,Vm(Qm(o),!0))||[];r=new Response(Eg(r.body,65536,n,(()=>{s&&s(),m&&m()})),e)}l=l||"text";let _=await xg[Yf.findKey(xg,l)||"text"](r,e);return!a&&m&&m(),await new Promise(((t,n)=>{Nm(t,n,{data:_,headers:wm.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:h})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new Vf("Network Error",Vf.ERR_NETWORK,e,h),{cause:t.cause||t});throw Vf.from(t,t&&t.code,e,h)}}),Ig={http:lg,xhr:mg,fetch:Ng};Yf.forEach(Ig,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Rg=e=>`- ${e}`,Dg=e=>Yf.isFunction(e)||null===e||!1===e,Og=e=>{e=Yf.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let r=0;r<t;r++){let t;if(n=e[r],s=n,!Dg(n)&&(s=Ig[(t=String(n)).toLowerCase()],void 0===s))throw new Vf(`Unknown adapter '${t}'`);if(s)break;i[t||"#"+r]=s}if(!s){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new Vf("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Rg).join("\n"):" "+Rg(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function Lg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Cm(null,e)}function Fg(e){Lg(e),e.headers=wm.from(e.headers),e.data=xm.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Og(e.adapter||ym.adapter)(e).then((function(t){return Lg(e),t.data=xm.call(e,e.transformResponse,t),t.headers=wm.from(t.headers),t}),(function(t){return km(t)||(Lg(e),t&&t.response&&(t.response.data=xm.call(e,e.transformResponse,t.response),t.response.headers=wm.from(t.response.headers))),Promise.reject(t)}))}const Mg={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Mg[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Pg={};Mg.transitional=function(e,t,n){function s(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,r)=>{if(!1===e)throw new Vf(s(i," has been removed"+(t?" in "+t:"")),Vf.ERR_DEPRECATED);return t&&!Pg[i]&&(Pg[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,r)}};const Bg={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Vf("options must be an object",Vf.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],a=t[r];if(a){const t=e[r],n=void 0===t||a(t,r,e);if(!0!==n)throw new Vf("option "+r+" must be "+n,Vf.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Vf("Unknown option "+r,Vf.ERR_BAD_OPTION)}},validators:Mg},Ug=Bg.validators;class Hg{constructor(e){this.defaults=e,this.interceptors={request:new om,response:new om}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=hg(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;void 0!==n&&Bg.assertOptions(n,{silentJSONParsing:Ug.transitional(Ug.boolean),forcedJSONParsing:Ug.transitional(Ug.boolean),clarifyTimeoutError:Ug.transitional(Ug.boolean)},!1),null!=s&&(Yf.isFunction(s)?t.paramsSerializer={serialize:s}:Bg.assertOptions(s,{encode:Ug.function,serialize:Ug.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=i&&Yf.merge(i.common,i[t.method]);i&&Yf.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=wm.concat(r,i);const a=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[Fg.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=a.length;let p=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{p=e(p)}catch(e){t.call(this,e);break}}try{l=Fg.call(this,p)}catch(e){return Promise.reject(e)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return am(Im((e=hg(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Yf.forEach(["delete","get","head","options"],(function(e){Hg.prototype[e]=function(t,n){return this.request(hg(n||{},{method:e,url:t,data:(n||{}).data}))}})),Yf.forEach(["post","put","patch"],(function(e){function t(t){return function(n,s,i){return this.request(hg(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}Hg.prototype[e]=t(),Hg.prototype[e+"Form"]=t(!0)}));const jg=Hg;class Gg{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{n.subscribe(e),t=e})).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e((function(e,s,i){n.reason||(n.reason=new Cm(e,s,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Gg((function(t){e=t}));return{token:t,cancel:e}}}const $g=Gg;const qg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qg).forEach((([e,t])=>{qg[t]=e}));const zg=qg;const Wg=function e(t){const n=new jg(t),s=rf(jg.prototype.request,n);return Yf.extend(s,jg.prototype,n,{allOwnKeys:!0}),Yf.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(hg(t,n))},s}(ym);Wg.Axios=jg,Wg.CanceledError=Cm,Wg.CancelToken=$g,Wg.isCancel=km,Wg.VERSION=Rm,Wg.toFormData=tm,Wg.AxiosError=Vf,Wg.Cancel=Wg.CanceledError,Wg.all=function(e){return Promise.all(e)},Wg.spread=function(e){return function(t){return e.apply(null,t)}},Wg.isAxiosError=function(e){return Yf.isObject(e)&&!0===e.isAxiosError},Wg.mergeConfig=hg,Wg.AxiosHeaders=wm,Wg.formToJSON=e=>gm(Yf.isHTMLForm(e)?new FormData(e):e),Wg.getAdapter=Og,Wg.HttpStatusCode=zg,Wg.default=Wg;var Yg=Wg,Vg=Lt,Kg=m,Qg=i,Xg=y,Zg=E,Jg=b.parse,e_=l,t_=Mt,n_=cn,s_=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e},i_=r_;function r_(e){if(!(this instanceof r_))return new r_(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],Vg.call(this),e=e||{})this[t]=e[t]}Kg.inherits(r_,Vg),r_.LINE_BREAK="\r\n",r_.DEFAULT_CONTENT_TYPE="application/octet-stream",r_.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var s=Vg.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),Kg.isArray(t))this._error(new Error("Arrays are not supported."));else{var i=this._multiPartHeader(e,t,n),r=this._multiPartFooter();s(i),s(t),s(r),this._trackLength(i,t,n)}},r_.prototype._trackLength=function(e,t,n){var s=0;null!=n.knownLength?s+=+n.knownLength:Buffer.isBuffer(t)?s=t.length:"string"==typeof t&&(s=Buffer.byteLength(t)),this._valueLength+=s,this._overheadLength+=Buffer.byteLength(e)+r_.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion"))&&(n.knownLength||this._valuesToMeasure.push(t))},r_.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):e_.stat(e.path,(function(n,s){var i;n?t(n):(i=s.size-(e.start?e.start:0),t(null,i))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},r_.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var s,i=this._getContentDisposition(t,n),r=this._getContentType(t,n),a="",o={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(r||[])};for(var c in"object"==typeof n.header&&s_(o,n.header),o)o.hasOwnProperty(c)&&null!=(s=o[c])&&(Array.isArray(s)||(s=[s]),s.length&&(a+=c+": "+s.join("; ")+r_.LINE_BREAK));return"--"+this.getBoundary()+r_.LINE_BREAK+a+r_.LINE_BREAK},r_.prototype._getContentDisposition=function(e,t){var n,s;return"string"==typeof t.filepath?n=Qg.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=Qg.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=Qg.basename(e.client._httpMessage.path||"")),n&&(s='filename="'+n+'"'),s},r_.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=t_.lookup(e.name)),!n&&e.path&&(n=t_.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=t_.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=r_.DEFAULT_CONTENT_TYPE),n},r_.prototype._multiPartFooter=function(){return function(e){var t=r_.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},r_.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+r_.LINE_BREAK},r_.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},r_.prototype.setBoundary=function(e){this._boundary=e},r_.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},r_.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,s=this._streams.length;n<s;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(r_.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},r_.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},r_.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},r_.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},r_.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?n_.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,s){n?e(n):(s.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},r_.prototype.submit=function(e,t){var n,s,i={method:"post"};return"string"==typeof e?(e=Jg(e),s=s_({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(s=s_(e,i)).port||(s.port="https:"==s.protocol?443:80),s.headers=this.getHeaders(e.headers),n="https:"==s.protocol?Zg.request(s):Xg.request(s),this.getLength(function(e,s){if(e)this._error(e);else if(n.setHeader("Content-Length",s),this.pipe(n),t){var i,r=function(e,s){return n.removeListener("error",r),n.removeListener("response",i),t.call(this,e,s)};i=r.bind(this,null),n.on("error",r),n.on("response",i)}}.bind(this)),n},r_.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},r_.prototype.toString=function(){return"[object FormData]"};var a_=G&&G.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o_=G&&G.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c_=G&&G.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a_(t,e,n);return o_(t,e),t},l_=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_h,"__esModule",{value:!0}),_h.HttpClient=void 0;const u_=yh,d_=bh,p_=l_(Yg),h_=l_(i_),f_=c_(E),m_=c_(y),g_=p_.default.create({httpAgent:new m_.Agent({keepAlive:!0}),httpsAgent:new f_.Agent({keepAlive:!0})});class __{constructor(){this.backoffInitial=1,this.backoffMax=120,this.backoffJitter=.23,this.backoffMultiplier=1.6,this.numRetries=0,this.backoff=1e3*this.backoffInitial,this.deadline=Date.now()+this.backoff}getNumRetries(){return this.numRetries}getTimeout(){return this.getTimeUntilDeadline()}getTimeUntilDeadline(){return Math.max(this.deadline-Date.now(),0)}async sleepUntilDeadline(){await(0,d_.timeout)(this.getTimeUntilDeadline()),this.backoff=Math.min(this.backoff*this.backoffMultiplier,1e3*this.backoffMax),this.deadline=Date.now()+this.backoff*(1+this.backoffJitter*(2*Math.random()-1)),this.numRetries++}}class y_{constructor(e,t,n,s,i){this.serverUrl=e,this.headers=t,this.maxRetries=n,this.minTimeout=s,this.proxy=i}prepareRequest(e,t,n,s,i){const r=Object.assign({},this.headers,i.headers),a={url:t,method:e,baseURL:this.serverUrl,headers:r,responseType:s?"stream":"text",timeout:n,validateStatus:null};if(i.fileBuffer){const e=new h_.default;if(e.append("file",i.fileBuffer,{filename:i.filename}),i.data)for(const[t,n]of i.data.entries())e.append(t,n);a.data=e,void 0===a.headers&&(a.headers={}),Object.assign(a.headers,e.getHeaders())}else i.data&&("GET"===e?a.params=i.data:a.data=i.data);return a.proxy=this.proxy,a}async sendRequestWithBackoff(e,t,n,s=!1){n=void 0===n?{}:n,(0,d_.logInfo)(`Request to DeepL API ${e} ${t}`),(0,d_.logDebug)(`Request details: ${n.data}`);const i=new __;let r,a;for(;i.getNumRetries()<=this.maxRetries;){const o=Math.max(this.minTimeout,i.getTimeout()),c=this.prepareRequest(e,t,o,s,n);try{r=await y_.sendAxiosRequest(c),a=void 0}catch(e){r=void 0,a=e}if(!y_.shouldRetry(null==r?void 0:r.statusCode,a)||i.getNumRetries()+1>=this.maxRetries)break;void 0!==a&&(0,d_.logDebug)(`Encountered a retryable-error: ${a.message}`),(0,d_.logInfo)(`Starting retry ${i.getNumRetries()+1} for request ${e} ${t} after sleeping for ${i.getTimeUntilDeadline()} seconds.`),await i.sleepUntilDeadline()}if(void 0!==r){const{statusCode:n,content:i}=r;return(0,d_.logInfo)(`DeepL API response ${e} ${t} ${n}`),s||(0,d_.logDebug)("Response details:",{content:i}),r}throw a}static async sendAxiosRequest(e){try{const t=await g_.request(e);return"text"===e.responseType&&"object"==typeof t.data&&(t.data=JSON.stringify(t.data)),{statusCode:t.status,content:t.data}}catch(e){const t=e,n=t.message||"",s=new u_.ConnectionError(`Connection failure: ${n}`);throw s.error=t,"ETIMEDOUT"===t.code||"ECONNABORTED"===t.code?s.shouldRetry=!0:((0,d_.logDebug)("Unrecognized axios error",t),s.shouldRetry=!1),s}}static shouldRetry(e,t){return void 0===e?t.shouldRetry:429===e||e>=500}}_h.HttpClient=y_;var E_={};Object.defineProperty(E_,"__esModule",{value:!0}),E_.GlossaryEntries=void 0;const b_=yh,v_=bh;class T_{constructor(e){if(this.implEntries={},void 0!==(null==e?void 0:e.entries)){if(void 0!==(null==e?void 0:e.tsv))throw new b_.DeepLError("options.entries and options.tsv are mutually exclusive");Object.assign(this.implEntries,e.entries)}else if(void 0!==(null==e?void 0:e.tsv)){const t=e.tsv;for(const e of t.split(/\r\n|\n|\r/)){if(0===e.length)continue;const[t,n,s]=e.split("\t",3);if(void 0===n)throw new b_.DeepLError(`Missing tab character in entry '${e}'`);if(void 0!==s)throw new b_.DeepLError(`Duplicate tab character in entry '${e}'`);this.add(t,n,!1)}}}add(e,t,n=!1){if(!n&&e in this.implEntries)throw new b_.DeepLError(`Duplicate source term '${e}'`);this.implEntries[e]=t}entries(){return this.implEntries}toTsv(){return Object.entries(this.implEntries).map((([e,t])=>(T_.validateGlossaryTerm(e),T_.validateGlossaryTerm(t),`${e}\t${t}`))).join("\n")}static validateGlossaryTerm(e){if(!(0,v_.isString)(e)||0===e.length)throw new b_.DeepLError(`'${e}' is not a valid term.`);for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(0<=n&&n<=31||128<=n&&n<=159||8232===n||8233===n)throw new b_.DeepLError(`Term '${e}' contains invalid character: '${e[t]}' (${n})`)}}}E_.GlossaryEntries=T_;var A_,S_={};function w_(){if(A_)return S_;A_=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.parseDocumentHandle=S_.parseGlossaryLanguagePairArray=S_.parseLanguageArray=S_.parseTextResultArray=S_.parseUsage=S_.parseDocumentStatus=S_.parseGlossaryInfoList=S_.parseGlossaryInfo=void 0;const e=yh,t=C_();class n{constructor(e,t){this.count=e,this.limit=t}limitReached(){return this.count>=this.limit}}class s{constructor(e,t,n){this.character=e,this.document=t,this.teamDocument=n}anyLimitReached(){var e,t,n;return(null===(e=this.character)||void 0===e?void 0:e.limitReached())||(null===(t=this.document)||void 0===t?void 0:t.limitReached())||(null===(n=this.teamDocument)||void 0===n?void 0:n.limitReached())||!1}toString(){return"Usage this billing period:\n"+[["Characters",this.character],["Documents",this.document],["Team documents",this.teamDocument]].filter((([,e])=>e)).map((([e,t])=>`${e}: ${t.count} of ${t.limit}`)).join("\n")}}class i{constructor(e,t,n,s){this.status=e,this.secondsRemaining=t,this.billedCharacters=n,this.errorMessage=s}ok(){return"queued"===this.status||"translating"===this.status||"done"===this.status}done(){return"done"===this.status}}function r(e){return{glossaryId:e.glossary_id,name:e.name,ready:e.ready,sourceLang:e.source_lang,targetLang:e.target_lang,creationTime:new Date(e.creation_time),entryCount:e.entry_count}}function a(e,t){const s=e[`${t}_count`],i=e[`${t}_limit`];if(void 0!==s&&void 0!==i)return new n(s,i)}return S_.parseGlossaryInfo=function(t){try{return r(JSON.parse(t))}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},S_.parseGlossaryInfoList=function(t){try{return JSON.parse(t).glossaries.map((e=>r(e)))}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},S_.parseDocumentStatus=function(t){try{const e=JSON.parse(t);return new i(e.status,e.seconds_remaining,e.billed_characters,e.error_message)}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},S_.parseUsage=function(t){try{const e=JSON.parse(t);return new s(a(e,"character"),a(e,"document"),a(e,"team_document"))}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},S_.parseTextResultArray=function(n){try{return JSON.parse(n).translations.map((e=>({text:e.text,detectedSourceLang:(0,t.standardizeLanguageCode)(e.detected_source_language)})))}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},S_.parseLanguageArray=function(n){return JSON.parse(n).map((n=>function(n){try{const e={name:n.name,code:(0,t.standardizeLanguageCode)(n.language),supportsFormality:n.supports_formality};return void 0===e.supportsFormality&&delete e.supportsFormality,e}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}}(n)))},S_.parseGlossaryLanguagePairArray=function(t){return JSON.parse(t).supported_languages.map((t=>function(t){try{return{sourceLang:t.source_lang,targetLang:t.target_lang}}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}}(t)))},S_.parseDocumentHandle=function(t){try{const e=JSON.parse(t);return{documentId:e.document_id,documentKey:e.document_key}}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},S_}var x_,k_={};function C_(){return x_||(x_=1,function(e){var t=G&&G.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),n=G&&G.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=G&&G.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(s,e,i);return n(s,e),s},r=G&&G.__exportStar||function(e,n){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(n,s)||t(n,e,s)},a=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Translator=e.isFreeAccountAuthKey=e.nonRegionalLanguageCode=e.standardizeLanguageCode=void 0;const o=_h,c=yh,u=E_,d=w_(),p=bh,h=s(l),f=y,g=a(i),_=s(A),E=b,v=s(m);function T(e){if(!(0,p.isString)(e)||0===e.length)throw new c.DeepLError("langCode must be a non-empty string");const[t,n]=e.split("-",2);return void 0===n?t.toLowerCase():`${t.toLowerCase()}-${n.toUpperCase()}`}function S(e){if(!(0,p.isString)(e)||0===e.length)throw new c.DeepLError("langCode must be a non-empty string");return e.split("-",2)[0].toLowerCase()}function w(e){return e.endsWith(":fx")}function x(e){return(0,p.isString)(e)?e:e.join(",")}function k(e,t,n,s,i){if(t=T(t),null!==e&&(e=T(e)),void 0!==s&&null===e)throw new c.DeepLError("sourceLang is required if using a glossary");if(void 0!==s&&!(0,p.isString)(s)&&(S(t)!==s.targetLang||e!==s.sourceLang))throw new c.DeepLError("sourceLang and targetLang must match glossary");if("en"===t)throw new c.DeepLError("targetLang='en' is deprecated, please use 'en-GB' or 'en-US' instead.");if("pt"===t)throw new c.DeepLError("targetLang='pt' is deprecated, please use 'pt-PT' or 'pt-BR' instead.");const r=new E.URLSearchParams({target_lang:t});if(null!==e&&r.append("source_lang",e),void 0!==n){const e=String(n).toLowerCase();r.append("formality",e)}if(void 0!==s){if(!(0,p.isString)(s)){if(void 0===s.glossaryId)throw new c.DeepLError("glossary option should be a string containing the Glossary ID or a GlossaryInfo object.");s=s.glossaryId}r.append("glossary_id",s)}if(void 0!==i)for(const e in i)r.append(e,i[e]);return r}async function C(e,t,n=!1,s=!1){if(200<=e&&e<400)return;if(t instanceof f.IncomingMessage)try{t=await(0,p.streamToString)(t)}catch(e){t=`Error occurred while reading response: ${e}`}let i="";try{const e=JSON.parse(t);void 0!==e.message&&(i+=`, message: ${e.message}`),void 0!==e.detail&&(i+=`, detail: ${e.detail}`)}catch(e){i=", "+t}switch(e){case 403:throw new c.AuthorizationError(`Authorization failure, check auth_key${i}`);case 456:throw new c.QuotaExceededError(`Quota for this billing period has been exceeded${i}`);case 404:if(n)throw new c.GlossaryNotFoundError(`Glossary not found${i}`);throw new c.DeepLError(`Not found, check server_url${i}`);case 400:throw new c.DeepLError(`Bad request${i}`);case 429:throw new c.TooManyRequestsError(`Too many requests, DeepL servers are currently experiencing high load${i}`);case 503:throw s?new c.DocumentNotReadyError(`Document not ready${i}`):new c.DeepLError(`Service unavailable${i}`);default:{const n=f.STATUS_CODES[e]||"Unknown";throw new c.DeepLError(`Unexpected status code: ${e} ${n}${i}, content: ${t}`)}}}r(yh,e),r(E_,e),r(k_,e),e.standardizeLanguageCode=T,e.nonRegionalLanguageCode=S,e.isFreeAccountAuthKey=w;e.Translator=class{constructor(e,t){var n;if(!(0,p.isString)(e)||0===e.length)throw new c.DeepLError("authKey must be a non-empty string");let s;s=void 0!==(null==t?void 0:t.serverUrl)?t.serverUrl:w(e)?"https://api-free.deepl.com":"https://api.deepl.com";const i={Authorization:`DeepL-Auth-Key ${e}`,"User-Agent":this.constructUserAgentString(!1!==(null==t?void 0:t.sendPlatformInfo),null==t?void 0:t.appInfo),...null!==(n=null==t?void 0:t.headers)&&void 0!==n?n:{}},r=void 0!==(null==t?void 0:t.maxRetries)?t.maxRetries:5,a=void 0!==(null==t?void 0:t.minTimeout)?t.minTimeout:5e3;this.httpClient=new o.HttpClient(s,i,r,a,null==t?void 0:t.proxy)}async getUsage(){const{statusCode:e,content:t}=await this.httpClient.sendRequestWithBackoff("GET","/v2/usage");return await C(e,t),(0,d.parseUsage)(t)}async getSourceLanguages(){const{statusCode:e,content:t}=await this.httpClient.sendRequestWithBackoff("GET","/v2/languages");return await C(e,t),(0,d.parseLanguageArray)(t)}async getTargetLanguages(){const e=new E.URLSearchParams({type:"target"}),{statusCode:t,content:n}=await this.httpClient.sendRequestWithBackoff("GET","/v2/languages",{data:e});return await C(t,n),(0,d.parseLanguageArray)(n)}async getGlossaryLanguagePairs(){const{statusCode:e,content:t}=await this.httpClient.sendRequestWithBackoff("GET","/v2/glossary-language-pairs");return await C(e,t),(0,d.parseGlossaryLanguagePairArray)(t)}async translateText(e,t,n,s){const i=k(t,n,null==s?void 0:s.formality,null==s?void 0:s.glossary,null==s?void 0:s.extraRequestParameters),r=function(e,t){const n=!Array.isArray(t);if(n){if(!(0,p.isString)(t)||0===t.length)throw new c.DeepLError("texts parameter must be a non-empty string or array of non-empty strings");e.append("text",t)}else for(const n of t){if(!(0,p.isString)(n)||0===n.length)throw new c.DeepLError("texts parameter must be a non-empty string or array of non-empty strings");e.append("text",n)}return n}(i,e);!function(e,t){t&&(void 0!==t.splitSentences&&(t.splitSentences=t.splitSentences.toLowerCase(),"on"===t.splitSentences||"default"===t.splitSentences?e.append("split_sentences","1"):"off"===t.splitSentences?e.append("split_sentences","0"):e.append("split_sentences",t.splitSentences)),void 0!==t.preserveFormatting&&e.append("preserve_formatting",(0,p.toBoolString)(t.preserveFormatting)),void 0!==t.tagHandling&&e.append("tag_handling",t.tagHandling),void 0!==t.outlineDetection&&e.append("outline_detection",(0,p.toBoolString)(t.outlineDetection)),void 0!==t.context&&e.append("context",t.context),void 0!==t.nonSplittingTags&&e.append("non_splitting_tags",x(t.nonSplittingTags)),void 0!==t.splittingTags&&e.append("splitting_tags",x(t.splittingTags)),void 0!==t.ignoreTags&&e.append("ignore_tags",x(t.ignoreTags)))}(i,s);const{statusCode:a,content:o}=await this.httpClient.sendRequestWithBackoff("POST","/v2/translate",{data:i});await C(a,o);const l=(0,d.parseTextResultArray)(o);return r?l[0]:l}async translateDocument(e,t,n,s,i){const{outputHandle:r,onError:a}=await async function(){if((0,p.isString)(t)){const e=await h.promises.open(t,"wx"),n=async()=>{try{await e.close(),await v.promisify(h.unlink)(t)}catch{}};return{outputHandle:e,onError:n}}return{outputHandle:t}}();let o;try{o=await this.uploadDocument(e,n,s,i);const{status:t}=await this.isDocumentTranslationComplete(o);return await this.downloadDocument(o,r),t}catch(e){a&&await a();const t=e instanceof Error?e:void 0,n="Error occurred while translating document: "+((null==t?void 0:t.message)?null==t?void 0:t.message:e);throw new c.DocumentTranslationError(n,o,t)}}async uploadDocument(e,t,n,s){if((0,p.isString)(e)){const i=await h.promises.readFile(e);return this.internalUploadDocument(i,t,n,g.default.basename(e),s)}if(void 0===(null==s?void 0:s.filename))throw new c.DeepLError("options.filename must be specified unless using input file path");if(e instanceof h.ReadStream){const i=await(0,p.streamToBuffer)(e);return this.internalUploadDocument(i,t,n,s.filename,s)}if(e instanceof Buffer)return this.internalUploadDocument(e,t,n,s.filename,s);{const i=await e.readFile(),r=await this.internalUploadDocument(i,t,n,s.filename,s);return await e.close(),r}}async getDocumentStatus(e){const t=new E.URLSearchParams({document_key:e.documentKey}),{statusCode:n,content:s}=await this.httpClient.sendRequestWithBackoff("POST",`/v2/document/${e.documentId}`,{data:t});return await C(n,s,!1,!0),(0,d.parseDocumentStatus)(s)}async downloadDocument(e,t){if((0,p.isString)(t)){const n=await h.createWriteStream(t,{flags:"wx"});try{await this.internalDownloadDocument(e,n)}catch(e){throw await new Promise((e=>n.close(e))),await h.promises.unlink(t),e}}else{if(t instanceof h.WriteStream)return this.internalDownloadDocument(e,t);{const n="",s=h.createWriteStream(n,{fd:t.fd});await this.internalDownloadDocument(e,s);try{await t.close()}catch{}}}}async isDocumentTranslationComplete(e){let t=await this.getDocumentStatus(e);for(;!t.done()&&t.ok();){const n=5;await(0,p.timeout)(1e3*n),(0,p.logInfo)(`Rechecking document translation status after sleeping for ${n} seconds.`),t=await this.getDocumentStatus(e)}if(!t.ok()){const e=t.errorMessage||"unknown error";throw new c.DeepLError(e)}return{handle:e,status:t}}async createGlossary(e,t,n,s){if(0===Object.keys(s.entries()).length)throw new c.DeepLError("glossary entries must not be empty");const i=s.toTsv();return this.internalCreateGlossary(e,t,n,"tsv",i)}async createGlossaryWithCsv(e,t,n,s){let i;return(0,p.isString)(s)?i=(await h.promises.readFile(s)).toString():s instanceof h.ReadStream?i=(await(0,p.streamToBuffer)(s)).toString():s instanceof Buffer?i=s.toString():(i=(await s.readFile()).toString(),await s.close()),this.internalCreateGlossary(e,t,n,"csv",i)}async getGlossary(e){const{statusCode:t,content:n}=await this.httpClient.sendRequestWithBackoff("GET",`/v2/glossaries/${e}`);return await C(t,n,!0),(0,d.parseGlossaryInfo)(n)}async listGlossaries(){const{statusCode:e,content:t}=await this.httpClient.sendRequestWithBackoff("GET","/v2/glossaries");return await C(e,t,!0),(0,d.parseGlossaryInfoList)(t)}async getGlossaryEntries(e){e=(0,p.isString)(e)?e:e.glossaryId;const{statusCode:t,content:n}=await this.httpClient.sendRequestWithBackoff("GET",`/v2/glossaries/${e}/entries`);return await C(t,n,!0),new u.GlossaryEntries({tsv:n})}async deleteGlossary(e){e=(0,p.isString)(e)?e:e.glossaryId;const{statusCode:t,content:n}=await this.httpClient.sendRequestWithBackoff("DELETE",`/v2/glossaries/${e}`);await C(t,n,!0)}async internalUploadDocument(e,t,n,s,i){const r=k(t,n,null==i?void 0:i.formality,null==i?void 0:i.glossary,null==i?void 0:i.extraRequestParameters),{statusCode:a,content:o}=await this.httpClient.sendRequestWithBackoff("POST","/v2/document",{data:r,fileBuffer:e,filename:s});return await C(a,o),(0,d.parseDocumentHandle)(o)}async internalDownloadDocument(e,t){const n=new E.URLSearchParams({document_key:e.documentKey}),{statusCode:s,content:i}=await this.httpClient.sendRequestWithBackoff("POST",`/v2/document/${e.documentId}/result`,{data:n},!0);return await C(s,i,!1,!0),i.pipe(t),new Promise(((e,n)=>{t.on("finish",e),t.on("error",n)}))}async internalCreateGlossary(e,t,n,s,i){if(t=S(t),n=S(n),!(0,p.isString)(e)||0===e.length)throw new c.DeepLError("glossary name must be a non-empty string");const r=new E.URLSearchParams({name:e,source_lang:t,target_lang:n,entries_format:s,entries:i}),{statusCode:a,content:o}=await this.httpClient.sendRequestWithBackoff("POST","/v2/glossaries",{data:r});return await C(a,o,!0),(0,d.parseGlossaryInfo)(o)}constructUserAgentString(e,t){let n="deepl-node/1.13.1";if(e){n+=` (${_.type()} ${_.version()}) node/${process.version.substring(1)}`}return t&&(n+=` ${t.appName}/${t.appVersion}`),n}}}(gh)),gh}Object.defineProperty(k_,"__esModule",{value:!0});var N_=$(C_());class I_{constructor(e){this.translator=new N_.Translator(e)}async init(){}async translate(e,t,n){let s=null,i=this.getDeepLLanguageCodeSource(t),r=this.getDeepLLanguageCodeTarget(n);try{s=await this.translateRaw(e,i,r)}catch(t){let r=t.toString();if(r.includes("targetLang")&&r.includes("deprecated"))try{let t=n;s=await this.translateRaw(e,i,t)}catch(e){console.log(e)}else console.log(t)}return s}replaceAll(e,t,n){return e.replace(new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}async translateRaw(e,t,n){let s=e;const i={"*":"<*>"};for(const[e,t]of Object.entries(i))s=this.replaceAll(s,e,t);let r=await this.translator.translateText(s,t,n),a=null==r?void 0:r.text;for(const[e,t]of Object.entries(i))a=this.replaceAll(a,t,e);return a}async getExtra(){let e={sourceLanguages:await this.translator.getSourceLanguages(),targetLanguages:await this.translator.getTargetLanguages()};return{extra:JSON.stringify(e,null,2)||""}}async getUsage(){const e=await this.translator.getUsage();e.anyLimitReached();const t=null==e?void 0:e.character;return{used:(null==t?void 0:t.count)||0,limit:(null==t?void 0:t.limit)||0}}getDeepLLanguageCodeSource(e){return this.getDeepLLanguageCode(e)}getDeepLLanguageCodeTarget(e){return this.getDeepLLanguageCode(e)}getDeepLLanguageCode(e){if(e){return e.split("-")[0]}return e}}class R_{constructor(e,t){this.logger=t.logger,this.translatorSettings=e}async init(){let e=await this.getAuthKey();if(e)try{await this.reloadAuthKey(e);let t=await this.getSettingsAuthKeyCorrectObject();await this.setSettings(t)}catch(e){console.log("Error Initializing Translatior"),console.log(e.toString()),await this.setSettings(this.getSettingsAuthKeyErrorObject(e))}else{const e="Auth Key not set! Please set the key in .env file: "+Vo.getEnvFieldNameForAutoTranslateApiKey();await this.setSettings(this.getSettingsAuthKeyErrorObject(e))}}async translate(e,t,n){if(!this.translatorImplementation)return null;const s=await this.translatorImplementation.translate(e,t,n);return await this.reloadUsage(),s}async getSettingsAuthKeyCorrectObject(){return{valid_auth_key:!0,informations:"Auth Key is valid!",...await this.getUsage(),...await this.getExtra()}}getSettingsAuthKeyErrorObject(e){return{auth_key:null,valid_auth_key:!1,informations:"Auth Key not valid!\n"+e.toString()}}async reloadAuthKey(e){this.translatorImplementation=new I_(e),await this.translatorImplementation.init(),await this.reloadUsage()}async reloadUsage(){const e=await this.getUsage(),t=e.used||0,n=e.limit||0;let s=0;n>0&&(s=Math.round(t/n*100)),await this.setSettings({percentage:s,...e})}async getUsage(){return this.translatorImplementation?await this.translatorImplementation.getUsage():{used:0,limit:0}}async getExtra(){return this.translatorImplementation?await this.translatorImplementation.getExtra():{extra:""}}async setSettings(e){await this.translatorSettings.setSettings(e)}async getAuthKey(){return await this.translatorSettings.getAuthKey()}}class D_{constructor(e){this.apiContext=e,this.apiKey=null,this.apiKey=Vo.getAutoTranslateApiKey();const t=new Xo(this.apiContext);this.translationSettingsService=t.getAutoTranslationSettingsHelper()}async getSettings(){return await this.translationSettingsService.getAppSettings()}async isAutoTranslationEnabled(){let e=await this.getSettings();return null==e?void 0:e.active}async setSettings(e){await this.translationSettingsService.setAutoTranslationSettings(e)}async getAuthKey(){return this.apiKey}}const O_=class{static areTranslationsToTranslate(e,t){if(e&&e[t]){let n=(null==e?void 0:e[t])||{},s=(null==n?void 0:n.create)||[],i=(null==n?void 0:n.update)||[];return s.length>0||i.length>0}return!1}static getSourceTranslationFromTranslations(e,t,n,s){if(e&&e.length>0)for(let i of e){if(O_.getValueFromPayloadOrDefaultValue(i,O_.FIELD_BE_SOURCE_FOR_TRANSLATION,t,n,s))return i}}static getSourceTranslationFromListsOfTranslations(e,t,n,s){if(e&&e.length>0)for(let i=0;i<e.length;i++){let r=e[i],a=O_.getSourceTranslationFromTranslations(r,t,n,s);if(a)return a}return null}static setFIELD_LANGUAGES_ID_OR_CODE(e){(null==e?void 0:e[O_.FIELD_LANGUAGES_CODE_OLD])&&(O_.FIELD_LANGUAGES_ID_OR_CODE=O_.FIELD_LANGUAGES_CODE_OLD);(null==e?void 0:e[O_.FIELD_LANGUAGES_IDS_NEW])&&(O_.FIELD_LANGUAGES_ID_OR_CODE=O_.FIELD_LANGUAGES_IDS_NEW)}static parseTranslationListToLanguagesCodeDict(e){var t;let n={};for(let s of e)O_.setFIELD_LANGUAGES_ID_OR_CODE(s),n[null==(t=null==s?void 0:s[O_.FIELD_LANGUAGES_ID_OR_CODE])?void 0:t.code]=s;return n}static async modifyPayloadForTranslation(e,t,n,s,i,r,a){var o;if(O_.areTranslationsToTranslate(t,a)){let c=JSON.parse(JSON.stringify(t));const l=await i.getSchema();let u=(null==e?void 0:e[a])||[],d={};for(let e of u)O_.setFIELD_LANGUAGES_ID_OR_CODE(e),d[null==e?void 0:e[O_.FIELD_LANGUAGES_ID_OR_CODE]]=e;let p=(null==c?void 0:c[a])||{},h=(null==p?void 0:p.create)||[],f=(null==p?void 0:p.update)||[],m=O_.parseTranslationListToLanguagesCodeDict(h),g=O_.parseTranslationListToLanguagesCodeDict(f),_=O_.getSourceTranslationFromListsOfTranslations([u],l,r,a),y=O_.getSourceTranslationFromListsOfTranslations([h,f],l,r,a)||_;if(y){let e=null==(o=null==y?void 0:y[O_.FIELD_LANGUAGES_ID_OR_CODE])?void 0:o.code,c=new Fo(i,O_.COLLECTION_LANGUAGES),u=await c.readByQuery({});if(u.length>0){let i=[],o=[],c=[],p=O_.getFieldsToTranslate(l,r,a);for(let t of u){let c=null==t?void 0:t.code,u=d[c],h=c===e;if(u)if(h)o.push({...y});else{let e=g[c],t=null==u?void 0:u[O_.FIELD_LET_BE_TRANSLATED],i=O_.getValueFromPayloadOrDefaultValue(e,O_.FIELD_LET_BE_TRANSLATED,l,r,a);if(O_.isValueDefined(i)&&(t=i),t){let e=await O_.translateTranslationItem(y,c,n,s,p);o.push({...u,...e})}else e&&o.push({...e,[O_.FIELD_BE_SOURCE_FOR_TRANSLATION]:!1})}else if(h)i.push({...y,[O_.FIELD_LET_BE_TRANSLATED]:O_.getValueFromPayloadOrDefaultValue(y,O_.FIELD_LET_BE_TRANSLATED,l,r,a),[O_.FIELD_BE_SOURCE_FOR_TRANSLATION]:!0});else{let e=m[c],o=O_.getValueFromPayloadOrDefaultValue(e,O_.FIELD_LET_BE_TRANSLATED,l,r,a),u=!0;if(O_.isValueDefined(o)&&(u=o),u){let e=await O_.translateTranslationItem(y,null==t?void 0:t.code,n,s,p);i.push({...e})}else e&&i.push({...e,[O_.FIELD_BE_SOURCE_FOR_TRANSLATION]:!1})}}return t[a]={create:i,update:o,delete:c},t}}}return t}static isValueDefined(e){return null!=e}static getValueFromPayloadOrDefaultValue(e,t,n,s,i){var r,a;let o=O_.getTranslationCollectionSchema(n,s,i),c=null==e?void 0:e[t];if(O_.isValueDefined(c))return c;return null==(a=null==(r=null==o?void 0:o.fields)?void 0:r[t])?void 0:a.defaultValue}static async translateTranslationItem(e,t,n,s,i){var r;let a={};if(i&&i.length>0)for(let s of i){let i=e[s];if(i)try{let o=await n.translate(i,null==(r=null==e?void 0:e[O_.FIELD_LANGUAGES_ID_OR_CODE])?void 0:r.code,t);o&&(a[s]=o)}catch(e){console.log(e)}}return a[O_.FIELD_LANGUAGES_ID_OR_CODE]={code:t},a[O_.FIELD_LET_BE_TRANSLATED]=!0,a[O_.FIELD_BE_SOURCE_FOR_TRANSLATION]=!1,a}static getTranslationCollectionName(e,t,n){let s=(null==e?void 0:e.relations)||[];for(let e of s)if((null==e?void 0:e.related_collection)===t){const s=null==e?void 0:e.meta,i=null==s?void 0:s.one_collection,r=null==s?void 0:s.one_field,a=null==e?void 0:e.collection;if(i===t&&r===n)return a}return null}static getSchemaForCollection(e,t){var n;return null==(n=null==e?void 0:e.collections)?void 0:n[t]}static getTranslationCollectionSchema(e,t,n){let s=O_.getTranslationCollectionName(e,t,n);return s?O_.getSchemaForCollection(e,s):null}static getFieldsToTranslate(e,t,n){let s=O_.getTranslationCollectionSchema(e,t,n),i=(null==s?void 0:s.fields)||{},r=Object.keys(i),a=(null==s?void 0:s.primary)||"id",o={};for(let e of r)if(e!==a){let t=i[e];"text"!==(null==t?void 0:t.type)&&"string"!==(null==t?void 0:t.type)||(o[e]=!0)}let c=(null==e?void 0:e.relations)||[];for(let e of c)delete o[null==e?void 0:e.field];return Object.keys(o)}};let L_=O_;L_.FIELD_BE_SOURCE_FOR_TRANSLATION="be_source_for_translations",L_.FIELD_LET_BE_TRANSLATED="let_be_translated",L_.FIELD_LANGUAGES_IDS_NEW="languages_id",L_.FIELD_LANGUAGES_CODE_OLD="languages_code",L_.FIELD_LANGUAGES_ID_OR_CODE=void 0,L_.COLLECTION_LANGUAGES="languages";class F_{}F_.USERS_DELETE_EVENT="users.delete",F_.USERS_CREATE_EVENT="users.create",F_.USERS_LOGIN_EVENT="auth.login",F_.SERVER_START_EVENT="server.start";const M_=!1;async function P_(e,t,n,s){let i={},r=(null==t?void 0:t.keys)||[];const a=await new Fo(s,e);for(let e of r){i=await a.readOne(e,{fields:[n+".*"]});break}return i}async function B_(e,t,n,s,i){if(e===qo.TABLENAME)return t;s.database;let r=await i.getSchema(),a=r.collections[e];if(void 0===a)return console.log("Table schema not found for "+e),t;const o=a.fields;if(void 0===o)return console.log("Table schema fields not found for "+e),t;let c=Object.keys(o).filter((e=>{var t,n;return null==(n=null==(t=null==o?void 0:o[e])?void 0:t.special)?void 0:n.includes("translations")})),l=!1;for(let e of c)if(void 0!==t[e]){l=!0;break}if(l){let{translatorSettings:s,translator:r}=await async function(e){let t=new D_(e),n=new R_(t,e);return await n.init(),{translatorSettings:t,translator:n}}(i);if(await s.isAutoTranslationEnabled()||M_){let a=t;for(let t of c){let o=await P_(e,n,t,i);a=await L_.modifyPayloadForTranslation(o,a,r,s,i,e,t)}return a}}return t}var U_=({filter:e,action:t,init:n,schedule:s},i)=>{yo.checkTablesExist("auto-translation",i,[qo.TABLENAME])?t(F_.SERVER_START_EVENT,(async(t,n)=>{try{let t=new D_(i),n=new R_(t,i);await n.init(),function(e,t){let n=["create","update"];for(let s of n)e("items."+s,(async(e,n,s)=>{let i=null==n?void 0:n.collection;return await B_(i,e,n,s,t)}))}(e,i)}catch(e){console.log(e)}})):console.log("Collection "+qo.TABLENAME+" not found. Skipping auto-translation initialization.")};class H_{constructor(e,t,n){this.name=e,this.total_count=t,this.startTime=this.private_getNow(),this.current_count=0,this.lastTime=void 0,this.print_every_x_count=n||100}start(){this.startTime=this.private_getNow(),this.lastTime=this.startTime,this.current_count=0}private_getNow(){return(new Date).getTime()}calcEstimatedFinishedDate(e){let t=(this.private_getNow()-this.startTime)/1e3,n=t/e*this.total_count;return new Date(this.private_getNow()+1e3*(n-t))}formatSecondsIntoHHMMSS(e){let t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}setCurrentCount(e){if(this.current_count=e,void 0===this.startTime)return void console.log("Timer not started.");if(0===e)return;if(e%this.print_every_x_count!=0)return;let t=this.private_getNow();this.lastTime=t}calcTimeSpent(){let e,t,n=this.current_count,s=this.lastTime||this.private_getNow(),i=(this.calcEstimatedFinishedDate(n).getTime()-s)/1e3,r=this.formatSecondsIntoHHMMSS(i),a=this.calcEstimatedFinishedDate(n).toLocaleTimeString(),o=`Estimated remaining time for ${this.name}: ${r}, probably finished at: ${a} - `+n+" / "+this.total_count;if(this.lastTime){e=(s-this.lastTime)/1e3/this.print_every_x_count,t=this.formatSecondsIntoHHMMSS(e)}return{totalTimeInformation:o,remainingTime:i,estimatedCompletionTime:this.calcEstimatedFinishedDate(n),estimatedCompletionTimeString:a,remainingTimeString:r,averageTimePerCount:e,averageTimePerCountFormatted:t}}printEstimatedTime(){let e=this.calcTimeSpent();console.log(e.totalTimeInformation)}}let j_=class{constructor(e,t,n,s){this.myDatabaseHelper=t,this.workflowRun=e,this.logger=n,this.parser=s}async parse(){try{await this.logger.appendLog("Starting cashregister parsing"),await this.logger.appendLog("Parsing cashregister transactions");let e=await this.parser.getTransactionsList(),t=e.length,n=new H_("Cash register parsing",t,100),s={};n.start();for(let i=0;i<t;i++){await this.logger.appendLog("Transaction parsing progress: "+i+"/"+t);let r=e[i];if(!r)continue;let a,o=null==r?void 0:r.cashregister_external_idenfifier,c=s[o];if(void 0===c){let e=await this.myDatabaseHelper.getCashregisterHelper().findOrCreateCashregister(o);e&&(c=null==e?void 0:e.id,s[o]=c,a=c)}else a=c;void 0!==a?await this.findOrCreateCashregisterTransaction(r,a):console.log("Houston we got a problem? Seems like somebody deleted a cashregister mid transaction"),n.setCurrentCount(i);let l=n.calcTimeSpent().totalTimeInformation;await this.logger.appendLog("Time spent: "+l)}return await this.logger.appendLog("Finished"),this.logger.getFinalLogWithStateAndParams({state:zo.SUCCESS})}catch(e){return await this.logger.appendLog("Error: "+e.toString()),this.logger.getFinalLogWithStateAndParams({state:zo.FAILED})}}async findOrCreateCashregisterTransaction(e,t){return await this.myDatabaseHelper.getCashregisterHelper().findOrCreateCashregisterTransaction(e,t)}};class G_{constructor(e,t){this.password="",this.api_url="",this.api_url=e,this.password=t}async getTransactionsList(){const e=await this.getAsJSON(this.api_url,this.password),t=[];if(e){const n=Object.keys(e);for(let s=0;s<n.length;s++){const i=n[s];if(i){const n=e[i];n&&t.push({baseData:{quantity:n.Menge,name:n.Name,id:n.BUCHUNGSNUMMER,date:n.Datum},cashregister_external_idenfifier:n.Kasse_ID})}}}return t}async loadFromRemote(e,t){const n=Buffer.from(t).toString("base64"),s=(await Ki.request({method:"GET",url:e,headers:{Authorization:"Basic "+n},responseType:"arraybuffer"})).data.toString("latin1");return Buffer.from(s,"utf-8").toString()}async getAsJSON(e,t){const n=await this.loadFromRemote(e,t),s=n.includes("\r")?"\r":"\n",i=n.split(s);if(!i)return{};const r=[],a={};for(let e=0;e<i.length;e++){let t=i[e];if(void 0===t)continue;const n=t.trim();if(0===e){const e=n.split("\t");for(const t of e)r.push(t)}else{if(""===n)continue;const e={},t=n.split("\t");for(let n=0;n<r.length;n++){let s=t[n]||"";switch(r[n]){case"BUCHUNGSNUMMER":e.BUCHUNGSNUMMER=G_.transformBuchungsnummer(s);break;case"Datum":let t=G_.transformDate(s);t&&(e.Datum=t);break;case"Name":e.Name=s;break;case"Menge":e.Menge=parseFloat(s);break;case"Verbrauchergruppe_ID":e.Verbrauchergruppe_ID=s;break;case"Kasse_ID":e.Kasse_ID=s}}e.Datum&&e.Kasse_ID&&e.Menge&&e.Name&&e.Verbrauchergruppe_ID&&e.BUCHUNGSNUMMER&&(a[e.BUCHUNGSNUMMER]={BUCHUNGSNUMMER:e.BUCHUNGSNUMMER,Datum:e.Datum,Kasse_ID:e.Kasse_ID,Menge:e.Menge,Name:e.Name,Verbrauchergruppe_ID:e.Verbrauchergruppe_ID})}}return a}static transformDate(e){const[t,n]=e.split(" ");if(void 0===t||void 0===n)return null;const[s,i,r]=t.split(".").map((e=>parseInt(e)));if(void 0===s||void 0===i||void 0===r)return null;const[a,o,c]=n.split(":").map((e=>parseInt(e)));if(void 0===a||void 0===o||void 0===c)return null;function l(e,t){const n=new Date(e,t+1,0),s=n.getDay();return new Date(e,t,n.getDate()-s)}l(r,2),l(r,9);let u=a;return`${r}-${i.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}T${u.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`}static transformBuchungsnummer(e){if(e){let t="",n=!1;for(const s of e)" "!==s?(n=!0,t+=s):n&&(n=!1,t+="-");return t}}}class $_{constructor(e,t){this.currentLog="",this.workflowRun=e,this.myDatabaseHelper=t,this.currentLog=e.log||""}async setLog(e,t){this.myDatabaseHelper.getWorkflowsRunsHelper().updateOneWithoutHookTrigger(e,{log:t})}static createLogRow(e){return(new Date).toISOString()+": "+e+"\n"}async appendLog(e){this.currentLog+=$_.createLogRow(e),await this.setLog(this.workflowRun.id,this.currentLog)}getFinalLogWithStateAndParams(e){return{log:this.currentLog,...e}}}class q_{handleWorkflowRunsWantToRun(e,t,n){let s={errorMessage:void 0};return t.length>1?(s.errorMessage="Cannot start more than one workflow run at a time",s):n.length>0?(s.errorMessage="A workflow run is already running",s):(e.state=zo.RUNNING,s)}getDeleteFailedWorkflowRunsAfterDays(){}getDeleteFinishedWorkflowRunsAfterDays(){}}const z_=class{static getCronString(e){return e.seconds+" "+e.minutes+" "+e.hours+" "+e.dayOfMonth+" "+e.month+" "+e.dayOfWeek}static async createWorkflowRunInstance(e,t){await t.getWorkflowsRunsHelper().createOne({workflow:e,state:zo.RUNNING})}static async registerScheduleToRunWorkflowRuns(e){V_.registerWorkflow(e.workflowRunInterface),await z_.registerScheduleToCreateWorkflowRuns({workflowId:e.workflowRunInterface.getWorkflowId(),cronOject:e.cronOject,myDatabaseHelper:e.myDatabaseHelper,schedule:e.schedule})}static async registerScheduleToCreateWorkflowRuns(e){let t=z_.getCronString(e.cronOject);e.schedule(t,(async()=>{try{let t=e.workflowId;await K_(t,e.myDatabaseHelper);let n=await e.myDatabaseHelper.getWorkflowsHelper().readOne(t);(null==n?void 0:n.enabled)&&await z_.createWorkflowRunInstance(e.workflowId,e.myDatabaseHelper)}catch(n){console.error("Error while creating workflow run for workflowId: "+e.workflowId+" for workflow schedule: "+t),console.error(n)}}))}};let W_=z_;W_.EVERY_MINUTE={seconds:0,minutes:"*",hours:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*"},W_.EVERY_5_MINUTES={seconds:0,minutes:"*/5",hours:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*"},W_.EVERY_15_MINUTES={seconds:0,minutes:"*/15",hours:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*"},W_.EVERY_DAY_AT_17_59={seconds:0,minutes:59,hours:17,dayOfMonth:"*",month:"*",dayOfWeek:"*"},W_.EVERY_DAY_AT_4AM={seconds:0,minutes:0,hours:4,dayOfMonth:"*",month:"*",dayOfWeek:"*"};const Y_=class{static registerWorkflow(e){let t=e.getWorkflowId();if(Y_.registeredWorkflows[t])throw new Error("Workflow with id: "+t+" is already registered.");Y_.registeredWorkflows[e.getWorkflowId()]=e}static getRegisteredWorkflow(e){return Y_.registeredWorkflows[e]}static getRegisteredWorkflowsIds(){return Object.keys(Y_.registeredWorkflows)}};let V_=Y_;async function K_(e,t){let n={id:e};await t.getWorkflowsHelper().upsertOne(n)}async function Q_(e,t){let n={};return n={workflow:e,state:zo.RUNNING},await t.getWorkflowsRunsHelper().findItems(n)}function X_(e){let t;return e.workflow&&("string"==typeof e.workflow?t=e.workflow:"object"==typeof e.workflow&&(t=e.workflow.id)),t}function Z_(e){let t={};for(let n of e){let e=X_(n);if(e){let s=t[e]||[];s.push(n),t[e]=s}}return t}async function J_(e,t,n){if(e.state===zo.RUNNING){e=function(e){return e.log=null,e.output=null,e.date_finished=null,e.date_started=null,e.runtime_in_seconds=null,e}(e);let s=Object.keys(t);if(0===s.length)throw new Error("Please set a workflow for the workflow_run/s");for(let e of s)try{await K_(e,n)}catch(t){throw console.error(t),new Error("modifyInputForCreateOrUpdateWorkflowRunToRunning: Error while create/update of workflowRuns. Cannot find or create workflow with id: "+e)}for(let e of s){let t;console.log("Checking if workflow with id: "+e+" is enabled");try{t=await n.getWorkflowsHelper().readOne(e)}catch(t){throw console.error(t),new Error("modifyInputForCreateOrUpdateWorkflowRunToRunning: Error while create/update of workflowRuns. Cannot read workflow with id: "+e)}if(!t)throw new Error("Workflow with id: "+e+" not found");if(!1===(null==t?void 0:t.enabled))throw new Error("Workflow with id: "+e+" is not enabled")}let i=s.filter((e=>!V_.getRegisteredWorkflow(e)));if(i.length>0)throw new Error("-- No WorkflowRunJobInterface found for workflowIds: "+i.join(", "));for(let s of Object.keys(t)){const i=t[s];if(i){let t=await Q_(s,n),r=V_.getRegisteredWorkflow(s);if(!r)throw new Error("-- No WorkflowRunJobInterface found for workflowId: "+s);{let n=await r.handleWorkflowRunsWantToRun(e,i,t);if(n.errorMessage)throw new Error("Error while setting workflow_runs to running: "+n.errorMessage)}}}e.log=e.log||$_.createLogRow("Workflow Run started")}return e}async function ey(e,t,n,s,i){await async function(e,t,n,s,i){if(t=new Xo(s,i),e.state===zo.RUNNING){let e=n,s=Z_(await t.getWorkflowsRunsHelper().readMany(e));for(let e of Object.keys(s)){const n=s[e];if(n){let s=V_.getRegisteredWorkflow(e);if(!s)throw new Error("No WorkflowRunJobInterface found for workflowId: "+e);for(let e of n){let n=(new Date).toISOString();await t.getWorkflowsRunsHelper().updateOneWithoutHookTrigger(e.id,{date_started:n});let i=await s.runJob(e,t,new $_(e,t)),r=[zo.SUCCESS,zo.FAILED,zo.SKIPPED,zo.DELETE],a=!1;i.state&&r.includes(i.state)&&(a=!0),a||(i.state=zo.SUCCESS),i.date_started=n,i.date_finished=(new Date).toISOString(),i.runtime_in_seconds=parseInt(""+(new Date(i.date_finished).getTime()-new Date(n).getTime())/1e3),i.log=i.log||"Workflow Run finished",await t.getWorkflowsRunsHelper().updateOneWithoutHookTrigger(e.id,i)}}}}}(e,t,n,s,i),await async function(e,t,n,s,i){if(e.state===zo.DELETE){let e=n,s=await t.getWorkflowsRunsHelper().readMany(e);for(let e of s)await t.getWorkflowsRunsHelper().deleteOne(e.id)}}(e,t,n)}V_.registeredWorkflows={};var ty=async({action:e,init:t,filter:n,schedule:s},i)=>{if(!await yo.checkAllTablesExistWithApiContext("workflows_hook",i))return;let r=new Xo(i);t(xo.INIT_APP_STARTED,(async()=>{let e=[],t={state:zo.RUNNING},n=await r.getWorkflowsRunsHelper().findItems(t);e=e.concat(n),await r.getWorkflowsRunsHelper().updateManyByItems(e,{state:zo.FAILED,log:"Workflow Run was not finished, as the server was stopped in the middle of the workflow. The workflow was set to failed."});let s=V_.getRegisteredWorkflowsIds();for(let e of s){let t={id:e,alias:e};await r.getWorkflowsHelper().upsertOne(t)}})),n(go.WORKFLOWS_RUNS+".items.create",(async(e,{keys:t,collection:n},s)=>{if(void 0===e.state&&(e.state=zo.RUNNING),e.state===zo.RUNNING){let t=Z_([e]);e=await J_(e,t,r)}return e})),n(go.WORKFLOWS_RUNS+".items.update",(async(e,{keys:t,collection:n},s)=>{if(e.state===zo.RUNNING){let n=t,s=await r.getWorkflowsRunsHelper().readMany(n),i=Z_(s),a=X_(e);if(a&&(i={},i[a]=s),Object.keys(i).length>1)throw new Error("You can only update workflow_runs with the same workflow_id at once.");e=await J_(e,i,r)}return e})),e(go.WORKFLOWS_RUNS+".items.create",(async(e,t)=>{let{payload:n,key:s}=e,a=[s];await ey(n,r,a,i,t)})),e(go.WORKFLOWS_RUNS+".items.update",(async({payload:e,keys:t},n)=>{await ey(e,r,t,i,n)}))};class ny extends q_{constructor(e){super(),this.usedParser=e}getWorkflowId(){return"cashregister-parse"}async runJob(e,t,n){await n.appendLog("Starting cashregister parsing");const s=new j_(e,t,n,this.usedParser);try{return await s.parse()}catch(e){return await n.appendLog("Error: "+e.toString()),n.getFinalLogWithStateAndParams({state:zo.FAILED})}}}var sy=async({action:e,init:t,filter:n,schedule:s},i)=>{let r=null;switch(Vo.getSyncForCustomer()){case Yo.TEST:case Yo.HANNOVER:r=null;break;case Yo.OSNABRUECK:r=new G_("https://share.sw-os.de/swosy-kassendaten-2h","Nils:qYoTHeyPyRljfEGRWW52")}if(!r)return;let a=new Xo(i);V_.registerWorkflow(new ny(r)),W_.registerScheduleToCreateWorkflowRuns({workflowId:"cashregister-parse",myDatabaseHelper:a,schedule:s,cronOject:W_.EVERY_DAY_AT_17_59})};var iy=async({action:e,init:t},n)=>{if(!await yo.checkAllTablesExistWithApiContext("collections_dates_last_update",n))return;const s=new Xo(n),i=[go.COLLECTIONS_DATES_LAST_UPDATE];let r=s.getCollectionDatesLastUpdateHelper();async function a(){let e=(await yo.getTableNamesFromApiContext(n)).filter((e=>!i.includes(e))),t=(await r.readAllItems()).map((e=>e.id)),s=e.filter((e=>!t.includes(e))),a=t.filter((t=>!e.includes(t)));for(let e of a)await r.deleteOne(e);for(let e of s)await r.createOne({id:e,date_updated:(new Date).toISOString()})}async function o(e){if(!i.includes(e)){let t=(new Date).toISOString(),n=await r.readByQuery({filter:{id:{_eq:e}}});try{n.length>0?await r.updateOne(e,{date_updated:t}):await r.createOne({id:e,date_updated:t})}catch(e){}await a()}}t("app.after",(async()=>{await a()})),e("*.items.update",(async e=>{let t=e.collection;await o(t)})),e("*.items.create",(async e=>{let t=e.collection;await o(t)})),e("*.items.delete",(async e=>{let t=e.collection;await o(t)}))},ry=async({action:e,filter:t},n)=>{const s=new vo(n),i=await s.getFileService();t(F_.USERS_DELETE_EVENT,(async(e,t,n)=>{var s;const r=e,a=null==(s=n.accountability)?void 0:s.user,o=[],c=[];for(let e of r)o.push({uploaded_by:{_eq:e}}),c.push({modified_by:{_eq:e}});const l={filter:{_or:o}},u={filter:{_or:c}},d={uploaded_by:a},p={modified_by:a};return await i.updateByQuery(l,d),await i.updateByQuery(u,p),e}))};const ay=class{constructor(e){this.myDatabaseHelper=new Xo(e)}async getFoodIdsFromFoodFeedbackIds(e){let t=this.myDatabaseHelper.getFoodFeedbacksHelper(),n={};for(let s of e){let e=await t.readOne(s),i=null==e?void 0:e.food;i&&"string"==typeof i&&(n[i]=!0)}return Object.keys(n)}recalculateFoodIdsRatingsNonBlocking(e,t){for(let n of e)this.recalculateFoodRating(n,t).then((e=>{}))}async getFoodFromId(e){let t=this.myDatabaseHelper.getFoodsHelper();return await t.readOne(e)}static getNumberIfValueInRatingRange(e){return null==e?null:ay.MIN_RATING_VALUE<=e&&e<=ay.MAX_RATING_VALUE?e:null}static calculateFoodRating(e,t){let n=0,s=0;for(let e of t){let t=null==e?void 0:e.rating;const i=ay.getNumberIfValueInRatingRange(t);null!==i&&(n+=i,s++)}let i=e.rating_average_legacy||0,r=e.rating_amount_legacy||0,a=s+r;if(a>0){return{rating_average:(n+i*r)/a,rating_amount:a}}return{rating_average:null,rating_amount:0}}async getFoodFeedbacksForFood(e){let t=this.myDatabaseHelper.getFoodFeedbacksHelper(),n=[];try{n=await t.readByQuery({filter:{food:{_eq:e}},limit:-1})}catch(e){}return n}async recalculateFoodRating(e,t){const n=await this.getFoodFromId(e);if(!n)return void console.error("recalculateFoodRating: food_id: "+e+" | food not found");let s={};if(t)for(let e of t)s[e]=!0;let i=(await this.getFoodFeedbacksForFood(e)).filter((e=>!s[e.id])),{rating_average:r,rating_amount:a}=ay.calculateFoodRating(n,i);await this.updateFoodRating(n,r,a)}async updateFoodRating(e,t,n){let s=this.myDatabaseHelper.getFoodsHelper();await s.updateOne(e.id,{rating_average:t,rating_amount:n})}};let oy=ay;oy.MAX_RATING_VALUE=5,oy.MIN_RATING_VALUE=1;var cy=async({action:e,filter:t},n)=>{if(!await yo.checkAllTablesExistWithApiContext("food_feedback_rating_calculate",n))return;const s=new oy(n),i=go.FOODS_FEEDBACKS;e(i+".items.update",(async e=>{let t=e.keys,n=await s.getFoodIdsFromFoodFeedbackIds(t);s.recalculateFoodIdsRatingsNonBlocking(n,[])})),e(i+".items.create",(async e=>{let t=[e.key],n=await s.getFoodIdsFromFoodFeedbackIds(t);s.recalculateFoodIdsRatingsNonBlocking(n,[])})),t(i+".items.delete",(async(e,t,n)=>{let i=e;if(i&&Array.isArray(i)&&0!==i.length){let e=await s.getFoodIdsFromFoodFeedbackIds(i),t=i;s.recalculateFoodIdsRatingsNonBlocking(e,t)}else;return e}))};function ly(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uy={exports:{}};!function(e,t){e.exports=function(){var t,n;function s(){return t.apply(null,arguments)}function i(e){t=e}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function l(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){var n,s=[],i=e.length;for(n=0;n<i;++n)s.push(t(e[n],n));return s}function h(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,s){return Vn(e,t,n,s,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(e){return null==e._pf&&(e._pf=m()),e._pf}function _(e){var t=null,s=!1,i=e._d&&!isNaN(e._d.getTime());return i&&(t=g(e),s=n.call(t.parsedDateParts,(function(e){return null!=e})),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?i:(e._isValid=i,e._isValid)}function y(e){var t=f(NaN);return null!=e?h(g(t),e):g(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),s=n.length>>>0;for(t=0;t<s;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var E=s.momentProperties=[],b=!1;function v(e,t){var n,s,i,r=E.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),r>0)for(n=0;n<r;n++)l(i=t[s=E[n]])||(e[s]=i);return e}function T(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,s.updateOffset(this),b=!1)}function A(e){return e instanceof T||null!=e&&null!=e._isAMomentObject}function S(e){!1===s.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function w(e,t){var n=!0;return h((function(){if(null!=s.deprecationHandler&&s.deprecationHandler(null,e),n){var i,r,a,c=[],l=arguments.length;for(r=0;r<l;r++){if(i="","object"==typeof arguments[r]){for(a in i+="\n["+r+"] ",arguments[0])o(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[r];c.push(i)}S(e+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var x,k={};function C(e,t){null!=s.deprecationHandler&&s.deprecationHandler(e,t),k[e]||(S(t),k[e]=!0)}function N(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function I(e){var t,n;for(n in e)o(e,n)&&(N(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R(e,t){var n,s=h({},e);for(n in t)o(t,n)&&(a(e[n])&&a(t[n])?(s[n]={},h(s[n],e[n]),h(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)o(e,n)&&!o(t,n)&&a(e[n])&&(s[n]=h({},s[n]));return s}function D(e){null!=e&&this.set(e)}s.suppressDeprecationWarnings=!1,s.deprecationHandler=null,x=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};var O={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return N(s)?s.call(t,n):s}function F(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,B={},U={};function H(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(U[e]=i),t&&(U[t[0]]=function(){return F(i.apply(this,arguments),t[1],t[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,s=e.match(M);for(t=0,n=s.length;t<n;t++)U[s[t]]?s[t]=U[s[t]]:s[t]=j(s[t]);return function(t){var i,r="";for(i=0;i<n;i++)r+=N(s[i])?s[i].call(t,e):s[i];return r}}function $(e,t){return e.isValid()?(t=q(t,e.localeData()),B[t]=B[t]||G(t),B[t](e)):e.localeData().invalidDate()}function q(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;n>=0&&P.test(e);)e=e.replace(P,s),P.lastIndex=0,n-=1;return e}var z={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function W(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(M).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var Y="Invalid date";function V(){return this._invalidDate}var K="%d",Q=/\d{1,2}/;function X(e){return this._ordinal.replace("%d",e)}var Z={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function J(e,t,n,s){var i=this._relativeTime[n];return N(i)?i(e,t,n,s):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return N(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"==typeof e?te[e]||te[e.toLowerCase()]:void 0}function se(e){var t,n,s={};for(n in e)o(e,n)&&(t=ne(n))&&(s[t]=e[n]);return s}var ie={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function re(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:ie[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var ae,oe=/\d/,ce=/\d\d/,le=/\d{3}/,ue=/\d{4}/,de=/[+-]?\d{6}/,pe=/\d\d?/,he=/\d\d\d\d?/,fe=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ge=/\d{1,4}/,_e=/[+-]?\d{1,6}/,ye=/\d+/,Ee=/[+-]?\d+/,be=/Z|[+-]\d\d:?\d\d/gi,ve=/Z|[+-]\d\d(?::?\d\d)?/gi,Te=/[+-]?\d+(\.\d{1,3})?/,Ae=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Se=/^[1-9]\d?/,we=/^([1-9]\d|\d)/;function xe(e,t,n){ae[e]=N(t)?t:function(e,s){return e&&n?n:t}}function ke(e,t){return o(ae,e)?ae[e](t._strict,t._locale):new RegExp(Ce(e))}function Ce(e){return Ne(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,s,i){return t||n||s||i})))}function Ne(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ie(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Re(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Ie(t)),n}ae={};var De={};function Oe(e,t){var n,s,i=t;for("string"==typeof e&&(e=[e]),u(t)&&(i=function(e,n){n[t]=Re(e)}),s=e.length,n=0;n<s;n++)De[e[n]]=i}function Le(e,t){Oe(e,(function(e,n,s,i){s._w=s._w||{},t(e,s._w,s,i)}))}function Fe(e,t,n){null!=t&&o(De,e)&&De[e](t,n._a,n,e)}function Me(e){return e%4==0&&e%100!=0||e%400==0}var Pe=0,Be=1,Ue=2,He=3,je=4,Ge=5,$e=6,qe=7,ze=8;function We(e){return Me(e)?366:365}H("Y",0,0,(function(){var e=this.year();return e<=9999?F(e,4):"+"+e})),H(0,["YY",2],0,(function(){return this.year()%100})),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),xe("Y",Ee),xe("YY",pe,ce),xe("YYYY",ge,ue),xe("YYYYY",_e,de),xe("YYYYYY",_e,de),Oe(["YYYYY","YYYYYY"],Pe),Oe("YYYY",(function(e,t){t[Pe]=2===e.length?s.parseTwoDigitYear(e):Re(e)})),Oe("YY",(function(e,t){t[Pe]=s.parseTwoDigitYear(e)})),Oe("Y",(function(e,t){t[Pe]=parseInt(e,10)})),s.parseTwoDigitYear=function(e){return Re(e)+(Re(e)>68?1900:2e3)};var Ye,Ve=Qe("FullYear",!0);function Ke(){return Me(this.year())}function Qe(e,t){return function(n){return null!=n?(Ze(this,e,n),s.updateOffset(this,t),this):Xe(this,e)}}function Xe(e,t){if(!e.isValid())return NaN;var n=e._d,s=e._isUTC;switch(t){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Ze(e,t,n){var s,i,r,a,o;if(e.isValid()&&!isNaN(n)){switch(s=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(i?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(i?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(i?s.setUTCHours(n):s.setHours(n));case"Date":return void(i?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}r=n,a=e.month(),o=29!==(o=e.date())||1!==a||Me(r)?o:28,i?s.setUTCFullYear(r,a,o):s.setFullYear(r,a,o)}}function Je(e){return N(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"==typeof e){var n,s=re(e=se(e)),i=s.length;for(n=0;n<i;n++)this[s[n].unit](e[s[n].unit])}else if(N(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?Me(e)?29:28:31-n%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},H("M",["MM",2],"Mo",(function(){return this.month()+1})),H("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),H("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),xe("M",pe,Se),xe("MM",pe,ce),xe("MMM",(function(e,t){return t.monthsShortRegex(e)})),xe("MMMM",(function(e,t){return t.monthsRegex(e)})),Oe(["M","MM"],(function(e,t){t[Be]=Re(e)-1})),Oe(["MMM","MMMM"],(function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[Be]=i:g(n).invalidMonth=e}));var st="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),it="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,at=Ae,ot=Ae;function ct(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rt).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone}function lt(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rt.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ut(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=f([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))||-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))||-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null}function dt(e,t,n){var s,i,r;if(this._monthsParseExact)return ut.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=f([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}}function pt(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Re(t);else if(!u(t=e.localeData().monthsParse(t)))return e;var n=t,s=e.date();return s=s<29?s:Math.min(s,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,s):e._d.setMonth(n,s),e}function ht(e){return null!=e?(pt(this,e),s.updateOffset(this,!0),this):Xe(this,"Month")}function ft(){return nt(this.year(),this.month())}function mt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||_t.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=at),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function gt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||_t.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=ot),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _t(){function e(e,t){return t.length-e.length}var t,n,s,i,r=[],a=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),s=Ne(this.monthsShort(n,"")),i=Ne(this.months(n,"")),r.push(s),a.push(i),o.push(i),o.push(s);r.sort(e),a.sort(e),o.sort(e),this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function yt(e,t,n,s,i,r,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}function Et(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function bt(e,t,n){var s=7+t-n;return-(7+Et(e,0,s).getUTCDay()-t)%7+s-1}function vt(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+bt(e,s,i);return o<=0?a=We(r=e-1)+o:o>We(e)?(r=e+1,a=o-We(e)):(r=e,a=o),{year:r,dayOfYear:a}}function Tt(e,t,n){var s,i,r=bt(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+At(i=e.year()-1,t,n):a>At(e.year(),t,n)?(s=a-At(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function At(e,t,n){var s=bt(e,t,n),i=bt(e+1,t,n);return(We(e)-s+i)/7}function St(e){return Tt(e,this._week.dow,this._week.doy).week}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),xe("w",pe,Se),xe("ww",pe,ce),xe("W",pe,Se),xe("WW",pe,ce),Le(["w","ww","W","WW"],(function(e,t,n,s){t[s.substr(0,1)]=Re(e)}));var wt={dow:0,doy:6};function xt(){return this._week.dow}function kt(){return this._week.doy}function Ct(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Nt(e){var t=Tt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function It(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Rt(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Dt(e,t){return e.slice(t,7).concat(e.slice(0,t))}H("d",0,"do","day"),H("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),H("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),H("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),xe("d",pe),xe("e",pe),xe("E",pe),xe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),xe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),xe("dddd",(function(e,t){return t.weekdaysRegex(e)})),Le(["dd","ddd","dddd"],(function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e})),Le(["d","e","E"],(function(e,t,n,s){t[s]=Re(e)}));var Ot="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Lt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ft="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mt=Ae,Pt=Ae,Bt=Ae;function Ut(e,t){var n=r(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Dt(n,this._week.dow):e?n[e.day()]:n}function Ht(e){return!0===e?Dt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function jt(e){return!0===e?Dt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Gt(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=f([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))||-1!==(i=Ye.call(this._shortWeekdaysParse,a))||-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))||-1!==(i=Ye.call(this._weekdaysParse,a))||-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))||-1!==(i=Ye.call(this._weekdaysParse,a))||-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null}function $t(e,t,n){var s,i,r;if(this._weekdaysParseExact)return Gt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=f([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}}function qt(e){if(!this.isValid())return null!=e?this:NaN;var t=Xe(this,"Day");return null!=e?(e=It(e,this.localeData()),this.add(e-t,"d")):t}function zt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Rt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Yt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Qt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Mt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Vt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Qt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Pt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Kt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Qt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Bt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Qt(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],c=[],l=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),s=Ne(this.weekdaysMin(n,"")),i=Ne(this.weekdaysShort(n,"")),r=Ne(this.weekdays(n,"")),a.push(s),o.push(i),c.push(r),l.push(s),l.push(i),l.push(r);a.sort(e),o.sort(e),c.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Zt(){return this.hours()||24}function Jt(e,t){H(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,Xt),H("k",["kk",2],0,Zt),H("hmm",0,0,(function(){return""+Xt.apply(this)+F(this.minutes(),2)})),H("hmmss",0,0,(function(){return""+Xt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)})),H("Hmm",0,0,(function(){return""+this.hours()+F(this.minutes(),2)})),H("Hmmss",0,0,(function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)})),Jt("a",!0),Jt("A",!1),xe("a",en),xe("A",en),xe("H",pe,we),xe("h",pe,Se),xe("k",pe,Se),xe("HH",pe,ce),xe("hh",pe,ce),xe("kk",pe,ce),xe("hmm",he),xe("hmmss",fe),xe("Hmm",he),xe("Hmmss",fe),Oe(["H","HH"],He),Oe(["k","kk"],(function(e,t,n){var s=Re(e);t[He]=24===s?0:s})),Oe(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Oe(["h","hh"],(function(e,t,n){t[He]=Re(e),g(n).bigHour=!0})),Oe("hmm",(function(e,t,n){var s=e.length-2;t[He]=Re(e.substr(0,s)),t[je]=Re(e.substr(s)),g(n).bigHour=!0})),Oe("hmmss",(function(e,t,n){var s=e.length-4,i=e.length-2;t[He]=Re(e.substr(0,s)),t[je]=Re(e.substr(s,2)),t[Ge]=Re(e.substr(i)),g(n).bigHour=!0})),Oe("Hmm",(function(e,t,n){var s=e.length-2;t[He]=Re(e.substr(0,s)),t[je]=Re(e.substr(s))})),Oe("Hmmss",(function(e,t,n){var s=e.length-4,i=e.length-2;t[He]=Re(e.substr(0,s)),t[je]=Re(e.substr(s,2)),t[Ge]=Re(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,sn=Qe("Hours",!0);function rn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,on={calendar:O,longDateFormat:z,invalidDate:Y,ordinal:K,dayOfMonthOrdinalParse:Q,relativeTime:Z,months:st,monthsShort:it,week:wt,weekdays:Ot,weekdaysMin:Ft,weekdaysShort:Lt,meridiemParse:nn},cn={},ln={};function un(e,t){var n,s=Math.min(e.length,t.length);for(n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}function dn(e){return e?e.toLowerCase().replace("_","-"):e}function pn(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=dn(e[r]).split("-")).length,n=(n=dn(e[r+1]))?n.split("-"):null;t>0;){if(s=fn(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&un(i,n)>=t-1)break;t--}r++}return an}function hn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function fn(t){var n=null;if(void 0===cn[t]&&e&&e.exports&&hn(t))try{n=an._abbr,ly("./locale/"+t),mn(n)}catch(e){cn[t]=null}return cn[t]}function mn(e,t){var n;return e&&((n=l(t)?yn(e):gn(e,t))?an=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function gn(e,t){if(null!==t){var n,s=on;if(t.abbr=e,null!=cn[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=cn[e]._config;else if(null!=t.parentLocale)if(null!=cn[t.parentLocale])s=cn[t.parentLocale]._config;else{if(null==(n=fn(t.parentLocale)))return ln[t.parentLocale]||(ln[t.parentLocale]=[]),ln[t.parentLocale].push({name:e,config:t}),null;s=n._config}return cn[e]=new D(R(s,t)),ln[e]&&ln[e].forEach((function(e){gn(e.name,e.config)})),mn(e),cn[e]}return delete cn[e],null}function _n(e,t){if(null!=t){var n,s,i=on;null!=cn[e]&&null!=cn[e].parentLocale?cn[e].set(R(cn[e]._config,t)):(null!=(s=fn(e))&&(i=s._config),t=R(i,t),null==s&&(t.abbr=e),(n=new D(t)).parentLocale=cn[e],cn[e]=n),mn(e)}else null!=cn[e]&&(null!=cn[e].parentLocale?(cn[e]=cn[e].parentLocale,e===mn()&&mn(e)):null!=cn[e]&&delete cn[e]);return cn[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!r(e)){if(t=fn(e))return t;e=[e]}return pn(e)}function En(){return x(cn)}function bn(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[Be]<0||n[Be]>11?Be:n[Ue]<1||n[Ue]>nt(n[Pe],n[Be])?Ue:n[He]<0||n[He]>24||24===n[He]&&(0!==n[je]||0!==n[Ge]||0!==n[$e])?He:n[je]<0||n[je]>59?je:n[Ge]<0||n[Ge]>59?Ge:n[$e]<0||n[$e]>999?$e:-1,g(e)._overflowDayOfYear&&(t<Pe||t>Ue)&&(t=Ue),g(e)._overflowWeeks&&-1===t&&(t=qe),g(e)._overflowWeekday&&-1===t&&(t=ze),g(e).overflow=t),e}var vn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,An=/Z|[+-]\d\d(?::?\d\d)?/,Sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],wn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xn=/^\/?Date\((-?\d+)/i,kn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Nn(e){var t,n,s,i,r,a,o=e._i,c=vn.exec(o)||Tn.exec(o),l=Sn.length,u=wn.length;if(c){for(g(e).iso=!0,t=0,n=l;t<n;t++)if(Sn[t][1].exec(c[1])){i=Sn[t][0],s=!1!==Sn[t][2];break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,n=u;t<n;t++)if(wn[t][1].exec(c[3])){r=(c[2]||" ")+wn[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(c[4]){if(!An.exec(c[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),jn(e)}else e._isValid=!1}function In(e,t,n,s,i,r){var a=[Rn(e),it.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}function Rn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Dn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function On(e,t,n){return!e||Lt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Ln(e,t,n){if(e)return Cn[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}function Fn(e){var t,n=kn.exec(Dn(e._i));if(n){if(t=In(n[4],n[3],n[2],n[5],n[6],n[7]),!On(n[1],t,e))return;e._a=t,e._tzm=Ln(n[8],n[9],n[10]),e._d=Et.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Mn(e){var t=xn.exec(e._i);null===t?(Nn(e),!1===e._isValid&&(delete e._isValid,Fn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:s.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Pn(e,t,n){return null!=e?e:null!=t?t:n}function Bn(e){var t=new Date(s.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Un(e){var t,n,s,i,r,a=[];if(!e._d){for(s=Bn(e),e._w&&null==e._a[Ue]&&null==e._a[Be]&&Hn(e),null!=e._dayOfYear&&(r=Pn(e._a[Pe],s[Pe]),(e._dayOfYear>We(r)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=Et(r,0,e._dayOfYear),e._a[Be]=n.getUTCMonth(),e._a[Ue]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=s[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[He]&&0===e._a[je]&&0===e._a[Ge]&&0===e._a[$e]&&(e._nextDay=!0,e._a[He]=0),e._d=(e._useUTC?Et:yt).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[He]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}function Hn(e){var t,n,s,i,r,a,o,c,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,a=4,n=Pn(t.GG,e._a[Pe],Tt(Kn(),1,4).year),s=Pn(t.W,1),((i=Pn(t.E,1))<1||i>7)&&(c=!0)):(r=e._locale._week.dow,a=e._locale._week.doy,l=Tt(Kn(),r,a),n=Pn(t.gg,e._a[Pe],l.year),s=Pn(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(c=!0):null!=t.e?(i=t.e+r,(t.e<0||t.e>6)&&(c=!0)):i=r),s<1||s>At(n,r,a)?g(e)._overflowWeeks=!0:null!=c?g(e)._overflowWeekday=!0:(o=vt(n,s,i,r,a),e._a[Pe]=o.year,e._dayOfYear=o.dayOfYear)}function jn(e){if(e._f!==s.ISO_8601)if(e._f!==s.RFC_2822){e._a=[],g(e).empty=!0;var t,n,i,r,a,o,c,l=""+e._i,u=l.length,d=0;for(c=(i=q(e._f,e._locale).match(M)||[]).length,t=0;t<c;t++)r=i[t],(n=(l.match(ke(r,e))||[])[0])&&((a=l.substr(0,l.indexOf(n))).length>0&&g(e).unusedInput.push(a),l=l.slice(l.indexOf(n)+n.length),d+=n.length),U[r]?(n?g(e).empty=!1:g(e).unusedTokens.push(r),Fe(r,n,e)):e._strict&&!n&&g(e).unusedTokens.push(r);g(e).charsLeftOver=u-d,l.length>0&&g(e).unusedInput.push(l),e._a[He]<=12&&!0===g(e).bigHour&&e._a[He]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[He]=Gn(e._locale,e._a[He],e._meridiem),null!==(o=g(e).era)&&(e._a[Pe]=e._locale.erasConvertYear(o,e._a[Pe])),Un(e),bn(e)}else Fn(e);else Nn(e)}function Gn(e,t,n){var s;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0),t):t}function $n(e){var t,n,s,i,r,a,o=!1,c=e._f.length;if(0===c)return g(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<c;i++)r=0,a=!1,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],jn(t),_(t)&&(a=!0),r+=g(t).charsLeftOver,r+=10*g(t).unusedTokens.length,g(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));h(e,n||t)}function qn(e){if(!e._d){var t=se(e._i),n=void 0===t.day?t.date:t.day;e._a=p([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Un(e)}}function zn(e){var t=new T(bn(Wn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Wn(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),A(t)?new T(bn(t)):(d(t)?e._d=t:r(n)?$n(e):n?jn(e):Yn(e),_(e)||(e._d=null),e))}function Yn(e){var t=e._i;l(t)?e._d=new Date(s.now()):d(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Mn(e):r(t)?(e._a=p(t.slice(0),(function(e){return parseInt(e,10)})),Un(e)):a(t)?qn(e):u(t)?e._d=new Date(t):s.createFromInputFallback(e)}function Vn(e,t,n,s,i){var o={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(a(e)&&c(e)||r(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=s,zn(o)}function Kn(e,t,n,s){return Vn(e,t,n,s,!1)}s.createFromInputFallback=w("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),s.ISO_8601=function(){},s.RFC_2822=function(){};var Qn=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Xn=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Zn(e,t){var n,s;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Kn();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}function Jn(){return Zn("isBefore",[].slice.call(arguments,0))}function es(){return Zn("isAfter",[].slice.call(arguments,0))}var ts=function(){return Date.now?Date.now():+new Date},ns=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ss(e){var t,n,s=!1,i=ns.length;for(t in e)if(o(e,t)&&(-1===Ye.call(ns,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[ns[n]]){if(s)return!1;parseFloat(e[ns[n]])!==Re(e[ns[n]])&&(s=!0)}return!0}function is(){return this._isValid}function rs(){return Cs(NaN)}function as(e){var t=se(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,c=t.minute||0,l=t.second||0,u=t.millisecond||0;this._isValid=ss(t),this._milliseconds=+u+1e3*l+6e4*c+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=yn(),this._bubble()}function os(e){return e instanceof as}function cs(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function ls(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&Re(e[s])!==Re(t[s]))&&a++;return a+r}function us(e,t){H(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+F(~~(e/60),2)+t+F(~~e%60,2)}))}us("Z",":"),us("ZZ",""),xe("Z",ve),xe("ZZ",ve),Oe(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=ps(ve,e)}));var ds=/([\+\-]|\d\d)/gi;function ps(e,t){var n,s,i=(t||"").match(e);return null===i?null:0===(s=60*(n=((i[i.length-1]||[])+"").match(ds)||["-",0,0])[1]+Re(n[2]))?0:"+"===n[0]?s:-s}function hs(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(A(e)||d(e)?e.valueOf():Kn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),s.updateOffset(n,!1),n):Kn(e).local()}function fs(e){return-Math.round(e._d.getTimezoneOffset())}function ms(e,t,n){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=ps(ve,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=fs(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Os(this,Cs(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,s.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:fs(this)}function gs(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function _s(e){return this.utcOffset(0,e)}function ys(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(fs(this),"m")),this}function Es(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=ps(be,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function bs(e){return!!this.isValid()&&(e=e?Kn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function vs(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ts(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return v(t,this),(t=Wn(t))._a?(e=t._isUTC?f(t._a):Kn(t._a),this._isDSTShifted=this.isValid()&&ls(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function As(){return!!this.isValid()&&!this._isUTC}function Ss(){return!!this.isValid()&&this._isUTC}function ws(){return!!this.isValid()&&this._isUTC&&0===this._offset}s.updateOffset=function(){};var xs=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ks=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Cs(e,t){var n,s,i,r=e,a=null;return os(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(a=xs.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:Re(a[Ue])*n,h:Re(a[He])*n,m:Re(a[je])*n,s:Re(a[Ge])*n,ms:Re(cs(1e3*a[$e]))*n}):(a=ks.exec(e))?(n="-"===a[1]?-1:1,r={y:Ns(a[2],n),M:Ns(a[3],n),w:Ns(a[4],n),d:Ns(a[5],n),h:Ns(a[6],n),m:Ns(a[7],n),s:Ns(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=Rs(Kn(r.from),Kn(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new as(r),os(e)&&o(e,"_locale")&&(s._locale=e._locale),os(e)&&o(e,"_isValid")&&(s._isValid=e._isValid),s}function Ns(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Is(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Rs(e,t){var n;return e.isValid()&&t.isValid()?(t=hs(t,e),e.isBefore(t)?n=Is(e,t):((n=Is(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ds(e,t){return function(n,s){var i;return null===s||isNaN(+s)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=s,s=i),Os(this,Cs(n,s),e),this}}function Os(e,t,n,i){var r=t._milliseconds,a=cs(t._days),o=cs(t._months);e.isValid()&&(i=null==i||i,o&&pt(e,Xe(e,"Month")+o*n),a&&Ze(e,"Date",Xe(e,"Date")+a*n),r&&e._d.setTime(e._d.valueOf()+r*n),i&&s.updateOffset(e,a||o))}Cs.fn=as.prototype,Cs.invalid=rs;var Ls=Ds(1,"add"),Fs=Ds(-1,"subtract");function Ms(e){return"string"==typeof e||e instanceof String}function Ps(e){return A(e)||d(e)||Ms(e)||u(e)||Us(e)||Bs(e)||null==e}function Bs(e){var t,n,s=a(e)&&!c(e),i=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l=r.length;for(t=0;t<l;t+=1)n=r[t],i=i||o(e,n);return s&&i}function Us(e){var t=r(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&Ms(e)})).length),t&&n}function Hs(e){var t,n,s=a(e)&&!c(e),i=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)n=r[t],i=i||o(e,n);return s&&i}function js(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Gs(e,t){1===arguments.length&&(arguments[0]?Ps(arguments[0])?(e=arguments[0],t=void 0):Hs(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Kn(),i=hs(n,this).startOf("day"),r=s.calendarFormat(this,i)||"sameElse",a=t&&(N(t[r])?t[r].call(this,n):t[r]);return this.format(a||this.localeData().calendar(r,this,Kn(n)))}function $s(){return new T(this)}function qs(e,t){var n=A(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function zs(e,t){var n=A(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Ws(e,t,n,s){var i=A(e)?e:Kn(e),r=A(t)?t:Kn(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n))}function Ys(e,t){var n,s=A(e)?e:Kn(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Vs(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Ks(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Qs(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=hs(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=ne(t)){case"year":r=Xs(this,s)/12;break;case"month":r=Xs(this,s);break;case"quarter":r=Xs(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:Ie(r)}function Xs(e,t){if(e.date()<t.date())return-Xs(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function Zs(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Js(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?$(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):N(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",$(n,"Z")):$(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,s,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",s=r+'[")]',this.format(e+t+n+s)}function ti(e){e||(e=this.isUtc()?s.defaultFormatUtc:s.defaultFormat);var t=$(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(A(e)&&e.isValid()||Kn(e).isValid())?Cs({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function si(e){return this.from(Kn(),e)}function ii(e,t){return this.isValid()&&(A(e)&&e.isValid()||Kn(e).isValid())?Cs({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.to(Kn(),e)}function ai(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}s.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",s.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var oi=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ci(){return this._locale}var li=1e3,ui=60*li,di=60*ui,pi=3506328*di;function hi(e,t){return(e%t+t)%t}function fi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-pi:new Date(e,t,n).valueOf()}function mi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-pi:Date.UTC(e,t,n)}function gi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:fi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=hi(t+(this._isUTC?0:this.utcOffset()*ui),di);break;case"minute":t=this._d.valueOf(),t-=hi(t,ui);break;case"second":t=this._d.valueOf(),t-=hi(t,li)}return this._d.setTime(t),s.updateOffset(this,!0),this}function _i(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:fi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=di-hi(t+(this._isUTC?0:this.utcOffset()*ui),di)-1;break;case"minute":t=this._d.valueOf(),t+=ui-hi(t,ui)-1;break;case"second":t=this._d.valueOf(),t+=li-hi(t,li)-1}return this._d.setTime(t),s.updateOffset(this,!0),this}function yi(){return this._d.valueOf()-6e4*(this._offset||0)}function Ei(){return Math.floor(this.valueOf()/1e3)}function bi(){return new Date(this.valueOf())}function vi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ti(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ai(){return this.isValid()?this.toISOString():null}function Si(){return _(this)}function wi(){return h({},g(this))}function xi(){return g(this).overflow}function ki(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ci(e,t){var n,i,r,a=this._eras||yn("en")._eras;for(n=0,i=a.length;n<i;++n)switch("string"==typeof a[n].since&&(r=s(a[n].since).startOf("day"),a[n].since=r.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":r=s(a[n].until).startOf("day").valueOf(),a[n].until=r.valueOf()}return a}function Ni(e,t,n){var s,i,r,a,o,c=this.eras();for(e=e.toUpperCase(),s=0,i=c.length;s<i;++s)if(r=c[s].name.toUpperCase(),a=c[s].abbr.toUpperCase(),o=c[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return c[s];break;case"NNNN":if(r===e)return c[s];break;case"NNNNN":if(o===e)return c[s]}else if([r,a,o].indexOf(e)>=0)return c[s]}function Ii(e,t){var n=e.since<=e.until?1:-1;return void 0===t?s(e.since).year():s(e.since).year()+(t-e.offset)*n}function Ri(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].name;if(s[e].until<=n&&n<=s[e].since)return s[e].name}return""}function Di(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].narrow;if(s[e].until<=n&&n<=s[e].since)return s[e].narrow}return""}function Oi(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].abbr;if(s[e].until<=n&&n<=s[e].since)return s[e].abbr}return""}function Li(){var e,t,n,i,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=r[e].since<=r[e].until?1:-1,i=this.clone().startOf("day").valueOf(),r[e].since<=i&&i<=r[e].until||r[e].until<=i&&i<=r[e].since)return(this.year()-s(r[e].since).year())*n+r[e].offset;return this.year()}function Fi(e){return o(this,"_erasNameRegex")||Gi.call(this),e?this._erasNameRegex:this._erasRegex}function Mi(e){return o(this,"_erasAbbrRegex")||Gi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Pi(e){return o(this,"_erasNarrowRegex")||Gi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Bi(e,t){return t.erasAbbrRegex(e)}function Ui(e,t){return t.erasNameRegex(e)}function Hi(e,t){return t.erasNarrowRegex(e)}function ji(e,t){return t._eraYearOrdinalRegex||ye}function Gi(){var e,t,n,s,i,r=[],a=[],o=[],c=[],l=this.eras();for(e=0,t=l.length;e<t;++e)n=Ne(l[e].name),s=Ne(l[e].abbr),i=Ne(l[e].narrow),a.push(n),r.push(s),o.push(i),c.push(n),c.push(s),c.push(i);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function $i(e,t){H(0,[e,e.length],0,t)}function qi(e){return Qi.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function zi(e){return Qi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Wi(){return At(this.year(),1,4)}function Yi(){return At(this.isoWeekYear(),1,4)}function Vi(){var e=this.localeData()._week;return At(this.year(),e.dow,e.doy)}function Ki(){var e=this.localeData()._week;return At(this.weekYear(),e.dow,e.doy)}function Qi(e,t,n,s,i){var r;return null==e?Tt(this,s,i).year:(t>(r=At(e,s,i))&&(t=r),Xi.call(this,e,t,n,s,i))}function Xi(e,t,n,s,i){var r=vt(e,t,n,s,i),a=Et(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Zi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}H("N",0,0,"eraAbbr"),H("NN",0,0,"eraAbbr"),H("NNN",0,0,"eraAbbr"),H("NNNN",0,0,"eraName"),H("NNNNN",0,0,"eraNarrow"),H("y",["y",1],"yo","eraYear"),H("y",["yy",2],0,"eraYear"),H("y",["yyy",3],0,"eraYear"),H("y",["yyyy",4],0,"eraYear"),xe("N",Bi),xe("NN",Bi),xe("NNN",Bi),xe("NNNN",Ui),xe("NNNNN",Hi),Oe(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?g(n).era=i:g(n).invalidEra=e})),xe("y",ye),xe("yy",ye),xe("yyy",ye),xe("yyyy",ye),xe("yo",ji),Oe(["y","yy","yyy","yyyy"],Pe),Oe(["yo"],(function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Pe]=n._locale.eraYearOrdinalParse(e,i):t[Pe]=parseInt(e,10)})),H(0,["gg",2],0,(function(){return this.weekYear()%100})),H(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),$i("gggg","weekYear"),$i("ggggg","weekYear"),$i("GGGG","isoWeekYear"),$i("GGGGG","isoWeekYear"),xe("G",Ee),xe("g",Ee),xe("GG",pe,ce),xe("gg",pe,ce),xe("GGGG",ge,ue),xe("gggg",ge,ue),xe("GGGGG",_e,de),xe("ggggg",_e,de),Le(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,s){t[s.substr(0,2)]=Re(e)})),Le(["gg","GG"],(function(e,t,n,i){t[i]=s.parseTwoDigitYear(e)})),H("Q",0,"Qo","quarter"),xe("Q",oe),Oe("Q",(function(e,t){t[Be]=3*(Re(e)-1)})),H("D",["DD",2],"Do","date"),xe("D",pe,Se),xe("DD",pe,ce),xe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Oe(["D","DD"],Ue),Oe("Do",(function(e,t){t[Ue]=Re(e.match(pe)[0])}));var Ji=Qe("Date",!0);function er(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}H("DDD",["DDDD",3],"DDDo","dayOfYear"),xe("DDD",me),xe("DDDD",le),Oe(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=Re(e)})),H("m",["mm",2],0,"minute"),xe("m",pe,we),xe("mm",pe,ce),Oe(["m","mm"],je);var tr=Qe("Minutes",!1);H("s",["ss",2],0,"second"),xe("s",pe,we),xe("ss",pe,ce),Oe(["s","ss"],Ge);var nr,sr,ir=Qe("Seconds",!1);for(H("S",0,0,(function(){return~~(this.millisecond()/100)})),H(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),H(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),H(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),H(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),H(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),H(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),xe("S",me,oe),xe("SS",me,ce),xe("SSS",me,le),nr="SSSS";nr.length<=9;nr+="S")xe(nr,ye);function rr(e,t){t[$e]=Re(1e3*("0."+e))}for(nr="S";nr.length<=9;nr+="S")Oe(nr,rr);function ar(){return this._isUTC?"UTC":""}function or(){return this._isUTC?"Coordinated Universal Time":""}sr=Qe("Milliseconds",!1),H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var cr=T.prototype;function lr(e){return Kn(1e3*e)}function ur(){return Kn.apply(null,arguments).parseZone()}function dr(e){return e}cr.add=Ls,cr.calendar=Gs,cr.clone=$s,cr.diff=Qs,cr.endOf=_i,cr.format=ti,cr.from=ni,cr.fromNow=si,cr.to=ii,cr.toNow=ri,cr.get=Je,cr.invalidAt=xi,cr.isAfter=qs,cr.isBefore=zs,cr.isBetween=Ws,cr.isSame=Ys,cr.isSameOrAfter=Vs,cr.isSameOrBefore=Ks,cr.isValid=Si,cr.lang=oi,cr.locale=ai,cr.localeData=ci,cr.max=Xn,cr.min=Qn,cr.parsingFlags=wi,cr.set=et,cr.startOf=gi,cr.subtract=Fs,cr.toArray=vi,cr.toObject=Ti,cr.toDate=bi,cr.toISOString=Js,cr.inspect=ei,"undefined"!=typeof Symbol&&null!=Symbol.for&&(cr[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),cr.toJSON=Ai,cr.toString=Zs,cr.unix=Ei,cr.valueOf=yi,cr.creationData=ki,cr.eraName=Ri,cr.eraNarrow=Di,cr.eraAbbr=Oi,cr.eraYear=Li,cr.year=Ve,cr.isLeapYear=Ke,cr.weekYear=qi,cr.isoWeekYear=zi,cr.quarter=cr.quarters=Zi,cr.month=ht,cr.daysInMonth=ft,cr.week=cr.weeks=Ct,cr.isoWeek=cr.isoWeeks=Nt,cr.weeksInYear=Vi,cr.weeksInWeekYear=Ki,cr.isoWeeksInYear=Wi,cr.isoWeeksInISOWeekYear=Yi,cr.date=Ji,cr.day=cr.days=qt,cr.weekday=zt,cr.isoWeekday=Wt,cr.dayOfYear=er,cr.hour=cr.hours=sn,cr.minute=cr.minutes=tr,cr.second=cr.seconds=ir,cr.millisecond=cr.milliseconds=sr,cr.utcOffset=ms,cr.utc=_s,cr.local=ys,cr.parseZone=Es,cr.hasAlignedHourOffset=bs,cr.isDST=vs,cr.isLocal=As,cr.isUtcOffset=Ss,cr.isUtc=ws,cr.isUTC=ws,cr.zoneAbbr=ar,cr.zoneName=or,cr.dates=w("dates accessor is deprecated. Use date instead.",Ji),cr.months=w("months accessor is deprecated. Use month instead",ht),cr.years=w("years accessor is deprecated. Use year instead",Ve),cr.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gs),cr.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ts);var pr=D.prototype;function hr(e,t,n,s){var i=yn(),r=f().set(s,t);return i[n](r,e)}function fr(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return hr(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=hr(e,s,n,"month");return i}function mr(e,t,n,s){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var i,r=yn(),a=e?r._week.dow:0,o=[];if(null!=n)return hr(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=hr(t,(i+a)%7,s,"day");return o}function gr(e,t){return fr(e,t,"months")}function _r(e,t){return fr(e,t,"monthsShort")}function yr(e,t,n){return mr(e,t,n,"weekdays")}function Er(e,t,n){return mr(e,t,n,"weekdaysShort")}function br(e,t,n){return mr(e,t,n,"weekdaysMin")}pr.calendar=L,pr.longDateFormat=W,pr.invalidDate=V,pr.ordinal=X,pr.preparse=dr,pr.postformat=dr,pr.relativeTime=J,pr.pastFuture=ee,pr.set=I,pr.eras=Ci,pr.erasParse=Ni,pr.erasConvertYear=Ii,pr.erasAbbrRegex=Mi,pr.erasNameRegex=Fi,pr.erasNarrowRegex=Pi,pr.months=ct,pr.monthsShort=lt,pr.monthsParse=dt,pr.monthsRegex=gt,pr.monthsShortRegex=mt,pr.week=St,pr.firstDayOfYear=kt,pr.firstDayOfWeek=xt,pr.weekdays=Ut,pr.weekdaysMin=jt,pr.weekdaysShort=Ht,pr.weekdaysParse=$t,pr.weekdaysRegex=Yt,pr.weekdaysShortRegex=Vt,pr.weekdaysMinRegex=Kt,pr.isPM=tn,pr.meridiem=rn,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Re(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),s.lang=w("moment.lang is deprecated. Use moment.locale instead.",mn),s.langData=w("moment.langData is deprecated. Use moment.localeData instead.",yn);var vr=Math.abs;function Tr(){var e=this._data;return this._milliseconds=vr(this._milliseconds),this._days=vr(this._days),this._months=vr(this._months),e.milliseconds=vr(e.milliseconds),e.seconds=vr(e.seconds),e.minutes=vr(e.minutes),e.hours=vr(e.hours),e.months=vr(e.months),e.years=vr(e.years),this}function Ar(e,t,n,s){var i=Cs(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function Sr(e,t){return Ar(this,e,t,1)}function wr(e,t){return Ar(this,e,t,-1)}function xr(e){return e<0?Math.floor(e):Math.ceil(e)}function kr(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,c=this._data;return r>=0&&a>=0&&o>=0||r<=0&&a<=0&&o<=0||(r+=864e5*xr(Nr(o)+a),a=0,o=0),c.milliseconds=r%1e3,e=Ie(r/1e3),c.seconds=e%60,t=Ie(e/60),c.minutes=t%60,n=Ie(t/60),c.hours=n%24,a+=Ie(n/24),o+=i=Ie(Cr(a)),a-=xr(Nr(i)),s=Ie(o/12),o%=12,c.days=a,c.months=o,c.years=s,this}function Cr(e){return 4800*e/146097}function Nr(e){return 146097*e/4800}function Ir(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+Cr(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Nr(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}}function Rr(e){return function(){return this.as(e)}}var Dr=Rr("ms"),Or=Rr("s"),Lr=Rr("m"),Fr=Rr("h"),Mr=Rr("d"),Pr=Rr("w"),Br=Rr("M"),Ur=Rr("Q"),Hr=Rr("y"),jr=Dr;function Gr(){return Cs(this)}function $r(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function qr(e){return function(){return this.isValid()?this._data[e]:NaN}}var zr=qr("milliseconds"),Wr=qr("seconds"),Yr=qr("minutes"),Vr=qr("hours"),Kr=qr("days"),Qr=qr("months"),Xr=qr("years");function Zr(){return Ie(this.days()/7)}var Jr=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ta(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}function na(e,t,n,s){var i=Cs(e).abs(),r=Jr(i.as("s")),a=Jr(i.as("m")),o=Jr(i.as("h")),c=Jr(i.as("d")),l=Jr(i.as("M")),u=Jr(i.as("w")),d=Jr(i.as("y")),p=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(p=p||u<=1&&["w"]||u<n.w&&["ww",u]),(p=p||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,p[3]=+e>0,p[4]=s,ta.apply(null,p)}function sa(e){return void 0===e?Jr:"function"==typeof e&&(Jr=e,!0)}function ia(e,t){return void 0!==ea[e]&&(void 0===t?ea[e]:(ea[e]=t,"s"===e&&(ea.ss=t-1),!0))}function ra(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,r=ea;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(r=Object.assign({},ea,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),s=na(this,!i,r,n=this.localeData()),i&&(s=n.pastFuture(+this,s)),n.postformat(s)}var aa=Math.abs;function oa(e){return(e>0)-(e<0)||+e}function ca(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o,c=aa(this._milliseconds)/1e3,l=aa(this._days),u=aa(this._months),d=this.asSeconds();return d?(e=Ie(c/60),t=Ie(e/60),c%=60,e%=60,n=Ie(u/12),u%=12,s=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",r=oa(this._months)!==oa(d)?"-":"",a=oa(this._days)!==oa(d)?"-":"",o=oa(this._milliseconds)!==oa(d)?"-":"",i+"P"+(n?r+n+"Y":"")+(u?r+u+"M":"")+(l?a+l+"D":"")+(t||e||c?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(c?o+s+"S":"")):"P0D"}var la=as.prototype;return la.isValid=is,la.abs=Tr,la.add=Sr,la.subtract=wr,la.as=Ir,la.asMilliseconds=Dr,la.asSeconds=Or,la.asMinutes=Lr,la.asHours=Fr,la.asDays=Mr,la.asWeeks=Pr,la.asMonths=Br,la.asQuarters=Ur,la.asYears=Hr,la.valueOf=jr,la._bubble=kr,la.clone=Gr,la.get=$r,la.milliseconds=zr,la.seconds=Wr,la.minutes=Yr,la.hours=Vr,la.days=Kr,la.weeks=Zr,la.months=Qr,la.years=Xr,la.humanize=ra,la.toISOString=ca,la.toString=ca,la.toJSON=ca,la.locale=ai,la.localeData=ci,la.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ca),la.lang=oi,H("X",0,0,"unix"),H("x",0,0,"valueOf"),xe("x",Ee),xe("X",Te),Oe("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Oe("x",(function(e,t,n){n._d=new Date(Re(e))})),
//! moment.js
s.version="2.30.1",i(Kn),s.fn=cr,s.min=Jn,s.max=es,s.now=ts,s.utc=f,s.unix=lr,s.months=gr,s.isDate=d,s.locale=mn,s.invalid=y,s.duration=Cs,s.isMoment=A,s.weekdays=yr,s.parseZone=ur,s.localeData=yn,s.isDuration=os,s.monthsShort=_r,s.weekdaysMin=br,s.defineLocale=gn,s.updateLocale=_n,s.locales=En,s.weekdaysShort=Er,s.normalizeUnits=ne,s.relativeTimeRounding=sa,s.relativeTimeThreshold=ia,s.calendarFormat=js,s.prototype=cr,s.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},s}()}(uy);var dy=$(uy.exports);class py{}py.DEFAULT_IMAGE_TRANSFORM={fit:"cover",width:512,height:512,quality:100},py.SMALL_IMAGE_TRANSFORM={fit:"cover",width:128,height:128,quality:90},py.ORIGINAL_IMAGE_TRANSFORM={fit:void 0,width:void 0,height:void 0,quality:void 0};class hy{static getServerUrl(){return process.env.PUBLIC_URL}}class fy{static getAssetImageURL(e,t=py.DEFAULT_IMAGE_TRANSFORM){let n;if("string"==typeof e&&e.startsWith("http"))return e;n="object"==typeof e&&null!==e&&"id"in e?e.id:e;let s=fy.getAssetURL(n);if(s){const e=t.fit,n=t.width,i=t.height,r=t.quality;let a,o=e?"fit="+e:null,c=n?"width="+n:null,l=i?"height="+i:null,u=r?"quality="+r:null;if(o||c||l||u){a="?",a+=[o,c,l,u].filter((e=>null!==e)).join("&")}let d=s;return a&&(d+=a),d}return null}static getAssetURL(e){return e?hy.getServerUrl()+"/assets/"+e:null}}class my{static getValueListFromDict(e){let t=Object.keys(e),n=[];for(let s of t){let t=e[s];t&&n.push(t)}return n}static transformListToDict(e,t){let n={};for(let s of e){let e;if("string"==typeof t){e=s[t]}else e=t(s);e&&(n[e]=s)}return n}}var gy=(e=>(e[e.SMALL=32]="SMALL",e[e.MEDIUM=72]="MEDIUM",e[e.LARGE=128]="LARGE",e[e.EXTRA_LARGE=512]="EXTRA_LARGE",e))(gy||{}),_y=(e=>(e[e.SMALL=1]="SMALL",e[e.MEDIUM=1.5]="MEDIUM",e[e.LARGE=2]="LARGE",e[e.EXTRA_LARGE=3.5]="EXTRA_LARGE",e))(_y||{}),yy=(e=>(e.RED_CIRCLE="emoji_u1f534",e.YELLOW_CIRCLE="emoji_u1f7e1",e.GREEN_CIRCLE="emoji_u1f7e2",e.THUMBS_UP="emoji_u1f44d",e.THUMBS_DOWN="emoji_u1f44e",e.SPEECH_BUBBLE="emoji_u1f4ac",e.STAR="emoji_u2b50",e))(yy||{});const Ey=class{static getEmojiImageURL(e,t){return"https://raw.githubusercontent.com/rocket-meals/noto-emoji/refs/heads/main/png/"+t+"/"+e+".png"}static getEmojiDivTextSize(e){let t;switch(e){case 1:default:t=1;break;case 1.5:t=1.5;break;case 2:t=2;break;case 3.5:t=3.5}return`\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            width: ${t}em;\n            height: ${t}em;\n            vertical-align: middle;\n            background-size: contain;\n            background-repeat: no-repeat;\n            background-position: center;\n            background-color: transparent;\n        `}static getEmojiDivHTML(e,t,n){n=n||32,t=t||1;const s=Ey.getEmojiImageURL(e,n);return`<div style="${Ey.getEmojiDivTextSize(t)} background-image: url('${s}');"></div>`}};let by=Ey;by.DivTextSize=_y,by.EmojiPixelSize=gy,by.EmojiFileNames=yy;class vy{}vy.RED=by.getEmojiDivHTML(by.EmojiFileNames.RED_CIRCLE),vy.YELLOW=by.getEmojiDivHTML(by.EmojiFileNames.YELLOW_CIRCLE),vy.GREEN=by.getEmojiDivHTML(by.EmojiFileNames.GREEN_CIRCLE);const Ty=class{constructor(e){this.myDatabaseHelper=new Xo(e)}static getCanteenAliasList(e){let t=[];for(let n in e){let s=e[n];s&&s.alias&&t.push(s.alias)}return t}async getAverageRatingForAllFoods(){return await this.myDatabaseHelper.getFoodsHelper().calculateAverage("rating_average")}static getFoodRatingBadAndGoodThresholds(e){if(0==e||null==e||null==e)return{threshold_bad:0,threshold_good:0};return{threshold_bad:e-oy.MAX_RATING_VALUE*Ty.THRESHOLD_PERCENTAGE,threshold_good:e+oy.MAX_RATING_VALUE*Ty.THRESHOLD_PERCENTAGE}}async generateReportJSON(e,t,n,s){const i="["+Po.getHumanReadableDate(t,!0)+" - "+Po.getHumanReadableDate(n,!0)+"]";const r=Ty.getCanteenAliasList(s).join(", ");let a=e.show_images;null==a&&(a=!0);let o=e.show_food_feedback_labels_for_all_time;null==o&&(o=!0);let c=e.show_food_feedback_labels_for_selected_period;null==c&&(c=!0);let l=e.show_food_comments_for_all_time;null==l&&(l=!0);let u=e.show_food_comments_for_selected_period;null==u&&(u=!0);let d=e.show_canteen_feedbacks_for_all_time;null==d&&(d=!0);let p=e.show_canteen_feedbacks_for_selected_period;null==p&&(p=!0);const h=await this.getAverageRatingForAllFoods()||0,f=Ty.getFoodRatingBadAndGoodThresholds(h);let m={canteen_alias:r,dateHumanReadable:i,show_images:a,show_food_feedback_labels_for_all_time:o,show_food_feedback_labels_for_selected_period:c,show_food_comments_for_all_time:l,show_food_comments_for_selected_period:u,show_canteen_feedbacks_for_all_time:d,show_canteen_feedbacks_for_selected_period:p,food_rating_average:h,food_rating_threshold_bad:f.threshold_bad,food_rating_threshold_good:f.threshold_good,foods:[],canteen_feedbacks:[],icon_thumbs_up:by.getEmojiDivHTML(by.EmojiFileNames.THUMBS_UP,by.DivTextSize.MEDIUM),icon_thumbs_down:by.getEmojiDivHTML(by.EmojiFileNames.THUMBS_DOWN,by.DivTextSize.MEDIUM),icon_comment:by.getEmojiDivHTML(by.EmojiFileNames.SPEECH_BUBBLE,by.DivTextSize.SMALL),icon_traffic_light_red:vy.RED,icon_traffic_light_yellow:vy.YELLOW,icon_traffic_light_green:vy.GREEN,icon_star:by.getEmojiDivHTML(by.EmojiFileNames.STAR,by.DivTextSize.SMALL)};return m.foods=await this.getReportForFoodFeedbacks(e,t,n,s,h),m.canteen_feedbacks=await this.getReportForCanteenFeedbacks(e,t,n,s),m}calculateTrafficLightStatus(e,t){let n=Ty.THRESHOLD_PERCENTAGE;if(0===e&&0===t)return vy.YELLOW;let s=t/(e+t);return e/(e+t)>n?vy.GREEN:s>n?vy.RED:vy.YELLOW}async getReportForCanteenFeedbacks(e,t,n,s){var i;let r=[],a=await this.myDatabaseHelper.getCanteenFeedbackLabelsHelper().readByQuery({limit:-1,filter:{_and:[{[Fo.FIELD_STATUS]:{_eq:Fo.FIELD_STATUS_PUBLISHED}}]},fields:["*","translations.*"]});const o={like:{_eq:!0}},c={like:{_eq:!1}},l=this.getFilterDateUpdatedForReportFeedbackPeriodDays(t,n);let u={id:"all",canteen_alias:"Alle",labels:[]};const d={};let p=Object.keys(s);if(e.show_canteen_feedbacks_also_per_canteen)for(let e of p){let t=s[e];if(t){let e={id:null==t?void 0:t.id,canteen_alias:t.alias,labels:[]};d[t.id]=e}}for(let t of a){let n=this.getTranslationOfFeedbackLabel(t);const r={label:{_eq:t.id}},a=await this.getCanteenFeedbackCounts(r,o,c,l,null);if(u.labels.push({label_alias:n,amount_positive_new:a.amount_positive_new,amount_negative_new:a.amount_negative_new,amount_total_new:a.amount_total_new,amount_positive:a.amount_positive,amount_negative:a.amount_negative,amount_total:a.amount_total,status_total:this.calculateTrafficLightStatus(a.amount_positive,a.amount_negative),status_new:this.calculateTrafficLightStatus(a.amount_positive_new,a.amount_negative_new)}),e.show_canteen_feedbacks_also_per_canteen)for(let e of p){let t=s[e];if(t){const e=await this.getCanteenFeedbackCounts(r,o,c,l,t);null==(i=d[t.id])||i.labels.push({label_alias:n,amount_positive_new:e.amount_positive_new,amount_negative_new:e.amount_negative_new,amount_total_new:e.amount_total_new,amount_positive:e.amount_positive,amount_negative:e.amount_negative,amount_total:e.amount_total,status_total:this.calculateTrafficLightStatus(e.amount_positive,e.amount_negative),status_new:this.calculateTrafficLightStatus(e.amount_positive_new,e.amount_negative_new)})}}}r.push(u);let h=Object.keys(d);for(let e of h){let t=d[e];t&&r.push(t)}return r}async getCanteenFeedbackCounts(e,t,n,s,i=null){const r=i?{canteen:{_eq:i.id}}:{},a=await this.myDatabaseHelper.getCanteenFeedbackLabelsEntriesHelper().countItems({filter:{_and:[e,t,...s,r]}}),o=await this.myDatabaseHelper.getCanteenFeedbackLabelsEntriesHelper().countItems({filter:{_and:[e,n,...s,r]}}),c=await this.myDatabaseHelper.getCanteenFeedbackLabelsEntriesHelper().countItems({filter:{_and:[e,t,r]}}),l=await this.myDatabaseHelper.getCanteenFeedbackLabelsEntriesHelper().countItems({filter:{_and:[e,n,r]}});return{amount_positive_new:a,amount_negative_new:o,amount_total_new:a+o,amount_positive:c,amount_negative:l,amount_total:c+l}}async getReportForFoodFeedbacks(e,t,n,s,i){let r=[],a={},o=Object.keys(s);for(let e of o){let i=s[e];if(i){let e=await this.getFoodOffersWithFoodAtDateInCanteen(t,n,null==i?void 0:i.id);for(let t of e){let e=null==t?void 0:t.food;e&&"string"!=typeof e&&(a[e.id]=e)}}}let c=await this.myDatabaseHelper.getFoodFeedbackLabelsHelper().readByQuery({limit:-1,filter:{_and:[{[Fo.FIELD_STATUS]:{_eq:Fo.FIELD_STATUS_PUBLISHED}}]},fields:["*","translations.*"]});const l=my.transformListToDict(c,(e=>e.id));for(let s of Object.values(a)){const a=null==s?void 0:s.id;let o=[],c=[];e.show_food_comments_for_selected_period&&(c=await this.getAllFoodFeedbacksWithCommentsForFood(a,t,n)),e.show_food_comments_for_all_time&&(o=await this.getAllFoodFeedbacksWithCommentsForFood(a,null,null));let u=[];u=await this.getReportFeedbackLabelsList(e,a,l,t,n);let d=null;if(null==s?void 0:s.image){let e=null==s?void 0:s.image;process.env.PUBLIC_URL&&(d=fy.getAssetImageURL(e,py.SMALL_IMAGE_TRANSFORM))}(null==s?void 0:s.image_remote_url)&&(d=null==s?void 0:s.image_remote_url);let p=0;(null==s?void 0:s.rating_average)&&(p=null==s?void 0:s.rating_average);let h=0;(null==s?void 0:s.rating_amount)&&(h=null==s?void 0:s.rating_amount);let f=vy.YELLOW;if((null==s?void 0:s.rating_average)&&i){const e=oy.MAX_RATING_VALUE*Ty.THRESHOLD_PERCENTAGE;s.rating_average>i+e?f=vy.GREEN:s.rating_average<i-e&&(f=vy.RED)}let m={id:s.id,alias:s.alias,image_url:d,rating_average:p,rating_amount:h,comments:o,comments_new:c,labels:u,status_rating:f};r.push(m)}return r}getTranslationOfFeedbackLabel(e){return(null==e?void 0:e.alias)||e.id}async getReportFeedbackLabelsList(e,t,n,s,i){const r=this.myDatabaseHelper.getFoodFeedbackLabelEntriesHelper(),a={like:{_eq:!0}},o={like:{_eq:!1}},c={food:{_eq:t}};let l=this.getFilterDateUpdatedForReportFeedbackPeriodDays(s,i),u=[],d=Object.keys(n);for(let e of d){let t=n[e];if(t){let e=null==t?void 0:t.id,n={label:{_eq:e}},s=await r.countItems({filter:{_and:[c,n,...l,a]}}),i=await r.countItems({filter:{_and:[c,n,...l,o]}}),d=await r.countItems({filter:{_and:[c,n,a]}}),p=await r.countItems({filter:{_and:[c,n,o]}}),h=d+p,f=s+i,m={id:e,alias:this.getTranslationOfFeedbackLabel(t),amount_positive_new:s,amount_negative_new:i,amount_total_new:f,amount_positive:d,amount_negative:p,amount_total:h,status_total:this.calculateTrafficLightStatus(d,p),status_new:this.calculateTrafficLightStatus(s,i)};u.push(m)}}return u}getFilterDateUpdatedForReportFeedbackPeriodDays(e,t){let n=new Date(t);return n.setDate(n.getDate()+1),[{date_updated:{_gte:Po.foodofferDateTypeToString(Po.getFoodofferDateTypeFromDate(e))}},{date_updated:{_lt:Po.foodofferDateTypeToString(Po.getFoodofferDateTypeFromDate(n))}}]}async getAllFoodFeedbacksWithCommentsForFood(e,t,n){let s=this.myDatabaseHelper.getFoodFeedbacksHelper();const i=[{food:{_eq:e}},{comment:{_nnull:!0}}];if(t&&n){let e=this.getFilterDateUpdatedForReportFeedbackPeriodDays(t,n);e&&i.push(...e)}let r=await s.readByQuery({filter:{_and:i},fields:["*","canteen.*"],limit:-1}),a=[];for(let e of r){let t=null==e?void 0:e.comment;const n=e.canteen;let s;if(n&&"string"!=typeof n&&(s=n.alias),t){let e=t.replace(/<[^>]*>?/gm,"");s&&(e+="["+s+"]"),a.push(e)}}return a}async getFoodOffersWithFoodAtDateInCanteen(e,t,n){const s=Po.foodofferDateTypeToString(Po.getFoodofferDateTypeFromDate(e)),i=Po.foodofferDateTypeToString(Po.getFoodofferDateTypeFromDate(t));let r=this.myDatabaseHelper.getFoodoffersHelper();return await r.readByQuery({filter:{_and:[{date:{_between:[s,i]}},{canteen:{_eq:n}}]},fields:["*","food.*"],limit:-1})}};let Ay=Ty;Ay.THRESHOLD_PERCENTAGE=.1;const Sy=go.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES,wy="CanteenFoodFeedbackReportSchedule";class xy{constructor(e,t){this.apiContext=e,this.eventContext=t,this.myDatabaseHelper=new Xo(e,t)}async run(){let e=new Ay(this.apiContext);try{let t=await this.getAllReportSchedules();for(let n of t){let t=await this.getReferenceDateOfTheReportOrNull(n);if(t){let s=new Date(t),i=xy.getStartDateBasedOnReferenceDate(t,n),r=await this.getRecipientEmailList(n);if(r.length>0){let a=await this.getCanteenEntries(n);if(Object.keys(a).length>0)try{let o=await e.generateReportJSON(n,i,s,a);if(o){for(let e of r)await this.sendReport(o,n,a,e);await this.setNextReportDate(n),await this.updateReportLogSuccess(t,n)}else await this.logReportSendError(n,"No report could be generated. Please contact admin and tell him: await reportGenerator.generateReportForMail(referenceDateForReport)")}catch(e){await this.logReportSendError(n,e)}else await this.logReportSendError(n,"No canteen set.")}else await this.logReportSendError(n,"No emails given.")}else await this.setNextReportDate(n)}}catch(e){console.log("Error in "+wy),console.log(e)}}static getStartDateBasedOnReferenceDate(e,t){let n=t.period_days_amount||1;n<0&&(n=-n),0===n&&(n=1),n-=1;let s=new Date(e);return s.setDate(s.getDate()-n),s}async getRecipientEmailList(e){const t=new bo(this.apiContext);let n=await t.getItemsService(go.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_REPORT_RECIPIENTS),s=await n.readByQuery({filter:{canteen_food_feedback_report_schedules_id:{_eq:e.id}},limit:-1}),i=[];for(let e of s){let t=e.report_recipients_id;t&&"string"==typeof t&&i.push(t)}let r=await t.getItemsService(go.REPORT_RECIPIENTS),a=await r.readMany(i),o=[];for(let e of a){let t=e.mail;t&&o.push(t)}return o}async getCanteenEntries(e){const t=new bo(this.apiContext);let n=await t.getItemsService(go.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_CANTEENS),s=await n.readByQuery({filter:{canteen_food_feedback_report_schedules_id:{_eq:e.id}},limit:-1}),i=await this.myDatabaseHelper.getCanteensHelper().readAllItems(),r=[];if(0===s.length)for(let e of i)r.push(e.id);else for(let e of s){let t=e.canteens_id;t&&"string"==typeof t&&r.push(t)}let a=await t.getItemsService(go.CANTEENS),o=await a.readMany(r);return my.transformListToDict(o,(e=>e.id))}getCanteenAliasForMail(e){let t=Ay.getCanteenAliasList(e);let n="";return t.length>3?(t=t.slice(0,3),n+=": "+t.join(", ")+" ..."):n+=": "+t.join(", "),e.length+" Mensen ("+n+")"}async sendReport(e,t,n,s){let i=this.getCanteenAliasForMail(n),r="Mensa & Speise Report - Zeitraum "+e.dateHumanReadable+" - "+i;await this.myDatabaseHelper.sendMail({recipient:s,subject:r,template_name:fh.CANTEEN_FOOD_FEEDBACK_REPORT,template_data:e})}async setNextReportDate(e){const t=new bo(this.apiContext);let n=Sy,s=await t.getItemsService(n),i=new Date,r=xy.getNextReportIsDueDateIsoOrNull(e,i);if(r)await s.updateOne(e.id,{date_next_report_is_due:r}),await this.updateReportLog(e,"Next report date was not set. Set next report due date to: "+r,!0);else{let t="No suitable next report date found. Please select at least one weekday.";e.enabled||(t="Report is disabled."),await s.updateOne(e.id,{date_next_report_is_due:null}),e.report_status_log&&e.report_status_log===t||await this.updateReportLog(e,t,!1)}}async updateReportLogSuccess(e,t){(new Date).toISOString(),await this.updateReportLog(t,"Report was sent successfully for the date: "+e,!0)}async logReportSendError(e,t){await this.updateReportLog(e,"Report sending failed: "+t.toString(),!1)}async updateReportLog(e,t,n){const s=new bo(this.apiContext);try{let i=Sy,r=await s.getItemsService(i),a={report_status_log:t,report_send_successfully:n};await r.updateOne(e.id,a)}catch(e){console.log(wy+" updateReportLog failed:"),console.log(e)}}async getReferenceDateOfTheReportOrNull(e){const t=new bo(this.apiContext);let n=Sy,s=await t.getItemsService(n),i=new Date,r=dy(i.toISOString()),a=null==e?void 0:e.send_once_now_for_reference_date;if(a)return await s.updateOne(e.id,{send_once_now_for_reference_date:null}),new Date(a);let o=e.date_next_report_is_due;return o&&r.isAfter(o)?xy.getReferenceDate(e,i):null}static getReferenceDate(e,t){if(!e.enabled)return null;let n=dy(t.toISOString()),s=e.period_days_offset||0,i=dy(n.toISOString()).add(s,"days").set({hour:12,minute:0,second:0}).toISOString();return new Date(i)}static splitSendReportAtHhMm(e){let t=e.send_report_at_hh_mm,n=null==t?void 0:t.split(":");return{send_report_at_hh:parseInt((null==n?void 0:n[0])||"06"),send_report_at_mm:parseInt((null==n?void 0:n[1])||"00"),send_report_at_ss:parseInt((null==n?void 0:n[2])||"00")}}static getNextReportIsDueToBeGeneratedDateOrNull(e,t){if(!e.enabled)return null;let n=new Date(t);const s=dy(n),i=xy.splitSendReportAtHhMm(e),r=i.send_report_at_hh,a=i.send_report_at_mm,o=i.send_report_at_ss;let c=dy(n).add(0,"days").set({hour:r,minute:a,second:o});s.isAfter(c)&&(c=dy(c.toISOString()).add(1,"days"));const l=Po.getWeekdayListFromDate(new Date(c.toISOString()));let u=!1,d=0;for(let t of l){switch(t){case Mo.MONDAY:e.send_on_mondays&&(u=!0);break;case Mo.TUESDAY:e.send_on_tuesdays&&(u=!0);break;case Mo.WEDNESDAY:e.send_on_wednesdays&&(u=!0);break;case Mo.THURSDAY:e.send_on_thursdays&&(u=!0);break;case Mo.FRIDAY:e.send_on_fridays&&(u=!0);break;case Mo.SATURDAY:e.send_on_saturdays&&(u=!0);break;case Mo.SUNDAY:e.send_on_sundays&&(u=!0)}if(u)break;d++}if(!u)return null;let p=dy(c.toISOString()).add(d,"days");p=p.set({hour:r,minute:a,second:o});let h=p.toISOString();return new Date(h)}static getNextReportIsDueDateIsoOrNull(e,t){let n=xy.getNextReportIsDueToBeGeneratedDateOrNull(e,t);return n?n.toISOString():null}async getCanteenFoodFeedbackReportScheduleById(e){const t=new bo(this.apiContext,this.eventContext);let n=Sy,s=await t.getItemsService(n);try{return await s.readOne(e)}catch(e){return console.log("getCanteenFoodFeedbackReportScheduleById failed:"),console.log(e),null}return null}static haveTimeSettingsChanged(e,t){return["enabled","send_report_at_hh_mm","send_on_mondays","send_on_tuesdays","send_on_wednesdays","send_on_thursdays","send_on_fridays","send_on_saturdays","send_on_sundays"].some((n=>{if(void 0!==t[n]){return e[n]!==t[n]}return!1}))}async getAllReportSchedules(){const e=new bo(this.apiContext);let t=Sy,n=await e.getItemsService(t);return await n.readByQuery({limit:-1})}}var ky=async({schedule:e,filter:t},n)=>{if(!await yo.checkAllTablesExistWithApiContext("food_feedback_report",n))return;t(go.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES+".items.update",(async(e,t,s)=>{const i=t.keys;if(!i||0===i.length)throw new Error("No keys provided for update");if(!!!e.date_next_report_is_due){const t=new xy(n,s);let r=!1;for(const n of i){const s=await t.getCanteenFoodFeedbackReportScheduleById(n);if(s){if(xy.haveTimeSettingsChanged(s,e)){r=!0;break}}}r&&(e.date_next_report_is_due=null)}return e}));const s=new xy(n);e("*/20 * * * * *",(async()=>{await s.run()}))};class Cy{constructor(e,t,n){this.myDatabaseHelper=t,this.workflowRun=e,this.logger=n}async notify(e=1){let t=this.myDatabaseHelper.getDevicesHelper();await this.logger.appendLog("Start food notify schedule"),await this.logger.appendLog("Notify about meals in "+e+" days");try{let n=new Date;n.setDate(n.getDate()+e),await this.logger.appendLog("Date to notify about: "+n.toISOString());let s=await this.getFoodOffersForDate(n);await this.logger.appendLog("Found "+s.length+" food offers for "+n.toISOString());for(let i of s){await this.logger.appendLog("- Notify about food offer: "+i.id);let s=i.food,r=await this.getFoodWithTranslations(s),a=i.canteen;await this.logger.appendLog("- Food offer is in canteen: "+a);let o=await this.getFoodFeedbacksForFood(s);await this.logger.appendLog("- Found "+o.length+" food feedbacks for food "+s);for(let c of o){let o=c.profile;await this.logger.appendLog("-- Notify profile: "+o+" about food: "+s);let l=await this.getProfileAndDevicesForProfile(o),u=l.language;if(l.canteen!==a)continue;await this.logger.appendLog("-- Profile is interested in this canteen");const d=l.devices;let p=this.getExpoPushTokensToDevicesDict(d),h=Object.keys(p);for(let a of h){let o=p[a];await this.logger.appendLog("--- Notify devices: "+o.length+" about food: "+s);try{await this.notifyExpoPushTokenAboutFoodOffer(a,i,r,u,e,n)}catch(e){await this.logger.appendLog("--- Error while creating push notification: "+e.toString());if((null==e?void 0:e.message).includes("Failed to send notification")){await this.logger.appendLog("--- Failed to send notification");for(let e of o)await t.updateOne(e.id,{pushTokenObj:null})}}if(o.length>1){await this.logger.appendLog("--- Notify multiple devices with the same push token"),await this.logger.appendLog("--- we will remove the pushTokenObj from all but the last updated device");let e=null,n=null;for(let t of o)if(t.date_updated){let s=new Date(t.date_updated);(!e||s>e)&&(e=s,n=t)}for(let e of o)e.id!==(null==n?void 0:n.id)&&(await this.logger.appendLog("--- Remove pushTokenObj from device.id: "+e.id+" as it is not the recent updated device: "+e.id),await t.updateOne(e.id,{pushTokenObj:null}))}}for(let e of d)await this.logger.appendLog("--- Notify device: "+e.id+" about food: "+s),e.pushTokenObj}}return await this.logger.appendLog("Finished"),await this.logger.getFinalLogWithStateAndParams({state:zo.SUCCESS})}catch(e){return await this.logger.appendLog("Error: "+e.toString()),await this.logger.getFinalLogWithStateAndParams({state:zo.FAILED})}}getExpoPushTokenFromDevice(e){var t;let n=e.pushTokenObj;return null==(t=null==n?void 0:n.pushtokenObj)?void 0:t.data}getExpoPushTokensToDevicesDict(e){let t={};for(let n of e){let e=this.getExpoPushTokenFromDevice(n);if(e){let s=t[e]||[];s.push(n),t[e]=s}}return t}async notifyExpoPushTokenAboutFoodOffer(e,t,n,s,i,r){let a=this.myDatabaseHelper.getPushNotificationsHelper(),o=await this.getProjectName(),c=this.getFoodNameTranslation(n,s),l=await this.getTranslationDate(s,i,r)+": "+c;l=" "+l;let u={expo_push_tokens:[e],message_title:o,message_body:l};await a.createOne(u)}async getTranslationDate(e,t,n){return 0===t?"Heute":1===t?"Morgen":Po.getHumanReadableDate(n,!1)}getFoodNameTranslation(e,t){return Oo.getTranslation(null==e?void 0:e.translations,t,"name")||"ein Gericht"}async getProjectName(){let e=await this.myDatabaseHelper.getServerInfo(),t=null==e?void 0:e.project;return(null==t?void 0:t.project_name)||"Rocket Meals"}async getFoodWithTranslations(e){const t=this.myDatabaseHelper.getFoodsHelper();return await t.readOne(e,{fields:["*","translations.*"]})}async getProfileAndDevicesForProfile(e){let t=this.myDatabaseHelper.getProfilesHelper();return await t.readOne(e,{fields:["*","devices.*"]})}async getFoodFeedbacksForFood(e){const t=this.myDatabaseHelper.getFoodFeedbacksHelper();return await t.readByQuery({filter:{_and:[{food:{_eq:e}},{notify:{_eq:!0}}]},limit:-1})}async getFoodOffersForDate(e){const t=Po.foodofferDateTypeToString(Po.getFoodofferDateTypeFromDate(e)),n=this.myDatabaseHelper.getFoodoffersHelper();return await n.readByQuery({filter:{date:{_eq:t}},limit:-1})}}class Ny extends q_{getWorkflowId(){return"food-notify"}async runJob(e,t,n){await n.appendLog("Starting food parsing");try{const s=new Cy(e,t,n);let i=1;return await s.notify(i)}catch(e){return await n.appendLog("Error: "+e.toString()),n.getFinalLogWithStateAndParams({state:zo.FAILED})}}}var Iy=async({action:e,schedule:t},n)=>{let s=new Xo(n);W_.registerScheduleToRunWorkflowRuns({workflowRunInterface:new Ny,myDatabaseHelper:s,schedule:t,cronOject:W_.EVERY_DAY_AT_17_59})};class Ry{static removeDuplicatesFromJsonListWithSelector(e,t){let n=[],s={};for(let i of e){let e=t(i);s[e]||(s[e]=i,n.push(i))}return n}static removeDuplicatesFromJsonList(e,t){return Ry.removeDuplicatesFromJsonListWithSelector(e,(e=>e[t]))}}class Dy{static getDictMarkingsExclusions(e){let t={};for(let n of e)t[n.id]=n;return t}static filterMarkingByRestrictionRules(e,t){let n=[],s={};for(let t of e)s[t.id]=t;for(let i of e){let e=!0,r=Dy.getMarkingExclusionRuleIdsFromMarking(i);if(r.length>0)for(let n of r){let i=t[n];if(i){let t=i.restricted_by_markings_id;if(t){if(!!s[t]){e=!1;break}}}}e&&n.push(i)}return n}static getMarkingExclusionRuleIdsFromMarking(e){let t=e.excluded_by_markings;return t.every((e=>"string"==typeof e||"number"==typeof e))?t:t.map((e=>e.id))}}class Oy{constructor(...e){this.timers=e.reduce(((e,t)=>(e[t]=new Ly(t),e)),{})}printStatistics(){console.log("Timer Statistics:");for(const e in this.timers){const t=this.timers[e],n=t.formatTimeToString(t.totalTime);console.log(`${e}: totalTime: ${n}, Rounds: ${t.rounds}, Average: ${t.formatTimeToString(t.totalTime/t.rounds)}`)}}findBottleneck(){let e=0,t="";for(const n in this.timers){const s=this.timers[n];s.totalTime>e&&(e=s.totalTime,t=n)}console.log(`Bottleneck: ${t}: ${Ly.formatTimeToString(e)}`)}}class Ly{constructor(e){this.startTime=0,this.endTime=0,this.totalTime=0,this.rounds=0,this.alias=e||"",this.resetTimer(),this.start()}resetTimer(){this.startTime=0,this.endTime=0,this.totalTime=0,this.rounds=0}start(){this.startTime=(new Date).getTime()}stop(){this.endTime=(new Date).getTime()}startRound(){this.start()}stopRound(){this.stop();const e=this.getElapsedTime();this.totalTime+=e,this.rounds+=1}getElapsedTime(){if(0===this.endTime){return(new Date).getTime()-this.startTime}return this.endTime-this.startTime}printElapsedTime(e,t){e=e?`${e}: `:"",e=this.alias?`${this.alias}: ${e}`:e,t=t?`: ${t}`:"";let n=this.getElapsedTime();console.log(e+`Elapsed time: ${this.formatTimeToString(n)}`+t)}getEstimatedTimeRemaining(e,t){let n=t-e;return this.getElapsedTime()/e*n}printEstimatedTimeRemaining(e,t,n,s){let i=this.getEstimatedTimeRemaining(e,t),r=this.formatTimeToString(i);n=n?`${n}: `:"",n=this.alias?`${this.alias}: ${n}`:n,s=s?`: ${s}`:"",console.log(n+`Estimated time remaining: ${r}`+s)}formatProgressAndTotal(e,t){let n=t.toString().length;return`${e.toString().padStart(n," ")}/${t.toString()}`}printElapsedTimeAndEstimatedTimeRemaining(e,t,n,s){const i=this.getElapsedTime(),r=this.getEstimatedTimeRemaining(e,t),a=this.formatTimeToString(i),o=this.formatTimeToString(r),c=this.formatProgressAndTotal(e,t);n=n?`${n}: `:"",n=this.alias?`${this.alias}: ${n}`:n,s=s?`: ${s}`:"",console.log(n+` (${c})  Elapsed time: ${a}, Estimated time remaining: ${o}`+s)}formatTimeToString(e){return Ly.formatTimeToString(e)}static formatTimeToString(e){let t=Math.floor(e%1e3),n=Math.floor(e/1e3%60),s=Math.floor(e/6e4%60),i=Math.floor(e/36e5%24);return`${Math.floor(e/864e5).toString().padStart(2,"0")}d :${i.toString().padStart(2,"0")}h :${s.toString().padStart(2,"0")}m :${n.toString().padStart(2,"0")}s.${t.toString().padStart(3,"0")}`}}var Fy={exports:{}};!function(e,t){var n=C;function s(e,t){return function(e,t){var s;s="passthrough"!==t.algorithm?n.createHash(t.algorithm):new l;void 0===s.write&&(s.write=s.update,s.end=s.update);var i=c(t,s);i.dispatch(e),s.update||s.end("");if(s.digest)return s.digest("buffer"===t.encoding?void 0:t.encoding);var r=s.read();if("buffer"===t.encoding)return r;return r.toString(t.encoding)}(e,t=a(e,t))}(t=e.exports=s).sha1=function(e){return s(e)},t.keys=function(e){return s(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},t.MD5=function(e){return s(e,{algorithm:"md5",encoding:"hex"})},t.keysMD5=function(e){return s(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var i=n.getHashes?n.getHashes().slice():["sha1","md5"];i.push("passthrough");var r=["buffer","hex","binary","base64"];function a(e,t){t=t||{};var n={};if(n.algorithm=t.algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var s=0;s<i.length;++s)i[s].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=i[s]);if(-1===i.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+i.join(", "));if(-1===r.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+r.join(", "));return n}function o(e){if("function"!=typeof e)return!1;return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function c(e,t,n){n=n||[];var s=function(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")};return{dispatch:function(t){e.replacer&&(t=e.replacer(t));var n=typeof t;return null===t&&(n="null"),this["_"+n](t)},_object:function(t){var i=Object.prototype.toString.call(t),r=/\[object (.*)\]/i.exec(i);r=(r=r?r[1]:"unknown:["+i+"]").toLowerCase();var a;if((a=n.indexOf(t))>=0)return this.dispatch("[CIRCULAR:"+a+"]");if(n.push(t),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t))return s("buffer:"),s(t);if("object"===r||"function"===r||"asyncfunction"===r){var c=Object.keys(t);e.unorderedObjects&&(c=c.sort()),!1===e.respectType||o(t)||c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter((function(t){return!e.excludeKeys(t)}))),s("object:"+c.length+":");var l=this;return c.forEach((function(n){l.dispatch(n),s(":"),e.excludeValues||l.dispatch(t[n]),s(",")}))}if(!this["_"+r]){if(e.ignoreUnknown)return s("["+r+"]");throw new Error('Unknown object type "'+r+'"')}this["_"+r](t)},_array:function(t,i){i=void 0!==i?i:!1!==e.unorderedArrays;var r=this;if(s("array:"+t.length+":"),!i||t.length<=1)return t.forEach((function(e){return r.dispatch(e)}));var a=[],o=t.map((function(t){var s=new l,i=n.slice();return c(e,s,i).dispatch(t),a=a.concat(i.slice(n.length)),s.read().toString()}));return n=n.concat(a),o.sort(),this._array(o,!1)},_date:function(e){return s("date:"+e.toJSON())},_symbol:function(e){return s("symbol:"+e.toString())},_error:function(e){return s("error:"+e.toString())},_boolean:function(e){return s("bool:"+e.toString())},_string:function(e){s("string:"+e.length+":"),s(e.toString())},_function:function(t){s("fn:"),o(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return s("number:"+e.toString())},_xml:function(e){return s("xml:"+e.toString())},_null:function(){return s("Null")},_undefined:function(){return s("Undefined")},_regexp:function(e){return s("regex:"+e.toString())},_uint8array:function(e){return s("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return s("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return s("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return s("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return s("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return s("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return s("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return s("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return s("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return s("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return s("url:"+e.toString())},_map:function(t){s("map:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_set:function(t){s("set:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_file:function(e){return s("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return s("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return s("domwindow")},_bigint:function(e){return s("bigint:"+e.toString())},_process:function(){return s("process")},_timer:function(){return s("timer")},_pipe:function(){return s("pipe")},_tcp:function(){return s("tcp")},_udp:function(){return s("udp")},_tty:function(){return s("tty")},_statwatcher:function(){return s("statwatcher")},_securecontext:function(){return s("securecontext")},_connection:function(){return s("connection")},_zlib:function(){return s("zlib")},_context:function(){return s("context")},_nodescript:function(){return s("nodescript")},_httpparser:function(){return s("httpparser")},_dataview:function(){return s("dataview")},_signal:function(){return s("signal")},_fsevent:function(){return s("fsevent")},_tlswrap:function(){return s("tlswrap")}}}function l(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}t.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),c(t=a(e,t),n).dispatch(e)}}(Fy,Fy.exports);var My=$(Fy.exports);class Py{static hashFromObject(e){return My(e,{algorithm:"md5",excludeValues:!1,ignoreUnknown:!1})}}const By="FoodParseSchedule";let Uy=class{constructor(e,t,n,s,i){this.myDatabaseHelper=t,this.workflowRun=e,this.logger=n,this.foodParser=s,this.markingParser=i}async getPreviousMealOffersHash(){return await this.myDatabaseHelper.getWorkflowsRunsHelper().getPreviousResultHash(this.workflowRun,this.logger)}async parse(e=!1){await this.logger.appendLog("Starting");let t=[];try{if(this.markingParser&&(await this.logger.appendLog("Create Needed Data for MarkingParser"),await this.markingParser.createNeededData(),await this.logger.appendLog("Update Markings"),t=await this.markingParser.getMarkingsJSONList(),await this.updateMarkings(t)),this.foodParser){await this.logger.appendLog("Create Needed Data for FoodParser"),await this.foodParser.createNeededData(t);let e=await this.foodParser.getCanteensList(),n=await this.foodParser.getFoodsListForParser(),s=await this.foodParser.getFoodoffersForParser(),i=Py.hashFromObject(s),r=await this.getPreviousMealOffersHash();const a=this.myDatabaseHelper.getMarkingsExclusionsHelper();await this.logger.appendLog("Current meal offers hash: "+i),await this.logger.appendLog("Previous meal offers hash: "+r);if(!r||r!==i){await this.logger.appendLog("Meal offers changed, start parsing"),await this.myDatabaseHelper.getWorkflowsRunsHelper().updateOneItemWithoutHookTrigger(this.workflowRun,{result_hash:i}),await this.logger.appendLog("Meal offers changed, start parsing"),await this.updateCanteens(e),await this.logger.appendLog("Update Foodoffer Categories"),await this.updateFoodofferCategories(s);const t=await this.getFoodofferCategoriesExternalIdentifiersToFoodofferCategoriesDict();await this.logger.appendLog("Update Foods Categories"),await this.updateFoodsCategories(n);const r=await this.getFoodCategoriesExternalIdentifiersToFoodCategoriesDict();await this.logger.appendLog("Get all markings exlusions");let o=await a.readAllItems();const c=Dy.getDictMarkingsExclusions(o);await this.logger.appendLog("Update Food Attributes");let l={dictMarkingsExclusions:c,foodCategoryExternalIdentifiersToFoodCategoriesDict:r,dictExternalIdentifierToFoodAttributes:await this.updateFoodAttributesAndGetExternalIdentifierToFoodAttributes(n),foodofferCategoryExternalIdentifiersToFoodofferCategoriesDict:t};return await this.logger.appendLog("Update Foods"),await this.updateFoods(n,l),await this.logger.appendLog("Delete specific food offers"),await this.deleteRequiredFoodOffersForTheirCanteens(s),await this.logger.appendLog("Create food offers"),await this.createFoodOffers(s,l),this.logger.getFinalLogWithStateAndParams({state:zo.SUCCESS,result_hash:i})}return await this.logger.appendLog("Meal offers did not change, skip parsing"),this.logger.getFinalLogWithStateAndParams({state:zo.SKIPPED,result_hash:i})}return await this.logger.appendLog("Finished"),this.logger.getFinalLogWithStateAndParams({state:zo.SUCCESS})}catch(e){return await this.logger.appendLog("Error: "+e.toString()),this.logger.getFinalLogWithStateAndParams({state:zo.FAILED})}}async updateFoodAttributesAndGetExternalIdentifierToFoodAttributes(e){let t={};for(let n of e){let e=n.attribute_values;for(let n of e){let e=n.external_identifier;e&&(t[e]=e)}}return await this.updateFoodAttributes(t)}async updateFoodAttributes(e){let t=Object.keys(e),n={};for(let e of t){let t={external_identifier:e},s={alias:e,external_identifier:e},i=await this.myDatabaseHelper.getFoodsAttributesHelper().findOrCreateItem(t,s);i&&(n[e]=i)}return n}async updateFoodsCategories(e){let t=[];for(let n of e){let e=n.category_external_identifier;e&&t.push(e)}for(let e of t){let t={external_identifier:e},n={alias:e,external_identifier:e};await this.myDatabaseHelper.getFoodsCategoriesHelper().findOrCreateItem(t,n)}}async getFoodCategoriesExternalIdentifiersToFoodCategoriesDict(){let e=await this.myDatabaseHelper.getFoodsCategoriesHelper().readAllItems(),t={};for(let n of e){const e=n.external_identifier;e&&(t[e]=n)}return t}async updateFoodofferCategories(e){let t=[];for(let n of e){let e=n.category_external_identifier;e&&t.push(e)}for(let e of t){let t={external_identifier:e},n={alias:e,external_identifier:e};await this.myDatabaseHelper.getFoodofferCategoriesHelper().findOrCreateItem(t,n)}}async getFoodofferCategoriesExternalIdentifiersToFoodofferCategoriesDict(){let e=await this.myDatabaseHelper.getFoodofferCategoriesHelper().readAllItems(),t={};for(let n of e){const e=n.external_identifier;e&&(t[e]=n)}return t}async getFoodsService(){return await this.myDatabaseHelper.getFoodsHelper()}getFoodofferDatesFromRawFoodofferJSONList(e){let t={};for(let n of e){t[Po.foodofferDateTypeToString(n.date)]=n.date}return Object.values(t)}async deleteRequiredFoodOffersForTheirCanteens(e){let t={};for(let n of e){let e=n.canteen_external_identifier;t[e]||(t[e]=[]),t[e].push(n)}let n=Object.keys(t);for(let e of n){await this.logger.appendLog("Delete required foodoffers for canteen: "+e);let n=await this.findOrCreateCanteenByExternalIdentifier(e);if(n){n.foodoffers_import_delete_all_without_dates&&await this.deleteAllFoodoffersForCanteenWithoutDates(n);let s=t[e]||[],i=this.getFoodofferDatesFromRawFoodofferJSONList(s);await this.deleteFoodOffersNewerOrEqualThanDate(i,n)}}}async deleteAllFoodoffersForCanteenWithoutDates(e){let t=await this.myDatabaseHelper.getFoodoffersHelper(),n=await t.readByQuery({filter:{canteen:{_eq:e.id},date:{_null:!0}},fields:["id"],limit:-1});await this.deleteFoodOffers(n,`Delete all food offers for canteen without dates: ${e.id} - amount: ${n.length}`)}async deleteFoodOffersNewerOrEqualThanDate(e,t){let n=null;for(let t of e){let e=new Date(Po.foodofferDateTypeToString(t));if(n){e<new Date(Po.foodofferDateTypeToString(n))&&(n=t)}else n=t}n&&(await this.logger.appendLog("Delete food offers newer or equal than date: "+n),await this.deleteAllFoodOffersNewerOrEqualThanDateForCanteen(n,t))}async deleteFoodOffers(e,t){let n=await this.myDatabaseHelper.getFoodoffersHelper(),s=e.map((e=>e.id));s.length>0?await n.deleteMany(s).then((async()=>{await this.logger.appendLog(`Foodoffers deleted: ${s.length} - ${t}`)})).catch((async e=>{await this.logger.appendLog(`Foodoffers delete error: ${t}: ${e}`)})):await this.logger.appendLog(`No foodoffers given to delete - ${t}`)}async deleteAllFoodOffersNewerOrEqualThanDateForCanteen(e,t){const n=Po.foodofferDateTypeToString(e);await this.logger.appendLog("Delete food offers newer or equal than date: "+n+" for canteen: "+t.id);let s=await this.myDatabaseHelper.getFoodoffersHelper(),i=await s.readByQuery({filter:{_and:[{date:{_gte:n}},{canteen:{_eq:t.id}}]},fields:["id"],limit:-1});await this.deleteFoodOffers(i,`Delete all food offers newer or equal than date: ${n} for canteen: ${t.id}`)}async findOrCreateMarkingByExternalIdentifier(e){let t={external_identifier:e},n={alias:e,external_identifier:e};return this.myDatabaseHelper.getMarkingsHelper().findOrCreateItem(t,n)}async findMarkingByExternalIdentifier(e){let t={external_identifier:e};return await this.myDatabaseHelper.getMarkingsHelper().findFirstItem(t)}async updateCanteens(e){let t=e.length,n=0;for(let s of e){n++,await this.logger.appendLog("Update Canteen "+n+" / "+t);let e=await this.findOrCreateCanteen(s);if(e){let t=this.myDatabaseHelper.getCanteensHelper();await t.updateOne(e.id,s)}}}async assignMarkingsToFood(e,t,n){let s=go.FOODS_MARKINGS;const i=Dy.filterMarkingByRestrictionRules(e,n);for(let e of i){let n={foods_id:t.id,markings_id:e.id};const i=n,r=n,a=this.myDatabaseHelper.getItemsServiceHelper(s);await a.findOrCreateItem(i,r)}}async assignMarkingsToFoodoffer(e,t,n){let s=go.FOODOFFER_MARKINGS;const i=Dy.filterMarkingByRestrictionRules(e,n);for(let e of i){let n={foodoffers_id:t.id,markings_id:e.id};const i=this.myDatabaseHelper.getItemsServiceHelper(s);await i.createOne(n)}}async updateFoodBasicFields(e){return this.myDatabaseHelper.getFoodsHelper().updateOne(e.id,e)}async updateFoodsAttributesValues(e,t,n){let s=this.getFoodsOrFoodoffersWithOnlySetAttributesFields(e,t,n,{isFood:!0,isFoodoffer:!1});await this.myDatabaseHelper.getFoodsHelper().updateOne(e.id,s,{disableEventEmit:!0})}getFoodsOrFoodoffersWithOnlySetAttributesFields(e,t,n,s){let i=e.attribute_values,r=[];if(i)for(let e of i)e.id?r.push(e.id):r.push(e);let a=[];for(let i of t){let t=n[i.external_identifier];if(t){let n=null,r=null;s.isFood&&(n=e.id),s.isFoodoffer&&(r=e.id);let o={food_id:n,foodoffer_id:r,food_attribute:t.id,...i.attribute_value};a.push(o)}}let o={};return o.attribute_values={create:a,delete:r,update:[]},o}async updateFoodTranslations(e,t){await Oo.updateItemTranslationsForItemWithTranslationsFetched(e,t.translations,"foods_id",go.FOODS,this.myDatabaseHelper.apiContext,this.myDatabaseHelper.eventContext)}async getOrCreateFoodsOnlyWithTranslations(e){const t=new Ly(By+" - getOrCreateFoodsOnly"),n=this.myDatabaseHelper.getFoodsHelper(),s={};let i=0,r=e.length;for(const a of e){const e=a.basicFoodData.id,o={id:e},c=await n.findOrCreateItem(o,o,{withTranslations:!0});c&&(s[e]=c),i++,t.printElapsedTimeAndEstimatedTimeRemaining(i,r)}return t.printElapsedTime(),await this.logger.appendLog(`[Step 1] - Found or created ${Object.keys(s).length} foods.`),s}async updateFoods(e,t){e=Ry.removeDuplicatesFromJsonListWithSelector(e,(e=>e.basicFoodData.id));const n={};for(let t of e){let e=t.marking_external_identifiers;for(let t of e)n[t]=null}let s=!1;this.foodParser&&(s=this.foodParser.shouldCreateNewMarkingsWhenTheyDoNotExistYet());let i=Object.keys(n);for(let e of i){let t=null;t=s?await this.findOrCreateMarkingByExternalIdentifier(e):await this.findMarkingByExternalIdentifier(e),t&&(n[e]=t)}let r=await this.getOrCreateFoodsOnlyWithTranslations(e);const a=new Ly(By+" - Update foods");let o=0;for(const s of e){let i=r[s.basicFoodData.id];if(i&&i.id&&this.foodParser){const r=s.basicFoodData;let c=s.marking_external_identifiers,l=[];for(let e of c){let t=n[e];t&&l.push(t)}await this.assignMarkingsToFood(l,i,t.dictMarkingsExclusions),await this.assignFoodCategoryToFood(i,s,t.foodCategoryExternalIdentifiersToFoodCategoriesDict),await this.updateFoodBasicFields(r),await this.updateFoodsAttributesValues(i,s.attribute_values,t.dictExternalIdentifierToFoodAttributes),await this.updateFoodTranslations(i,s),o++,a.printElapsedTimeAndEstimatedTimeRemaining(o,e.length)}}await this.logger.appendLog("Finished Update Foods")}async assignFoodCategoryToFood(e,t,n){let s=t.category_external_identifier;if(s){let t=n[s];const i=null==t?void 0:t.id;i!==e.food_category&&await this.myDatabaseHelper.getFoodsHelper().updateOne(e.id,{food_category:i})}}async findOrCreateCanteen(e){let t={external_identifier:e.external_identifier},n=e;return await this.myDatabaseHelper.getCanteensHelper().findOrCreateItem(t,n)}async findOrCreateCanteenByExternalIdentifier(e){let t={external_identifier:e};return await this.findOrCreateCanteen(t)}getFoodofferToCreate(e,t,n,s,i,r){let a=e.food_id;const o=e.basicFoodofferData;o.alias||(o.alias=s.alias);const c=!!t.foodoffers_import_without_date?null:Po.foodofferDateTypeToString(e.date),l=n.map((e=>({foodoffers_id:"+",markings_id:{id:e.id}})));let u=this.getFoodsOrFoodoffersWithOnlySetAttributesFields({},e.attribute_values,r.dictExternalIdentifierToFoodAttributes,{isFood:!1,isFoodoffer:!0});return{...e.basicFoodofferData,canteen:t.id,food:a,attribute_values:u.attribute_values,foodoffer_category:null==i?void 0:i.id,date:c,date_created:(new Date).toISOString(),date_updated:(new Date).toISOString(),markings:{create:l,update:[],delete:[]}}}async createFoodOffers(e,t){const n=e.length;await this.logger.appendLog("Create Food Offers");const s={},i={};for(let t of e){let e=t.canteen_external_identifier;s[e]=null;let n=t.marking_external_identifiers;for(let e of n)i[e]=null}let r=Object.keys(s);for(let e of r){let t=await this.findOrCreateCanteenByExternalIdentifier(e);t&&(s[e]=t)}let a=Object.keys(i),o=!1;this.foodParser&&(o=this.foodParser.shouldCreateNewMarkingsWhenTheyDoNotExistYet());for(let e of a){let t=null;t=o?await this.findOrCreateMarkingByExternalIdentifier(e):await this.findMarkingByExternalIdentifier(e),t&&(i[e]=t)}const c={};for(let t of e){let e=t.food_id;c[e]=null}const l=await this.getFoodsService(),u=Object.keys(c);for(let e of u){let t=await l.readOne(e);t&&(c[e]=t)}const d=[];e.map((async(e,r)=>{const a=s[e.canteen_external_identifier],o=!!a,l=e.marking_external_identifiers,u=[];for(let e of l){const t=i[e];t&&u.push(t)}const p=u.length===l.length,h=e.category_external_identifier;let f;h&&(f=t.foodofferCategoryExternalIdentifiersToFoodofferCategoriesDict[h]);const m=e.food_id,g=c[m],_=!!g;if(o&&p&&_){const n=Dy.filterMarkingByRestrictionRules(u,t.dictMarkingsExclusions);let s=this.getFoodofferToCreate(e,a,n,g,f,t);d.push(s)}else await this.logger.appendLog("Error Foodoffer "+(r+1)+" / "+n+" - canteenFound: "+o+" - markingsAllFound: "+p+" - foodFound: "+_)}));const p=await this.myDatabaseHelper.getFoodoffersHelper(),h=new Ly(By+" - Create Food Offers");new Oy("disableEventEmit_TRUE","disableEventEmit_FALSE");let f=1;const m=Math.ceil(d.length/10);for(let e=0;e<d.length;e+=10){const t=d.slice(e,e+10);await this.logger.appendLog("Create Food Offers Batch "+f+" / "+m);let n=!0;await p.createManyItems(t,{disableEventEmit:n}),h.printElapsedTimeAndEstimatedTimeRemaining(f,m,null,"Total amount of food offers: "+d.length),f++}}async updateMarkings(e){let t=await this.myDatabaseHelper.getMarkingsHelper(),n=(e=Ry.removeDuplicatesFromJsonList(e,"external_identifier")).length,s=0;for(let i of e){s++,await this.logger.appendLog("Update Marking "+s+" / "+n),await this.logger.appendLog(JSON.stringify(i,null,2));let e=JSON.parse(JSON.stringify(i));delete e.translations;let r=await t.readByQuery({filter:{external_identifier:e.external_identifier},limit:1}),a=r.length>0?r[0]:null;if(!a){let n={...e,short_code:e.external_identifier},s=await t.createOne(n);a=await t.readOne(s)}a&&a.id&&await this.updateMarkingTranslations(a,i)}}async updateMarkingTranslations(e,t){await Oo.updateItemTranslations(e,t.translations,"markings_id",go.MARKINGS,this.myDatabaseHelper.apiContext,this.myDatabaseHelper.eventContext)}};class Hy{static async readFileSync(e,t){if(e)try{const n={encoding:t};return l.readFileSync(i.resolve(e),n).toString()}catch(e){console.log("TL1 Report read error: "),console.log(e.toString())}}}class jy{constructor(e,t){this.path_to_tl1_export=e,this.encoding=t}async getRawReport(){return await Hy.readFileSync(this.path_to_tl1_export,this.encoding)}}class Gy{constructor(e){this.api_url=e}async getRawReport(){console.log("TL1Parser_Web: getRawReport"),console.log("TL1Parser_Web: api_url= "+this.api_url);try{const e=this.api_url;let t=(await Ki.request({method:"GET",url:e,responseType:"arraybuffer"})).data.toString("latin1"),n=Buffer.from(t,"utf-8").toString();return console.log("TL1 Report; length= "+n.length),n}catch(e){console.log("File not found yet")}}}const $y=class{static getListOfLineObjectsWithParams(e,t,n,s=!0){return $y.getListOfLineObjects(e,{newLineDelimiter:t,inlineDelimiter:n,removeTailoringQuotes:s})}static getListOfLineObjects(e,t){let n=$y.splitTextIntoLines(e,t.newLineDelimiter);return $y.parseFileLinesToJSONList(n,t.inlineDelimiter,t.removeTailoringQuotes)}static splitTextIntoLines(e,t=$y.NEW_LINE_DELIMITER){return e?(e=e.toString()).split(t):[]}static splitLineByDelimiter(e,t=$y.INLINE_DELIMITER_TAB,n){let s=e.split(t);if(n)for(let e=0;e<s.length;e++){let t=s[e];t&&(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),t.startsWith('"')&&(t=t.substring(1)),t.endsWith('"')&&(t=t.substring(0,t.length-1)),t.startsWith('\\"')&&(t=t.substring(2)),t.endsWith('\\"')&&(t=t.substring(0,t.length-2)),s[e]=t)}return s}static parseFileLinesToJSONList(e,t,n){let s=[],i=e[0];if(i){let r=i.trim(),a=$y.splitLineByDelimiter(r,t,n);for(let i=1;i<e.length;i++){let r=e[i];if(r&&""!==r){let e=$y.splitLineByDelimiter(r,t,n),i=$y.parseLineToJSON(e,a);s.push(i)}}}return s}static parseLineToJSON(e,t){let n={};for(let s=0;s<t.length;s++){const i=t[s];if(i){const t=e[s];null!=t&&(n[i]=t)}}return n}};let qy=$y;qy.NEW_LINE_DELIMITER="\n",qy.INLINE_DELIMITER_TAB="\t",qy.INLINE_DELIMITER_SEMICOLON=";";const zy="name";class Wy{constructor(e,t){this.parsedReport=[],this.path_to_tl1_export=e,this.encoding=t}async createNeededData(){this.parsedReport=[];let e=await this.getRawReport();this.parsedReport=qy.getListOfLineObjectsWithParams(e,qy.NEW_LINE_DELIMITER,qy.INLINE_DELIMITER_SEMICOLON,!0)}async getRawReport(){return Hy.readFileSync(this.path_to_tl1_export,this.encoding)}async getMarkingsJSONList(){let e=[];for(let t=0;t<this.parsedReport.length;t++){let n=this.parsedReport[t];if(n){let t=Wy.getMarkingJSONFromRawMarking(n);t&&e.push(t)}}return e}static getMarkingJSONFromRawMarking(e){let t=e.ID,n=e.BESCHREIBUNG;e.HINWEISE;let s=e.KUERZEL,i=Wy.getMarkingExternalIdentifier(t,s);if(!i)return console.log("MarkingTL1Parser: getMarkingJSONFromRawMarking: externalIdentifier is null. Skip this marking."),console.log("MarkingTL1Parser: getMarkingJSONFromRawMarking: rawMarking: "+JSON.stringify(e,null,2)),null;let r={};if(n){let e=Wy.getMarkingNameDe(n);e&&(r[Oo.LANGUAGE_CODE_DE]={[zy]:e});let t=Wy.getMarkingNameEn(n);t&&(r[Oo.LANGUAGE_CODE_EN]={[zy]:t})}return{excluded_by_markings:[],external_identifier:i,alias:n,translations:r}}static getMarkingNameDe(e){if(!e||""===e.trim())return;let t=e.indexOf("/");return t>-1?e.substring(0,t).trim():e.trim()}static getMarkingNameEn(e){if(!e||""===e.trim())return;let t=e.indexOf("/");return t>-1?e.substring(t+1).trim():void 0}static getMarkingExternalIdentifier(e,t){let n=null;return t?n=t:e&&(n=e.trim(),n=n.replace(/^0+/,"")),n}}var Yy=(e=>(e.PRICE_GROUP_STUDENT="student",e.PRICE_GROUP_EMPLOYEE="employee",e.PRICE_GROUP_GUEST="guest",e))(Yy||{}),Vy=(e=>(e.NUMBER="number",e.STRING="string",e.BOOLEAN="boolean",e))(Vy||{});const Ky=class{constructor(e){this.rawFoodoffersJSONList=[],this.markingsJSONListFromMarkingParger=void 0,this.rawFoodofferReader=e,this.resetData()}resetData(){this.rawFoodoffersJSONList=[],this.markingsJSONListFromMarkingParger=void 0}async createNeededData(e){this.resetData(),this.markingsJSONListFromMarkingParger=e;let t=await this.rawFoodofferReader.getRawReport();this.rawFoodoffersJSONList=await this.getRawFoodofferJSONListFromRawReport(t)}shouldCreateNewMarkingsWhenTheyDoNotExistYet(){return!1}async getFoodsListForParser(){let e=Ky.getFoodIdToRawFoodofferDict(this.rawFoodoffersJSONList),t=Object.keys(e),n=[];for(let s of t){let t=e[s];if(t){let e=this.getFoodInformationFromRawFoodoffer(t);e&&n.push(e)}}return n}getFoodCategoryFromRawFoodoffer(e){let t=Ky.getParsedReportItemFromrawFoodoffer(e);return(null==t?void 0:t[Ky.DEFAULT_CATEGORY_FIELD])||null}getFoodInformationFromRawFoodoffer(e){const t=Ky.getFoodIdFromRawFoodoffer(e);if(!t)return null;let n=Ky.getParsedReportItemFromrawFoodoffer(e);const s={[Io.DE]:{name:Ky._getFoodNameDe(n)},[Io.EN]:{name:Ky._getFoodNameEn(n)}},i=Ky.getFoodNutritionValuesFromRawTL1Foodoffer(n),r=Ky.getFoodEnvironmentImpactValuesFromRawTL1Foodoffer(n);let a=this.getFoodAttributesFromRawTL1Foodoffer(n);return{basicFoodData:{id:t,alias:Ky._getFoodNameDe(n),...i,...r},attribute_values:a,translations:s,category_external_identifier:this.getFoodCategoryFromRawFoodoffer(e),marking_external_identifiers:this.getMarkingsExternalIdentifiersFromRawFoodoffer(e)}}async getCanteensList(){let e=this.rawFoodoffersJSONList,t={};for(let n of e){let e=Ky.getParsedReportItemFromrawFoodoffer(n),s=Ky.getCanteenLabelFunction(e);s&&(t[s]={external_identifier:s,alias:s})}return my.getValueListFromDict(t)}getFoodofferCategoryFromRawFoodoffer(e){let t=Ky.getParsedReportItemFromrawFoodoffer(e);return(null==t?void 0:t[Ky.DEFAULT_FOODOFFER_CATEGORY_FIELD])||null}async getFoodoffersForParser(){const e=[];let t=this.rawFoodoffersJSONList;for(let n of t){let t=Ky.getParsedReportItemFromrawFoodoffer(n);const s=Ky.getFoodNutritionValuesFromRawTL1Foodoffer(t),i=Ky.getFoodEnvironmentImpactValuesFromRawTL1Foodoffer(t);let r=this.getFoodAttributesFromRawTL1Foodoffer(t);const a={alias:Ky._getFoodNameDe(t),price_employee:Ky.getPriceForGroup(t,Yy.PRICE_GROUP_EMPLOYEE),price_guest:Ky.getPriceForGroup(t,Yy.PRICE_GROUP_GUEST),price_student:Ky.getPriceForGroup(t,Yy.PRICE_GROUP_STUDENT),...s,...i},o={date:n.date,basicFoodofferData:a,attribute_values:r,category_external_identifier:this.getFoodofferCategoryFromRawFoodoffer(n),marking_external_identifiers:this.getMarkingsExternalIdentifiersFromRawFoodoffer(n),canteen_external_identifier:n.canteen_external_identifier,food_id:n.food_id};e.push(o)}return e}filterZsNummernOnlyForPassedExternalMarkingIdentifiersFromMarkingParser(e){let t=this.markingsJSONListFromMarkingParger;if(t){let n=t.map((e=>e.external_identifier));return e.filter((e=>n.includes(e)))}return e}getMarkingsExternalIdentifiersFromRawFoodoffer(e){let t=Ky.getParsedReportItemFromrawFoodoffer(e),n=Ky._getRawNamesList(t).join(""),s=Ky.getMarkingLabelsDictFromFoodName(n),i=Object.keys(s),r=Ky.getMarkingExternalIdentifiersForMenuLinesFromParsedReportItem(t);return i.concat(r)}async getRawFoodofferJSONListFromRawReport(e){let t=qy.getListOfLineObjectsWithParams(e,qy.NEW_LINE_DELIMITER,qy.INLINE_DELIMITER_TAB,!0),n=Ky._groupParsedReportItemsToFoodofferListsItems(t);return this.getRawFoodofferJSONListFromGroupedList(n)}static _groupParsedReportItemsToFoodofferListsItems(e){let t={};for(let n of e){let e=Ky.getFoodofferIdentifier(n);if(e){let s=t[e]||[];s.push(n),t[e]=s}}return t}getRawFoodofferJSONListFromGroupedList(e){let t=[],n=Object.keys(e);for(let s of n){let n=e[s],i=this.getRawFoodofferInformationFromGroupedItems(n);i&&t.push(i)}return t}static getRecipeIdsFromRawTL1Foodoffer(e){if(!e||0===e.length)return null;let t=[];for(let n of e){let e=Ky.getRecipeIdFunction(n);e&&t.push(e)}return t}getCombinedSortedRecipeIdAsString(e){const t=Ky.getRecipeIdsFromRawTL1Foodoffer(e);if(!t)return null;return Ky.getSortedRecipeIdFromListOfRecipeIds(t)}getFoodId(e){return this.getCombinedSortedRecipeIdAsString(e)}getRawFoodofferInformationFromGroupedItems(e){if(!e||0===e.length)return null;let t=e[0];if(!t)return null;let n=this.getFoodId(e);if(!n)return null;let s=Ky.getDirectusDateFunction(t);if(!s)return null;let i=Ky.getCanteenLabelFunction(t);return i?{food_id:n,raw_tl1_foodoffer_json:t,date:s,canteen_external_identifier:i}:null}static getSortedRecipeIdFromListOfRecipeIds(e){if(e.length<=0)return null;let t=e.map(Number),n=[...new Set(t)].map(Number).sort((function(e,t){return e-t}));return n.map(String).join("-")}static getFoodIdToRawFoodofferDict(e){let t={};if(e)for(let n of e){let e=Ky.getFoodIdFromRawFoodoffer(n);e&&(t[e]=n)}return t}static getParsedReportItemFromrawFoodoffer(e){return e.raw_tl1_foodoffer_json}static getFoodIdFromRawFoodoffer(e){return e.food_id}static _hasValidName(e){let t=Ky._getRawNamesList(e);if(t&&t.length>0){return t.join("").length>0}return!1}static getFoodofferIdentifier(e){if(Ky._hasValidName(e)){let t="";return t+=Ky._getCanteenName(e),t+=Ky._getRawDatum(e),t+=Ky._getFoodIdentifierByName(e),t}return null}static getRecipeIdFunction(e){return e[Ky.DEFAULT_RECIPE_ID_FIELD]}static getDirectusDateFunction(e){let t=Ky._getRawDatum(e);if(!t)return null;if(10!==t.length)return null;let n=t.split(".");if(3!==n.length)return null;const s=n[0],i=n[1],r=n[2];if(!s||!i||!r)return null;const a=parseInt(s),o=parseInt(i),c=parseInt(r);return isNaN(a)||isNaN(o)||isNaN(c)?null:{day:a,month:o,year:c}}static getCanteenLabelFunction(e){return e[Ky.DEFAULT_CANTEEN_FIELD]}static findFirstPriceValueForFields(e,t){for(let n of t){let t=e[n];if(t)return t}return null}static getPriceForGroup(e,t){let n=null;switch(t){case Yy.PRICE_GROUP_STUDENT:n=Ky.findFirstPriceValueForFields(e,[Ky.FIELD_PRICE_STUDENT_OSNABRUECK,Ky.FIELD_PRICE_STUDENT_HANNOVER]);break;case Yy.PRICE_GROUP_EMPLOYEE:n=Ky.findFirstPriceValueForFields(e,[Ky.FIELD_PRICE_EMPLOYEE_OSNABRUECK,Ky.FIELD_PRICE_EMPLOYEE_HANNOVER]);break;case Yy.PRICE_GROUP_GUEST:n=Ky.findFirstPriceValueForFields(e,[Ky.FIELD_PRICE_GUEST_OSNABRUECK,Ky.FIELD_PRICE_GUEST_HANNOVER]);break;default:return null}return n?(n=n.replace(",","."),parseFloat(n)):null}static getAdditionalFoodAttributesFromRawTL1Foodoffer(e,t){let n=[];for(let s of t){let t=e[s.field_name];if("number"===s.value_type){let e=null;t&&(t.includes(",")&&(t=t.replace(",",".")),e=parseFloat(t)),n.push({external_identifier:s.external_identifier,attribute_value:{number_value:e}})}else if("string"===s.value_type)n.push({external_identifier:s.external_identifier,attribute_value:{string_value:t}});else if("boolean"===s.value_type){let e=null;"true"===t?e=!0:"false"===t&&(e=!1),n.push({external_identifier:s.external_identifier,attribute_value:{boolean_value:e}})}}return n}getFoodAttributesFromRawTL1Foodoffer(e){let t=[],n=Ky.getFoodNutritionAttributeValuesFromRawTL1Foodoffer(e);return t=t.concat(n),t}static getFoodNutritionAttributeValuesFromRawTL1Foodoffer(e){let t=[],n=e[Ky.DEFAULT_NUTRITIONS_FIELD];if(n){let e=" kcal)",s=n.match(/\(.* kcal/gm);if(s){let n=s[0].slice(1,e.length);t.push({external_identifier:Ky.DEFAULT_NUTRITION_FIELD_BRENNWERT_EXTERNAL_IDENTIFIER,attribute_value:{number_value:parseInt(n)}})}t.push({external_identifier:Ky.DEFAULT_NUTRITION_FIELD_FAT_EXTERNAL_IDENTIFIER,attribute_value:{number_value:Ky.parseNutritionValue(n,"Fett")}}),t.push({external_identifier:Ky.DEFAULT_NUTRITION_FIELD_SATURATED_FAT_EXTERNAL_IDENTIFIER,attribute_value:{number_value:Ky.parseNutritionValue(n,"Fettsuren")}}),t.push({external_identifier:Ky.DEFAULT_NUTRITION_FIELD_CARBOHYDRATE_EXTERNAL_IDENTIFIER,attribute_value:{number_value:Ky.parseNutritionValue(n,"Kohlenhydrate")}}),t.push({external_identifier:Ky.DEFAULT_NUTRITION_FIELD_SUGAR_EXTERNAL_IDENTIFIER,attribute_value:{number_value:Ky.parseNutritionValue(n,"Zucker")}}),t.push({external_identifier:Ky.DEFAULT_NUTRITION_FIELD_FIBER_EXTERNAL_IDENTIFIER,attribute_value:{number_value:Ky.parseNutritionValue(n,"Ballaststoffe")}}),t.push({external_identifier:Ky.DEFAULT_NUTRITION_FIELD_PROTEIN_EXTERNAL_IDENTIFIER,attribute_value:{number_value:Ky.parseNutritionValue(n,"Eiwei")}}),t.push({external_identifier:Ky.DEFAULT_NUTRITION_FIELD_SALT_EXTERNAL_IDENTIFIER,attribute_value:{number_value:Ky.parseNutritionValue(n,"Salz")}})}return t}static getFoodEnvironmentImpactAttributeValuesFromRawTL1Foodoffer(e){let t=[],n=e[Ky.DEFAULT_CO2_GRAMM_FIELD];n&&t.push({external_identifier:"co2_g",attribute_value:{number_value:parseFloat(n)}});let s=e[Ky.DEFAULT_CO2_SAVING_PERCENTAGE_FIELD];s&&t.push({external_identifier:"co2_saving_percentage",attribute_value:{number_value:parseFloat(s)}});let i=e[Ky.DEFAULT_CO2_RATING_FIELD];return i&&t.push({external_identifier:"co2_rating",attribute_value:{string_value:i}}),t}static getFoodEnvironmentImpactValuesFromRawTL1Foodoffer(e){let t={},n=e[Ky.DEFAULT_CO2_GRAMM_FIELD];n&&(t.co2_g=parseFloat(n));let s=e[Ky.DEFAULT_CO2_SAVING_PERCENTAGE_FIELD];s&&(t.co2_saving_percentage=parseFloat(s));let i=e[Ky.DEFAULT_CO2_RATING_FIELD];return i&&(t.co2_rating=i),t}static getFoodNutritionValuesFromRawTL1Foodoffer(e){let t={},n=e[Ky.DEFAULT_NUTRITIONS_FIELD];if(n){let e=" kcal)",s=n.match(/\(.* kcal/gm);if(s){let n=s[0].slice(1,e.length);t.calories_kcal=parseInt(n)}t.fat_g=Ky.parseNutritionValue(n,"Fett"),t.saturated_fat_g=Ky.parseNutritionValue(n,"Fettsuren"),t.carbohydrate_g=Ky.parseNutritionValue(n,"Kohlenhydrate"),t.sugar_g=Ky.parseNutritionValue(n,"Zucker"),t.fiber_g=Ky.parseNutritionValue(n,"Ballaststoffe"),t.protein_g=Ky.parseNutritionValue(n,"Eiwei"),t.salt_g=Ky.parseNutritionValue(n,"Salz")}return t}static parseFloatWithOneDecimal(e){let t=parseFloat(e);return isNaN(t)?NaN:Math.round(10*t)/10}static parseNutritionValue(e,t){try{let n=t+"=",s=new RegExp(n+"\\d*,\\d*","gm"),i=e.match(s);if(i&&1===i.length){let e=i[0].slice(n.length);return e=e.replace(",","."),Ky.parseFloatWithOneDecimal(e)}}catch(e){return null}return null}static getMarkingExternalIdentifiersForMenuLinesFromParsedReportItem(e){let t=e[Ky.DEFAULT_MENU_LINE_FIELD];return Ky.getMarkingExternalIdentifierForMenuLineText(t)}static getMarkingExternalIdentifierForMenuLineText(e){let t=[];if(e&&e.length>0){const n=e.split(",");for(let e of n){let n=e.trim();n&&n.length>0&&t.push(Ky.MARKING_EXTERNAL_IDENTIFIER_PREFIX_FOR_MENU_LINE+n)}}return t}static getMarkingLabelsDictFromFoodName(e){let t={},n=e.match(/\([^\)]+\)/gm);if(n)for(let e of n){let n=Ky.removeValuesAndWhitespacesAndSeperators(e,["(",")"],",");for(let e of n)t[e]=e}return t}static removeValuesAndWhitespacesAndSeperators(e,t,n){let s=[],i=new String(e);for(let e of t)i=i.replace(e,"");let r=i.split(n);for(let e of r)s.push(e.trim());return s}static _getCanteenName(e){return e[Ky.DEFAULT_CANTEEN_FIELD]}static _getRawDatum(e){return e[Ky.DEFAULT_DATE_FIELD]}static _getFoodIdentifierByName(e){return Ky._getRawNamesList(e).join("")}static _getRawNamesList(e,t=""){t||(t="");let n=[];for(let s=1;s<=6;s++){let i=e[Ky.DEFAULT_TEXT_FIELD+s+t];i&&i.length>0&&" "!==i&&n.push(i)}return n}static sanitizeFoodNameFromMarkingLabels(e){let t=e.replace(/\s?\([^\)]+\)/gm,"");return t=t.replace(/,\s*$/gm,""),t}static _getFoodNameDe(e){let t=Ky._getRawNamesList(e,"").join(", ");return Ky.sanitizeFoodNameFromMarkingLabels(t)}static _getFoodNameEn(e){let t=Ky._getRawNamesList(e,"_1").join(", ");return Ky.sanitizeFoodNameFromMarkingLabels(t)}};let Qy=Ky;Qy.DEFAULT_CANTEEN_FIELD="MENSA",Qy.DEFAULT_DATE_FIELD="DATUM",Qy.DEFAULT_TEXT_FIELD="TEXT",Qy.DEFAULT_RECIPE_ID_FIELD="REZEPTUR_ID",Qy.DEFAULT_NUTRITIONS_FIELD="NAEHRWERTEJEPORT",Qy.DEFAULT_NUTRITION_FIELD_BRENNWERT_EXTERNAL_IDENTIFIER="calories_kcal",Qy.DEFAULT_NUTRITION_FIELD_FAT_EXTERNAL_IDENTIFIER="fat_g",Qy.DEFAULT_NUTRITION_FIELD_SATURATED_FAT_EXTERNAL_IDENTIFIER="saturated_fat_g",Qy.DEFAULT_NUTRITION_FIELD_CARBOHYDRATE_EXTERNAL_IDENTIFIER="carbohydrate_g",Qy.DEFAULT_NUTRITION_FIELD_SUGAR_EXTERNAL_IDENTIFIER="sugar_g",Qy.DEFAULT_NUTRITION_FIELD_FIBER_EXTERNAL_IDENTIFIER="fiber_g",Qy.DEFAULT_NUTRITION_FIELD_PROTEIN_EXTERNAL_IDENTIFIER="protein_g",Qy.DEFAULT_NUTRITION_FIELD_SALT_EXTERNAL_IDENTIFIER="salt_g",Qy.DEFAULT_CATEGORY_FIELD="SPEISE_BEZEICHNUNG",Qy.DEFAULT_FOODOFFER_CATEGORY_FIELD="SPEISE",Qy.FIELD_PRICE_STUDENT_OSNABRUECK="STD_PREIS",Qy.FIELD_PRICE_STUDENT_HANNOVER="PREIS_STUDENT",Qy.FIELD_PRICE_EMPLOYEE_OSNABRUECK="BED_PREIS",Qy.FIELD_PRICE_EMPLOYEE_HANNOVER="PREIS_BEDIENSTETER",Qy.FIELD_PRICE_GUEST_OSNABRUECK="GSTE_PREIS",Qy.FIELD_PRICE_GUEST_HANNOVER="PREIS_GAST",Qy.DEFAULT_MARKING_LABELS_FIELD="ZSNUMMERN",Qy.DEFAULT_MARKING_NAMES_FIELD="ZSNAMEN",Qy.DEFAULT_MENU_LINE_FIELD="FREI1",Qy.DEFAULT_CO2_GRAMM_FIELD="EXTINFO_CO2_WERT",Qy.DEFAULT_CO2_SAVING_PERCENTAGE_FIELD="EXTINFO_CO2_EINSPARUNG",Qy.DEFAULT_CO2_RATING_FIELD="EXTINFO_CO2_BEWERTUNG",Qy.DEFAULT_ZSNUMMERN_FIELD="ZSNUMMERN",Qy.MARKING_EXTERNAL_IDENTIFIER_PREFIX_FOR_MENU_LINE="menu_line_";class Xy{static adaptFoodsListRemoveFiber(e){for(let t of e){let e=t.basicFoodData;e.fiber_g=null,t.basicFoodData=e}return e}static adaptFoodOffersRemoveFiber(e){for(let t of e){let e=t.basicFoodofferData;e.fiber_g=null,t.basicFoodofferData=e}return e}static adaptFoodsListRemoveBasicFoodDataFields(e,t){for(let n of e){let e=n.basicFoodData;for(let n of t)e[n]=null;n.basicFoodData=e}return e}static adaptFoodOffersRemoveBasicFoodofferDataFields(e,t){for(let n of e){let e=n.basicFoodofferData;for(let n of t)e[n]=null;n.basicFoodofferData=e}return e}}const Zy=class extends Qy{constructor(e){super(e)}async getFoodoffersForParser(){let e=await super.getFoodoffersForParser();return e=Xy.adaptFoodOffersRemoveBasicFoodofferDataFields(e,["fiber_g","co2_g","co2_saving_percentage","co2_rating"]),e}async getFoodsListForParser(){let e=await super.getFoodsListForParser();return e=Xy.adaptFoodsListRemoveBasicFoodDataFields(e,["fiber_g","co2_g","co2_saving_percentage","co2_rating"]),e}_filterZsNummernOnlyForPassedExternalMarkingIdentifiersFromMarkingParser(e){let t=this.markingsJSONListFromMarkingParger;if(t){let n=t.map((e=>e.external_identifier));return e.filter((e=>n.includes(e)))}return e}_getMarkingsExternalIdentifiersFromRawFoodoffer(e){let t=e[Qy.DEFAULT_ZSNUMMERN_FIELD],n=e[Zy.MENUEKENNZEICHEN_FIELD],s=e[Zy.EXTINFO_CO2_BEWERTUNG],i=[];if(t){let e=t.split(",").map((e=>e.trim()));e=this._filterZsNummernOnlyForPassedExternalMarkingIdentifiersFromMarkingParser(e),i=i.concat(e)}if(n){let e=n.split(",").map((e=>e.trim()));i=i.concat(e)}return s&&i.push(Zy.getCO2RatingMarkingExternalIdentifier(s)),i}getMarkingsExternalIdentifiersFromRawFoodoffer(e){return this._getMarkingsExternalIdentifiersFromRawFoodoffer(e.raw_tl1_foodoffer_json)}getFoodCategoryFromRawFoodoffer(e){let t=Qy.getParsedReportItemFromrawFoodoffer(e);return(null==t?void 0:t.SPEISE)||null}getFoodofferCategoryFromRawFoodoffer(e){let t=Qy.getParsedReportItemFromrawFoodoffer(e);return(null==t?void 0:t.SPEISE)||null}static getCO2RatingMarkingExternalIdentifier(e){return Zy.CO2_BEWERTUNG_PREFIX_IDENTIFIER+e}static getCombinedSortedMarkingsExternalIdentifiersAsString(e){return e.sort().join("-")}static getHannoverFoodIdByRecipeIdsAndMarkings(e,t){let n=Qy.getSortedRecipeIdFromListOfRecipeIds(e),s=Zy.getCombinedSortedMarkingsExternalIdentifiersAsString(t),i=n;return s&&s.length>0&&(i+="_"+s),i}getFoodId(e){const t=Qy.getRecipeIdsFromRawTL1Foodoffer(e);if(!t)return null;let n=null==e?void 0:e[0];if(!n)return null;let s=this._getMarkingsExternalIdentifiersFromRawFoodoffer(n);return Zy.getHannoverFoodIdByRecipeIdsAndMarkings(t,s)}getFoodAttributesFromRawTL1Foodoffer(e){return Qy.getAdditionalFoodAttributesFromRawTL1Foodoffer(e,Zy.FOOD_ATTRIBUTE_FIELDS)}};let Jy=Zy;Jy.MENUEKENNZEICHEN_FIELD="MENUEKENNZEICHEN",Jy.EXTINFO_CO2_BEWERTUNG="EXTINFO_CO2_BEWERTUNG",Jy.CO2_BEWERTUNG_PREFIX_IDENTIFIER="CO2_RATING_",Jy.FOOD_ATTRIBUTE_FIELDS=[{field_name:"NW_KCAL",external_identifier:"calories_kcal",value_type:Vy.NUMBER},{field_name:"NW_FETT",external_identifier:"fat_g",value_type:Vy.NUMBER},{field_name:"NW_GESFETT",external_identifier:"saturated_fat_g",value_type:Vy.NUMBER},{field_name:"NW_EIWEISS",external_identifier:"protein_g",value_type:Vy.NUMBER},{field_name:"NW_KH",external_identifier:"carbohydrate_g",value_type:Vy.NUMBER},{field_name:"NW_ZUCKER",external_identifier:"sugar_g",value_type:Vy.NUMBER},{field_name:"NW_SALZ",external_identifier:"salt_g",value_type:Vy.NUMBER}];const eE=class extends Qy{constructor(e){super(e)}async getFoodoffersForParser(){let e=await super.getFoodoffersForParser();return e=Xy.adaptFoodOffersRemoveFiber(e),e}async getFoodsListForParser(){let e=await super.getFoodsListForParser();return e=Xy.adaptFoodsListRemoveFiber(e),e}getFoodCategoryFromRawFoodoffer(e){let t=Qy.getParsedReportItemFromrawFoodoffer(e);return(null==t?void 0:t.SPEISE_BEZEICHNUNG)||null}getFoodofferCategoryFromRawFoodoffer(e){let t=Qy.getParsedReportItemFromrawFoodoffer(e);return(null==t?void 0:t.SPEISE)||null}getMarkingsExternalIdentifiersFromRawFoodoffer(e){let t=[],n=super.getMarkingsExternalIdentifiersFromRawFoodoffer(e);t=t.concat(n);let s=e.raw_tl1_foodoffer_json[eE.DEFAULT_CO2_RATING_FIELD];return s&&"A"===s&&t.push(eE.getCO2RatingMarkingExternalIdentifier(s)),t}static getCO2RatingMarkingExternalIdentifier(e){return eE.CO2_BEWERTUNG_PREFIX_IDENTIFIER+e}getFoodAttributesFromRawTL1Foodoffer(e){let t=super.getFoodAttributesFromRawTL1Foodoffer(e);const n=[{field_name:eE.DEFAULT_CO2_GRAMM_FIELD,external_identifier:"co2_g",value_type:Vy.NUMBER},{field_name:eE.DEFAULT_CO2_SAVING_PERCENTAGE_FIELD,external_identifier:"co2_saving_percentage",value_type:Vy.NUMBER},{field_name:eE.DEFAULT_CO2_RATING_FIELD,external_identifier:"co2_rating",value_type:Vy.STRING}];let s=Qy.getAdditionalFoodAttributesFromRawTL1Foodoffer(e,n);return t=t.concat(s),t}};let tE=eE;tE.DEFAULT_CO2_GRAMM_FIELD="EXTINFO_CO2_WERT",tE.DEFAULT_CO2_SAVING_PERCENTAGE_FIELD="EXTINFO_CO2_EINSPARUNG",tE.DEFAULT_CO2_RATING_FIELD="EXTINFO_CO2_BEWERTUNG",tE.CO2_BEWERTUNG_PREFIX_IDENTIFIER="CO2_RATING_";class nE{static getFoodParser(e){switch(Vo.getSyncForCustomer()){case Yo.HANNOVER:return new Jy(e);case Yo.OSNABRUECK:return new tE(e)}return null}}const sE="food_parse";class iE extends q_{getWorkflowId(){return"food-sync"}async runJob(e,t,n){await n.appendLog("Starting food parsing");try{let s=function(){switch(Vo.getFoodSyncMode()){case"TL1CSV":const e=Vo.getFoodSyncTL1FileExportCsvFilePath(),t=Vo.getFoodSyncTL1FileExportCsvFileEncoding();console.log(sE+": Using TL1 CSV file from host file path: "+e);const n=new jy("/directus/tl1/foodPlan.csv",t);return nE.getFoodParser(n);case"TL1WEB":const s=Vo.getFoodSyncTL1WebExportUrl();if(!s)return console.log(sE+": no URL configured for TL1WEB"),null;console.log(sE+": Using TL1 CSV file from URL: "+s);const i=new Gy(s);return nE.getFoodParser(i);case"SWOSY_API":const r=Vo.getFoodImageSyncSwosyApiServerUrl();r&&r.length>0||console.log(sE+": no URL configured for SWOSY_API, please set the environment variable FOOD_IMAGE_SYNC_SWOSY_API_SERVER_URL")}return null}();s||await n.appendLog("no food parser configured");let i=function(){if("TL1CSV"===Vo.getMarkingSyncMode()){const e=Vo.getMarkingSyncTL1FileExportCsvFilePath(),t=Vo.getMarkingSyncTL1FileExportCsvFileEncoding();return console.log(sE+": Using TL1 CSV file from host file path: "+e),new Wy("/directus/tl1/markings.csv",t)}return null}();i||await n.appendLog("no marking parser configured"),console.log("Parse schedule now creating");const r=new Uy(e,t,n,s,i);return await r.parse()}catch(e){return await n.appendLog("Error: "+e.toString()),n.getFinalLogWithStateAndParams({state:zo.FAILED})}}}var rE=async({action:e,init:t,filter:n,schedule:s},i)=>{let r=new Xo(i);W_.registerScheduleToRunWorkflowRuns({workflowRunInterface:new iE,myDatabaseHelper:r,schedule:s,cronOject:W_.EVERY_5_MINUTES})};class aE extends q_{constructor(){super()}async runJob(e,t,n){const s=t.getWorkflowsRunsHelper(),i=await s.getPreviousResultHash(e,n);await n.appendLog("Last Result Hash: "+i),await n.appendLog("Creating needed data."),await this.createNeededData();const r=await this.getCurrentResultHash();if(await n.appendLog("Current Result Hash: "+r),i===r)return await n.appendLog("No new data found. Skipping workflow run."),n.getFinalLogWithStateAndParams({state:zo.SKIPPED,result_hash:r});{await n.appendLog("New data found. Running workflow.");const e={internal_custom_id:this.getFormInternalCustomId()},s={internal_custom_id:this.getFormInternalCustomId(),alias:this.getFormAlias()};let i=await t.getFormsHelper().findOrCreateItem(e,s);if(i){let e=await t.getFormsFieldsHelper().findItems({form:i.id}),s={};for(let t of e){let e=t.external_import_id;e&&(s[e]=t)}let a=await this.getData();for(let e of a){let r=e.internal_custom_id;await n.appendLog("Processing form submission with internal_custom_id "+r);let a={form:i.id,internal_custom_id:r};if(await t.getFormsSubmissionsHelper().findFirstItem(a))await n.appendLog("- already exists. Skipping.");else{await n.appendLog("- does not exist. Creating.");let a=e.alias,o={form:i.id,internal_custom_id:r,alias:a},c=[],l=e.form_answers;for(let e of l){let t=s[e.external_import_id];t&&c.push({...e,form_field:t.id})}o.form_answers={create:c,update:[],delete:[]},await t.getFormsSubmissionsHelper().createOne(o)}}return n.getFinalLogWithStateAndParams({state:zo.SUCCESS,result_hash:r})}return await n.appendLog("Form not found and could not be created. Skipping workflow run."),n.getFinalLogWithStateAndParams({state:zo.FAILED,result_hash:r})}}}var oE={},cE={exports:{}};!function(e,t){let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>(n=n||l,n)}(0,cE.exports);var lE=cE.exports,uE={},dE={};Object.defineProperty(dE,"__esModule",{value:!0}),dE.default=(e,t,n)=>({confidence:n,name:t.name(e),lang:t.language?t.language():void 0});var pE=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uE,"__esModule",{value:!0});const hE=pE(dE);uE.default=class{name(){return"ASCII"}match(e){const t=e.rawInput;for(let n=0;n<e.rawLen;n++){const s=t[n];if(s<32||s>126)return(0,hE.default)(e,this,0)}return(0,hE.default)(e,this,100)}};var fE={},mE=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fE,"__esModule",{value:!0});const gE=mE(dE);fE.default=class{name(){return"UTF-8"}match(e){let t,n=!1,s=0,i=0,r=0;const a=e.rawInput;e.rawLen>=3&&239==(255&a[0])&&187==(255&a[1])&&191==(255&a[2])&&(n=!0);for(let t=0;t<e.rawLen;t++){const n=a[t];if(128&n){if(192==(224&n))r=1;else if(224==(240&n))r=2;else if(240==(248&n))r=3;else{if(i++,i>5)break;r=0}for(;t++,!(t>=e.rawLen);){if(128!=(192&a[t])){i++;break}if(0==--r){s++;break}}}}if(t=0,n&&0==i)t=100;else if(n&&s>10*i)t=80;else if(s>3&&0==i)t=100;else if(s>0&&0==i)t=80;else if(0==s&&0==i)t=10;else{if(!(s>10*i))return null;t=25}return(0,gE.default)(e,this,t)}};var _E={},yE=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_E,"__esModule",{value:!0}),_E.UTF_32LE=_E.UTF_32BE=_E.UTF_16LE=_E.UTF_16BE=void 0;const EE=yE(dE);_E.UTF_16BE=class{name(){return"UTF-16BE"}match(e){const t=e.rawInput;return t.length>=2&&254==(255&t[0])&&!(255&~t[1])?(0,EE.default)(e,this,100):null}};_E.UTF_16LE=class{name(){return"UTF-16LE"}match(e){const t=e.rawInput;return t.length>=2&&!(255&~t[0])&&254==(255&t[1])?t.length>=4&&0==t[2]&&0==t[3]?null:(0,EE.default)(e,this,100):null}};class bE{name(){return"UTF-32"}getChar(e,t){return-1}match(e){let t=0,n=0,s=!1,i=0;const r=e.rawLen/4*4,a=e.rawInput;if(0==r)return null;65279==this.getChar(a,0)&&(s=!0);for(let e=0;e<r;e+=4){const s=this.getChar(a,e);s<0||s>=1114111||s>=55296&&s<=57343?n+=1:t+=1}return s&&0==n?i=100:s&&t>10*n?i=80:t>3&&0==n?i=100:t>0&&0==n?i=80:t>10*n&&(i=25),0==i?null:(0,EE.default)(e,this,i)}}_E.UTF_32BE=class extends bE{name(){return"UTF-32BE"}getChar(e,t){return(255&e[t+0])<<24|(255&e[t+1])<<16|(255&e[t+2])<<8|255&e[t+3]}};_E.UTF_32LE=class extends bE{name(){return"UTF-32LE"}getChar(e,t){return(255&e[t+3])<<24|(255&e[t+2])<<16|(255&e[t+1])<<8|255&e[t+0]}};var vE={},TE=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vE,"__esModule",{value:!0}),vE.gb_18030=vE.euc_kr=vE.euc_jp=vE.big5=vE.sjis=void 0;const AE=TE(dE);function SE(e,t){const n=(e,t,s,i)=>{if(i<s)return-1;const r=Math.floor(s+i>>>1);return t>e[r]?n(e,t,r+1,i):t<e[r]?n(e,t,s,r-1):r};return n(e,t,0,e.length-1)}class wE{constructor(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1}reset(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1}nextByte(e){if(this.nextIndex>=e.rawLen)return this.done=!0,-1;return 255&e.rawInput[this.nextIndex++]}}class xE{constructor(){this.commonChars=[]}name(){return"mbcs"}match(e){let t=0,n=0,s=0,i=0,r=0;const a=new wE;e:{for(a.reset();this.nextChar(a,e);){if(i++,a.error)s++;else{const e=4294967295&a.charValue;e>255&&(t++,null!=this.commonChars&&SE(this.commonChars,e)>=0&&n++)}if(s>=2&&5*s>=t)break e}if(t<=10&&0==s)r=0==t&&i<10?0:10;else if(t<20*s)r=0;else if(null==this.commonChars)r=30+t-20*s,r>100&&(r=100);else{const e=90/Math.log(t/4);r=Math.floor(Math.log(n+1)*e+10),r=Math.min(r,100)}}return 0==r?null:(0,AE.default)(e,this,r)}nextChar(e,t){return!0}}vE.sjis=class extends xE{constructor(){super(...arguments),this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314]}name(){return"Shift_JIS"}language(){return"ja"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;const n=e.charValue=e.nextByte(t);if(n<0)return!1;if(n<=127||n>160&&n<=223)return!0;const s=e.nextByte(t);return!(s<0)&&(e.charValue=n<<8|s,s>=64&&s<=127||s>=128&&s<=255||(e.error=!0),!0)}};function kE(e,t){e.index=e.nextIndex,e.error=!1;let n=0,s=0,i=0;return n=e.charValue=e.nextByte(t),n<0?e.done=!0:n<=141||(s=e.nextByte(t),e.charValue=e.charValue<<8|s,n>=161&&n<=254?s<161&&(e.error=!0):142!=n?143==n&&(i=e.nextByte(t),e.charValue=e.charValue<<8|i,i<161&&(e.error=!0)):s<161&&(e.error=!0)),0==e.done}vE.big5=class extends xE{constructor(){super(...arguments),this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271]}name(){return"Big5"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;const n=e.charValue=e.nextByte(t);if(n<0)return!1;if(n<=127||255==n)return!0;const s=e.nextByte(t);return!(s<0)&&(e.charValue=e.charValue<<8|s,(s<64||127==s||255==s)&&(e.error=!0),!0)}};vE.euc_jp=class extends xE{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=kE}name(){return"EUC-JP"}language(){return"ja"}};vE.euc_kr=class extends xE{constructor(){super(...arguments),this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=kE}name(){return"EUC-KR"}language(){return"ko"}};vE.gb_18030=class extends xE{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]}name(){return"GB18030"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let n=0,s=0,i=0,r=0;e:if(n=e.charValue=e.nextByte(t),n<0)e.done=!0;else if(!(n<=128))if(s=e.nextByte(t),e.charValue=e.charValue<<8|s,n>=129&&n<=254){if(s>=64&&s<=126||s>=80&&s<=254)break e;if(s>=48&&s<=57&&(i=e.nextByte(t),i>=129&&i<=254&&(r=e.nextByte(t),r>=48&&r<=57))){e.charValue=e.charValue<<16|i<<8|r;break e}e.error=!0}else;return 0==e.done}};var CE={},NE=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(CE,"__esModule",{value:!0}),CE.KOI8_R=CE.windows_1256=CE.windows_1251=CE.ISO_8859_9=CE.ISO_8859_8=CE.ISO_8859_7=CE.ISO_8859_6=CE.ISO_8859_5=CE.ISO_8859_2=CE.ISO_8859_1=void 0;const IE=NE(dE);class RE{constructor(e,t){this.byteIndex=0,this.ngram=0,this.ngramCount=0,this.hitCount=0,this.spaceChar=32,this.ngramList=e,this.byteMap=t}search(e,t){let n=0;return e[n+32]<=t&&(n+=32),e[n+16]<=t&&(n+=16),e[n+8]<=t&&(n+=8),e[n+4]<=t&&(n+=4),e[n+2]<=t&&(n+=2),e[n+1]<=t&&(n+=1),e[n]>t&&(n-=1),n<0||e[n]!=t?-1:n}lookup(e){this.ngramCount+=1,this.search(this.ngramList,e)>=0&&(this.hitCount+=1)}addByte(e){this.ngram=(this.ngram<<8)+(255&e)&16777215,this.lookup(this.ngram)}nextByte(e){return this.byteIndex>=e.inputLen?-1:255&e.inputBytes[this.byteIndex++]}parse(e,t){let n,s=!1;for(this.spaceChar=t;(n=this.nextByte(e))>=0;){const e=this.byteMap[n];0!=e&&(e==this.spaceChar&&s||this.addByte(e),s=e==this.spaceChar)}this.addByte(this.spaceChar);const i=this.hitCount/this.ngramCount;return i>.33?98:Math.floor(300*i)}}class DE{constructor(e,t){this.fLang=e,this.fNGrams=t}}class OE{constructor(){this.spaceChar=32,this.nGramLang=void 0}ngrams(){return[]}byteMap(){return[]}name(e){return"sbcs"}language(){return this.nGramLang}match(e){this.nGramLang=void 0;const t=this.ngrams();if((e=>Array.isArray(e)&&isFinite(e[0]))(t)){const n=new RE(t,this.byteMap()).parse(e,this.spaceChar);return n<=0?null:(0,IE.default)(e,this,n)}let n=-1;for(let s=t.length-1;s>=0;s--){const i=t[s],r=new RE(i.fNGrams,this.byteMap()).parse(e,this.spaceChar);r>n&&(n=r,this.nGramLang=i.fLang)}return n<=0?null:(0,IE.default)(e,this,n)}}CE.ISO_8859_1=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[new DE("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new DE("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new DE("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new DE("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new DE("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new DE("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new DE("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new DE("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new DE("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new DE("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]}name(e){return e&&e.c1Bytes?"windows-1252":"ISO-8859-1"}};CE.ISO_8859_2=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]}ngrams(){return[new DE("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new DE("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new DE("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new DE("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])]}name(e){return e&&e.c1Bytes?"windows-1250":"ISO-8859-2"}};CE.ISO_8859_5=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]}ngrams(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]}name(){return"ISO-8859-5"}language(){return"ru"}};CE.ISO_8859_6=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]}ngrams(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]}name(){return"ISO-8859-6"}language(){return"ar"}};CE.ISO_8859_7=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]}ngrams(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]}name(e){return e&&e.c1Bytes?"windows-1253":"ISO-8859-7"}language(){return"el"}};CE.ISO_8859_8=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]}ngrams(){return[new DE("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new DE("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]}name(e){return e&&e.c1Bytes?"windows-1255":"ISO-8859-8"}language(){return"he"}};CE.ISO_8859_9=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]}name(e){return e&&e.c1Bytes?"windows-1254":"ISO-8859-9"}language(){return"tr"}};CE.windows_1251=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]}ngrams(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]}name(){return"windows-1251"}language(){return"ru"}};CE.windows_1256=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]}ngrams(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]}name(){return"windows-1256"}language(){return"ar"}};CE.KOI8_R=class extends OE{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]}ngrams(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]}name(){return"KOI8-R"}language(){return"ru"}};var LE={},FE=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(LE,"__esModule",{value:!0}),LE.ISO_2022_CN=LE.ISO_2022_KR=LE.ISO_2022_JP=void 0;const ME=FE(dE);class PE{constructor(){this.escapeSequences=[]}name(){return"ISO_2022"}match(e){let t,n,s,i,r=0,a=0,o=0;const c=e.inputBytes,l=e.inputLen;e:for(t=0;t<l;t++){if(27==c[t]){t:for(s=0;s<this.escapeSequences.length;s++){const e=this.escapeSequences[s];if(!(l-t<e.length)){for(n=1;n<e.length;n++)if(e[n]!=c[t+n])continue t;r++,t+=e.length-1;continue e}}a++}14!=c[t]&&15!=c[t]||o++}return 0==r?null:(i=(100*r-100*a)/(r+a),r+o<5&&(i-=10*(5-(r+o))),i<=0?null:(0,ME.default)(e,this,i))}}LE.ISO_2022_JP=class extends PE{constructor(){super(...arguments),this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]}name(){return"ISO-2022-JP"}language(){return"ja"}};LE.ISO_2022_KR=class extends PE{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,67]]}name(){return"ISO-2022-KR"}language(){return"kr"}};LE.ISO_2022_CN=class extends PE{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]}name(){return"ISO-2022-CN"}language(){return"zh"}};var BE={};Object.defineProperty(BE,"__esModule",{value:!0}),BE.isByteArray=void 0;BE.isByteArray=e=>null!=e&&"object"==typeof e&&(isFinite(e.length)&&e.length>=0),function(e){var t=G&&G.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),n=G&&G.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=G&&G.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(s,e,i);return n(s,e),s},i=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.detectFileSync=e.detectFile=e.analyse=e.detect=void 0;const r=i(lE),a=i(uE),o=i(fE),c=s(_E),l=s(vE),u=s(CE),d=s(LE),p=BE,h=[new o.default,new c.UTF_16BE,new c.UTF_16LE,new c.UTF_32BE,new c.UTF_32LE,new l.sjis,new l.big5,new l.euc_jp,new l.euc_kr,new l.gb_18030,new d.ISO_2022_JP,new d.ISO_2022_KR,new d.ISO_2022_CN,new u.ISO_8859_1,new u.ISO_8859_2,new u.ISO_8859_5,new u.ISO_8859_6,new u.ISO_8859_7,new u.ISO_8859_8,new u.ISO_8859_9,new u.windows_1251,new u.windows_1256,new u.KOI8_R,new a.default];e.detect=t=>{const n=(0,e.analyse)(t);return n.length>0?n[0].name:null};e.analyse=e=>{if(!(0,p.isByteArray)(e))throw new Error("Input must be a byte array, e.g. Buffer or Uint8Array");const t=[];for(let e=0;e<256;e++)t[e]=0;for(let n=e.length-1;n>=0;n--)t[255&e[n]]++;let n=!1;for(let e=128;e<=159;e+=1)if(0!==t[e]){n=!0;break}const s={byteStats:t,c1Bytes:n,rawInput:e,rawLen:e.length,inputBytes:e,inputLen:e.length},i=h.map((e=>e.match(s))).filter((e=>!!e)).sort(((e,t)=>t.confidence-e.confidence));return i};e.detectFile=(t,n={})=>new Promise(((s,i)=>{let a;const o=(0,r.default)(),c=(t,n)=>{a&&o.closeSync(a),t?i(t):s((0,e.detect)(n))};if(n&&n.sampleSize){a=o.openSync(t,"r");const e=Buffer.allocUnsafe(n.sampleSize);o.read(a,e,0,n.sampleSize,n.offset,(t=>{c(t,e)}))}else o.readFile(t,c)}));e.detectFileSync=(t,n={})=>{const s=(0,r.default)();if(n&&n.sampleSize){const i=s.openSync(t,"r"),r=Buffer.allocUnsafe(n.sampleSize);return s.readSync(i,r,0,n.sampleSize,n.offset),s.closeSync(i),(0,e.detect)(r)}return(0,e.detect)(s.readFileSync(t))},e.default={analyse:e.analyse,detect:e.detect,detectFileSync:e.detectFileSync,detectFile:e.detectFile}}(oE);var UE=$(oE),HE=(e=>(e.WOHNUNGSNUMMER="WHNR",e.WOHNUNGSNAME="WHNAME",e.MIETER_PERSONENNUMMER="PERSONNR",e.MIETER_PERSON_NACHNAME="NAME",e.MIETER_PERSON_VORNAME="VORNAME",e.MIETER_MIETBEGINN="MIETBEGINN",e.MIETER_MIETENDE="MIETENDE",e.MIETER_AUSZUGSDATUM="AUSZUG",e.MIETER_TELEFON_MOBILE="TELEFONMOBIL",e.MIETER_EMAIL="EMAIL",e))(HE||{});class jE{constructor(e){this.path_to_file=e}async readData(){let e=UE.detect(l.readFileSync(this.path_to_file));if(!e)throw new Error("Could not detect encoding");let t=d(this.path_to_file,e);return qy.getListOfLineObjects(t,{newLineDelimiter:qy.NEW_LINE_DELIMITER,inlineDelimiter:qy.INLINE_DELIMITER_SEMICOLON,removeTailoringQuotes:!0})}getResultHash(e){return Py.hashFromObject(e)}getAlias(e){return this.getHousingContractInternalCustomId(e)}getPartialExternalId(e,t){return`${t}_${e[t]}`}getHousingContractInternalCustomId(e){return`${this.getPartialExternalId(e,"WHNR")}-${this.getPartialExternalId(e,"PERSONNR")}-${this.getPartialExternalId(e,"MIETBEGINN")}`}}const GE=class extends aE{constructor(){super(),this.contracts=[],this.reader=new jE(Vo.getHousingContractCsvFilePath())}getWorkflowId(){return"housing-contract-sync-hannover"}async createNeededData(){let e=await this.reader.readData();this.contracts=e}async getCurrentResultHash(){return await this.reader.getResultHash(this.contracts)}static getFormImportSyncFormAnswer(e,t){let n=e[t],s={external_import_id:t};switch(t){case HE.MIETER_MIETBEGINN:case HE.MIETER_MIETENDE:case HE.MIETER_AUSZUGSDATUM:let e=Po.parseDD_MM_YYYY(n),t=Po.formateDateToDatabaseDateOnlyString(e);if(t.includes("NaN"))throw new Error(`Invalid date string: ${n}`);s.value_date=t;break;case HE.WOHNUNGSNUMMER:case HE.MIETER_EMAIL:case HE.MIETER_PERSONENNUMMER:case HE.MIETER_PERSON_VORNAME:case HE.MIETER_PERSON_NACHNAME:case HE.MIETER_TELEFON_MOBILE:case HE.WOHNUNGSNAME:s.value_string=n}return s}getFormImportSyncFormAnswers(e){let t=[];for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let s=GE.getFormImportSyncFormAnswer(e,n);t.push(s)}return t}async getData(){let e=[];for(let t of this.contracts){let n=this.reader.getHousingContractInternalCustomId(t);n=`${this.getFormInternalCustomId()}-${n}`;let s={alias:this.reader.getAlias(t),internal_custom_id:n,form_answers:this.getFormImportSyncFormAnswers(t)};e.push(s)}return e}getFormAlias(){return"Hannover Housing Contract"}getFormInternalCustomId(){return GE.FORM_INTERNAL_ID}};let $E=GE;$E.FORM_INTERNAL_ID="housing-contract-sync-hannover";class qE{static registerHooks(e,t){const n=new Xo(t);W_.registerScheduleToRunWorkflowRuns({workflowRunInterface:new $E,myDatabaseHelper:n,schedule:e.schedule,cronOject:W_.EVERY_5_MINUTES})}}var zE=(e=>(e.DRAFT="draft",e.SUBMITTED="submitted",e.SYNCING="syncing",e.CLOSED="closed",e))(zE||{});async function WE(e,t,n,s,i){console.log("Send mail for form extract");let r=Oo.getTranslation(e.translations,Oo.LANGUAGE_CODE_DE,"name"),a=e.alias,o=r||a||"Form submission",c=t.alias;c&&(o+=" - "+c),console.log("Subject: "+o);for(let e of s){let s={recipient:e,markdown_content:"JSON stringify data:\n\n```\n"+JSON.stringify(n,null,2)+"\n```",subject:o,form_submission:t.id};console.log("Send mail to: "+e),console.log("Mail content: "),console.log(s.markdown_content);let r=await i.sendMail(s);console.log("Mail id: "+r)}}var YE=async(e,t)=>{if(function(e,t){e.filter(go.FORM_SUBMISSIONS+".items.create",(async(e,n,s)=>{var i,r,a;let o,c=new Xo(t,s);if(console.log("filter create form submission"),console.log("input"),console.log(JSON.stringify(e,null,2)),console.log("form_answers"),console.log(JSON.stringify(null==e?void 0:e.form_answers,null,2)),e.form&&(o="string"==typeof e.form?e.form:e.form.id),!o)throw new Error("Form ID is not set. Please select a form.");let l=(null==(i=e.form_answers)?void 0:i.create)||[],u={};for(let e of l){let t,n=e.form_field;"string"==typeof n?t=n:n&&"object"==typeof n&&(t=n.id),t&&(u[t]=e)}if(!await c.getFormsHelper().findFirstItem({id:o}))throw new Error("Form not found. Please create a form first or select a valid form.");let d=await c.getFormsFieldsHelper().findItems({form:o}),p=l;for(let e of d)u[e.id]||p.push({form_field:e.id});return e.form_answers={create:p,update:(null==(r=e.form_answers)?void 0:r.update)||[],delete:(null==(a=e.form_answers)?void 0:a.delete)||[]},e}))}(e,t),function(e,t){e.filter(go.FORM_SUBMISSIONS+".items.create",(async(e,t,n)=>{if(e.state!==zE.DRAFT&&e.state)throw new Error("Only form submissions with state draft are allowed to be created.");return e}))}(e),function(e,t){e.filter(go.FORM_SUBMISSIONS+".items.update",(async(e,t,n)=>(e.state===zE.SUBMITTED&&(e.date_submitted=(new Date).toISOString()),e.state===zE.DRAFT&&(e.date_submitted=null),e)))}(e),function(e,t){e.filter(go.FORM_SUBMISSIONS+".items.update",(async(e,n,s)=>{let i=new Xo(t,s),r=n.keys;for(let e of r)if((await i.getFormsSubmissionsHelper().readOne(e)).state===zE.SYNCING)throw new Error("Form submission is in state syncing. It is not allowed to update the form submission.");return e}))}(e,t),function(e,t){e.action(go.FORM_SUBMISSIONS+".items.update",(async(e,n)=>{console.log("Send mail after form submission state syncing");let s=new Xo(t,n),i=e.keys;for(let e of i){console.log("Check Form submission id: "+e);let t=await s.getFormsSubmissionsHelper().readOne(e);if(t.state===zE.SYNCING){try{let e;if(console.log("Form submission is syncing. Prepare mail."),t.form&&(e="string"==typeof t.form?t.form:t.form.id),!e)throw new Error("Form submission has no form id.");console.log("Get form");let n=await s.getFormsHelper().readOneWithTranslations(e);console.log("Get form answers");let i=await s.getFormsAnswersHelper().findItems({form_submission:t.id});console.log("Get form fields");let r=await s.getFormsFieldsHelper().findItems({form:e},{withTranslations:!0});console.log("Get form extracts");let a=await s.getFormExtractsHelper().findItems({form:e});for(let e of a){let a=e.id,o=[],c=e.recipient_email_static;c&&o.push(c);let l,u=e.recipient_email_field;if(u){let e=i.find((e=>e.form_field===u));if(!e)throw new Error("Recipient email field not found for id: "+u);l=e.value_string,l&&o.push(l)}const d=e.recipient_user;if(d){let e=null;if("string"==typeof d){let t=await s.getUsersHelper().readOne(d);if(!t)throw new Error("User not found for id: "+d);e=t}if(e){let t=e.email;t&&o.push(t)}}if(!(o.length>0))throw new Error("No recipient email found for form extract id: "+a);console.log("Get form_extract_form_fields for form_extract id: "+a);let p=[];if(e.all_fields)p=r;else{let e=await s.getFormExtractFormFieldsHelper().findItems({form_extracts_id:a});for(let t of e){let e=t.form_fields_id,n=r.find((t=>t.id===e));if(!n)throw new Error("Form field not found for id: "+e);p.push(n)}}let h=[];for(let e of p){let t=e.id,n=i.find((e=>e.form_field===t));if(!n)throw new Error("Form answer not found for form field id: "+t);h.push({form_field_id:t,sort:e.sort,form_field:e,form_answer:n})}h.sort(((e,t)=>null===e.sort||void 0===e.sort?1:null===t.sort||void 0===t.sort?-1:e.sort-t.sort)),await WE(n,t,h,o,s)}console.log("Set form submission state to closed"),await s.getFormsSubmissionsHelper().updateOneItemWithoutHookTrigger({id:t.id},{state:zE.CLOSED})}catch(e){console.error("Error while sending mail after form submission state syncing: "+e.message),console.error(e)}console.log("Set form submission state to closed on error"),await s.getFormsSubmissionsHelper().updateOneItemWithoutHookTrigger({id:t.id},{state:zE.CLOSED})}}}))}(e,t),function(e,t){e.filter(go.FORM_SUBMISSIONS+".items.update",(async(e,n,s)=>{if(e.state===zE.SUBMITTED){if(e.form_answers)throw new Error("Please first create/save the form answers.");let i=new Xo(t,s),r=n.keys;for(let e of r){let t=await i.getFormsSubmissionsHelper().readOne(e),n=t.form;if(!n)throw new Error("Form submission has no form id.");let s=await i.getFormsAnswersHelper().findItems({form_submission:t.id}),r=(await i.getFormsFieldsHelper().findItems({form:n})).filter((e=>e.is_required));for(let e of r){let t=e.id,n=s.find((e=>e.form_field===t));if(!n)throw new Error("Required form answer not found for form field with alias: "+e.alias+" (id: "+e.id+")");let i=null!==n.value_string&&void 0!==n.value_string,r=null!==n.value_number&&void 0!==n.value_number,a=null!==n.value_date&&void 0!==n.value_date,o=null!==n.value_boolean&&void 0!==n.value_boolean,c=null!==n.value_custom&&void 0!==n.value_custom,l=null!==n.value_files&&void 0!==n.value_files,u=null!==n.value_image&&void 0!==n.value_image;if(!(i||r||a||o||c||l||u))throw new Error("Please fill out the required form field with alias: "+e.alias+" (id: "+e.id+")")}}}return e}))}(e,t),Vo.getSyncForCustomer()===Yo.HANNOVER)qE.registerHooks(e,t)};class VE{constructor(e,t,n,s){this.parser=s,this.myDatabaseHelper=t,this.workflowRun=e,this.logger=n}async parse(){await this.logger.appendLog("Starting");try{await this.logger.appendLog("Parsing apartments");let e=await this.parser.getApartmentList();return await this.logger.appendLog("Updating apartments"),await this.updateApartments(e),await this.logger.appendLog("Finished"),this.logger.getFinalLogWithStateAndParams({state:zo.SUCCESS})}catch(e){return await this.logger.appendLog("Error: "+e.toString()),this.logger.getFinalLogWithStateAndParams({state:zo.FAILED})}}async findOrCreateApartment(e){const t=this.myDatabaseHelper.getApartmentsHelper(),n={external_identifier:e.basicData.external_identifier},s=n;return await t.findOrCreateItem(n,s)}async updateApartments(e){for(let t of e){let e=await this.findOrCreateApartment(t);e&&(null==e?void 0:e.id)&&await this.updateApartment(e.id,t)}}async updateApartment(e,t){const n=this.myDatabaseHelper.getApartmentsHelper();await n.updateOne(e,t.basicData);const s=t.buildingData,i={external_identifier:s.external_identifier},r=this.myDatabaseHelper.getBuildingsHelper(),a=await r.findOrCreateItem(i,s);if(a){const t=a.id;t&&await n.updateOne(e,{building:t})}}}const KE={xml:!1,decodeEntities:!0},QE={_useHtmlParser2:!0,xmlMode:!0};function XE(e){return(null==e?void 0:e.xml)?"boolean"==typeof e.xml?QE:{...QE,...e.xml}:null!=e?e:void 0}var ZE;function JE(e){return e.type===ZE.Tag||e.type===ZE.Script||e.type===ZE.Style}!function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(ZE||(ZE={}));const eb=ZE.Root,tb=ZE.Text,nb=ZE.Directive,sb=ZE.Comment,ib=ZE.Script,rb=ZE.Style,ab=ZE.Tag,ob=ZE.CDATA,cb=ZE.Doctype;let lb=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return Sb(this,e)}},ub=class extends lb{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}},db=class extends ub{constructor(){super(...arguments),this.type=ZE.Text}get nodeType(){return 3}},pb=class extends ub{constructor(){super(...arguments),this.type=ZE.Comment}get nodeType(){return 8}},hb=class extends ub{constructor(e,t){super(t),this.name=e,this.type=ZE.Directive}get nodeType(){return 1}},fb=class extends lb{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}},mb=class extends fb{constructor(){super(...arguments),this.type=ZE.CDATA}get nodeType(){return 4}},gb=class extends fb{constructor(){super(...arguments),this.type=ZE.Root}get nodeType(){return 9}},_b=class extends fb{constructor(e,t,n=[],s=("script"===e?ZE.Script:"style"===e?ZE.Style:ZE.Tag)){super(n),this.name=e,this.attribs=t,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}};function yb(e){return JE(e)}function Eb(e){return e.type===ZE.CDATA}function bb(e){return e.type===ZE.Text}function vb(e){return e.type===ZE.Comment}function Tb(e){return e.type===ZE.Root}function Ab(e){return Object.prototype.hasOwnProperty.call(e,"children")}function Sb(e,t=!1){let n;if(bb(e))n=new db(e.data);else if(vb(e))n=new pb(e.data);else if(yb(e)){const s=t?wb(e.children):[],i=new _b(e.name,{...e.attribs},s);s.forEach((e=>e.parent=i)),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=i}else if(Eb(e)){const s=t?wb(e.children):[],i=new mb(s);s.forEach((e=>e.parent=i)),n=i}else if(Tb(e)){const s=t?wb(e.children):[],i=new gb(s);s.forEach((e=>e.parent=i)),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else{if(!function(e){return e.type===ZE.Directive}(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new hb(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function wb(e){const t=e.map((e=>Sb(e,!0)));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}const xb=/["&'<>$\x80-\uFFFF]/g,kb=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),Cb=null!=String.prototype.codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function Nb(e){let t,n="",s=0;for(;null!==(t=xb.exec(e));){const i=t.index,r=e.charCodeAt(i),a=kb.get(r);void 0!==a?(n+=e.substring(s,i)+a,s=i+1):(n+=`${e.substring(s,i)}&#x${Cb(e,i).toString(16)};`,s=xb.lastIndex+=Number(55296==(64512&r)))}return n+e.substr(s)}function Ib(e,t){return function(n){let s,i=0,r="";for(;s=e.exec(n);)i!==s.index&&(r+=n.substring(i,s.index)),r+=t.get(s[0].charCodeAt(0)),i=s.index+1;return r+n.substring(i)}}const Rb=Ib(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Db=Ib(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),Ob=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),Lb=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),Fb=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Mb(e){return e.replace(/"/g,"&quot;")}const Pb=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Bb(e,t={}){const n="length"in e?e:[e];let s="";for(let e=0;e<n.length;e++)s+=Ub(n[e],t);return s}function Ub(e,t){switch(e.type){case eb:return Bb(e.children,t);case cb:case nb:return`<${e.data}>`;case sb:return function(e){return`\x3c!--${e.data}--\x3e`}(e);case ob:return function(e){return`<![CDATA[${e.children[0].data}]]>`}(e);case ib:case rb:case ab:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=Ob.get(e.name))&&void 0!==n?n:e.name,e.parent&&Hb.has(e.parent.name)&&(t={...t,xmlMode:!1}));!t.xmlMode&&jb.has(e.name)&&(t={...t,xmlMode:"foreign"});let s=`<${e.name}`;const i=function(e,t){var n;if(!e)return;const s=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?Mb:t.xmlMode||"utf8"!==t.encodeEntities?Nb:Rb;return Object.keys(e).map((n=>{var i,r;const a=null!==(i=e[n])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(n=null!==(r=Lb.get(n))&&void 0!==r?r:n),t.emptyAttrs||t.xmlMode||""!==a?`${n}="${s(a)}"`:n})).join(" ")}(e.attribs,t);i&&(s+=` ${i}`);0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&Pb.has(e.name))?(t.xmlMode||(s+=" "),s+="/>"):(s+=">",e.children.length>0&&(s+=Bb(e.children,t)),!t.xmlMode&&Pb.has(e.name)||(s+=`</${e.name}>`));return s}(e,t);case tb:return function(e,t){var n;let s=e.data||"";!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)||!t.xmlMode&&e.parent&&Fb.has(e.parent.name)||(s=t.xmlMode||"utf8"!==t.encodeEntities?Nb(s):Db(s));return s}(e,t)}}const Hb=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),jb=new Set(["svg","math"]);function Gb(e){return Array.isArray(e)?e.map(Gb).join(""):Ab(e)&&!vb(e)?Gb(e.children):bb(e)?e.data:""}function $b(e){return Array.isArray(e)?e.map($b).join(""):Ab(e)&&(e.type===ZE.Tag||Eb(e))?$b(e.children):bb(e)?e.data:""}function qb(e){return Ab(e)?e.children:[]}function zb(e){let{next:t}=e;for(;null!==t&&!yb(t);)({next:t}=t);return t}function Wb(e){let{prev:t}=e;for(;null!==t&&!yb(t);)({prev:t}=t);return t}function Yb(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}var Vb;function Kb(e){return e=e.filter(((e,t,n)=>!n.includes(e,t+1))),e.sort(((e,t)=>{const n=function(e,t){const n=[],s=[];if(e===t)return 0;let i=Ab(e)?e:e.parent;for(;i;)n.unshift(i),i=i.parent;for(i=Ab(t)?t:t.parent;i;)s.unshift(i),i=i.parent;const r=Math.min(n.length,s.length);let a=0;for(;a<r&&n[a]===s[a];)a++;if(0===a)return Vb.DISCONNECTED;const o=n[a-1],c=o.children,l=n[a],u=s[a];return c.indexOf(l)>c.indexOf(u)?o===t?Vb.FOLLOWING|Vb.CONTAINED_BY:Vb.FOLLOWING:o===e?Vb.PRECEDING|Vb.CONTAINS:Vb.PRECEDING}(e,t);return n&Vb.PRECEDING?-1:n&Vb.FOLLOWING?1:0})),e}function Qb(e,t,n){return e?e(null!=t?t:e._root.children,null,void 0,n).toString():""}function Xb(e){const t=e||(this?this.root():[]);let n="";for(let e=0;e<t.length;e++)n+=Gb(t[e]);return n}function Zb(e,t){if(t===e)return!1;let n=t;for(;n&&n!==n.parent;)if(n=n.parent,n===e)return!0;return!1}function Jb(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!Object.prototype.hasOwnProperty.call(e,"length")||"number"!=typeof e.length||e.length<0)return!1;for(let t=0;t<e.length;t++)if(!(t in e))return!1;return!0}!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(Vb||(Vb={}));var ev,tv=Object.freeze({__proto__:null,contains:Zb,html:function(e,t){return Qb(this,function(e,t){return!t&&"object"==typeof e&&null!=e&&!("length"in e)&&!("type"in e)}(e)?void(t=e):e,{...KE,...null==this?void 0:this._options,...XE(null!=t?t:{})})},merge:function(e,t){if(!Jb(e)||!Jb(t))return;let n=e.length;const s=+t.length;for(let i=0;i<s;i++)e[n++]=t[i];return e.length=n,e},parseHTML:function(e,t,n="boolean"==typeof t&&t){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t);const s=this.load(e,KE,!1);return n||s("script").remove(),s.root()[0].children.slice()},root:function(){return this(this._root)},text:Xb,xml:function(e){return Qb(this,e,{...this._options,xmlMode:!0})}});function nv(e){return null!=e.cheerio}function sv(e,t){const n=e.length;for(let s=0;s<n;s++)t(e[s],s);return e}function iv(e){const t="length"in e?Array.prototype.map.call(e,(e=>Sb(e,!0))):[Sb(e,!0)],n=new gb(t);return t.forEach((e=>{e.parent=n})),t}function rv(e){const t=e.indexOf("<");if(t<0||t>e.length-3)return!1;const n=e.charCodeAt(t+1);return(n>=ev.LowerA&&n<=ev.LowerZ||n>=ev.UpperA&&n<=ev.UpperZ||n===ev.Exclamation)&&e.includes(">",t+2)}!function(e){e[e.LowerA=97]="LowerA",e[e.LowerZ=122]="LowerZ",e[e.UpperA=65]="UpperA",e[e.UpperZ=90]="UpperZ",e[e.Exclamation=33]="Exclamation"}(ev||(ev={}));const av=Object.prototype.hasOwnProperty,ov=/\s+/,cv="data-",lv={null:null,true:!0,false:!1},uv=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,dv=/^{[^]*}$|^\[[^]*]$/;function pv(e,t,n){var s;if(e&&yb(e))return null!==(s=e.attribs)&&void 0!==s||(e.attribs={}),t?av.call(e.attribs,t)?!n&&uv.test(t)?t:e.attribs[t]:"option"===e.name&&"value"===t?Xb(e.children):"input"!==e.name||"radio"!==e.attribs.type&&"checkbox"!==e.attribs.type||"value"!==t?void 0:"on":e.attribs}function hv(e,t,n){null===n?yv(e,t):e.attribs[t]=`${n}`}function fv(e,t,n){return t in e?e[t]:!n&&uv.test(t)?void 0!==pv(e,t,!1):pv(e,t,n)}function mv(e,t,n,s){t in e?e[t]=n:hv(e,t,!s&&uv.test(t)?n?"":null:`${n}`)}function gv(e,t,n){var s;const i=e;null!==(s=i.data)&&void 0!==s||(i.data={}),"object"==typeof t?Object.assign(i.data,t):"string"==typeof t&&void 0!==n&&(i.data[t]=n)}function _v(e,t){let n,s,i;var r;null==t?(n=Object.keys(e.attribs).filter((e=>e.startsWith(cv))),s=n.map((e=>e.slice(cv.length).replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))))):(n=[cv+(r=t,r.replace(/[A-Z]/g,"-$&").toLowerCase())],s=[t]);for(let t=0;t<n.length;++t){const r=n[t],a=s[t];if(av.call(e.attribs,r)&&!av.call(e.data,a)){if(i=e.attribs[r],av.call(lv,i))i=lv[i];else if(i===String(Number(i)))i=Number(i);else if(dv.test(i))try{i=JSON.parse(i)}catch(e){}e.data[a]=i}}return null==t?e.data:i}function yv(e,t){e.attribs&&av.call(e.attribs,t)&&delete e.attribs[t]}function Ev(e){return e?e.trim().split(ov):[]}var bv,vv,Tv=Object.freeze({__proto__:null,addClass:function e(t){if("function"==typeof t)return sv(this,((n,s)=>{if(yb(n)){const i=n.attribs.class||"";e.call([n],t.call(n,s,i))}}));if(!t||"string"!=typeof t)return this;const n=t.split(ov),s=this.length;for(let e=0;e<s;e++){const t=this[e];if(!yb(t))continue;const s=pv(t,"class",!1);if(s){let e=` ${s} `;for(let t=0;t<n.length;t++){const s=`${n[t]} `;e.includes(` ${s}`)||(e+=s)}hv(t,"class",e.trim())}else hv(t,"class",n.join(" ").trim())}return this},attr:function(e,t){if("object"==typeof e||void 0!==t){if("function"==typeof t){if("string"!=typeof e)throw new Error("Bad combination of arguments.");return sv(this,((n,s)=>{yb(n)&&hv(n,e,t.call(n,s,n.attribs[e]))}))}return sv(this,(n=>{yb(n)&&("object"==typeof e?Object.keys(e).forEach((t=>{const s=e[t];hv(n,t,s)})):hv(n,e,t))}))}return arguments.length>1?this:pv(this[0],e,this.options.xmlMode)},data:function(e,t){var n;const s=this[0];if(!s||!yb(s))return;const i=s;return null!==(n=i.data)&&void 0!==n||(i.data={}),e?"object"==typeof e||void 0!==t?(sv(this,(n=>{yb(n)&&("object"==typeof e?gv(n,e):gv(n,e,t))})),this):av.call(i.data,e)?i.data[e]:_v(i,e):_v(i)},hasClass:function(e){return this.toArray().some((t=>{const n=yb(t)&&t.attribs.class;let s=-1;if(n&&e.length)for(;(s=n.indexOf(e,s+1))>-1;){const t=s+e.length;if((0===s||ov.test(n[s-1]))&&(t===n.length||ov.test(n[t])))return!0}return!1}))},prop:function(e,t){var n;if("string"==typeof e&&void 0===t){const t=this[0];if(!t||!yb(t))return;switch(e){case"style":{const e=this.css(),t=Object.keys(e);return t.forEach(((t,n)=>{e[n]=t})),e.length=t.length,e}case"tagName":case"nodeName":return t.name.toUpperCase();case"href":case"src":{const s=null===(n=t.attribs)||void 0===n?void 0:n[e];return"undefined"==typeof URL||("href"!==e||"a"!==t.tagName&&"link"!==t.name)&&("src"!==e||"img"!==t.tagName&&"iframe"!==t.tagName&&"audio"!==t.tagName&&"video"!==t.tagName&&"source"!==t.tagName)||void 0===s||!this.options.baseURI?s:new URL(s,this.options.baseURI).href}case"innerText":return $b(t);case"textContent":return Gb(t);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return fv(t,e,this.options.xmlMode)}}if("object"==typeof e||void 0!==t){if("function"==typeof t){if("object"==typeof e)throw new Error("Bad combination of arguments.");return sv(this,((n,s)=>{yb(n)&&mv(n,e,t.call(n,s,fv(n,e,this.options.xmlMode)),this.options.xmlMode)}))}return sv(this,(n=>{yb(n)&&("object"==typeof e?Object.keys(e).forEach((t=>{const s=e[t];mv(n,t,s,this.options.xmlMode)})):mv(n,e,t,this.options.xmlMode))}))}},removeAttr:function(e){const t=Ev(e);for(let e=0;e<t.length;e++)sv(this,(n=>{yb(n)&&yv(n,t[e])}));return this},removeClass:function e(t){if("function"==typeof t)return sv(this,((n,s)=>{yb(n)&&e.call([n],t.call(n,s,n.attribs.class||""))}));const n=Ev(t),s=n.length,i=0===arguments.length;return sv(this,(e=>{if(yb(e))if(i)e.attribs.class="";else{const t=Ev(e.attribs.class);let i=!1;for(let e=0;e<s;e++){const s=t.indexOf(n[e]);s>=0&&(t.splice(s,1),i=!0,e--)}i&&(e.attribs.class=t.join(" "))}}))},toggleClass:function e(t,n){if("function"==typeof t)return sv(this,((s,i)=>{yb(s)&&e.call([s],t.call(s,i,s.attribs.class||"",n),n)}));if(!t||"string"!=typeof t)return this;const s=t.split(ov),i=s.length,r="boolean"==typeof n?n?1:-1:0,a=this.length;for(let e=0;e<a;e++){const t=this[e];if(!yb(t))continue;const n=Ev(t.attribs.class);for(let e=0;e<i;e++){const t=n.indexOf(s[e]);r>=0&&t<0?n.push(s[e]):r<=0&&t>=0&&n.splice(t,1)}t.attribs.class=n.join(" ")}return this},val:function(e){const t=0===arguments.length,n=this[0];if(!n||!yb(n))return t?void 0:this;switch(n.name){case"textarea":return this.text(e);case"select":{const n=this.find("option:selected");if(!t){if(null==this.attr("multiple")&&"object"==typeof e)return this;this.find("option").removeAttr("selected");const t="object"!=typeof e?[e]:e;for(let e=0;e<t.length;e++)this.find(`option[value="${t[e]}"]`).attr("selected","");return this}return this.attr("multiple")?n.toArray().map((e=>Xb(e.children))):n.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}});!function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"}(bv||(bv={})),function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"}(vv||(vv={}));const Av=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,Sv=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,wv=new Map([[126,vv.Element],[94,vv.Start],[36,vv.End],[42,vv.Any],[33,vv.Not],[124,vv.Hyphen]]),xv=new Set(["has","not","matches","is","where","host","host-context"]);function kv(e){switch(e.type){case bv.Adjacent:case bv.Child:case bv.Descendant:case bv.Parent:case bv.Sibling:case bv.ColumnCombinator:return!0;default:return!1}}const Cv=new Set(["contains","icontains"]);function Nv(e,t,n){const s=parseInt(t,16)-65536;return s!=s||n?t:s<0?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,1023&s|56320)}function Iv(e){return e.replace(Sv,Nv)}function Rv(e){return 39===e||34===e}function Dv(e){return 32===e||9===e||10===e||12===e||13===e}function Ov(e){const t=[],n=Lv(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function Lv(e,t,n){let s=[];function i(e){const s=t.slice(n+e).match(Av);if(!s)throw new Error(`Expected name, found ${t.slice(n)}`);const[i]=s;return n+=e+i.length,Iv(i)}function r(e){for(n+=e;n<t.length&&Dv(t.charCodeAt(n));)n++}function a(){const e=n+=1;let s=1;for(;s>0&&n<t.length;n++)40!==t.charCodeAt(n)||o(n)?41!==t.charCodeAt(n)||o(n)||s--:s++;if(s)throw new Error("Parenthesis not matched");return Iv(t.slice(e,n-1))}function o(e){let n=0;for(;92===t.charCodeAt(--e);)n++;return!(1&~n)}function c(){if(s.length>0&&kv(s[s.length-1]))throw new Error("Did not expect successive traversals.")}function l(e){s.length>0&&s[s.length-1].type===bv.Descendant?s[s.length-1].type=e:(c(),s.push({type:e}))}function u(e,t){s.push({type:bv.Attribute,name:e,action:t,value:i(1),namespace:null,ignoreCase:"quirks"})}function d(){if(s.length&&s[s.length-1].type===bv.Descendant&&s.pop(),0===s.length)throw new Error("Empty sub-selector");e.push(s)}if(r(0),t.length===n)return n;e:for(;n<t.length;){const e=t.charCodeAt(n);switch(e){case 32:case 9:case 10:case 12:case 13:0!==s.length&&s[0].type===bv.Descendant||(c(),s.push({type:bv.Descendant})),r(1);break;case 62:l(bv.Child),r(1);break;case 60:l(bv.Parent),r(1);break;case 126:l(bv.Sibling),r(1);break;case 43:l(bv.Adjacent),r(1);break;case 46:u("class",vv.Element);break;case 35:u("id",vv.Equals);break;case 91:{let e;r(1);let a=null;124===t.charCodeAt(n)?e=i(1):t.startsWith("*|",n)?(a="*",e=i(2)):(e=i(0),124===t.charCodeAt(n)&&61!==t.charCodeAt(n+1)&&(a=e,e=i(1))),r(0);let c=vv.Exists;const l=wv.get(t.charCodeAt(n));if(l){if(c=l,61!==t.charCodeAt(n+1))throw new Error("Expected `=`");r(2)}else 61===t.charCodeAt(n)&&(c=vv.Equals,r(1));let u="",d=null;if("exists"!==c){if(Rv(t.charCodeAt(n))){const e=t.charCodeAt(n);let s=n+1;for(;s<t.length&&(t.charCodeAt(s)!==e||o(s));)s+=1;if(t.charCodeAt(s)!==e)throw new Error("Attribute value didn't end");u=Iv(t.slice(n+1,s)),n=s+1}else{const e=n;for(;n<t.length&&(!Dv(t.charCodeAt(n))&&93!==t.charCodeAt(n)||o(n));)n+=1;u=Iv(t.slice(e,n))}r(0);const e=32|t.charCodeAt(n);115===e?(d=!1,r(1)):105===e&&(d=!0,r(1))}if(93!==t.charCodeAt(n))throw new Error("Attribute selector didn't terminate");n+=1;const p={type:bv.Attribute,name:e,action:c,value:u,namespace:a,ignoreCase:d};s.push(p);break}case 58:{if(58===t.charCodeAt(n+1)){s.push({type:bv.PseudoElement,name:i(2).toLowerCase(),data:40===t.charCodeAt(n)?a():null});continue}const e=i(1).toLowerCase();let r=null;if(40===t.charCodeAt(n))if(xv.has(e)){if(Rv(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${e} cannot be quoted`);if(r=[],n=Lv(r,t,n+1),41!==t.charCodeAt(n))throw new Error(`Missing closing parenthesis in :${e} (${t})`);n+=1}else{if(r=a(),Cv.has(e)){const e=r.charCodeAt(0);e===r.charCodeAt(r.length-1)&&Rv(e)&&(r=r.slice(1,-1))}r=Iv(r)}s.push({type:bv.Pseudo,name:e,data:r});break}case 44:d(),s=[],r(1);break;default:{if(t.startsWith("/*",n)){const e=t.indexOf("*/",n+2);if(e<0)throw new Error("Comment was not terminated");n=e+2,0===s.length&&r(0);break}let a,o=null;if(42===e)n+=1,a="*";else if(124===e){if(a="",124===t.charCodeAt(n+1)){l(bv.ColumnCombinator),r(2);break}}else{if(!Av.test(t.slice(n)))break e;a=i(0)}124===t.charCodeAt(n)&&124!==t.charCodeAt(n+1)&&(o=a,42===t.charCodeAt(n+1)?(a="*",n+=2):a=i(1)),s.push("*"===a?{type:bv.Universal,namespace:o}:{type:bv.Tag,name:a,namespace:o})}}}return d(),n}function Fv(e){return JE(e)}function Mv(e){return e.type===ZE.CDATA}function Pv(e){return e.type===ZE.Text}function Bv(e){return e.type===ZE.Comment}function Uv(e){return Object.prototype.hasOwnProperty.call(e,"children")}const Hv=/["&'<>$\x80-\uFFFF]/g,jv=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),Gv=null!=String.prototype.codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function $v(e){let t,n="",s=0;for(;null!==(t=Hv.exec(e));){const i=t.index,r=e.charCodeAt(i),a=jv.get(r);void 0!==a?(n+=e.substring(s,i)+a,s=i+1):(n+=`${e.substring(s,i)}&#x${Gv(e,i).toString(16)};`,s=Hv.lastIndex+=Number(55296==(64512&r)))}return n+e.substr(s)}function qv(e,t){return function(n){let s,i=0,r="";for(;s=e.exec(n);)i!==s.index&&(r+=n.substring(i,s.index)),r+=t.get(s[0].charCodeAt(0)),i=s.index+1;return r+n.substring(i)}}const zv=qv(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Wv=qv(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),Yv=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),Vv=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),Kv=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Qv(e){return e.replace(/"/g,"&quot;")}const Xv=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Zv(e,t={}){const n="length"in e?e:[e];let s="";for(let e=0;e<n.length;e++)s+=Jv(n[e],t);return s}function Jv(e,t){switch(e.type){case eb:return Zv(e.children,t);case cb:case nb:return`<${e.data}>`;case sb:return function(e){return`\x3c!--${e.data}--\x3e`}(e);case ob:return function(e){return`<![CDATA[${e.children[0].data}]]>`}(e);case ib:case rb:case ab:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=Yv.get(e.name))&&void 0!==n?n:e.name,e.parent&&eT.has(e.parent.name)&&(t={...t,xmlMode:!1}));!t.xmlMode&&tT.has(e.name)&&(t={...t,xmlMode:"foreign"});let s=`<${e.name}`;const i=function(e,t){var n;if(!e)return;const s=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?Qv:t.xmlMode||"utf8"!==t.encodeEntities?$v:zv;return Object.keys(e).map((n=>{var i,r;const a=null!==(i=e[n])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(n=null!==(r=Vv.get(n))&&void 0!==r?r:n),t.emptyAttrs||t.xmlMode||""!==a?`${n}="${s(a)}"`:n})).join(" ")}(e.attribs,t);i&&(s+=` ${i}`);0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&Xv.has(e.name))?(t.xmlMode||(s+=" "),s+="/>"):(s+=">",e.children.length>0&&(s+=Zv(e.children,t)),!t.xmlMode&&Xv.has(e.name)||(s+=`</${e.name}>`));return s}(e,t);case tb:return function(e,t){var n;let s=e.data||"";!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)||!t.xmlMode&&e.parent&&Kv.has(e.parent.name)||(s=t.xmlMode||"utf8"!==t.encodeEntities?$v(s):Wv(s));return s}(e,t)}}const eT=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),tT=new Set(["svg","math"]);function nT(e,t){return Zv(e,t)}function sT(e){return Array.isArray(e)?e.map(sT).join(""):Uv(e)&&!Bv(e)?sT(e.children):Pv(e)?e.data:""}function iT(e){return Uv(e)?e.children:[]}function rT(e){return e.parent||null}function aT(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}function oT(e,t,n=!0,s=1/0){return cT(e,Array.isArray(t)?t:[t],n,s)}function cT(e,t,n,s){const i=[],r=[t],a=[0];for(;;){if(a[0]>=r[0].length){if(1===a.length)return i;r.shift(),a.shift();continue}const t=r[0][a[0]++];if(e(t)&&(i.push(t),--s<=0))return i;n&&Uv(t)&&t.children.length>0&&(a.unshift(0),r.unshift(t.children))}}function lT(e,t,n=!0){let s=null;for(let i=0;i<t.length&&!s;i++){const r=t[i];Fv(r)&&(e(r)?s=r:n&&r.children.length>0&&(s=lT(e,r.children,!0)))}return s}const uT={tag_name:e=>"function"==typeof e?t=>Fv(t)&&e(t.name):"*"===e?Fv:t=>Fv(t)&&t.name===e,tag_type:e=>"function"==typeof e?t=>e(t.type):t=>t.type===e,tag_contains:e=>"function"==typeof e?t=>Pv(t)&&e(t.data):t=>Pv(t)&&t.data===e};function dT(e,t){return"function"==typeof t?n=>Fv(n)&&t(n.attribs[e]):n=>Fv(n)&&n.attribs[e]===t}function pT(e,t){return n=>e(n)||t(n)}function hT(e){const t=Object.keys(e).map((t=>{const n=e[t];return Object.prototype.hasOwnProperty.call(uT,t)?uT[t](n):dT(t,n)}));return 0===t.length?null:t.reduce(pT)}function fT(e,t,n=!0,s=1/0){return oT(uT.tag_name(e),t,n,s)}var mT;function gT(e,t){const n=[],s=[];if(e===t)return 0;let i=Uv(e)?e:e.parent;for(;i;)n.unshift(i),i=i.parent;for(i=Uv(t)?t:t.parent;i;)s.unshift(i),i=i.parent;const r=Math.min(n.length,s.length);let a=0;for(;a<r&&n[a]===s[a];)a++;if(0===a)return mT.DISCONNECTED;const o=n[a-1],c=o.children,l=n[a],u=s[a];return c.indexOf(l)>c.indexOf(u)?o===t?mT.FOLLOWING|mT.CONTAINED_BY:mT.FOLLOWING:o===e?mT.PRECEDING|mT.CONTAINS:mT.PRECEDING}function _T(e){return e=e.filter(((e,t,n)=>!n.includes(e,t+1))),e.sort(((e,t)=>{const n=gT(e,t);return n&mT.PRECEDING?-1:n&mT.FOLLOWING?1:0})),e}!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(mT||(mT={}));const yT=["url","type","lang"],ET=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function bT(e){return fT("media:content",e).map((e=>{const{attribs:t}=e,n={medium:t.medium,isDefault:!!t.isDefault};for(const e of yT)t[e]&&(n[e]=t[e]);for(const e of ET)t[e]&&(n[e]=parseInt(t[e],10));return t.expression&&(n.expression=t.expression),n}))}function vT(e,t){return fT(e,t,!0,1)[0]}function TT(e,t,n=!1){return sT(fT(e,t,n,1)).trim()}function AT(e,t,n,s,i=!1){const r=TT(n,s,i);r&&(e[t]=r)}function ST(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}var wT=Object.freeze({__proto__:null,get DocumentPosition(){return mT},append:function(e,t){aT(t);const{parent:n}=e,s=e.next;if(t.next=s,t.prev=e,e.next=t,t.parent=n,s){if(s.prev=t,n){const e=n.children;e.splice(e.lastIndexOf(s),0,t)}}else n&&n.children.push(t)},appendChild:function(e,t){if(aT(t),t.next=null,t.parent=e,e.children.push(t)>1){const n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},compareDocumentPosition:gT,existsOne:function e(t,n){return n.some((n=>Fv(n)&&(t(n)||e(t,n.children))))},filter:oT,find:cT,findAll:function(e,t){const n=[],s=[t],i=[0];for(;;){if(i[0]>=s[0].length){if(1===s.length)return n;s.shift(),i.shift();continue}const t=s[0][i[0]++];Fv(t)&&(e(t)&&n.push(t),t.children.length>0&&(i.unshift(0),s.unshift(t.children)))}},findOne:lT,findOneChild:function(e,t){return t.find(e)},getAttributeValue:function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},getChildren:iT,getElementById:function(e,t,n=!0){return Array.isArray(t)||(t=[t]),lT(dT("id",e),t,n)},getElements:function(e,t,n,s=1/0){const i=hT(e);return i?oT(i,t,n,s):[]},getElementsByTagName:fT,getElementsByTagType:function(e,t,n=!0,s=1/0){return oT(uT.tag_type(e),t,n,s)},getFeed:function(e){const t=vT(ST,e);return t?"feed"===t.name?function(e){var t;const n=e.children,s={type:"atom",items:fT("entry",n).map((e=>{var t;const{children:n}=e,s={media:bT(n)};AT(s,"id","id",n),AT(s,"title","title",n);const i=null===(t=vT("link",n))||void 0===t?void 0:t.attribs.href;i&&(s.link=i);const r=TT("summary",n)||TT("content",n);r&&(s.description=r);const a=TT("updated",n);return a&&(s.pubDate=new Date(a)),s}))};AT(s,"id","id",n),AT(s,"title","title",n);const i=null===(t=vT("link",n))||void 0===t?void 0:t.attribs.href;i&&(s.link=i);AT(s,"description","subtitle",n);const r=TT("updated",n);r&&(s.updated=new Date(r));return AT(s,"author","email",n,!0),s}(t):function(e){var t,n;const s=null!==(n=null===(t=vT("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],i={type:e.name.substr(0,3),id:"",items:fT("item",e.children).map((e=>{const{children:t}=e,n={media:bT(t)};AT(n,"id","guid",t),AT(n,"title","title",t),AT(n,"link","link",t),AT(n,"description","description",t);const s=TT("pubDate",t)||TT("dc:date",t);return s&&(n.pubDate=new Date(s)),n}))};AT(i,"title","title",s),AT(i,"link","link",s),AT(i,"description","description",s);const r=TT("lastBuildDate",s);r&&(i.updated=new Date(r));return AT(i,"author","managingEditor",s,!0),i}(t):null},getInnerHTML:function(e,t){return Uv(e)?e.children.map((e=>nT(e,t))).join(""):""},getName:function(e){return e.name},getOuterHTML:nT,getParent:rT,getSiblings:function(e){const t=rT(e);if(null!=t)return iT(t);const n=[e];let{prev:s,next:i}=e;for(;null!=s;)n.unshift(s),({prev:s}=s);for(;null!=i;)n.push(i),({next:i}=i);return n},getText:function e(t){return Array.isArray(t)?t.map(e).join(""):Fv(t)?"br"===t.name?"\n":e(t.children):Mv(t)?e(t.children):Pv(t)?t.data:""},hasAttrib:function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},hasChildren:Uv,innerText:function e(t){return Array.isArray(t)?t.map(e).join(""):Uv(t)&&(t.type===ZE.Tag||Mv(t))?e(t.children):Pv(t)?t.data:""},isCDATA:Mv,isComment:Bv,isDocument:function(e){return e.type===ZE.Root},isTag:Fv,isText:Pv,nextElementSibling:function(e){let{next:t}=e;for(;null!==t&&!Fv(t);)({next:t}=t);return t},prepend:function(e,t){aT(t);const{parent:n}=e;if(n){const s=n.children;s.splice(s.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t},prependChild:function(e,t){if(aT(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){const n=e.children[1];n.prev=t,t.next=n}else t.next=null},prevElementSibling:function(e){let{prev:t}=e;for(;null!==t&&!Fv(t);)({prev:t}=t);return t},removeElement:aT,removeSubsets:function(e){let t=e.length;for(;--t>=0;){const n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(let s=n.parent;s;s=s.parent)if(e.includes(s)){e.splice(t,1);break}}return e},replaceElement:function(e,t){const n=t.prev=e.prev;n&&(n.next=t);const s=t.next=e.next;s&&(s.prev=t);const i=t.parent=e.parent;if(i){const n=i.children;n[n.lastIndexOf(e)]=t,e.parent=null}},testElement:function(e,t){const n=hT(e);return!n||n(t)},textContent:sT,uniqueSort:_T}),xT={trueFunc:function(){return!0},falseFunc:function(){return!1}},kT=$(xT);const CT=new Map([[bv.Universal,50],[bv.Tag,30],[bv.Attribute,1],[bv.Pseudo,0]]);function NT(e){return!CT.has(e.type)}const IT=new Map([[vv.Exists,10],[vv.Equals,8],[vv.Not,7],[vv.Start,6],[vv.End,6],[vv.Any,5]]);function RT(e){const t=e.map(DT);for(let n=1;n<e.length;n++){const s=t[n];if(!(s<0))for(let i=n-1;i>=0&&s<t[i];i--){const n=e[i+1];e[i+1]=e[i],e[i]=n,t[i+1]=t[i],t[i]=s}}}function DT(e){var t,n;let s=null!==(t=CT.get(e.type))&&void 0!==t?t:-1;return e.type===bv.Attribute?(s=null!==(n=IT.get(e.action))&&void 0!==n?n:4,e.action===vv.Equals&&"id"===e.name&&(s=9),e.ignoreCase&&(s>>=1)):e.type===bv.Pseudo&&(e.data?"has"===e.name||"contains"===e.name?s=0:Array.isArray(e.data)?(s=Math.min(...e.data.map((e=>Math.min(...e.map(DT))))),s<0&&(s=0)):s=2:s=3),s}const OT=/[-[\]{}()*+?.,\\^$|#\s]/g;function LT(e){return e.replace(OT,"\\$&")}const FT=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function MT(e,t){return"boolean"==typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!t.quirksMode:!t.xmlMode&&FT.has(e.name)}const PT={equals(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:r}=t;return MT(t,n)?(r=r.toLowerCase(),t=>{const n=s.getAttributeValue(t,i);return null!=n&&n.length===r.length&&n.toLowerCase()===r&&e(t)}):t=>s.getAttributeValue(t,i)===r&&e(t)},hyphen(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:r}=t;const a=r.length;return MT(t,n)?(r=r.toLowerCase(),function(t){const n=s.getAttributeValue(t,i);return null!=n&&(n.length===a||"-"===n.charAt(a))&&n.substr(0,a).toLowerCase()===r&&e(t)}):function(t){const n=s.getAttributeValue(t,i);return null!=n&&(n.length===a||"-"===n.charAt(a))&&n.substr(0,a)===r&&e(t)}},element(e,t,n){const{adapter:s}=n,{name:i,value:r}=t;if(/\s/.test(r))return kT.falseFunc;const a=new RegExp(`(?:^|\\s)${LT(r)}(?:$|\\s)`,MT(t,n)?"i":"");return function(t){const n=s.getAttributeValue(t,i);return null!=n&&n.length>=r.length&&a.test(n)&&e(t)}},exists:(e,{name:t},{adapter:n})=>s=>n.hasAttrib(s,t)&&e(s),start(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:r}=t;const a=r.length;return 0===a?kT.falseFunc:MT(t,n)?(r=r.toLowerCase(),t=>{const n=s.getAttributeValue(t,i);return null!=n&&n.length>=a&&n.substr(0,a).toLowerCase()===r&&e(t)}):t=>{var n;return!!(null===(n=s.getAttributeValue(t,i))||void 0===n?void 0:n.startsWith(r))&&e(t)}},end(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:r}=t;const a=-r.length;return 0===a?kT.falseFunc:MT(t,n)?(r=r.toLowerCase(),t=>{var n;return(null===(n=s.getAttributeValue(t,i))||void 0===n?void 0:n.substr(a).toLowerCase())===r&&e(t)}):t=>{var n;return!!(null===(n=s.getAttributeValue(t,i))||void 0===n?void 0:n.endsWith(r))&&e(t)}},any(e,t,n){const{adapter:s}=n,{name:i,value:r}=t;if(""===r)return kT.falseFunc;if(MT(t,n)){const t=new RegExp(LT(r),"i");return function(n){const a=s.getAttributeValue(n,i);return null!=a&&a.length>=r.length&&t.test(a)&&e(n)}}return t=>{var n;return!!(null===(n=s.getAttributeValue(t,i))||void 0===n?void 0:n.includes(r))&&e(t)}},not(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:r}=t;return""===r?t=>!!s.getAttributeValue(t,i)&&e(t):MT(t,n)?(r=r.toLowerCase(),t=>{const n=s.getAttributeValue(t,i);return(null==n||n.length!==r.length||n.toLowerCase()!==r)&&e(t)}):t=>s.getAttributeValue(t,i)!==r&&e(t)}},BT=new Set([9,10,12,13,32]),UT="0".charCodeAt(0),HT="9".charCodeAt(0);function jT(e){return function(e){const t=e[0],n=e[1]-1;if(n<0&&t<=0)return kT.falseFunc;if(-1===t)return e=>e<=n;if(0===t)return e=>e===n;if(1===t)return n<0?kT.trueFunc:e=>e>=n;const s=Math.abs(t),i=(n%s+s)%s;return t>1?e=>e>=n&&e%s===i:e=>e<=n&&e%s===i}(function(e){if("even"===(e=e.trim().toLowerCase()))return[2,0];if("odd"===e)return[2,1];let t=0,n=0,s=r(),i=a();if(t<e.length&&"n"===e.charAt(t)&&(t++,n=s*(null!=i?i:1),o(),t<e.length?(s=r(),o(),i=a()):s=i=0),null===i||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[n,s*i];function r(){return"-"===e.charAt(t)?(t++,-1):("+"===e.charAt(t)&&t++,1)}function a(){const n=t;let s=0;for(;t<e.length&&e.charCodeAt(t)>=UT&&e.charCodeAt(t)<=HT;)s=10*s+(e.charCodeAt(t)-UT),t++;return t===n?null:s}function o(){for(;t<e.length&&BT.has(e.charCodeAt(t));)t++}}(e))}function GT(e,t){return n=>{const s=t.getParent(n);return null!=s&&t.isTag(s)&&e(n)}}const $T={contains:(e,t,{adapter:n})=>function(s){return e(s)&&n.getText(s).includes(t)},icontains(e,t,{adapter:n}){const s=t.toLowerCase();return function(t){return e(t)&&n.getText(t).toLowerCase().includes(s)}},"nth-child"(e,t,{adapter:n,equals:s}){const i=jT(t);return i===kT.falseFunc?kT.falseFunc:i===kT.trueFunc?GT(e,n):function(t){const r=n.getSiblings(t);let a=0;for(let e=0;e<r.length&&!s(t,r[e]);e++)n.isTag(r[e])&&a++;return i(a)&&e(t)}},"nth-last-child"(e,t,{adapter:n,equals:s}){const i=jT(t);return i===kT.falseFunc?kT.falseFunc:i===kT.trueFunc?GT(e,n):function(t){const r=n.getSiblings(t);let a=0;for(let e=r.length-1;e>=0&&!s(t,r[e]);e--)n.isTag(r[e])&&a++;return i(a)&&e(t)}},"nth-of-type"(e,t,{adapter:n,equals:s}){const i=jT(t);return i===kT.falseFunc?kT.falseFunc:i===kT.trueFunc?GT(e,n):function(t){const r=n.getSiblings(t);let a=0;for(let e=0;e<r.length;e++){const i=r[e];if(s(t,i))break;n.isTag(i)&&n.getName(i)===n.getName(t)&&a++}return i(a)&&e(t)}},"nth-last-of-type"(e,t,{adapter:n,equals:s}){const i=jT(t);return i===kT.falseFunc?kT.falseFunc:i===kT.trueFunc?GT(e,n):function(t){const r=n.getSiblings(t);let a=0;for(let e=r.length-1;e>=0;e--){const i=r[e];if(s(t,i))break;n.isTag(i)&&n.getName(i)===n.getName(t)&&a++}return i(a)&&e(t)}},root:(e,t,{adapter:n})=>t=>{const s=n.getParent(t);return(null==s||!n.isTag(s))&&e(t)},scope(e,t,n,s){const{equals:i}=n;return s&&0!==s.length?1===s.length?t=>i(s[0],t)&&e(t):t=>s.includes(t)&&e(t):$T.root(e,t,n)},hover:qT("isHovered"),visited:qT("isVisited"),active:qT("isActive")};function qT(e){return function(t,n,{adapter:s}){const i=s[e];return"function"!=typeof i?kT.falseFunc:function(e){return i(e)&&t(e)}}}const zT={empty:(e,{adapter:t})=>!t.getChildren(e).some((e=>t.isTag(e)||""!==t.getText(e))),"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return null==t.prevElementSibling(e);const s=t.getSiblings(e).find((e=>t.isTag(e)));return null!=s&&n(e,s)},"last-child"(e,{adapter:t,equals:n}){const s=t.getSiblings(e);for(let i=s.length-1;i>=0;i--){if(n(e,s[i]))return!0;if(t.isTag(s[i]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const s=t.getSiblings(e),i=t.getName(e);for(let r=0;r<s.length;r++){const a=s[r];if(n(e,a))return!0;if(t.isTag(a)&&t.getName(a)===i)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const s=t.getSiblings(e),i=t.getName(e);for(let r=s.length-1;r>=0;r--){const a=s[r];if(n(e,a))return!0;if(t.isTag(a)&&t.getName(a)===i)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const s=t.getName(e);return t.getSiblings(e).every((i=>n(e,i)||!t.isTag(i)||t.getName(i)!==s))},"only-child":(e,{adapter:t,equals:n})=>t.getSiblings(e).every((s=>n(e,s)||!t.isTag(s)))};function WT(e,t,n,s){if(null===n){if(e.length>s)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===s)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const YT={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] > option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},VT={};function KT(e,t){const n=t.getSiblings(e);if(n.length<=1)return[];const s=n.indexOf(e);return s<0||s===n.length-1?[]:n.slice(s+1).filter(t.isTag)}function QT(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const XT=(e,t,n,s,i)=>{const r=i(t,QT(n),s);return r===kT.trueFunc?e:r===kT.falseFunc?kT.falseFunc:t=>r(t)&&e(t)},ZT={is:XT,matches:XT,where:XT,not(e,t,n,s,i){const r=i(t,QT(n),s);return r===kT.falseFunc?e:r===kT.trueFunc?kT.falseFunc:t=>!r(t)&&e(t)},has(e,t,n,s,i){const{adapter:r}=n,a=QT(n);a.relativeSelector=!0;const o=t.some((e=>e.some(NT)))?[VT]:void 0,c=i(t,a,o);if(c===kT.falseFunc)return kT.falseFunc;const l=function(e,t){return e===kT.falseFunc?kT.falseFunc:n=>t.isTag(n)&&e(n)}(c,r);if(o&&c!==kT.trueFunc){const{shouldTestNextSiblings:t=!1}=c;return n=>{if(!e(n))return!1;o[0]=n;const s=r.getChildren(n),i=t?[...s,...KT(n,r)]:s;return r.existsOne(l,i)}}return t=>e(t)&&r.existsOne(l,r.getChildren(t))}};function JT(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function eA(e,t,n,s,i){const{adapter:r,equals:a}=n;switch(t.type){case bv.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case bv.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case bv.Attribute:if(null!=t.namespace)throw new Error("Namespaced attributes are not yet supported by css-select");return n.xmlMode&&!n.lowerCaseAttributeNames||(t.name=t.name.toLowerCase()),PT[t.action](e,t,n);case bv.Pseudo:return function(e,t,n,s,i){var r;const{name:a,data:o}=t;if(Array.isArray(o)){if(!(a in ZT))throw new Error(`Unknown pseudo-class :${a}(${o})`);return ZT[a](e,o,n,s,i)}const c=null===(r=n.pseudos)||void 0===r?void 0:r[a],l="string"==typeof c?c:YT[a];if("string"==typeof l){if(null!=o)throw new Error(`Pseudo ${a} doesn't have any arguments`);const t=Ov(l);return ZT.is(e,t,n,s,i)}if("function"==typeof c)return WT(c,a,o,1),t=>c(t,o)&&e(t);if(a in $T)return $T[a](e,o,n,s);if(a in zT){const t=zT[a];return WT(t,a,o,2),s=>t(s,n,o)&&e(s)}throw new Error(`Unknown pseudo-class :${a}`)}(e,t,n,s,i);case bv.Tag:{if(null!=t.namespace)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:s}=t;return n.xmlMode&&!n.lowerCaseTags||(s=s.toLowerCase()),function(t){return r.getName(t)===s&&e(t)}}case bv.Descendant:{if(!1===n.cacheResults||"undefined"==typeof WeakSet)return function(t){let n=t;for(;n=JT(n,r);)if(e(n))return!0;return!1};const t=new WeakSet;return function(n){let s=n;for(;s=JT(s,r);)if(!t.has(s)){if(r.isTag(s)&&e(s))return!0;t.add(s)}return!1}}case"_flexibleDescendant":return function(t){let n=t;do{if(e(n))return!0}while(n=JT(n,r));return!1};case bv.Parent:return function(t){return r.getChildren(t).some((t=>r.isTag(t)&&e(t)))};case bv.Child:return function(t){const n=r.getParent(t);return null!=n&&r.isTag(n)&&e(n)};case bv.Sibling:return function(t){const n=r.getSiblings(t);for(let s=0;s<n.length;s++){const i=n[s];if(a(t,i))break;if(r.isTag(i)&&e(i))return!0}return!1};case bv.Adjacent:return r.prevElementSibling?function(t){const n=r.prevElementSibling(t);return null!=n&&e(n)}:function(t){const n=r.getSiblings(t);let s;for(let e=0;e<n.length;e++){const i=n[e];if(a(t,i))break;r.isTag(i)&&(s=i)}return!!s&&e(s)};case bv.Universal:if(null!=t.namespace&&"*"!==t.namespace)throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}function tA(e){return e.type===bv.Pseudo&&("scope"===e.name||Array.isArray(e.data)&&e.data.some((e=>e.some(tA))))}const nA={type:bv.Descendant},sA={type:"_flexibleDescendant"},iA={type:bv.Pseudo,name:"scope",data:null};function rA(e,t,n){var s;e.forEach(RT),n=null!==(s=t.context)&&void 0!==s?s:n;const i=Array.isArray(n),r=n&&(Array.isArray(n)?n:[n]);if(!1!==t.relativeSelector)!function(e,{adapter:t},n){const s=!!(null==n?void 0:n.every((e=>{const n=t.isTag(e)&&t.getParent(e);return e===VT||n&&t.isTag(n)})));for(const t of e){if(t.length>0&&NT(t[0])&&t[0].type!==bv.Descendant);else{if(!s||t.some(tA))continue;t.unshift(nA)}t.unshift(iA)}}(e,t,r);else if(e.some((e=>e.length>0&&NT(e[0]))))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let a=!1;const o=e.map((e=>{if(e.length>=2){const[t,n]=e;t.type!==bv.Pseudo||"scope"!==t.name||(i&&n.type===bv.Descendant?e[1]=sA:n.type!==bv.Adjacent&&n.type!==bv.Sibling||(a=!0))}return function(e,t,n){var s;return e.reduce(((e,s)=>e===kT.falseFunc?kT.falseFunc:eA(e,s,t,n,rA)),null!==(s=t.rootFunc)&&void 0!==s?s:kT.trueFunc)}(e,t,r)})).reduce(aA,kT.falseFunc);return o.shouldTestNextSiblings=a,o}function aA(e,t){return t===kT.falseFunc||e===kT.trueFunc?e:e===kT.falseFunc||t===kT.trueFunc?t:function(n){return e(n)||t(n)}}const oA=(e,t)=>e===t,cA={adapter:wT,equals:oA};const lA=(uA=rA,function(e,t,n){const s=function(e){var t,n,s,i;const r=null!=e?e:cA;return null!==(t=r.adapter)&&void 0!==t||(r.adapter=wT),null!==(n=r.equals)&&void 0!==n||(r.equals=null!==(i=null===(s=r.adapter)||void 0===s?void 0:s.equals)&&void 0!==i?i:oA),r}(t);return uA(e,s,n)});var uA;function dA(e,t,n=!1){return n&&(e=function(e,t){const n=Array.isArray(e)?e.slice(0):[e],s=n.length;for(let e=0;e<s;e++){const s=KT(n[e],t);n.push(...s)}return n}(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}const pA=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function hA(e){return"pseudo"===e.type&&(!!pA.has(e.name)||!("not"!==e.name||!Array.isArray(e.data))&&e.data.some((e=>e.some(hA))))}function fA(e){const t=[],n=[];for(const s of e)s.some(hA)?t.push(s):n.push(s);return[n,t]}const mA={type:bv.Universal,namespace:null},gA={type:bv.Pseudo,name:"scope",data:null};function _A(e,t,n={}){return yA([e],t,n)}function yA(e,t,n={}){if("function"==typeof t)return e.some(t);const[s,i]=fA(Ov(t));return s.length>0&&e.some(lA(s,n))||i.some((t=>vA(t,e,n).length>0))}function EA(e,t,n={}){return bA(Ov(e),t,n)}function bA(e,t,n){if(0===t.length)return[];const[s,i]=fA(e);let r;if(s.length){const e=wA(t,s,n);if(0===i.length)return e;e.length&&(r=new Set(e))}for(let e=0;e<i.length&&(null==r?void 0:r.size)!==t.length;e++){const s=i[e],a=r?t.filter((e=>Fv(e)&&!r.has(e))):t;if(0===a.length)break;const o=vA(s,t,n);if(o.length)if(r)o.forEach((e=>r.add(e)));else{if(e===i.length-1)return o;r=new Set(o)}}return void 0!==r?r.size===t.length?t:t.filter((e=>r.has(e))):[]}function vA(e,t,n){var s;if(e.some(kv)){const i=null!==(s=n.root)&&void 0!==s?s:function(e){for(;e.parent;)e=e.parent;return e}(t[0]),r={...n,context:t,relativeSelector:!1};return e.push(gA),TA(i,e,r,!0,t.length)}return TA(t,e,n,!1,t.length)}function TA(e,t,n,s,i){const r=t.findIndex(hA),a=t.slice(0,r),o=t[r],c=t.length-1===r?i:1/0,l=function(e,t,n){const s=null!=t?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(s)?s>=0?s+1:1/0:0;case"lt":return isFinite(s)?s>=0?Math.min(s,n):1/0:0;case"gt":return isFinite(s)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}(o.name,o.data,c);if(0===l)return[];const u=(0!==a.length||Array.isArray(e)?0===a.length?(Array.isArray(e)?e:[e]).filter(Fv):s||a.some(kv)?AA(e,[a],n,l):wA(e,[a],n):iT(e).filter(Fv)).slice(0,l);let d=function(e,t,n,s){const i="string"==typeof n?parseInt(n,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(i)&&Math.abs(i)<t.length?[i<0?t[t.length+i]:t[i]]:[];case"gt":return isFinite(i)?t.slice(i+1):[];case"even":return t.filter(((e,t)=>t%2==0));case"odd":return t.filter(((e,t)=>t%2==1));case"not":{const e=new Set(bA(n,t,s));return t.filter((t=>!e.has(t)))}}}(o.name,u,o.data,n);if(0===d.length||t.length===r+1)return d;const p=t.slice(r+1),h=p.some(kv);if(h){if(kv(p[0])){const{type:e}=p[0];e!==bv.Sibling&&e!==bv.Adjacent||(d=dA(d,wT,!0)),p.unshift(mA)}n={...n,relativeSelector:!1,rootFunc:e=>d.includes(e)}}else n.rootFunc&&n.rootFunc!==xT.trueFunc&&(n={...n,rootFunc:xT.trueFunc});return p.some(hA)?TA(d,p,n,!1,i):h?AA(d,[p],n,i):wA(d,[p],n)}function AA(e,t,n,s){return SA(e,lA(t,n,e),s)}function SA(e,t,n=1/0){return cT((e=>Fv(e)&&t(e)),dA(e,wT,t.shouldTestNextSiblings),!0,n)}function wA(e,t,n){const s=(Array.isArray(e)?e:[e]).filter(Fv);if(0===s.length)return s;const i=lA(t,n);return i===xT.trueFunc?s:s.filter(i)}const xA=/^\s*[~+]/;function kA(e){return function(t,...n){return function(s){var i;let r=e(t,this);return s&&(r=qA(r,s,this.options.xmlMode,null===(i=this._root)||void 0===i?void 0:i[0])),this._make(this.length>1&&r.length>1?n.reduce(((e,t)=>t(e)),r):r)}}}const CA=kA(((e,t)=>{const n=[];for(let s=0;s<t.length;s++){const i=e(t[s]);n.push(i)}return(new Array).concat(...n)})),NA=kA(((e,t)=>{const n=[];for(let s=0;s<t.length;s++){const i=e(t[s]);null!==i&&n.push(i)}return n}));function IA(e,...t){let n=null;const s=kA(((e,t)=>{const s=[];return sv(t,(t=>{for(let i;(i=e(t))&&!(null==n?void 0:n(i,s.length));t=i)s.push(i)})),s}))(e,...t);return function(e,t){n="string"==typeof e?t=>_A(t,e,this.options):e?$A(e):null;const i=s.call(this,t);return n=null,i}}function RA(e){return Array.from(new Set(e))}const DA=NA((({parent:e})=>e&&!Tb(e)?e:null),RA),OA=CA((e=>{const t=[];for(;e.parent&&!Tb(e.parent);)t.push(e.parent),e=e.parent;return t}),Kb,(e=>e.reverse())),LA=IA((({parent:e})=>e&&!Tb(e)?e:null),Kb,(e=>e.reverse()));const FA=NA((e=>zb(e))),MA=CA((e=>{const t=[];for(;e.next;)yb(e=e.next)&&t.push(e);return t}),RA),PA=IA((e=>zb(e)),RA),BA=NA((e=>Wb(e))),UA=CA((e=>{const t=[];for(;e.prev;)yb(e=e.prev)&&t.push(e);return t}),RA),HA=IA((e=>Wb(e)),RA),jA=CA((e=>function(e){const t=function(e){return e.parent||null}(e);if(null!=t)return qb(t);const n=[e];let{prev:s,next:i}=e;for(;null!=s;)n.unshift(s),({prev:s}=s);for(;null!=i;)n.push(i),({next:i}=i);return n}(e).filter((t=>yb(t)&&t!==e))),Kb),GA=CA((e=>qb(e).filter(yb)),RA);function $A(e){return"function"==typeof e?(t,n)=>e.call(t,n,t):nv(e)?t=>Array.prototype.includes.call(e,t):function(t){return e===t}}function qA(e,t,n,s){return"string"==typeof t?EA(t,e,{xmlMode:n,root:s}):e.filter($A(t))}var zA=Object.freeze({__proto__:null,add:function(e,t){const n=this._make(e,t),s=Kb([...this.get(),...n.get()]);return this._make(s)},addBack:function(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this},children:GA,closest:function(e){var t;const n=[];if(!e)return this._make(n);const s={xmlMode:this.options.xmlMode,root:null===(t=this._root)||void 0===t?void 0:t[0]},i="string"==typeof e?t=>_A(t,e,s):$A(e);return sv(this,(e=>{for(;e&&yb(e);){if(i(e,0)){n.includes(e)||n.push(e);break}e=e.parent}})),this._make(n)},contents:function(){const e=this.toArray().reduce(((e,t)=>Ab(t)?e.concat(t.children):e),[]);return this._make(e)},each:function(e){let t=0;const n=this.length;for(;t<n&&!1!==e.call(this[t],t,this[t]);)++t;return this},end:function(){var e;return null!==(e=this.prevObject)&&void 0!==e?e:this._make([])},eq:function(e){var t;return 0===(e=+e)&&this.length<=1?this:(e<0&&(e=this.length+e),this._make(null!==(t=this[e])&&void 0!==t?t:[]))},filter:function(e){var t;return this._make(qA(this.toArray(),e,this.options.xmlMode,null===(t=this._root)||void 0===t?void 0:t[0]))},filterArray:qA,find:function(e){var t;if(!e)return this._make([]);const n=this.toArray();if("string"!=typeof e){const t=nv(e)?e.toArray():[e];return this._make(t.filter((e=>n.some((t=>Zb(t,e))))))}const s=xA.test(e)?n:this.children().toArray(),i={context:n,root:null===(t=this._root)||void 0===t?void 0:t[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(function(e,t,n={},s=1/0){if("function"==typeof e)return SA(t,e);const[i,r]=fA(Ov(e)),a=r.map((e=>TA(t,e,n,!0,s)));return i.length&&a.push(AA(t,i,n,s)),0===a.length?[]:1===a.length?a[0]:_T(a.reduce(((e,t)=>[...e,...t])))}(e,s,i))},first:function(){return this.length>1?this._make(this[0]):this},get:function(e){return null==e?this.toArray():this[e<0?this.length+e:e]},has:function(e){return this.filter("string"==typeof e?`:has(${e})`:(t,n)=>this._make(n).find(e).length>0)},index:function(e){let t,n;return null==e?(t=this.parent().children(),n=this[0]):"string"==typeof e?(t=this._make(e),n=this[0]):(t=this,n=nv(e)?e[0]:e),Array.prototype.indexOf.call(t,n)},is:function(e){const t=this.toArray();return"string"==typeof e?yA(t.filter(yb),e,this.options):!!e&&t.some($A(e))},last:function(){return this.length>0?this._make(this[this.length-1]):this},map:function(e){let t=[];for(let n=0;n<this.length;n++){const s=this[n],i=e.call(s,n,s);null!=i&&(t=t.concat(i))}return this._make(t)},next:FA,nextAll:MA,nextUntil:PA,not:function(e){let t=this.toArray();if("string"==typeof e){const n=new Set(EA(e,t,this.options));t=t.filter((e=>!n.has(e)))}else{const n=$A(e);t=t.filter(((e,t)=>!n(e,t)))}return this._make(t)},parent:DA,parents:OA,parentsUntil:LA,prev:BA,prevAll:UA,prevUntil:HA,siblings:jA,slice:function(e,t){return this._make(Array.prototype.slice.call(this,e,t))},toArray:function(){return Array.prototype.slice.call(this)}});function WA(e,t){const n=Array.isArray(e)?e:[e];t?t.children=n:t=null;for(let e=0;e<n.length;e++){const s=n[e];s.parent&&s.parent.children!==n&&Yb(s),t?(s.prev=n[e-1]||null,s.next=n[e+1]||null):s.prev=s.next=null,s.parent=t}return t}function YA(e){return function(...t){const n=this.length-1;return sv(this,((s,i)=>{if(!Ab(s))return;const r="function"==typeof t[0]?t[0].call(s,i,this._render(s.children)):t,a=this._makeDomArray(r,i<n);e(a,s.children,s)}))}}function VA(e,t,n,s,i){var r,a;const o=[t,n,...s],c=0===t?null:e[t-1],l=t+n>=e.length?null:e[t+n];for(let e=0;e<s.length;++e){const n=s[e],u=n.parent;if(u){const e=u.children.indexOf(n);e>-1&&(u.children.splice(e,1),i===u&&t>e&&o[0]--)}n.parent=i,n.prev&&(n.prev.next=null!==(r=n.next)&&void 0!==r?r:null),n.next&&(n.next.prev=null!==(a=n.prev)&&void 0!==a?a:null),n.prev=0===e?c:s[e-1],n.next=e===s.length-1?l:s[e+1]}return c&&(c.next=s[0]),l&&(l.prev=s[s.length-1]),e.splice(...o)}const KA=YA(((e,t,n)=>{VA(t,t.length,0,e,n)})),QA=YA(((e,t,n)=>{VA(t,0,0,e,n)}));function XA(e){return function(t){const n=this.length-1,s=this.parents().last();for(let i=0;i<this.length;i++){const r=this[i],a="function"==typeof t?t.call(r,i,r):"string"!=typeof t||rv(t)?t:s.find(t).clone(),[o]=this._makeDomArray(a,i<n);if(!o||!Ab(o))continue;let c=o,l=0;for(;l<c.children.length;){const e=c.children[l];yb(e)?(c=e,l=0):l++}e(r,c,[o])}return this}}const ZA=XA(((e,t,n)=>{const{parent:s}=e;if(!s)return;const i=s.children,r=i.indexOf(e);WA([e],t),VA(i,r,0,n,s)})),JA=XA(((e,t,n)=>{Ab(e)&&(WA(e.children,t),WA(n,e))}));var eS=Object.freeze({__proto__:null,_makeDomArray:function(e,t){return null==e?[]:nv(e)?t?iv(e.get()):e.get():Array.isArray(e)?e.reduce(((e,n)=>e.concat(this._makeDomArray(n,t))),[]):"string"==typeof e?this._parse(e,this.options,!1,null).children:t?iv([e]):[e]},after:function(...e){const t=this.length-1;return sv(this,((n,s)=>{const{parent:i}=n;if(!Ab(n)||!i)return;const r=i.children,a=r.indexOf(n);if(a<0)return;const o="function"==typeof e[0]?e[0].call(n,s,this._render(n.children)):e;VA(r,a+1,0,this._makeDomArray(o,s<t),i)}))},append:KA,appendTo:function(e){return(nv(e)?e:this._make(e)).append(this),this},before:function(...e){const t=this.length-1;return sv(this,((n,s)=>{const{parent:i}=n;if(!Ab(n)||!i)return;const r=i.children,a=r.indexOf(n);if(a<0)return;const o="function"==typeof e[0]?e[0].call(n,s,this._render(n.children)):e;VA(r,a,0,this._makeDomArray(o,s<t),i)}))},clone:function(){return this._make(iv(this.get()))},empty:function(){return sv(this,(e=>{Ab(e)&&(e.children.forEach((e=>{e.next=e.prev=e.parent=null})),e.children.length=0)}))},html:function(e){if(void 0===e){const e=this[0];return e&&Ab(e)?this._render(e.children):null}return sv(this,(t=>{if(!Ab(t))return;t.children.forEach((e=>{e.next=e.prev=e.parent=null}));WA(nv(e)?e.toArray():this._parse(`${e}`,this.options,!1,t).children,t)}))},insertAfter:function(e){"string"==typeof e&&(e=this._make(e)),this.remove();const t=[];return this._makeDomArray(e).forEach((e=>{const n=this.clone().toArray(),{parent:s}=e;if(!s)return;const i=s.children,r=i.indexOf(e);r<0||(VA(i,r+1,0,n,s),t.push(...n))})),this._make(t)},insertBefore:function(e){const t=this._make(e);this.remove();const n=[];return sv(t,(e=>{const t=this.clone().toArray(),{parent:s}=e;if(!s)return;const i=s.children,r=i.indexOf(e);r<0||(VA(i,r,0,t,s),n.push(...t))})),this._make(n)},prepend:QA,prependTo:function(e){return(nv(e)?e:this._make(e)).prepend(this),this},remove:function(e){return sv(e?this.filter(e):this,(e=>{Yb(e),e.prev=e.next=e.parent=null})),this},replaceWith:function(e){return sv(this,((t,n)=>{const{parent:s}=t;if(!s)return;const i=s.children,r="function"==typeof e?e.call(t,n,t):e,a=this._makeDomArray(r);WA(a,null);const o=i.indexOf(t);VA(i,o,1,a,s),a.includes(t)||(t.parent=t.prev=t.next=null)}))},text:function(e){return void 0===e?Xb(this):sv(this,"function"==typeof e?(t,n)=>this._make(t).text(e.call(t,n,Xb([t]))):t=>{if(!Ab(t))return;t.children.forEach((e=>{e.next=e.prev=e.parent=null}));WA(new db(`${e}`),t)})},toString:function(){return this._render(this)},unwrap:function(e){return this.parent(e).not("body").each(((e,t)=>{this._make(t).replaceWith(t.children)})),this},wrap:ZA,wrapAll:function(e){const t=this[0];if(t){const n=this._make("function"==typeof e?e.call(t,0,t):e).insertBefore(t);let s;for(let e=0;e<n.length;e++)"tag"===n[e].type&&(s=n[e]);let i=0;for(;s&&i<s.children.length;){const e=s.children[i];"tag"===e.type?(s=e,i=0):i++}s&&this._make(s).append(this)}return this},wrapInner:JA});function tS(e,t,n,s){if("string"==typeof t){const r=nS(e),a="function"==typeof n?n.call(e,s,r[t]):n;""===a?delete r[t]:null!=a&&(r[t]=a),e.attribs.style=(i=r,Object.keys(i).reduce(((e,t)=>`${e}${e?" ":""}${t}: ${i[t]};`),""))}else"object"==typeof t&&Object.keys(t).forEach(((n,s)=>{tS(e,n,t[n],s)}));var i}function nS(e,t){if(!e||!yb(e))return;const n=function(e){if(e=(e||"").trim(),!e)return{};const t={};let n;for(const s of e.split(";")){const e=s.indexOf(":");if(e<1||e===s.length-1){const e=s.trimEnd();e.length>0&&void 0!==n&&(t[n]+=`;${e}`)}else n=s.slice(0,e).trim(),t[n]=s.slice(e+1).trim()}return t}(e.attribs.style);if("string"==typeof t)return n[t];if(Array.isArray(t)){const e={};return t.forEach((t=>{null!=n[t]&&(e[t]=n[t])})),e}return n}var sS=Object.freeze({__proto__:null,css:function(e,t){return null!=e&&null!=t||"object"==typeof e&&!Array.isArray(e)?sv(this,((n,s)=>{yb(n)&&tS(n,e,t,s)})):0!==this.length?nS(this[0],e):void 0}});const iS="input,select,textarea,keygen",rS=/%20/g,aS=/\r?\n/g;var oS=Object.freeze({__proto__:null,serialize:function(){const e=this.serializeArray().map((e=>`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`));return e.join("&").replace(rS,"+")},serializeArray:function(){return this.map(((e,t)=>{const n=this._make(t);return yb(t)&&"form"===t.name?n.find(iS).toArray():n.filter(iS).toArray()})).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map(((e,t)=>{var n;const s=this._make(t),i=s.attr("name"),r=null!==(n=s.val())&&void 0!==n?n:"";return Array.isArray(r)?r.map((e=>({name:i,value:e.replace(aS,"\r\n")}))):{name:i,value:r.replace(aS,"\r\n")}})).toArray()}});class cS{constructor(e,t,n){if(this.length=0,this.options=n,this._root=t,e){for(let t=0;t<e.length;t++)this[t]=e[t];this.length=e.length}}}cS.prototype.cheerio="[cheerio object]",cS.prototype.splice=Array.prototype.splice,cS.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(cS.prototype,Tv,zA,eS,sS,oS);const lS=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),uS="";var dS;!function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(dS=dS||(dS={}));const pS="--",hS="[CDATA[",fS="doctype",mS="script",gS="public",_S="system";function yS(e){return e>=55296&&e<=57343}function ES(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function bS(e){return e>=64976&&e<=65007||lS.has(e)}var vS;!function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(vS=vS||(vS={}));class TS{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){const{line:t,col:n,offset:s}=this;return{code:e,startLine:t,endLine:t,startCol:n,endCol:n,startOffset:s,endOffset:s}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(function(e){return e>=56320&&e<=57343}(t))return this.pos++,this._addGap(),1024*(e-55296)+9216+t}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,dS.EOF;return this._err(vS.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let t=0;t<e.length;t++){if((32|this.html.charCodeAt(this.pos+t))!==e.charCodeAt(t))return!1}return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,dS.EOF;const n=this.html.charCodeAt(t);return n===dS.CARRIAGE_RETURN?dS.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,dS.EOF;let e=this.html.charCodeAt(this.pos);if(e===dS.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,dS.LINE_FEED;if(e===dS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,yS(e)&&(e=this._processSurrogate(e));return null===this.handler.onParseError||e>31&&e<127||e===dS.LINE_FEED||e===dS.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){ES(e)?this._err(vS.controlCharacterInInputStream):bS(e)&&this._err(vS.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var AS;function SS(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}!function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"}(AS=AS||(AS={}));var wS,xS=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0)))),kS=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((e=>e.charCodeAt(0))));const CS=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),NS=null!==(wS=String.fromCodePoint)&&void 0!==wS?wS:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};var IS;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(IS||(IS={}));var RS,DS,OS;function LS(e){return e>=IS.ZERO&&e<=IS.NINE}function FS(e){return e>=IS.UPPER_A&&e<=IS.UPPER_F||e>=IS.LOWER_A&&e<=IS.LOWER_F}function MS(e){return e===IS.EQUALS||function(e){return e>=IS.UPPER_A&&e<=IS.UPPER_Z||e>=IS.LOWER_A&&e<=IS.LOWER_Z||LS(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(RS||(RS={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(DS||(DS={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(OS||(OS={}));let PS=class{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=DS.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=OS.Strict}startEntity(e){this.decodeMode=e,this.state=DS.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case DS.EntityStart:return e.charCodeAt(t)===IS.NUM?(this.state=DS.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=DS.NamedEntity,this.stateNamedEntity(e,t));case DS.NumericStart:return this.stateNumericStart(e,t);case DS.NumericDecimal:return this.stateNumericDecimal(e,t);case DS.NumericHex:return this.stateNumericHex(e,t);case DS.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===IS.LOWER_X?(this.state=DS.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=DS.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,s){if(t!==n){const i=n-t;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(t,i),s),this.consumed+=i}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const s=e.charCodeAt(t);if(!LS(s)&&!FS(s))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(s,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const s=e.charCodeAt(t);if(!LS(s))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(s,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===IS.SEMI)this.consumed+=1;else if(this.decodeMode===OS.Strict)return 0;return this.emitCodePoint(function(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=CS.get(e))&&void 0!==t?t:e}(this.result),this.consumed),this.errors&&(e!==IS.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&RS.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const r=e.charCodeAt(t);if(this.treeIndex=US(n,s,this.treeIndex+Math.max(1,i),r),this.treeIndex<0)return 0===this.result||this.decodeMode===OS.Attribute&&(0===i||MS(r))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&RS.VALUE_LENGTH)>>14,0!==i){if(r===IS.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==OS.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,s=(n[t]&RS.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,s,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:s}=this;return this.emitCodePoint(1===t?s[e]&~RS.VALUE_LENGTH:s[e+1],n),3===t&&this.emitCodePoint(s[e+2],n),n}end(){var e;switch(this.state){case DS.NamedEntity:return 0===this.result||this.decodeMode===OS.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case DS.NumericDecimal:return this.emitNumericEntity(0,2);case DS.NumericHex:return this.emitNumericEntity(0,3);case DS.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case DS.EntityStart:return 0}}};function BS(e){let t="";const n=new PS(e,(e=>t+=NS(e)));return function(e,s){let i=0,r=0;for(;(r=e.indexOf("&",r))>=0;){t+=e.slice(i,r),n.startEntity(s);const a=n.write(e,r+1);if(a<0){i=r+n.end();break}i=r+a,r=0===a?i+1:i}const a=t+e.slice(i);return t="",a}}function US(e,t,n,s){const i=(t&RS.BRANCH_LENGTH)>>7,r=t&RS.JUMP_TABLE;if(0===i)return 0!==r&&s===r?n:-1;if(r){const t=s-r;return t<0||t>=i?-1:e[n+t]-1}let a=n,o=a+i-1;for(;a<=o;){const t=a+o>>>1,n=e[t];if(n<s)a=t+1;else{if(!(n>s))return e[t+i];o=t-1}}return-1}var HS,jS,GS,$S,qS;BS(xS),BS(kS),function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"}(HS=HS||(HS={})),function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(jS=jS||(jS={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(GS=GS||(GS={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}($S=$S||($S={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"}(qS=qS||(qS={}));const zS=new Map([[$S.A,qS.A],[$S.ADDRESS,qS.ADDRESS],[$S.ANNOTATION_XML,qS.ANNOTATION_XML],[$S.APPLET,qS.APPLET],[$S.AREA,qS.AREA],[$S.ARTICLE,qS.ARTICLE],[$S.ASIDE,qS.ASIDE],[$S.B,qS.B],[$S.BASE,qS.BASE],[$S.BASEFONT,qS.BASEFONT],[$S.BGSOUND,qS.BGSOUND],[$S.BIG,qS.BIG],[$S.BLOCKQUOTE,qS.BLOCKQUOTE],[$S.BODY,qS.BODY],[$S.BR,qS.BR],[$S.BUTTON,qS.BUTTON],[$S.CAPTION,qS.CAPTION],[$S.CENTER,qS.CENTER],[$S.CODE,qS.CODE],[$S.COL,qS.COL],[$S.COLGROUP,qS.COLGROUP],[$S.DD,qS.DD],[$S.DESC,qS.DESC],[$S.DETAILS,qS.DETAILS],[$S.DIALOG,qS.DIALOG],[$S.DIR,qS.DIR],[$S.DIV,qS.DIV],[$S.DL,qS.DL],[$S.DT,qS.DT],[$S.EM,qS.EM],[$S.EMBED,qS.EMBED],[$S.FIELDSET,qS.FIELDSET],[$S.FIGCAPTION,qS.FIGCAPTION],[$S.FIGURE,qS.FIGURE],[$S.FONT,qS.FONT],[$S.FOOTER,qS.FOOTER],[$S.FOREIGN_OBJECT,qS.FOREIGN_OBJECT],[$S.FORM,qS.FORM],[$S.FRAME,qS.FRAME],[$S.FRAMESET,qS.FRAMESET],[$S.H1,qS.H1],[$S.H2,qS.H2],[$S.H3,qS.H3],[$S.H4,qS.H4],[$S.H5,qS.H5],[$S.H6,qS.H6],[$S.HEAD,qS.HEAD],[$S.HEADER,qS.HEADER],[$S.HGROUP,qS.HGROUP],[$S.HR,qS.HR],[$S.HTML,qS.HTML],[$S.I,qS.I],[$S.IMG,qS.IMG],[$S.IMAGE,qS.IMAGE],[$S.INPUT,qS.INPUT],[$S.IFRAME,qS.IFRAME],[$S.KEYGEN,qS.KEYGEN],[$S.LABEL,qS.LABEL],[$S.LI,qS.LI],[$S.LINK,qS.LINK],[$S.LISTING,qS.LISTING],[$S.MAIN,qS.MAIN],[$S.MALIGNMARK,qS.MALIGNMARK],[$S.MARQUEE,qS.MARQUEE],[$S.MATH,qS.MATH],[$S.MENU,qS.MENU],[$S.META,qS.META],[$S.MGLYPH,qS.MGLYPH],[$S.MI,qS.MI],[$S.MO,qS.MO],[$S.MN,qS.MN],[$S.MS,qS.MS],[$S.MTEXT,qS.MTEXT],[$S.NAV,qS.NAV],[$S.NOBR,qS.NOBR],[$S.NOFRAMES,qS.NOFRAMES],[$S.NOEMBED,qS.NOEMBED],[$S.NOSCRIPT,qS.NOSCRIPT],[$S.OBJECT,qS.OBJECT],[$S.OL,qS.OL],[$S.OPTGROUP,qS.OPTGROUP],[$S.OPTION,qS.OPTION],[$S.P,qS.P],[$S.PARAM,qS.PARAM],[$S.PLAINTEXT,qS.PLAINTEXT],[$S.PRE,qS.PRE],[$S.RB,qS.RB],[$S.RP,qS.RP],[$S.RT,qS.RT],[$S.RTC,qS.RTC],[$S.RUBY,qS.RUBY],[$S.S,qS.S],[$S.SCRIPT,qS.SCRIPT],[$S.SECTION,qS.SECTION],[$S.SELECT,qS.SELECT],[$S.SOURCE,qS.SOURCE],[$S.SMALL,qS.SMALL],[$S.SPAN,qS.SPAN],[$S.STRIKE,qS.STRIKE],[$S.STRONG,qS.STRONG],[$S.STYLE,qS.STYLE],[$S.SUB,qS.SUB],[$S.SUMMARY,qS.SUMMARY],[$S.SUP,qS.SUP],[$S.TABLE,qS.TABLE],[$S.TBODY,qS.TBODY],[$S.TEMPLATE,qS.TEMPLATE],[$S.TEXTAREA,qS.TEXTAREA],[$S.TFOOT,qS.TFOOT],[$S.TD,qS.TD],[$S.TH,qS.TH],[$S.THEAD,qS.THEAD],[$S.TITLE,qS.TITLE],[$S.TR,qS.TR],[$S.TRACK,qS.TRACK],[$S.TT,qS.TT],[$S.U,qS.U],[$S.UL,qS.UL],[$S.SVG,qS.SVG],[$S.VAR,qS.VAR],[$S.WBR,qS.WBR],[$S.XMP,qS.XMP]]);function WS(e){var t;return null!==(t=zS.get(e))&&void 0!==t?t:qS.UNKNOWN}const YS=qS,VS={[HS.HTML]:new Set([YS.ADDRESS,YS.APPLET,YS.AREA,YS.ARTICLE,YS.ASIDE,YS.BASE,YS.BASEFONT,YS.BGSOUND,YS.BLOCKQUOTE,YS.BODY,YS.BR,YS.BUTTON,YS.CAPTION,YS.CENTER,YS.COL,YS.COLGROUP,YS.DD,YS.DETAILS,YS.DIR,YS.DIV,YS.DL,YS.DT,YS.EMBED,YS.FIELDSET,YS.FIGCAPTION,YS.FIGURE,YS.FOOTER,YS.FORM,YS.FRAME,YS.FRAMESET,YS.H1,YS.H2,YS.H3,YS.H4,YS.H5,YS.H6,YS.HEAD,YS.HEADER,YS.HGROUP,YS.HR,YS.HTML,YS.IFRAME,YS.IMG,YS.INPUT,YS.LI,YS.LINK,YS.LISTING,YS.MAIN,YS.MARQUEE,YS.MENU,YS.META,YS.NAV,YS.NOEMBED,YS.NOFRAMES,YS.NOSCRIPT,YS.OBJECT,YS.OL,YS.P,YS.PARAM,YS.PLAINTEXT,YS.PRE,YS.SCRIPT,YS.SECTION,YS.SELECT,YS.SOURCE,YS.STYLE,YS.SUMMARY,YS.TABLE,YS.TBODY,YS.TD,YS.TEMPLATE,YS.TEXTAREA,YS.TFOOT,YS.TH,YS.THEAD,YS.TITLE,YS.TR,YS.TRACK,YS.UL,YS.WBR,YS.XMP]),[HS.MATHML]:new Set([YS.MI,YS.MO,YS.MN,YS.MS,YS.MTEXT,YS.ANNOTATION_XML]),[HS.SVG]:new Set([YS.TITLE,YS.FOREIGN_OBJECT,YS.DESC]),[HS.XLINK]:new Set,[HS.XML]:new Set,[HS.XMLNS]:new Set};function KS(e){return e===YS.H1||e===YS.H2||e===YS.H3||e===YS.H4||e===YS.H5||e===YS.H6}const QS=new Set([$S.STYLE,$S.SCRIPT,$S.XMP,$S.IFRAME,$S.NOEMBED,$S.NOFRAMES,$S.PLAINTEXT]);const XS=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ZS;!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"}(ZS||(ZS={}));const JS={DATA:ZS.DATA,RCDATA:ZS.RCDATA,RAWTEXT:ZS.RAWTEXT,SCRIPT_DATA:ZS.SCRIPT_DATA,PLAINTEXT:ZS.PLAINTEXT,CDATA_SECTION:ZS.CDATA_SECTION};function ew(e){return e>=dS.DIGIT_0&&e<=dS.DIGIT_9}function tw(e){return e>=dS.LATIN_CAPITAL_A&&e<=dS.LATIN_CAPITAL_Z}function nw(e){return function(e){return e>=dS.LATIN_SMALL_A&&e<=dS.LATIN_SMALL_Z}(e)||tw(e)}function sw(e){return nw(e)||ew(e)}function iw(e){return e>=dS.LATIN_CAPITAL_A&&e<=dS.LATIN_CAPITAL_F}function rw(e){return e>=dS.LATIN_SMALL_A&&e<=dS.LATIN_SMALL_F}function aw(e){return e+32}function ow(e){return e===dS.SPACE||e===dS.LINE_FEED||e===dS.TABULATION||e===dS.FORM_FEED}function cw(e){return ow(e)||e===dS.SOLIDUS||e===dS.GREATER_THAN_SIGN}let lw=class{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ZS.DATA,this.returnState=ZS.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new TS(t),this.currentLocation=this.getCurrentLocation(-1)}_err(e){var t,n;null===(n=(t=this.handler).onParseError)||void 0===n||n.call(t,this.preprocessor.getError(e))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==n||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}_reconsumeInState(e,t){this.state=e,this._callState(t)}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:AS.START_TAG,tagName:"",tagID:qS.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:AS.END_TAG,tagName:"",tagID:qS.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:AS.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:AS.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const n=this.currentToken;if(null===SS(n,this.currentAttr.name)){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){(null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(vS.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=WS(e.tagName),e.type===AS.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(vS.endTagWithAttributes),e.selfClosing&&this._err(vS.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case AS.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case AS.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case AS.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:AS.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=ow(e)?AS.WHITESPACE_CHARACTER:e===dS.NULL?AS.NULL_CHARACTER:AS.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(AS.CHARACTER,e)}_matchNamedCharacterReference(e){let t=null,n=0,s=!1;for(let r=0,a=xS[0];r>=0&&(r=US(xS,a,r+1,e),!(r<0));e=this._consume()){n+=1,a=xS[r];const o=a&RS.VALUE_LENGTH;if(o){const a=(o>>14)-1;if(e!==dS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&((i=this.preprocessor.peek(1))===dS.EQUALS_SIGN||sw(i))?(t=[dS.AMPERSAND],r+=a):(t=0===a?[xS[r]&~RS.VALUE_LENGTH]:1===a?[xS[++r]]:[xS[++r],xS[++r]],n=0,s=e!==dS.SEMICOLON),0===a){this._consume();break}}}var i;return this._unconsume(n),s&&!this.preprocessor.endOfChunkHit&&this._err(vS.missingSemicolonAfterCharacterReference),this._unconsume(1),t}_isCharacterReferenceInAttribute(){return this.returnState===ZS.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ZS.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ZS.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case ZS.DATA:this._stateData(e);break;case ZS.RCDATA:this._stateRcdata(e);break;case ZS.RAWTEXT:this._stateRawtext(e);break;case ZS.SCRIPT_DATA:this._stateScriptData(e);break;case ZS.PLAINTEXT:this._statePlaintext(e);break;case ZS.TAG_OPEN:this._stateTagOpen(e);break;case ZS.END_TAG_OPEN:this._stateEndTagOpen(e);break;case ZS.TAG_NAME:this._stateTagName(e);break;case ZS.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case ZS.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case ZS.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case ZS.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case ZS.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case ZS.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case ZS.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case ZS.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case ZS.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case ZS.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case ZS.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case ZS.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case ZS.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case ZS.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case ZS.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case ZS.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case ZS.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case ZS.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case ZS.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case ZS.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case ZS.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case ZS.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case ZS.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case ZS.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case ZS.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case ZS.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case ZS.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case ZS.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case ZS.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case ZS.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case ZS.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case ZS.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case ZS.BOGUS_COMMENT:this._stateBogusComment(e);break;case ZS.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case ZS.COMMENT_START:this._stateCommentStart(e);break;case ZS.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case ZS.COMMENT:this._stateComment(e);break;case ZS.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case ZS.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case ZS.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case ZS.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case ZS.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case ZS.COMMENT_END:this._stateCommentEnd(e);break;case ZS.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case ZS.DOCTYPE:this._stateDoctype(e);break;case ZS.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case ZS.DOCTYPE_NAME:this._stateDoctypeName(e);break;case ZS.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case ZS.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case ZS.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case ZS.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case ZS.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case ZS.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case ZS.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case ZS.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case ZS.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case ZS.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case ZS.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case ZS.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case ZS.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case ZS.CDATA_SECTION:this._stateCdataSection(e);break;case ZS.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case ZS.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case ZS.CHARACTER_REFERENCE:this._stateCharacterReference(e);break;case ZS.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(e);break;case ZS.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;case ZS.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(e);break;case ZS.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(e);break;case ZS.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(e);break;case ZS.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(e);break;case ZS.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(e);break;default:throw new Error("Unknown state")}}_stateData(e){switch(e){case dS.LESS_THAN_SIGN:this.state=ZS.TAG_OPEN;break;case dS.AMPERSAND:this.returnState=ZS.DATA,this.state=ZS.CHARACTER_REFERENCE;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this._emitCodePoint(e);break;case dS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case dS.AMPERSAND:this.returnState=ZS.RCDATA,this.state=ZS.CHARACTER_REFERENCE;break;case dS.LESS_THAN_SIGN:this.state=ZS.RCDATA_LESS_THAN_SIGN;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this._emitChars(uS);break;case dS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case dS.LESS_THAN_SIGN:this.state=ZS.RAWTEXT_LESS_THAN_SIGN;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this._emitChars(uS);break;case dS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case dS.LESS_THAN_SIGN:this.state=ZS.SCRIPT_DATA_LESS_THAN_SIGN;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this._emitChars(uS);break;case dS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case dS.NULL:this._err(vS.unexpectedNullCharacter),this._emitChars(uS);break;case dS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(nw(e))this._createStartTagToken(),this.state=ZS.TAG_NAME,this._stateTagName(e);else switch(e){case dS.EXCLAMATION_MARK:this.state=ZS.MARKUP_DECLARATION_OPEN;break;case dS.SOLIDUS:this.state=ZS.END_TAG_OPEN;break;case dS.QUESTION_MARK:this._err(vS.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ZS.BOGUS_COMMENT,this._stateBogusComment(e);break;case dS.EOF:this._err(vS.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(vS.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ZS.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(nw(e))this._createEndTagToken(),this.state=ZS.TAG_NAME,this._stateTagName(e);else switch(e){case dS.GREATER_THAN_SIGN:this._err(vS.missingEndTagName),this.state=ZS.DATA;break;case dS.EOF:this._err(vS.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(vS.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ZS.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:this.state=ZS.BEFORE_ATTRIBUTE_NAME;break;case dS.SOLIDUS:this.state=ZS.SELF_CLOSING_START_TAG;break;case dS.GREATER_THAN_SIGN:this.state=ZS.DATA,this.emitCurrentTagToken();break;case dS.NULL:this._err(vS.unexpectedNullCharacter),t.tagName+=uS;break;case dS.EOF:this._err(vS.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(tw(e)?aw(e):e)}}_stateRcdataLessThanSign(e){e===dS.SOLIDUS?this.state=ZS.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ZS.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){nw(e)?(this.state=ZS.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=ZS.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();this.currentToken.tagName=this.lastStartTagName;switch(this.preprocessor.peek(this.lastStartTagName.length)){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ZS.BEFORE_ATTRIBUTE_NAME,!1;case dS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ZS.SELF_CLOSING_START_TAG,!1;case dS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ZS.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=ZS.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===dS.SOLIDUS?this.state=ZS.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ZS.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){nw(e)?(this.state=ZS.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=ZS.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=ZS.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case dS.SOLIDUS:this.state=ZS.SCRIPT_DATA_END_TAG_OPEN;break;case dS.EXCLAMATION_MARK:this.state=ZS.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=ZS.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){nw(e)?(this.state=ZS.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=ZS.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=ZS.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===dS.HYPHEN_MINUS?(this.state=ZS.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ZS.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===dS.HYPHEN_MINUS?(this.state=ZS.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ZS.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case dS.HYPHEN_MINUS:this.state=ZS.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case dS.LESS_THAN_SIGN:this.state=ZS.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this._emitChars(uS);break;case dS.EOF:this._err(vS.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case dS.HYPHEN_MINUS:this.state=ZS.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case dS.LESS_THAN_SIGN:this.state=ZS.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this.state=ZS.SCRIPT_DATA_ESCAPED,this._emitChars(uS);break;case dS.EOF:this._err(vS.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=ZS.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case dS.HYPHEN_MINUS:this._emitChars("-");break;case dS.LESS_THAN_SIGN:this.state=ZS.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case dS.GREATER_THAN_SIGN:this.state=ZS.SCRIPT_DATA,this._emitChars(">");break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this.state=ZS.SCRIPT_DATA_ESCAPED,this._emitChars(uS);break;case dS.EOF:this._err(vS.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=ZS.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===dS.SOLIDUS?this.state=ZS.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:nw(e)?(this._emitChars("<"),this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=ZS.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){nw(e)?(this.state=ZS.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=ZS.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=ZS.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(mS,!1)&&cw(this.preprocessor.peek(mS.length))){this._emitCodePoint(e);for(let e=0;e<mS.length;e++)this._emitCodePoint(this._consume());this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ZS.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case dS.HYPHEN_MINUS:this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case dS.LESS_THAN_SIGN:this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this._emitChars(uS);break;case dS.EOF:this._err(vS.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case dS.HYPHEN_MINUS:this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case dS.LESS_THAN_SIGN:this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(uS);break;case dS.EOF:this._err(vS.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case dS.HYPHEN_MINUS:this._emitChars("-");break;case dS.LESS_THAN_SIGN:this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case dS.GREATER_THAN_SIGN:this.state=ZS.SCRIPT_DATA,this._emitChars(">");break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(uS);break;case dS.EOF:this._err(vS.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===dS.SOLIDUS?(this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(mS,!1)&&cw(this.preprocessor.peek(mS.length))){this._emitCodePoint(e);for(let e=0;e<mS.length;e++)this._emitCodePoint(this._consume());this.state=ZS.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ZS.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.SOLIDUS:case dS.GREATER_THAN_SIGN:case dS.EOF:this.state=ZS.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case dS.EQUALS_SIGN:this._err(vS.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ZS.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=ZS.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:case dS.SOLIDUS:case dS.GREATER_THAN_SIGN:case dS.EOF:this._leaveAttrName(),this.state=ZS.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case dS.EQUALS_SIGN:this._leaveAttrName(),this.state=ZS.BEFORE_ATTRIBUTE_VALUE;break;case dS.QUOTATION_MARK:case dS.APOSTROPHE:case dS.LESS_THAN_SIGN:this._err(vS.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this.currentAttr.name+=uS;break;default:this.currentAttr.name+=String.fromCodePoint(tw(e)?aw(e):e)}}_stateAfterAttributeName(e){switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.SOLIDUS:this.state=ZS.SELF_CLOSING_START_TAG;break;case dS.EQUALS_SIGN:this.state=ZS.BEFORE_ATTRIBUTE_VALUE;break;case dS.GREATER_THAN_SIGN:this.state=ZS.DATA,this.emitCurrentTagToken();break;case dS.EOF:this._err(vS.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=ZS.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.QUOTATION_MARK:this.state=ZS.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case dS.APOSTROPHE:this.state=ZS.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case dS.GREATER_THAN_SIGN:this._err(vS.missingAttributeValue),this.state=ZS.DATA,this.emitCurrentTagToken();break;default:this.state=ZS.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case dS.QUOTATION_MARK:this.state=ZS.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case dS.AMPERSAND:this.returnState=ZS.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ZS.CHARACTER_REFERENCE;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this.currentAttr.value+=uS;break;case dS.EOF:this._err(vS.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case dS.APOSTROPHE:this.state=ZS.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case dS.AMPERSAND:this.returnState=ZS.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ZS.CHARACTER_REFERENCE;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this.currentAttr.value+=uS;break;case dS.EOF:this._err(vS.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:this._leaveAttrValue(),this.state=ZS.BEFORE_ATTRIBUTE_NAME;break;case dS.AMPERSAND:this.returnState=ZS.ATTRIBUTE_VALUE_UNQUOTED,this.state=ZS.CHARACTER_REFERENCE;break;case dS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=ZS.DATA,this.emitCurrentTagToken();break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this.currentAttr.value+=uS;break;case dS.QUOTATION_MARK:case dS.APOSTROPHE:case dS.LESS_THAN_SIGN:case dS.EQUALS_SIGN:case dS.GRAVE_ACCENT:this._err(vS.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case dS.EOF:this._err(vS.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:this._leaveAttrValue(),this.state=ZS.BEFORE_ATTRIBUTE_NAME;break;case dS.SOLIDUS:this._leaveAttrValue(),this.state=ZS.SELF_CLOSING_START_TAG;break;case dS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=ZS.DATA,this.emitCurrentTagToken();break;case dS.EOF:this._err(vS.eofInTag),this._emitEOFToken();break;default:this._err(vS.missingWhitespaceBetweenAttributes),this.state=ZS.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case dS.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=ZS.DATA,this.emitCurrentTagToken();break;case dS.EOF:this._err(vS.eofInTag),this._emitEOFToken();break;default:this._err(vS.unexpectedSolidusInTag),this.state=ZS.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case dS.GREATER_THAN_SIGN:this.state=ZS.DATA,this.emitCurrentComment(t);break;case dS.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case dS.NULL:this._err(vS.unexpectedNullCharacter),t.data+=uS;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(pS,!0)?(this._createCommentToken(pS.length+1),this.state=ZS.COMMENT_START):this._consumeSequenceIfMatch(fS,!1)?(this.currentLocation=this.getCurrentLocation(fS.length+1),this.state=ZS.DOCTYPE):this._consumeSequenceIfMatch(hS,!0)?this.inForeignNode?this.state=ZS.CDATA_SECTION:(this._err(vS.cdataInHtmlContent),this._createCommentToken(hS.length+1),this.currentToken.data="[CDATA[",this.state=ZS.BOGUS_COMMENT):this._ensureHibernation()||(this._err(vS.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ZS.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case dS.HYPHEN_MINUS:this.state=ZS.COMMENT_START_DASH;break;case dS.GREATER_THAN_SIGN:{this._err(vS.abruptClosingOfEmptyComment),this.state=ZS.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=ZS.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case dS.HYPHEN_MINUS:this.state=ZS.COMMENT_END;break;case dS.GREATER_THAN_SIGN:this._err(vS.abruptClosingOfEmptyComment),this.state=ZS.DATA,this.emitCurrentComment(t);break;case dS.EOF:this._err(vS.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=ZS.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case dS.HYPHEN_MINUS:this.state=ZS.COMMENT_END_DASH;break;case dS.LESS_THAN_SIGN:t.data+="<",this.state=ZS.COMMENT_LESS_THAN_SIGN;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),t.data+=uS;break;case dS.EOF:this._err(vS.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case dS.EXCLAMATION_MARK:t.data+="!",this.state=ZS.COMMENT_LESS_THAN_SIGN_BANG;break;case dS.LESS_THAN_SIGN:t.data+="<";break;default:this.state=ZS.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===dS.HYPHEN_MINUS?this.state=ZS.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ZS.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===dS.HYPHEN_MINUS?this.state=ZS.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ZS.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==dS.GREATER_THAN_SIGN&&e!==dS.EOF&&this._err(vS.nestedComment),this.state=ZS.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case dS.HYPHEN_MINUS:this.state=ZS.COMMENT_END;break;case dS.EOF:this._err(vS.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=ZS.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case dS.GREATER_THAN_SIGN:this.state=ZS.DATA,this.emitCurrentComment(t);break;case dS.EXCLAMATION_MARK:this.state=ZS.COMMENT_END_BANG;break;case dS.HYPHEN_MINUS:t.data+="-";break;case dS.EOF:this._err(vS.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=ZS.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case dS.HYPHEN_MINUS:t.data+="--!",this.state=ZS.COMMENT_END_DASH;break;case dS.GREATER_THAN_SIGN:this._err(vS.incorrectlyClosedComment),this.state=ZS.DATA,this.emitCurrentComment(t);break;case dS.EOF:this._err(vS.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=ZS.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:this.state=ZS.BEFORE_DOCTYPE_NAME;break;case dS.GREATER_THAN_SIGN:this.state=ZS.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case dS.EOF:{this._err(vS.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(vS.missingWhitespaceBeforeDoctypeName),this.state=ZS.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(tw(e))this._createDoctypeToken(String.fromCharCode(aw(e))),this.state=ZS.DOCTYPE_NAME;else switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.NULL:this._err(vS.unexpectedNullCharacter),this._createDoctypeToken(uS),this.state=ZS.DOCTYPE_NAME;break;case dS.GREATER_THAN_SIGN:{this._err(vS.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=ZS.DATA;break}case dS.EOF:{this._err(vS.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=ZS.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:this.state=ZS.AFTER_DOCTYPE_NAME;break;case dS.GREATER_THAN_SIGN:this.state=ZS.DATA,this.emitCurrentDoctype(t);break;case dS.NULL:this._err(vS.unexpectedNullCharacter),t.name+=uS;break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(tw(e)?aw(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.GREATER_THAN_SIGN:this.state=ZS.DATA,this.emitCurrentDoctype(t);break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(gS,!1)?this.state=ZS.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(_S,!1)?this.state=ZS.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(vS.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=ZS.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:this.state=ZS.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case dS.QUOTATION_MARK:this._err(vS.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=ZS.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case dS.APOSTROPHE:this._err(vS.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=ZS.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case dS.GREATER_THAN_SIGN:this._err(vS.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=ZS.DATA,this.emitCurrentDoctype(t);break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(vS.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=ZS.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.QUOTATION_MARK:t.publicId="",this.state=ZS.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case dS.APOSTROPHE:t.publicId="",this.state=ZS.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case dS.GREATER_THAN_SIGN:this._err(vS.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=ZS.DATA,this.emitCurrentDoctype(t);break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(vS.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=ZS.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case dS.QUOTATION_MARK:this.state=ZS.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),t.publicId+=uS;break;case dS.GREATER_THAN_SIGN:this._err(vS.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ZS.DATA;break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case dS.APOSTROPHE:this.state=ZS.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),t.publicId+=uS;break;case dS.GREATER_THAN_SIGN:this._err(vS.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ZS.DATA;break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:this.state=ZS.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case dS.GREATER_THAN_SIGN:this.state=ZS.DATA,this.emitCurrentDoctype(t);break;case dS.QUOTATION_MARK:this._err(vS.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=ZS.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case dS.APOSTROPHE:this._err(vS.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=ZS.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(vS.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ZS.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=ZS.DATA;break;case dS.QUOTATION_MARK:t.systemId="",this.state=ZS.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case dS.APOSTROPHE:t.systemId="",this.state=ZS.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(vS.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ZS.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:this.state=ZS.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case dS.QUOTATION_MARK:this._err(vS.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=ZS.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case dS.APOSTROPHE:this._err(vS.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=ZS.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case dS.GREATER_THAN_SIGN:this._err(vS.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ZS.DATA,this.emitCurrentDoctype(t);break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(vS.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ZS.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.QUOTATION_MARK:t.systemId="",this.state=ZS.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case dS.APOSTROPHE:t.systemId="",this.state=ZS.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case dS.GREATER_THAN_SIGN:this._err(vS.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ZS.DATA,this.emitCurrentDoctype(t);break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(vS.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ZS.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case dS.QUOTATION_MARK:this.state=ZS.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),t.systemId+=uS;break;case dS.GREATER_THAN_SIGN:this._err(vS.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ZS.DATA;break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case dS.APOSTROPHE:this.state=ZS.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case dS.NULL:this._err(vS.unexpectedNullCharacter),t.systemId+=uS;break;case dS.GREATER_THAN_SIGN:this._err(vS.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ZS.DATA;break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case dS.SPACE:case dS.LINE_FEED:case dS.TABULATION:case dS.FORM_FEED:break;case dS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=ZS.DATA;break;case dS.EOF:this._err(vS.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(vS.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ZS.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case dS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=ZS.DATA;break;case dS.NULL:this._err(vS.unexpectedNullCharacter);break;case dS.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case dS.RIGHT_SQUARE_BRACKET:this.state=ZS.CDATA_SECTION_BRACKET;break;case dS.EOF:this._err(vS.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===dS.RIGHT_SQUARE_BRACKET?this.state=ZS.CDATA_SECTION_END:(this._emitChars("]"),this.state=ZS.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case dS.GREATER_THAN_SIGN:this.state=ZS.DATA;break;case dS.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=ZS.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(e){e===dS.NUMBER_SIGN?this.state=ZS.NUMERIC_CHARACTER_REFERENCE:sw(e)?(this.state=ZS.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(dS.AMPERSAND),this._reconsumeInState(this.returnState,e))}_stateNamedCharacterReference(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation());else if(t){for(let e=0;e<t.length;e++)this._flushCodePointConsumedAsCharacterReference(t[e]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(dS.AMPERSAND),this.state=ZS.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(e){sw(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===dS.SEMICOLON&&this._err(vS.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}_stateNumericCharacterReference(e){this.charRefCode=0,e===dS.LATIN_SMALL_X||e===dS.LATIN_CAPITAL_X?this.state=ZS.HEXADEMICAL_CHARACTER_REFERENCE_START:ew(e)?(this.state=ZS.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(vS.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(dS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(dS.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}_stateHexademicalCharacterReferenceStart(e){!function(e){return ew(e)||iw(e)||rw(e)}(e)?(this._err(vS.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(dS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(dS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState):(this.state=ZS.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e))}_stateHexademicalCharacterReference(e){iw(e)?this.charRefCode=16*this.charRefCode+e-55:rw(e)?this.charRefCode=16*this.charRefCode+e-87:ew(e)?this.charRefCode=16*this.charRefCode+e-48:e===dS.SEMICOLON?this.state=ZS.NUMERIC_CHARACTER_REFERENCE_END:(this._err(vS.missingSemicolonAfterCharacterReference),this.state=ZS.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateDecimalCharacterReference(e){ew(e)?this.charRefCode=10*this.charRefCode+e-48:e===dS.SEMICOLON?this.state=ZS.NUMERIC_CHARACTER_REFERENCE_END:(this._err(vS.missingSemicolonAfterCharacterReference),this.state=ZS.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateNumericCharacterReferenceEnd(e){if(this.charRefCode===dS.NULL)this._err(vS.nullCharacterReference),this.charRefCode=dS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(vS.characterReferenceOutsideUnicodeRange),this.charRefCode=dS.REPLACEMENT_CHARACTER;else if(yS(this.charRefCode))this._err(vS.surrogateCharacterReference),this.charRefCode=dS.REPLACEMENT_CHARACTER;else if(bS(this.charRefCode))this._err(vS.noncharacterCharacterReference);else if(ES(this.charRefCode)||this.charRefCode===dS.CARRIAGE_RETURN){this._err(vS.controlCharacterReference);const e=XS.get(this.charRefCode);void 0!==e&&(this.charRefCode=e)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}};const uw=new Set([qS.DD,qS.DT,qS.LI,qS.OPTGROUP,qS.OPTION,qS.P,qS.RB,qS.RP,qS.RT,qS.RTC]),dw=new Set([...uw,qS.CAPTION,qS.COLGROUP,qS.TBODY,qS.TD,qS.TFOOT,qS.TH,qS.THEAD,qS.TR]),pw=new Map([[qS.APPLET,HS.HTML],[qS.CAPTION,HS.HTML],[qS.HTML,HS.HTML],[qS.MARQUEE,HS.HTML],[qS.OBJECT,HS.HTML],[qS.TABLE,HS.HTML],[qS.TD,HS.HTML],[qS.TEMPLATE,HS.HTML],[qS.TH,HS.HTML],[qS.ANNOTATION_XML,HS.MATHML],[qS.MI,HS.MATHML],[qS.MN,HS.MATHML],[qS.MO,HS.MATHML],[qS.MS,HS.MATHML],[qS.MTEXT,HS.MATHML],[qS.DESC,HS.SVG],[qS.FOREIGN_OBJECT,HS.SVG],[qS.TITLE,HS.SVG]]),hw=[qS.H1,qS.H2,qS.H3,qS.H4,qS.H5,qS.H6],fw=[qS.TR,qS.TEMPLATE,qS.HTML],mw=[qS.TBODY,qS.TFOOT,qS.THEAD,qS.TEMPLATE,qS.HTML],gw=[qS.TABLE,qS.TEMPLATE,qS.HTML],_w=[qS.TD,qS.TH];class yw{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,n){this.treeAdapter=t,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=qS.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===qS.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===HS.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}insertAfter(e,t,n){const s=this._indexOf(e)+1;this.items.splice(s,0,t),this.tagIDs.splice(s,0,n),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==HS.HTML);this.shortenToLength(t<0?0:t)}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(t<0?0:t)}popUntilPopped(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n<0?0:n)}popUntilNumberedHeaderPopped(){this.popUntilPopped(hw,HS.HTML)}popUntilTableCellPopped(){this.popUntilPopped(_w,HS.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let n=this.stackTop;n>=0;n--)if(e.includes(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return-1}clearBackTo(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(gw,HS.HTML)}clearBackToTableBodyContext(){this.clearBackTo(mw,HS.HTML)}clearBackToTableRowContext(){this.clearBackTo(fw,HS.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===qS.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===qS.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],s=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&s===HS.HTML)return!0;if(pw.get(n)===s)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e],n=this.treeAdapter.getNamespaceURI(this.items[e]);if(KS(t)&&n===HS.HTML)return!0;if(pw.get(t)===n)return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],s=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&s===HS.HTML)return!0;if((n===qS.UL||n===qS.OL)&&s===HS.HTML||pw.get(n)===s)return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],s=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&s===HS.HTML)return!0;if(n===qS.BUTTON&&s===HS.HTML||pw.get(n)===s)return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===HS.HTML){if(n===e)return!0;if(n===qS.TABLE||n===qS.TEMPLATE||n===qS.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===HS.HTML){if(t===qS.TBODY||t===qS.THEAD||t===qS.TFOOT)return!0;if(t===qS.TABLE||t===qS.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===HS.HTML){if(n===e)return!0;if(n!==qS.OPTION&&n!==qS.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;uw.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;dw.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&dw.has(this.currentTagId);)this.pop()}}var Ew;!function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"}(Ew=Ew||(Ew={}));const bw={type:Ew.Marker};class vw{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const n=[],s=t.length,i=this.treeAdapter.getTagName(e),r=this.treeAdapter.getNamespaceURI(e);for(let e=0;e<this.entries.length;e++){const t=this.entries[e];if(t.type===Ew.Marker)break;const{element:a}=t;if(this.treeAdapter.getTagName(a)===i&&this.treeAdapter.getNamespaceURI(a)===r){const t=this.treeAdapter.getAttrList(a);t.length===s&&n.push({idx:e,attrs:t})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<3)return;const t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<3)return;const s=new Map(t.map((e=>[e.name,e.value])));let i=0;for(let e=0;e<n.length;e++){const t=n[e];t.attrs.every((e=>s.get(e.name)===e.value))&&(i+=1,i>=3&&this.entries.splice(t.idx,1))}}insertMarker(){this.entries.unshift(bw)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:Ew.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:Ew.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);t>=0&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(bw);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const t=this.entries.find((t=>t.type===Ew.Marker||this.treeAdapter.getTagName(t.element)===e));return t&&t.type===Ew.Element?t:null}getElementEntry(e){return this.entries.find((t=>t.type===Ew.Element&&t.element===e))}}function Tw(e){return{nodeName:"#text",value:e,parentNode:null}}const Aw={createDocument:()=>({nodeName:"#document",mode:GS.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const s=e.childNodes.indexOf(n);e.childNodes.splice(s,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,n,s){const i=e.childNodes.find((e=>"#documentType"===e.nodeName));if(i)i.name=t,i.publicId=n,i.systemId=s;else{const i={nodeName:"#documentType",name:t,publicId:n,systemId:s,parentNode:null};Aw.appendChild(e,i)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Aw.isTextNode(n))return void(n.value+=t)}Aw.appendChild(e,Tw(t))},insertTextBefore(e,t,n){const s=e.childNodes[e.childNodes.indexOf(n)-1];s&&Aw.isTextNode(s)?s.value+=t:Aw.insertBefore(e,Tw(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map((e=>e.name)));for(let s=0;s<t.length;s++)n.has(t[s].name)||e.attrs.push(t[s])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Sw="html",ww="about:legacy-compat",xw="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",kw=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Cw=[...kw,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Nw=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Iw=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Rw=[...Iw,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Dw(e,t){return t.some((t=>e.startsWith(t)))}const Ow={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Lw="definitionurl",Fw="definitionURL",Mw=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),Pw=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:HS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:HS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:HS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:HS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:HS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:HS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:HS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:HS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:HS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:HS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:HS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:HS.XMLNS}]]),Bw=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),Uw=new Set([qS.B,qS.BIG,qS.BLOCKQUOTE,qS.BODY,qS.BR,qS.CENTER,qS.CODE,qS.DD,qS.DIV,qS.DL,qS.DT,qS.EM,qS.EMBED,qS.H1,qS.H2,qS.H3,qS.H4,qS.H5,qS.H6,qS.HEAD,qS.HR,qS.I,qS.IMG,qS.LI,qS.LISTING,qS.MENU,qS.META,qS.NOBR,qS.OL,qS.P,qS.PRE,qS.RUBY,qS.S,qS.SMALL,qS.SPAN,qS.STRONG,qS.STRIKE,qS.SUB,qS.SUP,qS.TABLE,qS.TT,qS.U,qS.UL,qS.VAR]);function Hw(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Lw){e.attrs[t].name=Fw;break}}function jw(e){for(let t=0;t<e.attrs.length;t++){const n=Mw.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}}function Gw(e){for(let t=0;t<e.attrs.length;t++){const n=Pw.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function $w(e,t,n,s){return(!s||s===HS.HTML)&&function(e,t,n){if(t===HS.MATHML&&e===qS.ANNOTATION_XML)for(let e=0;e<n.length;e++)if(n[e].name===jS.ENCODING){const t=n[e].value.toLowerCase();return t===Ow.TEXT_HTML||t===Ow.APPLICATION_XML}return t===HS.SVG&&(e===qS.FOREIGN_OBJECT||e===qS.DESC||e===qS.TITLE)}(e,t,n)||(!s||s===HS.MATHML)&&function(e,t){return t===HS.MATHML&&(e===qS.MI||e===qS.MO||e===qS.MN||e===qS.MS||e===qS.MTEXT)}(e,t)}const qw="hidden",zw=8,Ww=3;var Yw;!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(Yw||(Yw={}));const Vw={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Kw=new Set([qS.TABLE,qS.TBODY,qS.TFOOT,qS.THEAD,qS.TR]),Qw={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Aw,onParseError:null};let Xw=class{constructor(e,t,n=null,s=null){this.fragmentContext=n,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=Yw.INITIAL,this.originalInsertionMode=Yw.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Qw,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=t?t:this.treeAdapter.createDocument(),this.tokenizer=new lw(this.options,this),this.activeFormattingElements=new vw(this.treeAdapter),this.fragmentContextID=n?WS(this.treeAdapter.getTagName(n)):qS.UNKNOWN,this._setContextModes(null!=n?n:this.document,this.fragmentContextID),this.openElements=new yw(this.document,this.treeAdapter,this)}static parse(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){const n={...Qw,...t};null!=e||(e=n.treeAdapter.createElement($S.TEMPLATE,HS.HTML,[]));const s=n.treeAdapter.createElement("documentmock",HS.HTML,[]),i=new this(n,s,e);return i.fragmentContextID===qS.TEMPLATE&&i.tmplInsertionModeStack.unshift(Yw.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var s;if(!this.onParseError)return;const i=null!==(s=e.location)&&void 0!==s?s:Vw,r={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(r)}onItemPush(e,t,n){var s,i;null===(i=(s=this.treeAdapter).onItemPush)||void 0===i||i.call(s,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(s=(n=this.treeAdapter).onItemPop)||void 0===s||s.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===HS.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,HS.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=Yw.TEXT}switchToPlaintextParsing(){this.insertionMode=Yw.TEXT,this.originalInsertionMode=Yw.IN_BODY,this.tokenizer.state=JS.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===$S.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===HS.HTML)switch(this.fragmentContextID){case qS.TITLE:case qS.TEXTAREA:this.tokenizer.state=JS.RCDATA;break;case qS.STYLE:case qS.XMP:case qS.IFRAME:case qS.NOEMBED:case qS.NOFRAMES:case qS.NOSCRIPT:this.tokenizer.state=JS.RAWTEXT;break;case qS.SCRIPT:this.tokenizer.state=JS.SCRIPT_DATA;break;case qS.PLAINTEXT:this.tokenizer.state=JS.PLAINTEXT}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,s),e.location){const t=this.treeAdapter.getChildNodes(this.document).find((e=>this.treeAdapter.isDocumentTypeNode(e)));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){const n=this.treeAdapter.createElement(e,HS.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,HS.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement($S.HTML,HS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,qS.HTML)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:n}=this._findFosterParentingLocation()),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(t),i=n?s.lastIndexOf(n):s.length,r=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(r)){const{endLine:t,endCol:n,endOffset:s}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(r,{endLine:t,endCol:n,endOffset:s})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,s=this.treeAdapter.getTagName(e),i=t.type===AS.END_TAG&&s===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,n;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):({current:t,currentTagId:n}=this.openElements),(e.tagID!==qS.SVG||this.treeAdapter.getTagName(t)!==$S.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==HS.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===qS.MGLYPH||e.tagID===qS.MALIGNMARK)&&!this._isIntegrationPoint(n,t,HS.HTML))}_processToken(e){switch(e.type){case AS.CHARACTER:this.onCharacter(e);break;case AS.NULL_CHARACTER:this.onNullCharacter(e);break;case AS.COMMENT:this.onComment(e);break;case AS.DOCTYPE:this.onDoctype(e);break;case AS.START_TAG:this._processStartTag(e);break;case AS.END_TAG:this.onEndTag(e);break;case AS.EOF:this.onEof(e);break;case AS.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,n){return $w(e,this.treeAdapter.getNamespaceURI(t),this.treeAdapter.getAttrList(t),n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex((e=>e.type===Ew.Marker||this.openElements.contains(e.element)));for(let n=t<0?e-1:t-1;n>=0;n--){const e=this.activeFormattingElements.entries[n];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Yw.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(qS.P),this.openElements.popUntilTagNamePopped(qS.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case qS.TR:return void(this.insertionMode=Yw.IN_ROW);case qS.TBODY:case qS.THEAD:case qS.TFOOT:return void(this.insertionMode=Yw.IN_TABLE_BODY);case qS.CAPTION:return void(this.insertionMode=Yw.IN_CAPTION);case qS.COLGROUP:return void(this.insertionMode=Yw.IN_COLUMN_GROUP);case qS.TABLE:return void(this.insertionMode=Yw.IN_TABLE);case qS.BODY:return void(this.insertionMode=Yw.IN_BODY);case qS.FRAMESET:return void(this.insertionMode=Yw.IN_FRAMESET);case qS.SELECT:return void this._resetInsertionModeForSelect(e);case qS.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case qS.HTML:return void(this.insertionMode=this.headElement?Yw.AFTER_HEAD:Yw.BEFORE_HEAD);case qS.TD:case qS.TH:if(e>0)return void(this.insertionMode=Yw.IN_CELL);break;case qS.HEAD:if(e>0)return void(this.insertionMode=Yw.IN_HEAD)}this.insertionMode=Yw.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===qS.TEMPLATE)break;if(e===qS.TABLE)return void(this.insertionMode=Yw.IN_SELECT_IN_TABLE)}this.insertionMode=Yw.IN_SELECT}_isElementCausesFosterParenting(e){return Kw.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case qS.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===HS.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case qS.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const n=this.treeAdapter.getNamespaceURI(e);return VS[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e);else switch(this.insertionMode){case Yw.INITIAL:ox(this,e);break;case Yw.BEFORE_HTML:cx(this,e);break;case Yw.BEFORE_HEAD:lx(this,e);break;case Yw.IN_HEAD:px(this,e);break;case Yw.IN_HEAD_NO_SCRIPT:hx(this,e);break;case Yw.AFTER_HEAD:fx(this,e);break;case Yw.IN_BODY:case Yw.IN_CAPTION:case Yw.IN_CELL:case Yw.IN_TEMPLATE:_x(this,e);break;case Yw.TEXT:case Yw.IN_SELECT:case Yw.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case Yw.IN_TABLE:case Yw.IN_TABLE_BODY:case Yw.IN_ROW:xx(this,e);break;case Yw.IN_TABLE_TEXT:Rx(this,e);break;case Yw.IN_COLUMN_GROUP:Fx(this,e);break;case Yw.AFTER_BODY:qx(this,e);break;case Yw.AFTER_AFTER_BODY:zx(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){t.chars=uS,e._insertCharacters(t)}(this,e);else switch(this.insertionMode){case Yw.INITIAL:ox(this,e);break;case Yw.BEFORE_HTML:cx(this,e);break;case Yw.BEFORE_HEAD:lx(this,e);break;case Yw.IN_HEAD:px(this,e);break;case Yw.IN_HEAD_NO_SCRIPT:hx(this,e);break;case Yw.AFTER_HEAD:fx(this,e);break;case Yw.TEXT:this._insertCharacters(e);break;case Yw.IN_TABLE:case Yw.IN_TABLE_BODY:case Yw.IN_ROW:xx(this,e);break;case Yw.IN_COLUMN_GROUP:Fx(this,e);break;case Yw.AFTER_BODY:qx(this,e);break;case Yw.AFTER_AFTER_BODY:zx(this,e)}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)rx(this,e);else switch(this.insertionMode){case Yw.INITIAL:case Yw.BEFORE_HTML:case Yw.BEFORE_HEAD:case Yw.IN_HEAD:case Yw.IN_HEAD_NO_SCRIPT:case Yw.AFTER_HEAD:case Yw.IN_BODY:case Yw.IN_TABLE:case Yw.IN_CAPTION:case Yw.IN_COLUMN_GROUP:case Yw.IN_TABLE_BODY:case Yw.IN_ROW:case Yw.IN_CELL:case Yw.IN_SELECT:case Yw.IN_SELECT_IN_TABLE:case Yw.IN_TEMPLATE:case Yw.IN_FRAMESET:case Yw.AFTER_FRAMESET:rx(this,e);break;case Yw.IN_TABLE_TEXT:Dx(this,e);break;case Yw.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case Yw.AFTER_AFTER_BODY:case Yw.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case Yw.INITIAL:!function(e,t){e._setDocumentType(t);const n=t.forceQuirks?GS.QUIRKS:function(e){if(e.name!==Sw)return GS.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===xw)return GS.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),Nw.has(n))return GS.QUIRKS;let e=null===t?Cw:kw;if(Dw(n,e))return GS.QUIRKS;if(e=null===t?Iw:Rw,Dw(n,e))return GS.LIMITED_QUIRKS}return GS.NO_QUIRKS}(t);(function(e){return e.name===Sw&&null===e.publicId&&(null===e.systemId||e.systemId===ww)})(t)||e._err(t,vS.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Yw.BEFORE_HTML}(this,e);break;case Yw.BEFORE_HEAD:case Yw.IN_HEAD:case Yw.IN_HEAD_NO_SCRIPT:case Yw.AFTER_HEAD:this._err(e,vS.misplacedDoctype);break;case Yw.IN_TABLE_TEXT:Dx(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,vS.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(function(e){const t=e.tagID,n=t===qS.FONT&&e.attrs.some((({name:e})=>e===jS.COLOR||e===jS.SIZE||e===jS.FACE));return n||Uw.has(t)}(t))Wx(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),s=e.treeAdapter.getNamespaceURI(n);s===HS.MATHML?Hw(t):s===HS.SVG&&(!function(e){const t=Bw.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=WS(e.tagName))}(t),jw(t)),Gw(t),t.selfClosing?e._appendElement(t,s):e._insertElement(t,s),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case Yw.INITIAL:ox(this,e);break;case Yw.BEFORE_HTML:!function(e,t){t.tagID===qS.HTML?(e._insertElement(t,HS.HTML),e.insertionMode=Yw.BEFORE_HEAD):cx(e,t)}(this,e);break;case Yw.BEFORE_HEAD:!function(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.HEAD:e._insertElement(t,HS.HTML),e.headElement=e.openElements.current,e.insertionMode=Yw.IN_HEAD;break;default:lx(e,t)}}(this,e);break;case Yw.IN_HEAD:ux(this,e);break;case Yw.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.BASEFONT:case qS.BGSOUND:case qS.HEAD:case qS.LINK:case qS.META:case qS.NOFRAMES:case qS.STYLE:ux(e,t);break;case qS.NOSCRIPT:e._err(t,vS.nestedNoscriptInHead);break;default:hx(e,t)}}(this,e);break;case Yw.AFTER_HEAD:!function(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.BODY:e._insertElement(t,HS.HTML),e.framesetOk=!1,e.insertionMode=Yw.IN_BODY;break;case qS.FRAMESET:e._insertElement(t,HS.HTML),e.insertionMode=Yw.IN_FRAMESET;break;case qS.BASE:case qS.BASEFONT:case qS.BGSOUND:case qS.LINK:case qS.META:case qS.NOFRAMES:case qS.SCRIPT:case qS.STYLE:case qS.TEMPLATE:case qS.TITLE:e._err(t,vS.abandonedHeadElementChild),e.openElements.push(e.headElement,qS.HEAD),ux(e,t),e.openElements.remove(e.headElement);break;case qS.HEAD:e._err(t,vS.misplacedStartTagForHeadElement);break;default:fx(e,t)}}(this,e);break;case Yw.IN_BODY:Tx(this,e);break;case Yw.IN_TABLE:kx(this,e);break;case Yw.IN_TABLE_TEXT:Dx(this,e);break;case Yw.IN_CAPTION:!function(e,t){const n=t.tagID;Ox.has(n)?e.openElements.hasInTableScope(qS.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(qS.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Yw.IN_TABLE,kx(e,t)):Tx(e,t)}(this,e);break;case Yw.IN_COLUMN_GROUP:Lx(this,e);break;case Yw.IN_TABLE_BODY:Mx(this,e);break;case Yw.IN_ROW:Bx(this,e);break;case Yw.IN_CELL:!function(e,t){const n=t.tagID;Ox.has(n)?(e.openElements.hasInTableScope(qS.TD)||e.openElements.hasInTableScope(qS.TH))&&(e._closeTableCell(),Bx(e,t)):Tx(e,t)}(this,e);break;case Yw.IN_SELECT:Hx(this,e);break;case Yw.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===qS.CAPTION||n===qS.TABLE||n===qS.TBODY||n===qS.TFOOT||n===qS.THEAD||n===qS.TR||n===qS.TD||n===qS.TH?(e.openElements.popUntilTagNamePopped(qS.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Hx(e,t)}(this,e);break;case Yw.IN_TEMPLATE:!function(e,t){switch(t.tagID){case qS.BASE:case qS.BASEFONT:case qS.BGSOUND:case qS.LINK:case qS.META:case qS.NOFRAMES:case qS.SCRIPT:case qS.STYLE:case qS.TEMPLATE:case qS.TITLE:ux(e,t);break;case qS.CAPTION:case qS.COLGROUP:case qS.TBODY:case qS.TFOOT:case qS.THEAD:e.tmplInsertionModeStack[0]=Yw.IN_TABLE,e.insertionMode=Yw.IN_TABLE,kx(e,t);break;case qS.COL:e.tmplInsertionModeStack[0]=Yw.IN_COLUMN_GROUP,e.insertionMode=Yw.IN_COLUMN_GROUP,Lx(e,t);break;case qS.TR:e.tmplInsertionModeStack[0]=Yw.IN_TABLE_BODY,e.insertionMode=Yw.IN_TABLE_BODY,Mx(e,t);break;case qS.TD:case qS.TH:e.tmplInsertionModeStack[0]=Yw.IN_ROW,e.insertionMode=Yw.IN_ROW,Bx(e,t);break;default:e.tmplInsertionModeStack[0]=Yw.IN_BODY,e.insertionMode=Yw.IN_BODY,Tx(e,t)}}(this,e);break;case Yw.AFTER_BODY:!function(e,t){t.tagID===qS.HTML?Tx(e,t):qx(e,t)}(this,e);break;case Yw.IN_FRAMESET:!function(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.FRAMESET:e._insertElement(t,HS.HTML);break;case qS.FRAME:e._appendElement(t,HS.HTML),t.ackSelfClosing=!0;break;case qS.NOFRAMES:ux(e,t)}}(this,e);break;case Yw.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.NOFRAMES:ux(e,t)}}(this,e);break;case Yw.AFTER_AFTER_BODY:!function(e,t){t.tagID===qS.HTML?Tx(e,t):zx(e,t)}(this,e);break;case Yw.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.NOFRAMES:ux(e,t)}}(this,e)}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===qS.P||t.tagID===qS.BR)return Wx(e),void e._endTagOutsideForeignContent(t);for(let n=e.openElements.stackTop;n>0;n--){const s=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(s)===HS.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(s);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case Yw.INITIAL:ox(this,e);break;case Yw.BEFORE_HTML:!function(e,t){const n=t.tagID;n!==qS.HTML&&n!==qS.HEAD&&n!==qS.BODY&&n!==qS.BR||cx(e,t)}(this,e);break;case Yw.BEFORE_HEAD:!function(e,t){const n=t.tagID;n===qS.HEAD||n===qS.BODY||n===qS.HTML||n===qS.BR?lx(e,t):e._err(t,vS.endTagWithoutMatchingOpenElement)}(this,e);break;case Yw.IN_HEAD:!function(e,t){switch(t.tagID){case qS.HEAD:e.openElements.pop(),e.insertionMode=Yw.AFTER_HEAD;break;case qS.BODY:case qS.BR:case qS.HTML:px(e,t);break;case qS.TEMPLATE:dx(e,t);break;default:e._err(t,vS.endTagWithoutMatchingOpenElement)}}(this,e);break;case Yw.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case qS.NOSCRIPT:e.openElements.pop(),e.insertionMode=Yw.IN_HEAD;break;case qS.BR:hx(e,t);break;default:e._err(t,vS.endTagWithoutMatchingOpenElement)}}(this,e);break;case Yw.AFTER_HEAD:!function(e,t){switch(t.tagID){case qS.BODY:case qS.HTML:case qS.BR:fx(e,t);break;case qS.TEMPLATE:dx(e,t);break;default:e._err(t,vS.endTagWithoutMatchingOpenElement)}}(this,e);break;case Yw.IN_BODY:Sx(this,e);break;case Yw.TEXT:!function(e,t){var n;t.tagID===qS.SCRIPT&&(null===(n=e.scriptHandler)||void 0===n||n.call(e,e.openElements.current));e.openElements.pop(),e.insertionMode=e.originalInsertionMode}(this,e);break;case Yw.IN_TABLE:Cx(this,e);break;case Yw.IN_TABLE_TEXT:Dx(this,e);break;case Yw.IN_CAPTION:!function(e,t){const n=t.tagID;switch(n){case qS.CAPTION:case qS.TABLE:e.openElements.hasInTableScope(qS.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(qS.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Yw.IN_TABLE,n===qS.TABLE&&Cx(e,t));break;case qS.BODY:case qS.COL:case qS.COLGROUP:case qS.HTML:case qS.TBODY:case qS.TD:case qS.TFOOT:case qS.TH:case qS.THEAD:case qS.TR:break;default:Sx(e,t)}}(this,e);break;case Yw.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case qS.COLGROUP:e.openElements.currentTagId===qS.COLGROUP&&(e.openElements.pop(),e.insertionMode=Yw.IN_TABLE);break;case qS.TEMPLATE:dx(e,t);break;case qS.COL:break;default:Fx(e,t)}}(this,e);break;case Yw.IN_TABLE_BODY:Px(this,e);break;case Yw.IN_ROW:Ux(this,e);break;case Yw.IN_CELL:!function(e,t){const n=t.tagID;switch(n){case qS.TD:case qS.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Yw.IN_ROW);break;case qS.TABLE:case qS.TBODY:case qS.TFOOT:case qS.THEAD:case qS.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Ux(e,t));break;case qS.BODY:case qS.CAPTION:case qS.COL:case qS.COLGROUP:case qS.HTML:break;default:Sx(e,t)}}(this,e);break;case Yw.IN_SELECT:jx(this,e);break;case Yw.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===qS.CAPTION||n===qS.TABLE||n===qS.TBODY||n===qS.TFOOT||n===qS.THEAD||n===qS.TR||n===qS.TD||n===qS.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(qS.SELECT),e._resetInsertionMode(),e.onEndTag(t)):jx(e,t)}(this,e);break;case Yw.IN_TEMPLATE:!function(e,t){t.tagID===qS.TEMPLATE&&dx(e,t)}(this,e);break;case Yw.AFTER_BODY:$x(this,e);break;case Yw.IN_FRAMESET:!function(e,t){t.tagID!==qS.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===qS.FRAMESET||(e.insertionMode=Yw.AFTER_FRAMESET))}(this,e);break;case Yw.AFTER_FRAMESET:!function(e,t){t.tagID===qS.HTML&&(e.insertionMode=Yw.AFTER_AFTER_FRAMESET)}(this,e);break;case Yw.AFTER_AFTER_BODY:zx(this,e)}}onEof(e){switch(this.insertionMode){case Yw.INITIAL:ox(this,e);break;case Yw.BEFORE_HTML:cx(this,e);break;case Yw.BEFORE_HEAD:lx(this,e);break;case Yw.IN_HEAD:px(this,e);break;case Yw.IN_HEAD_NO_SCRIPT:hx(this,e);break;case Yw.AFTER_HEAD:fx(this,e);break;case Yw.IN_BODY:case Yw.IN_TABLE:case Yw.IN_CAPTION:case Yw.IN_COLUMN_GROUP:case Yw.IN_TABLE_BODY:case Yw.IN_ROW:case Yw.IN_CELL:case Yw.IN_SELECT:case Yw.IN_SELECT_IN_TABLE:wx(this,e);break;case Yw.TEXT:!function(e,t){e._err(t,vS.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}(this,e);break;case Yw.IN_TABLE_TEXT:Dx(this,e);break;case Yw.IN_TEMPLATE:Gx(this,e);break;case Yw.AFTER_BODY:case Yw.IN_FRAMESET:case Yw.AFTER_FRAMESET:case Yw.AFTER_AFTER_BODY:case Yw.AFTER_AFTER_FRAMESET:ax(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===dS.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case Yw.IN_HEAD:case Yw.IN_HEAD_NO_SCRIPT:case Yw.AFTER_HEAD:case Yw.TEXT:case Yw.IN_COLUMN_GROUP:case Yw.IN_SELECT:case Yw.IN_SELECT_IN_TABLE:case Yw.IN_FRAMESET:case Yw.AFTER_FRAMESET:this._insertCharacters(e);break;case Yw.IN_BODY:case Yw.IN_CAPTION:case Yw.IN_CELL:case Yw.IN_TEMPLATE:case Yw.AFTER_BODY:case Yw.AFTER_AFTER_BODY:case Yw.AFTER_AFTER_FRAMESET:gx(this,e);break;case Yw.IN_TABLE:case Yw.IN_TABLE_BODY:case Yw.IN_ROW:xx(this,e);break;case Yw.IN_TABLE_TEXT:Ix(this,e)}}};function Zw(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Ax(e,t),n}function Jw(e,t){let n=null,s=e.openElements.stackTop;for(;s>=0;s--){const i=e.openElements.items[s];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[s])&&(n=i)}return n||(e.openElements.shortenToLength(s<0?0:s),e.activeFormattingElements.removeEntry(t)),n}function ex(e,t,n){let s=t,i=e.openElements.getCommonAncestor(t);for(let r=0,a=i;a!==n;r++,a=i){i=e.openElements.getCommonAncestor(a);const n=e.activeFormattingElements.getElementEntry(a),o=n&&r>=Ww;!n||o?(o&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(a)):(a=tx(e,n),s===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(s),e.treeAdapter.appendChild(a,s),s=a)}return s}function tx(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),s=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,s),t.element=s,s}function nx(e,t,n){const s=WS(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(s))e._fosterParentElement(n);else{const i=e.treeAdapter.getNamespaceURI(t);s===qS.TEMPLATE&&i===HS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function sx(e,t,n){const s=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,r=e.treeAdapter.createElement(i.tagName,s,i.attrs);e._adoptNodes(t,r),e.treeAdapter.appendChild(t,r),e.activeFormattingElements.insertElementAfterBookmark(r,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,r,i.tagID)}function ix(e,t){for(let n=0;n<zw;n++){const n=Zw(e,t);if(!n)break;const s=Jw(e,n);if(!s)break;e.activeFormattingElements.bookmark=n;const i=ex(e,s,n.element),r=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),r&&nx(e,r,i),sx(e,s,n)}}function rx(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function ax(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let s=e.openElements.stackTop;s>=n;s--)e._setEndLocation(e.openElements.items[s],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],s=e.treeAdapter.getNodeSourceCodeLocation(n);if(s&&!s.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],s=e.treeAdapter.getNodeSourceCodeLocation(n);s&&!s.endTag&&e._setEndLocation(n,t)}}}}function ox(e,t){e._err(t,vS.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,GS.QUIRKS),e.insertionMode=Yw.BEFORE_HTML,e._processToken(t)}function cx(e,t){e._insertFakeRootElement(),e.insertionMode=Yw.BEFORE_HEAD,e._processToken(t)}function lx(e,t){e._insertFakeElement($S.HEAD,qS.HEAD),e.headElement=e.openElements.current,e.insertionMode=Yw.IN_HEAD,e._processToken(t)}function ux(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.BASE:case qS.BASEFONT:case qS.BGSOUND:case qS.LINK:case qS.META:e._appendElement(t,HS.HTML),t.ackSelfClosing=!0;break;case qS.TITLE:e._switchToTextParsing(t,JS.RCDATA);break;case qS.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,JS.RAWTEXT):(e._insertElement(t,HS.HTML),e.insertionMode=Yw.IN_HEAD_NO_SCRIPT);break;case qS.NOFRAMES:case qS.STYLE:e._switchToTextParsing(t,JS.RAWTEXT);break;case qS.SCRIPT:e._switchToTextParsing(t,JS.SCRIPT_DATA);break;case qS.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Yw.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Yw.IN_TEMPLATE);break;case qS.HEAD:e._err(t,vS.misplacedStartTagForHeadElement);break;default:px(e,t)}}function dx(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==qS.TEMPLATE&&e._err(t,vS.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(qS.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,vS.endTagWithoutMatchingOpenElement)}function px(e,t){e.openElements.pop(),e.insertionMode=Yw.AFTER_HEAD,e._processToken(t)}function hx(e,t){const n=t.type===AS.EOF?vS.openElementsLeftAfterEof:vS.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Yw.IN_HEAD,e._processToken(t)}function fx(e,t){e._insertFakeElement($S.BODY,qS.BODY),e.insertionMode=Yw.IN_BODY,mx(e,t)}function mx(e,t){switch(t.type){case AS.CHARACTER:_x(e,t);break;case AS.WHITESPACE_CHARACTER:gx(e,t);break;case AS.COMMENT:rx(e,t);break;case AS.START_TAG:Tx(e,t);break;case AS.END_TAG:Sx(e,t);break;case AS.EOF:wx(e,t)}}function gx(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function _x(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function yx(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,HS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Ex(e){const t=SS(e,jS.TYPE);return null!=t&&t.toLowerCase()===qw}function bx(e,t){e._switchToTextParsing(t,JS.RAWTEXT)}function vx(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,HS.HTML)}function Tx(e,t){switch(t.tagID){case qS.I:case qS.S:case qS.B:case qS.U:case qS.EM:case qS.TT:case qS.BIG:case qS.CODE:case qS.FONT:case qS.SMALL:case qS.STRIKE:case qS.STRONG:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,HS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case qS.A:!function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName($S.A);n&&(ix(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,HS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case qS.H1:case qS.H2:case qS.H3:case qS.H4:case qS.H5:case qS.H6:!function(e,t){e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),KS(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,HS.HTML)}(e,t);break;case qS.P:case qS.DL:case qS.OL:case qS.UL:case qS.DIV:case qS.DIR:case qS.NAV:case qS.MAIN:case qS.MENU:case qS.ASIDE:case qS.CENTER:case qS.FIGURE:case qS.FOOTER:case qS.HEADER:case qS.HGROUP:case qS.DIALOG:case qS.DETAILS:case qS.ADDRESS:case qS.ARTICLE:case qS.SECTION:case qS.SUMMARY:case qS.FIELDSET:case qS.BLOCKQUOTE:case qS.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),e._insertElement(t,HS.HTML)}(e,t);break;case qS.LI:case qS.DD:case qS.DT:!function(e,t){e.framesetOk=!1;const n=t.tagID;for(let t=e.openElements.stackTop;t>=0;t--){const s=e.openElements.tagIDs[t];if(n===qS.LI&&s===qS.LI||(n===qS.DD||n===qS.DT)&&(s===qS.DD||s===qS.DT)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.popUntilTagNamePopped(s);break}if(s!==qS.ADDRESS&&s!==qS.DIV&&s!==qS.P&&e._isSpecialElement(e.openElements.items[t],s))break}e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),e._insertElement(t,HS.HTML)}(e,t);break;case qS.BR:case qS.IMG:case qS.WBR:case qS.AREA:case qS.EMBED:case qS.KEYGEN:yx(e,t);break;case qS.HR:!function(e,t){e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),e._appendElement(t,HS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case qS.RB:case qS.RTC:!function(e,t){e.openElements.hasInScope(qS.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,HS.HTML)}(e,t);break;case qS.RT:case qS.RP:!function(e,t){e.openElements.hasInScope(qS.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(qS.RTC),e._insertElement(t,HS.HTML)}(e,t);break;case qS.PRE:case qS.LISTING:!function(e,t){e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),e._insertElement(t,HS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case qS.XMP:!function(e,t){e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,JS.RAWTEXT)}(e,t);break;case qS.SVG:!function(e,t){e._reconstructActiveFormattingElements(),jw(t),Gw(t),t.selfClosing?e._appendElement(t,HS.SVG):e._insertElement(t,HS.SVG),t.ackSelfClosing=!0}(e,t);break;case qS.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case qS.BASE:case qS.LINK:case qS.META:case qS.STYLE:case qS.TITLE:case qS.SCRIPT:case qS.BGSOUND:case qS.BASEFONT:case qS.TEMPLATE:ux(e,t);break;case qS.BODY:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t);break;case qS.FORM:!function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),e._insertElement(t,HS.HTML),n||(e.formElement=e.openElements.current))}(e,t);break;case qS.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(qS.NOBR)&&(ix(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,HS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case qS.MATH:!function(e,t){e._reconstructActiveFormattingElements(),Hw(t),Gw(t),t.selfClosing?e._appendElement(t,HS.MATHML):e._insertElement(t,HS.MATHML),t.ackSelfClosing=!0}(e,t);break;case qS.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==GS.QUIRKS&&e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),e._insertElement(t,HS.HTML),e.framesetOk=!1,e.insertionMode=Yw.IN_TABLE}(e,t);break;case qS.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,HS.HTML),Ex(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case qS.PARAM:case qS.TRACK:case qS.SOURCE:!function(e,t){e._appendElement(t,HS.HTML),t.ackSelfClosing=!0}(e,t);break;case qS.IMAGE:!function(e,t){t.tagName=$S.IMG,t.tagID=qS.IMG,yx(e,t)}(e,t);break;case qS.BUTTON:!function(e,t){e.openElements.hasInScope(qS.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(qS.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,HS.HTML),e.framesetOk=!1}(e,t);break;case qS.APPLET:case qS.OBJECT:case qS.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,HS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case qS.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,JS.RAWTEXT)}(e,t);break;case qS.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,HS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Yw.IN_TABLE||e.insertionMode===Yw.IN_CAPTION||e.insertionMode===Yw.IN_TABLE_BODY||e.insertionMode===Yw.IN_ROW||e.insertionMode===Yw.IN_CELL?Yw.IN_SELECT_IN_TABLE:Yw.IN_SELECT}(e,t);break;case qS.OPTION:case qS.OPTGROUP:!function(e,t){e.openElements.currentTagId===qS.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,HS.HTML)}(e,t);break;case qS.NOEMBED:bx(e,t);break;case qS.FRAMESET:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,HS.HTML),e.insertionMode=Yw.IN_FRAMESET)}(e,t);break;case qS.TEXTAREA:!function(e,t){e._insertElement(t,HS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=JS.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Yw.TEXT}(e,t);break;case qS.NOSCRIPT:e.options.scriptingEnabled?bx(e,t):vx(e,t);break;case qS.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(qS.P)&&e._closePElement(),e._insertElement(t,HS.HTML),e.tokenizer.state=JS.PLAINTEXT}(e,t);break;case qS.COL:case qS.TH:case qS.TD:case qS.TR:case qS.HEAD:case qS.FRAME:case qS.TBODY:case qS.TFOOT:case qS.THEAD:case qS.CAPTION:case qS.COLGROUP:break;default:vx(e,t)}}function Ax(e,t){const n=t.tagName,s=t.tagID;for(let t=e.openElements.stackTop;t>0;t--){const i=e.openElements.items[t],r=e.openElements.tagIDs[t];if(s===r&&(s!==qS.UNKNOWN||e.treeAdapter.getTagName(i)===n)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.stackTop>=t&&e.openElements.shortenToLength(t);break}if(e._isSpecialElement(i,r))break}}function Sx(e,t){switch(t.tagID){case qS.A:case qS.B:case qS.I:case qS.S:case qS.U:case qS.EM:case qS.TT:case qS.BIG:case qS.CODE:case qS.FONT:case qS.NOBR:case qS.SMALL:case qS.STRIKE:case qS.STRONG:ix(e,t);break;case qS.P:!function(e){e.openElements.hasInButtonScope(qS.P)||e._insertFakeElement($S.P,qS.P),e._closePElement()}(e);break;case qS.DL:case qS.UL:case qS.OL:case qS.DIR:case qS.DIV:case qS.NAV:case qS.PRE:case qS.MAIN:case qS.MENU:case qS.ASIDE:case qS.BUTTON:case qS.CENTER:case qS.FIGURE:case qS.FOOTER:case qS.HEADER:case qS.HGROUP:case qS.DIALOG:case qS.ADDRESS:case qS.ARTICLE:case qS.DETAILS:case qS.SECTION:case qS.SUMMARY:case qS.LISTING:case qS.FIELDSET:case qS.BLOCKQUOTE:case qS.FIGCAPTION:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case qS.LI:!function(e){e.openElements.hasInListItemScope(qS.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(qS.LI),e.openElements.popUntilTagNamePopped(qS.LI))}(e);break;case qS.DD:case qS.DT:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case qS.H1:case qS.H2:case qS.H3:case qS.H4:case qS.H5:case qS.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case qS.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement($S.BR,qS.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case qS.BODY:!function(e,t){if(e.openElements.hasInScope(qS.BODY)&&(e.insertionMode=Yw.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}(e,t);break;case qS.HTML:!function(e,t){e.openElements.hasInScope(qS.BODY)&&(e.insertionMode=Yw.AFTER_BODY,$x(e,t))}(e,t);break;case qS.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(qS.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(qS.FORM):n&&e.openElements.remove(n))}(e);break;case qS.APPLET:case qS.OBJECT:case qS.MARQUEE:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case qS.TEMPLATE:dx(e,t);break;default:Ax(e,t)}}function wx(e,t){e.tmplInsertionModeStack.length>0?Gx(e,t):ax(e,t)}function xx(e,t){if(Kw.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Yw.IN_TABLE_TEXT,t.type){case AS.CHARACTER:Rx(e,t);break;case AS.WHITESPACE_CHARACTER:Ix(e,t)}else Nx(e,t)}function kx(e,t){switch(t.tagID){case qS.TD:case qS.TH:case qS.TR:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement($S.TBODY,qS.TBODY),e.insertionMode=Yw.IN_TABLE_BODY,Mx(e,t)}(e,t);break;case qS.STYLE:case qS.SCRIPT:case qS.TEMPLATE:ux(e,t);break;case qS.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement($S.COLGROUP,qS.COLGROUP),e.insertionMode=Yw.IN_COLUMN_GROUP,Lx(e,t)}(e,t);break;case qS.FORM:!function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,HS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case qS.TABLE:!function(e,t){e.openElements.hasInTableScope(qS.TABLE)&&(e.openElements.popUntilTagNamePopped(qS.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case qS.TBODY:case qS.TFOOT:case qS.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,HS.HTML),e.insertionMode=Yw.IN_TABLE_BODY}(e,t);break;case qS.INPUT:!function(e,t){Ex(t)?e._appendElement(t,HS.HTML):Nx(e,t),t.ackSelfClosing=!0}(e,t);break;case qS.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,HS.HTML),e.insertionMode=Yw.IN_CAPTION}(e,t);break;case qS.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,HS.HTML),e.insertionMode=Yw.IN_COLUMN_GROUP}(e,t);break;default:Nx(e,t)}}function Cx(e,t){switch(t.tagID){case qS.TABLE:e.openElements.hasInTableScope(qS.TABLE)&&(e.openElements.popUntilTagNamePopped(qS.TABLE),e._resetInsertionMode());break;case qS.TEMPLATE:dx(e,t);break;case qS.BODY:case qS.CAPTION:case qS.COL:case qS.COLGROUP:case qS.HTML:case qS.TBODY:case qS.TD:case qS.TFOOT:case qS.TH:case qS.THEAD:case qS.TR:break;default:Nx(e,t)}}function Nx(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,mx(e,t),e.fosterParentingEnabled=n}function Ix(e,t){e.pendingCharacterTokens.push(t)}function Rx(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Dx(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Nx(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Ox=new Set([qS.CAPTION,qS.COL,qS.COLGROUP,qS.TBODY,qS.TD,qS.TFOOT,qS.TH,qS.THEAD,qS.TR]);function Lx(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.COL:e._appendElement(t,HS.HTML),t.ackSelfClosing=!0;break;case qS.TEMPLATE:ux(e,t);break;default:Fx(e,t)}}function Fx(e,t){e.openElements.currentTagId===qS.COLGROUP&&(e.openElements.pop(),e.insertionMode=Yw.IN_TABLE,e._processToken(t))}function Mx(e,t){switch(t.tagID){case qS.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,HS.HTML),e.insertionMode=Yw.IN_ROW;break;case qS.TH:case qS.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement($S.TR,qS.TR),e.insertionMode=Yw.IN_ROW,Bx(e,t);break;case qS.CAPTION:case qS.COL:case qS.COLGROUP:case qS.TBODY:case qS.TFOOT:case qS.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Yw.IN_TABLE,kx(e,t));break;default:kx(e,t)}}function Px(e,t){const n=t.tagID;switch(t.tagID){case qS.TBODY:case qS.TFOOT:case qS.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Yw.IN_TABLE);break;case qS.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Yw.IN_TABLE,Cx(e,t));break;case qS.BODY:case qS.CAPTION:case qS.COL:case qS.COLGROUP:case qS.HTML:case qS.TD:case qS.TH:case qS.TR:break;default:Cx(e,t)}}function Bx(e,t){switch(t.tagID){case qS.TH:case qS.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,HS.HTML),e.insertionMode=Yw.IN_CELL,e.activeFormattingElements.insertMarker();break;case qS.CAPTION:case qS.COL:case qS.COLGROUP:case qS.TBODY:case qS.TFOOT:case qS.THEAD:case qS.TR:e.openElements.hasInTableScope(qS.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Yw.IN_TABLE_BODY,Mx(e,t));break;default:kx(e,t)}}function Ux(e,t){switch(t.tagID){case qS.TR:e.openElements.hasInTableScope(qS.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Yw.IN_TABLE_BODY);break;case qS.TABLE:e.openElements.hasInTableScope(qS.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Yw.IN_TABLE_BODY,Px(e,t));break;case qS.TBODY:case qS.TFOOT:case qS.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(qS.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Yw.IN_TABLE_BODY,Px(e,t));break;case qS.BODY:case qS.CAPTION:case qS.COL:case qS.COLGROUP:case qS.HTML:case qS.TD:case qS.TH:break;default:Cx(e,t)}}function Hx(e,t){switch(t.tagID){case qS.HTML:Tx(e,t);break;case qS.OPTION:e.openElements.currentTagId===qS.OPTION&&e.openElements.pop(),e._insertElement(t,HS.HTML);break;case qS.OPTGROUP:e.openElements.currentTagId===qS.OPTION&&e.openElements.pop(),e.openElements.currentTagId===qS.OPTGROUP&&e.openElements.pop(),e._insertElement(t,HS.HTML);break;case qS.INPUT:case qS.KEYGEN:case qS.TEXTAREA:case qS.SELECT:e.openElements.hasInSelectScope(qS.SELECT)&&(e.openElements.popUntilTagNamePopped(qS.SELECT),e._resetInsertionMode(),t.tagID!==qS.SELECT&&e._processStartTag(t));break;case qS.SCRIPT:case qS.TEMPLATE:ux(e,t)}}function jx(e,t){switch(t.tagID){case qS.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===qS.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===qS.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===qS.OPTGROUP&&e.openElements.pop();break;case qS.OPTION:e.openElements.currentTagId===qS.OPTION&&e.openElements.pop();break;case qS.SELECT:e.openElements.hasInSelectScope(qS.SELECT)&&(e.openElements.popUntilTagNamePopped(qS.SELECT),e._resetInsertionMode());break;case qS.TEMPLATE:dx(e,t)}}function Gx(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(qS.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):ax(e,t)}function $x(e,t){var n;if(t.tagID===qS.HTML){if(e.fragmentContext||(e.insertionMode=Yw.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===qS.HTML){e._setEndLocation(e.openElements.items[0],t);const s=e.openElements.items[1];s&&!(null===(n=e.treeAdapter.getNodeSourceCodeLocation(s))||void 0===n?void 0:n.endTag)&&e._setEndLocation(s,t)}}else qx(e,t)}function qx(e,t){e.insertionMode=Yw.IN_BODY,mx(e,t)}function zx(e,t){e.insertionMode=Yw.IN_BODY,mx(e,t)}function Wx(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==HS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Yx(e,t){return function(n){let s,i=0,r="";for(;s=e.exec(n);)i!==s.index&&(r+=n.substring(i,s.index)),r+=t.get(s[0].charCodeAt(0)),i=s.index+1;return r+n.substring(i)}}const Vx=Yx(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Kx=Yx(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),Qx=new Set([$S.AREA,$S.BASE,$S.BASEFONT,$S.BGSOUND,$S.BR,$S.COL,$S.EMBED,$S.FRAME,$S.HR,$S.IMG,$S.INPUT,$S.KEYGEN,$S.LINK,$S.META,$S.PARAM,$S.SOURCE,$S.TRACK,$S.WBR]);const Xx={treeAdapter:Aw,scriptingEnabled:!0};function Zx(e,t){return Jx(e,{...Xx,...t})}function Jx(e,t){return t.treeAdapter.isElementNode(e)?function(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${function(e,{treeAdapter:t}){let n="";for(const s of t.getAttrList(e)){if(n+=" ",s.namespace)switch(s.namespace){case HS.XML:n+=`xml:${s.name}`;break;case HS.XMLNS:"xmlns"!==s.name&&(n+="xmlns:"),n+=s.name;break;case HS.XLINK:n+=`xlink:${s.name}`;break;default:n+=`${s.prefix}:${s.name}`}else n+=s.name;n+=`="${Vx(s.value)}"`}return n}(e,t)}>${function(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===HS.HTML&&Qx.has(t.treeAdapter.getTagName(e))}(e,t)?"":`${function(e,t){let n="";const s=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===$S.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===HS.HTML?t.treeAdapter.getTemplateContent(e):e,i=t.treeAdapter.getChildNodes(s);if(i)for(const e of i)n+=Jx(e,t);return n}(e,t)}</${n}>`}`}(e,t):t.treeAdapter.isTextNode(e)?function(e,t){const{treeAdapter:n}=t,s=n.getTextNodeContent(e),i=n.getParentNode(e),r=i&&n.isElementNode(i)&&n.getTagName(i);return r&&n.getNamespaceURI(i)===HS.HTML&&(a=r,o=t.scriptingEnabled,QS.has(a)||o&&a===$S.NOSCRIPT)?s:Kx(s);var a,o}(e,t):t.treeAdapter.isCommentNode(e)?function(e,{treeAdapter:t}){return`\x3c!--${t.getCommentNodeContent(e)}--\x3e`}(e,t):t.treeAdapter.isDocumentTypeNode(e)?function(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(e,t):""}let ek=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return hk(this,e)}},tk=class extends ek{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}},nk=class extends tk{constructor(){super(...arguments),this.type=ZE.Text}get nodeType(){return 3}},sk=class extends tk{constructor(){super(...arguments),this.type=ZE.Comment}get nodeType(){return 8}},ik=class extends tk{constructor(e,t){super(t),this.name=e,this.type=ZE.Directive}get nodeType(){return 1}},rk=class extends ek{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}},ak=class extends rk{constructor(){super(...arguments),this.type=ZE.CDATA}get nodeType(){return 4}},ok=class extends rk{constructor(){super(...arguments),this.type=ZE.Root}get nodeType(){return 9}},ck=class extends rk{constructor(e,t,n=[],s=("script"===e?ZE.Script:"style"===e?ZE.Style:ZE.Tag)){super(n),this.name=e,this.attribs=t,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}};function lk(e){return JE(e)}function uk(e){return e.type===ZE.Text}function dk(e){return e.type===ZE.Comment}function pk(e){return e.type===ZE.Directive}function hk(e,t=!1){let n;if(uk(e))n=new nk(e.data);else if(dk(e))n=new sk(e.data);else if(lk(e)){const s=t?fk(e.children):[],i=new ck(e.name,{...e.attribs},s);s.forEach((e=>e.parent=i)),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=i}else if(function(e){return e.type===ZE.CDATA}(e)){const s=t?fk(e.children):[],i=new ak(s);s.forEach((e=>e.parent=i)),n=i}else if(function(e){return e.type===ZE.Root}(e)){const s=t?fk(e.children):[],i=new ok(s);s.forEach((e=>e.parent=i)),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else{if(!pk(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new ik(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function fk(e){const t=e.map((e=>hk(e,!0)));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}function mk(e){return new nk(e)}function gk(e){const t=e.includes('"')?"'":'"';return t+e+t}const _k={isCommentNode:dk,isElementNode:lk,isTextNode:uk,createDocument(){const e=new ok([]);return e["x-mode"]=GS.NO_QUIRKS,e},createDocumentFragment:()=>new ok([]),createElement(e,t,n){const s=Object.create(null),i=Object.create(null),r=Object.create(null);for(let e=0;e<n.length;e++){const t=n[e].name;s[t]=n[e].value,i[t]=n[e].namespace,r[t]=n[e].prefix}const a=new ck(e,s,[]);return a.namespace=t,a["x-attribsNamespace"]=i,a["x-attribsPrefix"]=r,a},createCommentNode:e=>new sk(e),appendChild(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},insertBefore(e,t,n){const s=e.children.indexOf(n),{prev:i}=n;i&&(i.next=t,t.prev=i),n.prev=t,t.next=n,e.children.splice(s,0,t),t.parent=e},setTemplateContent(e,t){_k.appendChild(e,t)},getTemplateContent:e=>e.children[0],setDocumentType(e,t,n,s){const i=function(e,t,n){let s="!DOCTYPE ";return e&&(s+=e),t?s+=` PUBLIC ${gk(t)}`:n&&(s+=" SYSTEM"),n&&(s+=` ${gk(n)}`),s}(t,n,s);let r=e.children.find((e=>pk(e)&&"!doctype"===e.name));r?r.data=null!=i?i:null:(r=new ik("!doctype",i),_k.appendChild(e,r)),r["x-name"]=null!=t?t:void 0,r["x-publicId"]=null!=n?n:void 0,r["x-systemId"]=null!=s?s:void 0},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode:e=>e["x-mode"],detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:n,next:s}=e;e.prev=null,e.next=null,n&&(n.next=s),s&&(s.prev=n),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const n=e.children[e.children.length-1];n&&uk(n)?n.data+=t:_k.appendChild(e,mk(t))},insertTextBefore(e,t,n){const s=e.children[e.children.indexOf(n)-1];s&&uk(s)?s.data+=t:_k.insertBefore(e,mk(t),n)},adoptAttributes(e,t){for(let n=0;n<t.length;n++){const s=t[n].name;void 0===e.attribs[s]&&(e.attribs[s]=t[n].value,e["x-attribsNamespace"][s]=t[n].namespace,e["x-attribsPrefix"][s]=t[n].prefix)}},getFirstChild:e=>e.children[0],getChildNodes:e=>e.children,getParentNode:e=>e.parent,getAttrList:e=>e.attributes,getTagName:e=>e.name,getNamespaceURI:e=>e.namespace,getTextNodeContent:e=>e.data,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName(e){var t;return null!==(t=e["x-name"])&&void 0!==t?t:""},getDocumentTypeNodePublicId(e){var t;return null!==(t=e["x-publicId"])&&void 0!==t?t:""},getDocumentTypeNodeSystemId(e){var t;return null!==(t=e["x-systemId"])&&void 0!==t?t:""},isDocumentTypeNode:e=>pk(e)&&"!doctype"===e.name,setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){null!=t.endOffset&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}};function yk(e,t,n,s){const i={scriptingEnabled:"boolean"!=typeof t.scriptingEnabled||t.scriptingEnabled,treeAdapter:_k,sourceCodeLocationInfo:t.sourceCodeLocationInfo};return n?function(e,t){return Xw.parse(e,t)}(e,i):function(e,t,n){"string"==typeof e&&(n=t,t=e,e=null);const s=Xw.getFragmentParser(e,n);return s.tokenizer.write(t,!0),s.getFragment()}(s,e,i)}const Ek={treeAdapter:_k};var bk,vk=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0)))),Tk=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((e=>e.charCodeAt(0))));const Ak=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Sk=null!==(bk=String.fromCodePoint)&&void 0!==bk?bk:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};function wk(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=Ak.get(e))&&void 0!==t?t:e}var xk;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(xk||(xk={}));var kk,Ck,Nk,Ik,Rk,Dk;function Ok(e){return e>=xk.ZERO&&e<=xk.NINE}function Lk(e){return e>=xk.UPPER_A&&e<=xk.UPPER_F||e>=xk.LOWER_A&&e<=xk.LOWER_F}function Fk(e){return e===xk.EQUALS||function(e){return e>=xk.UPPER_A&&e<=xk.UPPER_Z||e>=xk.LOWER_A&&e<=xk.LOWER_Z||Ok(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(kk||(kk={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(Ck||(Ck={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(Nk||(Nk={}));class Mk{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=Ck.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Nk.Strict}startEntity(e){this.decodeMode=e,this.state=Ck.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case Ck.EntityStart:return e.charCodeAt(t)===xk.NUM?(this.state=Ck.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=Ck.NamedEntity,this.stateNamedEntity(e,t));case Ck.NumericStart:return this.stateNumericStart(e,t);case Ck.NumericDecimal:return this.stateNumericDecimal(e,t);case Ck.NumericHex:return this.stateNumericHex(e,t);case Ck.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===xk.LOWER_X?(this.state=Ck.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=Ck.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,s){if(t!==n){const i=n-t;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(t,i),s),this.consumed+=i}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const s=e.charCodeAt(t);if(!Ok(s)&&!Lk(s))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(s,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const s=e.charCodeAt(t);if(!Ok(s))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(s,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===xk.SEMI)this.consumed+=1;else if(this.decodeMode===Nk.Strict)return 0;return this.emitCodePoint(wk(this.result),this.consumed),this.errors&&(e!==xk.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&kk.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const r=e.charCodeAt(t);if(this.treeIndex=Bk(n,s,this.treeIndex+Math.max(1,i),r),this.treeIndex<0)return 0===this.result||this.decodeMode===Nk.Attribute&&(0===i||Fk(r))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&kk.VALUE_LENGTH)>>14,0!==i){if(r===xk.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Nk.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,s=(n[t]&kk.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,s,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:s}=this;return this.emitCodePoint(1===t?s[e]&~kk.VALUE_LENGTH:s[e+1],n),3===t&&this.emitCodePoint(s[e+2],n),n}end(){var e;switch(this.state){case Ck.NamedEntity:return 0===this.result||this.decodeMode===Nk.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case Ck.NumericDecimal:return this.emitNumericEntity(0,2);case Ck.NumericHex:return this.emitNumericEntity(0,3);case Ck.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ck.EntityStart:return 0}}}function Pk(e){let t="";const n=new Mk(e,(e=>t+=Sk(e)));return function(e,s){let i=0,r=0;for(;(r=e.indexOf("&",r))>=0;){t+=e.slice(i,r),n.startEntity(s);const a=n.write(e,r+1);if(a<0){i=r+n.end();break}i=r+a,r=0===a?i+1:i}const a=t+e.slice(i);return t="",a}}function Bk(e,t,n,s){const i=(t&kk.BRANCH_LENGTH)>>7,r=t&kk.JUMP_TABLE;if(0===i)return 0!==r&&s===r?n:-1;if(r){const t=s-r;return t<0||t>=i?-1:e[n+t]-1}let a=n,o=a+i-1;for(;a<=o;){const t=a+o>>>1,n=e[t];if(n<s)a=t+1;else{if(!(n>s))return e[t+i];o=t-1}}return-1}function Uk(e){return e===Ik.Space||e===Ik.NewLine||e===Ik.Tab||e===Ik.FormFeed||e===Ik.CarriageReturn}function Hk(e){return e===Ik.Slash||e===Ik.Gt||Uk(e)}function jk(e){return e>=Ik.Zero&&e<=Ik.Nine}Pk(vk),Pk(Tk),function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(Ik||(Ik={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(Rk||(Rk={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(Dk||(Dk={}));const Gk={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class $k{constructor({xmlMode:e=!1,decodeEntities:t=!0},n){this.cbs=n,this.state=Rk.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Rk.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=t,this.entityTrie=e?Tk:vk}reset(){this.state=Rk.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Rk.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===Ik.Lt||!this.decodeEntities&&this.fastForwardTo(Ik.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=Rk.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===Ik.Amp&&(this.state=Rk.BeforeEntity)}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(t?Hk(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=Rk.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===Ik.Gt||Uk(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===Gk.TitleEnd?this.decodeEntities&&e===Ik.Amp&&(this.state=Rk.BeforeEntity):this.fastForwardTo(Ik.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===Ik.Lt)}stateCDATASequence(e){e===Gk.Cdata[this.sequenceIndex]?++this.sequenceIndex===Gk.Cdata.length&&(this.state=Rk.InCommentLike,this.currentSequence=Gk.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=Rk.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Gk.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=Rk.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!Hk(e):function(e){return e>=Ik.LowerA&&e<=Ik.LowerZ||e>=Ik.UpperA&&e<=Ik.UpperZ}(e)}startSpecial(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=Rk.SpecialStartSequence}stateBeforeTagName(e){if(e===Ik.ExclamationMark)this.state=Rk.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===Ik.Questionmark)this.state=Rk.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const t=32|e;this.sectionStart=this.index,this.xmlMode||t!==Gk.TitleEnd[2]?this.state=this.xmlMode||t!==Gk.ScriptEnd[2]?Rk.InTagName:Rk.BeforeSpecialS:this.startSpecial(Gk.TitleEnd,3)}else e===Ik.Slash?this.state=Rk.BeforeClosingTagName:(this.state=Rk.Text,this.stateText(e))}stateInTagName(e){Hk(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Rk.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){Uk(e)||(e===Ik.Gt?this.state=Rk.Text:(this.state=this.isTagStartChar(e)?Rk.InClosingTagName:Rk.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===Ik.Gt||Uk(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=Rk.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===Ik.Gt||this.fastForwardTo(Ik.Gt))&&(this.state=Rk.Text,this.baseState=Rk.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===Ik.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=Rk.InSpecialTag,this.sequenceIndex=0):this.state=Rk.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===Ik.Slash?this.state=Rk.InSelfClosingTag:Uk(e)||(this.state=Rk.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===Ik.Gt?(this.cbs.onselfclosingtag(this.index),this.state=Rk.Text,this.baseState=Rk.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Uk(e)||(this.state=Rk.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===Ik.Eq||Hk(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Rk.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===Ik.Eq?this.state=Rk.BeforeAttributeValue:e===Ik.Slash||e===Ik.Gt?(this.cbs.onattribend(Dk.NoValue,this.index),this.state=Rk.BeforeAttributeName,this.stateBeforeAttributeName(e)):Uk(e)||(this.cbs.onattribend(Dk.NoValue,this.index),this.state=Rk.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===Ik.DoubleQuote?(this.state=Rk.InAttributeValueDq,this.sectionStart=this.index+1):e===Ik.SingleQuote?(this.state=Rk.InAttributeValueSq,this.sectionStart=this.index+1):Uk(e)||(this.sectionStart=this.index,this.state=Rk.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===Ik.DoubleQuote?Dk.Double:Dk.Single,this.index),this.state=Rk.BeforeAttributeName):this.decodeEntities&&e===Ik.Amp&&(this.baseState=this.state,this.state=Rk.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,Ik.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,Ik.SingleQuote)}stateInAttributeValueNoQuotes(e){Uk(e)||e===Ik.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Dk.Unquoted,this.index),this.state=Rk.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===Ik.Amp&&(this.baseState=this.state,this.state=Rk.BeforeEntity)}stateBeforeDeclaration(e){e===Ik.OpeningSquareBracket?(this.state=Rk.CDATASequence,this.sequenceIndex=0):this.state=e===Ik.Dash?Rk.BeforeComment:Rk.InDeclaration}stateInDeclaration(e){(e===Ik.Gt||this.fastForwardTo(Ik.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=Rk.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===Ik.Gt||this.fastForwardTo(Ik.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=Rk.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===Ik.Dash?(this.state=Rk.InCommentLike,this.currentSequence=Gk.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=Rk.InDeclaration}stateInSpecialComment(e){(e===Ik.Gt||this.fastForwardTo(Ik.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=Rk.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const t=32|e;t===Gk.ScriptEnd[3]?this.startSpecial(Gk.ScriptEnd,4):t===Gk.StyleEnd[3]?this.startSpecial(Gk.StyleEnd,4):(this.state=Rk.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===Ik.Number?this.state=Rk.BeforeNumericEntity:e===Ik.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=Rk.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=Bk(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];const t=this.trieCurrent&kk.VALUE_LENGTH;if(t){const n=(t>>14)-1;if(this.allowLegacyEntity()||e===Ik.Semi){const e=this.index-this.entityExcess+1;e>this.sectionStart&&this.emitPartial(this.sectionStart,e),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}}emitNamedEntity(){if(this.state=this.baseState,0===this.entityResult)return;switch((this.entityTrie[this.entityResult]&kk.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~kk.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(32|e)===Ik.LowerX?(this.entityExcess++,this.state=Rk.InHexEntity):(this.state=Rk.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const t=this.index-this.entityExcess-1;t+2+Number(this.state===Rk.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint(wk(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===Ik.Semi?this.emitNumericEntity(!0):jk(e)?(this.entityResult=10*this.entityResult+(e-Ik.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===Ik.Semi?this.emitNumericEntity(!0):jk(e)?(this.entityResult=16*this.entityResult+(e-Ik.Zero),this.entityExcess++):!function(e){return e>=Ik.UpperA&&e<=Ik.UpperF||e>=Ik.LowerA&&e<=Ik.LowerF}(e)?(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--):(this.entityResult=16*this.entityResult+((32|e)-Ik.LowerA+10),this.entityExcess++)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===Rk.Text||this.baseState===Rk.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===Rk.Text||this.state===Rk.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==Rk.InAttributeValueDq&&this.state!==Rk.InAttributeValueSq&&this.state!==Rk.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case Rk.Text:this.stateText(e);break;case Rk.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case Rk.InSpecialTag:this.stateInSpecialTag(e);break;case Rk.CDATASequence:this.stateCDATASequence(e);break;case Rk.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case Rk.InAttributeName:this.stateInAttributeName(e);break;case Rk.InCommentLike:this.stateInCommentLike(e);break;case Rk.InSpecialComment:this.stateInSpecialComment(e);break;case Rk.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case Rk.InTagName:this.stateInTagName(e);break;case Rk.InClosingTagName:this.stateInClosingTagName(e);break;case Rk.BeforeTagName:this.stateBeforeTagName(e);break;case Rk.AfterAttributeName:this.stateAfterAttributeName(e);break;case Rk.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case Rk.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case Rk.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case Rk.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case Rk.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case Rk.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case Rk.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case Rk.InDeclaration:this.stateInDeclaration(e);break;case Rk.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case Rk.BeforeComment:this.stateBeforeComment(e);break;case Rk.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case Rk.InNamedEntity:this.stateInNamedEntity(e);break;case Rk.BeforeEntity:this.stateBeforeEntity(e);break;case Rk.InHexEntity:this.stateInHexEntity(e);break;case Rk.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===Rk.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===Rk.InCommentLike?this.currentSequence===Gk.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===Rk.InNumericEntity&&this.allowLegacyEntity()||this.state===Rk.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Rk.InTagName||this.state===Rk.BeforeAttributeName||this.state===Rk.BeforeAttributeValue||this.state===Rk.AfterAttributeName||this.state===Rk.InAttributeName||this.state===Rk.InAttributeValueSq||this.state===Rk.InAttributeValueDq||this.state===Rk.InAttributeValueNq||this.state===Rk.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,t){this.baseState!==Rk.Text&&this.baseState!==Rk.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)}emitCodePoint(e){this.baseState!==Rk.Text&&this.baseState!==Rk.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const qk=new Set(["input","option","optgroup","select","button","datalist","textarea"]),zk=new Set(["p"]),Wk=new Set(["thead","tbody"]),Yk=new Set(["dd","dt"]),Vk=new Set(["rt","rp"]),Kk=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",zk],["h1",zk],["h2",zk],["h3",zk],["h4",zk],["h5",zk],["h6",zk],["select",qk],["input",qk],["output",qk],["button",qk],["datalist",qk],["textarea",qk],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Yk],["dt",Yk],["address",zk],["article",zk],["aside",zk],["blockquote",zk],["details",zk],["div",zk],["dl",zk],["fieldset",zk],["figcaption",zk],["figure",zk],["footer",zk],["form",zk],["header",zk],["hr",zk],["main",zk],["nav",zk],["ol",zk],["pre",zk],["section",zk],["table",zk],["ul",zk],["rt",Vk],["rp",Vk],["tbody",Wk],["tfoot",Wk]]),Qk=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Xk=new Set(["math","svg"]),Zk=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Jk=/\s|\//;class eC{constructor(e,t={}){var n,s,i,r,a;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(s=t.lowerCaseAttributeNames)&&void 0!==s?s:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:$k)(this.options,this),null===(a=(r=this.cbs).onparserinit)||void 0===a||a.call(r,this)}ontext(e,t){var n,s;const i=this.getSlice(e,t);this.endIndex=t-1,null===(s=(n=this.cbs).ontext)||void 0===s||s.call(n,i),this.startIndex=t}ontextentity(e){var t,n;const s=this.tokenizer.getSectionStart();this.endIndex=s-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,Sk(e)),this.startIndex=s}isVoidElement(e){return!this.options.xmlMode&&Qk.has(e)}onopentagname(e,t){this.endIndex=t;let n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(e){var t,n,s,i;this.openTagStart=this.startIndex,this.tagname=e;const r=!this.options.xmlMode&&Kk.get(e);if(r)for(;this.stack.length>0&&r.has(this.stack[this.stack.length-1]);){const e=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,e,!0)}this.isVoidElement(e)||(this.stack.push(e),Xk.has(e)?this.foreignContext.push(!0):Zk.has(e)&&this.foreignContext.push(!1)),null===(i=(s=this.cbs).onopentagname)||void 0===i||i.call(s,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,t){var n,s,i,r,a,o;this.endIndex=t;let c=this.getSlice(e,t);if(this.lowerCaseTagNames&&(c=c.toLowerCase()),(Xk.has(c)||Zk.has(c))&&this.foreignContext.pop(),this.isVoidElement(c))this.options.xmlMode||"br"!==c||(null===(s=(n=this.cbs).onopentagname)||void 0===s||s.call(n,"br"),null===(r=(i=this.cbs).onopentag)||void 0===r||r.call(i,"br",{},!0),null===(o=(a=this.cbs).onclosetag)||void 0===o||o.call(a,"br",!1));else{const e=this.stack.lastIndexOf(c);if(-1!==e)if(this.cbs.onclosetag){let t=this.stack.length-e;for(;t--;)this.cbs.onclosetag(this.stack.pop(),0!==t)}else this.stack.length=e;else this.options.xmlMode||"p"!==c||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var t,n;const s=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===s&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,s,!e),this.stack.pop())}onattribname(e,t){this.startIndex=e;const n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(e,t){this.attribvalue+=this.getSlice(e,t)}onattribentity(e){this.attribvalue+=Sk(e)}onattribend(e,t){var n,s;this.endIndex=t,null===(s=(n=this.cbs).onattribute)||void 0===s||s.call(n,this.attribname,this.attribvalue,e===Dk.Double?'"':e===Dk.Single?"'":e===Dk.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const t=e.search(Jk);let n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`!${e}`,`!${n}`)}this.startIndex=t+1}onprocessinginstruction(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`?${e}`,`?${n}`)}this.startIndex=t+1}oncomment(e,t,n){var s,i,r,a;this.endIndex=t,null===(i=(s=this.cbs).oncomment)||void 0===i||i.call(s,this.getSlice(e,t-n)),null===(a=(r=this.cbs).oncommentend)||void 0===a||a.call(r),this.startIndex=t+1}oncdata(e,t,n){var s,i,r,a,o,c,l,u,d,p;this.endIndex=t;const h=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(s=this.cbs).oncdatastart)||void 0===i||i.call(s),null===(a=(r=this.cbs).ontext)||void 0===a||a.call(r,h),null===(c=(o=this.cbs).oncdataend)||void 0===c||c.call(o)):(null===(u=(l=this.cbs).oncomment)||void 0===u||u.call(l,`[CDATA[${h}]]`),null===(p=(d=this.cbs).oncommentend)||void 0===p||p.call(d)),this.startIndex=t+1}onend(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let e=this.stack.length;e>0;this.cbs.onclosetag(this.stack[--e],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)}reset(){var e,t,n,s;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(s=(n=this.cbs).onparserinit)||void 0===s||s.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);for(;t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))}end(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}class tC{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return uC(this,e)}}class nC extends tC{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class sC extends nC{constructor(){super(...arguments),this.type=ZE.Text}get nodeType(){return 3}}class iC extends nC{constructor(){super(...arguments),this.type=ZE.Comment}get nodeType(){return 8}}class rC extends nC{constructor(e,t){super(t),this.name=e,this.type=ZE.Directive}get nodeType(){return 1}}class aC extends tC{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class oC extends aC{constructor(){super(...arguments),this.type=ZE.CDATA}get nodeType(){return 4}}class cC extends aC{constructor(){super(...arguments),this.type=ZE.Root}get nodeType(){return 9}}class lC extends aC{constructor(e,t,n=[],s=("script"===e?ZE.Script:"style"===e?ZE.Style:ZE.Tag)){super(n),this.name=e,this.attribs=t,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}}function uC(e,t=!1){let n;if(function(e){return e.type===ZE.Text}(e))n=new sC(e.data);else if(function(e){return e.type===ZE.Comment}(e))n=new iC(e.data);else if(function(e){return JE(e)}(e)){const s=t?dC(e.children):[],i=new lC(e.name,{...e.attribs},s);s.forEach((e=>e.parent=i)),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=i}else if(function(e){return e.type===ZE.CDATA}(e)){const s=t?dC(e.children):[],i=new oC(s);s.forEach((e=>e.parent=i)),n=i}else if(function(e){return e.type===ZE.Root}(e)){const s=t?dC(e.children):[],i=new cC(s);s.forEach((e=>e.parent=i)),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else{if(!function(e){return e.type===ZE.Directive}(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new rC(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function dC(e){const t=e.map((e=>uC(e,!0)));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}const pC={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class hC{constructor(e,t,n){this.dom=[],this.root=new cC(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=pC),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:pC,this.elementCB=null!=n?n:null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new cC(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,t){const n=this.options.xmlMode?ZE.Tag:void 0,s=new lC(e,t,void 0,n);this.addNode(s),this.tagStack.push(s)}ontext(e){const{lastNode:t}=this;if(t&&t.type===ZE.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{const t=new sC(e);this.addNode(t),this.lastNode=t}}oncomment(e){if(this.lastNode&&this.lastNode.type===ZE.Comment)return void(this.lastNode.data+=e);const t=new iC(e);this.addNode(t),this.lastNode=t}oncommentend(){this.lastNode=null}oncdatastart(){const e=new sC(""),t=new oC([e]);this.addNode(t),e.parent=t,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,t){const n=new rC(e,t);this.addNode(n)}handleCallback(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e}addNode(e){const t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null}}const fC=function(e){return function(t,n,s,i){if("undefined"!=typeof Buffer&&Buffer.isBuffer(t)&&(t=t.toString()),"string"==typeof t)return e(t,n,s,i);const r=t;if(!Array.isArray(r)&&Tb(r))return r;const a=new gb([]);return WA(r,a),a}}(((e,t,n,s)=>t.xmlMode||t._useHtmlParser2?function(e,t){const n=new hC(void 0,t);return new eC(n,t).end(e),n.root}(e,t):yk(e,t,n,s))),mC=function(e,t){return function n(s,i,r=!0){if(null==s)throw new Error("cheerio.load() expects a string");const a={...KE,...XE(i)},o=e(s,a,r,null);class c extends cS{_make(e,t){const n=l(e,t);return n.prevObject=this,n}_parse(t,n,s,i){return e(t,n,s,i)}_render(e){return t(e,this.options)}}function l(t,n,s=o,i){if(t&&nv(t))return t;const r={...a,...XE(i)},l="string"==typeof s?[e(s,r,!1,null)]:"length"in s?s:[s],u=nv(l)?l:new c(l,null,r);if(u._root=u,!t)return new c(void 0,u,r);const d="string"==typeof t&&rv(t)?e(t,r,!1,null).children:(p=t).name||"root"===p.type||"text"===p.type||"comment"===p.type?[t]:Array.isArray(t)?t:void 0;var p;const h=new c(d,u,r);if(d)return h;if("string"!=typeof t)throw new Error("Unexpected type of selector");let f=t;const m=n?"string"==typeof n?rv(n)?new c([e(n,r,!1,null)],u,r):(f=`${n} ${f}`,u):nv(n)?n:new c(Array.isArray(n)?n:[n],u,r):u;return m?m.find(f):h}return Object.assign(l,tv,{load:n,_root:o,_options:a,fn:c.prototype,prototype:c.prototype}),l}}(fC,((e,t)=>t.xmlMode||t._useHtmlParser2?Bb(e,t):function(e){const t="length"in e?e:[e];for(let e=0;e<t.length;e+=1){const n=t[e];Tb(n)&&Array.prototype.splice.call(t,e,1,...n.children)}let n="";for(let e=0;e<t.length;e+=1)n+=Zx(t[e],Ek);return n}(e)));mC([]);const gC=class{constructor(){}async getApartmentList(){return await this.getRealItems()}async getCoordiantesFromAdress(e){const t=await Ki.get("https://nominatim.openstreetmap.org/search",{params:{q:e,format:"json"}});return t.data&&t.data.length>0?{latitude:t.data[0].lat,longitude:t.data[0].lon}:null}getImageUrlFromElement(e,t){var n;try{let s=e(t).find("div.mensaImag"),i=null==(n=null==s?void 0:s[0])?void 0:n.attribs,r=null==i?void 0:i.style;if(!r)return;const a=r.split("url(");if(a.length<2)return;const o=a[1];if(!o)return;let c=o.split(")")[0];if(!c)return;return gC.baseUrl+c}catch(e){return console.log("Error while fetching image url"),void console.log(e)}}async getRealItems(){try{let e=await Ki.get(gC.apartmentsUrl);const t=mC(e.data);let n=[];return t("div.wohnheimListView").each(((e,s)=>{let i=t(s).find("h3").text().trim(),r=this.getImageUrlFromElement(t,s),a=gC.baseUrl+t(s).find("a").attr("href");n.push({basicData:{external_identifier:"apartment_"+i.replace(/\W+/g,"_"),available_from:null,handicapped_accessible:!1,family_friendly:!1,singleflat:!1},buildingData:{external_identifier:"building_"+i.replace(/\W+/g,"_"),url:a,alias:i,image_remote_url:r,year_of_construction:null}})})),n}catch(e){return console.log(e),[]}}};let _C=gC;_C.baseUrl="https://www.studentenwerk-hannover.de",_C.apartmentsUrl=`${gC.baseUrl}/wohnen/wohnhaeuser`;class yC extends q_{constructor(e){super(),this.parserInterface=e}getWorkflowId(){return"housing-sync"}async runJob(e,t,n){await n.appendLog("Starting sync housing parsing");try{const s=new VE(e,t,n,this.parserInterface);return await s.parse()}catch(e){return await n.appendLog("Error: "+e.toString()),n.getFinalLogWithStateAndParams({state:zo.FAILED})}}}var EC=async({action:e,init:t,schedule:n},s)=>{let i=null;switch(Vo.getSyncForCustomer()){case Yo.TEST:i=null;break;case Yo.HANNOVER:i=new _C;break;case Yo.OSNABRUECK:i=null}if(null===i)return;let r=new Xo(s);W_.registerScheduleToRunWorkflowRuns({workflowRunInterface:new yC(i),myDatabaseHelper:r,schedule:n,cronOject:W_.EVERY_DAY_AT_4AM})};class bC{constructor(e,t,n,s){this.parser=s,this.myDatabaseHelper=t,this.workflowRun=e,this.logger=n}async parse(){await this.logger.appendLog("Starting washingmachine parsing");try{await this.logger.appendLog("Getting washingmachines from parser");let e=await this.parser.getWashingmachines();return await this.logger.appendLog("Updating washingmachines"),await this.updateWashingmachines(e),await this.logger.appendLog("Finished washingmachine parsing"),this.logger.getFinalLogWithStateAndParams({state:zo.SUCCESS})}catch(e){return await this.logger.appendLog("Error: "+e.toString()),this.logger.getFinalLogWithStateAndParams({state:zo.FAILED})}}async updateWashingmachines(e){for(let t of e)await this.updateWashingmachine(t)}async updateWashingmachine(e){let t=this.myDatabaseHelper.getWashingmachinesHelper();const n={external_identifier:e.basicData.external_identifier},s=n;let i=await t.findOrCreateItem(n,s);if(i){const n=i.alias;let s=n&&n.length>0?n:e.basicData.alias,r=null===i.date_finished&&null!==e.basicData.date_finished,a=null===e.basicData.date_finished;const o={};r&&(o.date_stated=(new Date).toISOString()),a&&(o.date_stated=null),await t.updateOne(i.id,{...e.basicData,...o,alias:s})}}}class vC{constructor(){}async getWashingmachines(){let e=[],t="test_washingmachine_1",n="test_washingmachine_2",s=new Date;s.setMinutes(s.getMinutes()+(5-s.getMinutes()%5));let i=s.getMinutes()%10<5,r=i?n:t,a={external_identifier:i?t:n,date_finished:Po.formatDateToIso8601WithoutTimezone(s)},o={external_identifier:r,date_finished:null};return e.push({basicData:a}),e.push({basicData:o}),e}}const TC=class{constructor(){}static getWasherExternalIdentifier(e,t){return"osnabrueck_"+e+"_"+t}async getWashingmachines(e){let t=[],n=await TC.getAllTerminalFromIntercard();for(let s=0;s<n.length;s++){let i=n[s];if(i){let n=TC.getWasherExternalIdentifier(i.terminalNr,i.automateNr),s=null;if(i.intercardStatus&&i.expectedFreeTimeInMinutes>0){let t=new Date(e||new Date);t.setMinutes(t.getMinutes()+i.expectedFreeTimeInMinutes),s=Po.formatDateToIso8601WithoutTimezone(t)}else s=null;let r={external_identifier:n,alias:"Washingmachine "+i.terminalNr+" "+i.automateNr,date_updated:Po.formatDateToIso8601WithoutTimezone(new Date),date_finished:s};t.push({basicData:r})}}return this.filterDuplicateWashingmachines(t)}filterDuplicateWashingmachines(e){let t=[],n=new Map;for(let t=0;t<e.length;t++){let s=e[t];if(s){let e=s.basicData.external_identifier;n.get(e)?s.basicData.date_finished&&n.set(e,s):n.set(e,s)}}return n.forEach(((e,n)=>{t.push(e)})),t}static async getAllTerminalFromIntercard(){let e=await TC.getAllTerminalsRawFromIntercard();if(!e)throw new Error("No HTML from Intercard");return await TC.parseTerminalsRawFromIntercardToJSON(e)}static async getAllTerminalsRawFromIntercard(){let e=TC.getAllTerminalsUrl;try{let t=await Ki.get(e),n=t.data;if(n&&"string"==typeof n)return t.data}catch(e){console.error("Error getting data from Intercard"),console.error(e.toString())}return null}static async parseTerminalsRawFromIntercardToJSON(e){let t=[];try{const n=mC(e);n("table tr").each(((e,s)=>{if(0===e)return;let i=n(s).find("td");if(4===i.length){let e={terminalNr:parseInt(n(i[0]).text()),automateNr:parseInt(n(i[1]).text()),intercardStatus:"belegt"===n(i[2]).text().toLowerCase(),expectedFreeTimeInMinutes:parseInt(n(i[3]).text())};t.push(e)}}))}catch(e){console.error("Error parsing HTML",e)}return t}};let AC=TC;AC.url="https://swic.sw-os.de/smartWASH-SimpleWebClient/",AC.getAllTerminalsUrl=TC.url+"allTerminals";class SC extends q_{constructor(e){super(),this.usedParser=e}getWorkflowId(){return"washingmachines-parse"}async runJob(e,t,n){await n.appendLog("Starting washingmachine parsing");const s=new bC(e,t,n,this.usedParser);try{return await s.parse()}catch(e){return await n.appendLog("Error: "+e.toString()),n.getFinalLogWithStateAndParams({state:zo.FAILED})}}}var wC=async(e,t)=>{const{action:n,filter:s,schedule:i}=e;!function(e,t){const{filter:n}=t;n(go.WASHINGMACHINES+".items.update",(async(t,{keys:n,collection:s},i)=>{if(!n||0===n.length)throw new Error("No keys provided for update");let r=n,a=t,o=a.date_finished;if(Object.prototype.hasOwnProperty.call(a,"date_finished")&&null===o){let t=new Xo(e,i);if(r)for(let e of r){let n=await t.getWashingmachinesHelper().readOne(e),s=n.date_stated,i=n.date_finished;if(s&&i){let e=new Date(i).getTime()-new Date(s).getTime();if(e>0){let r=parseInt(e/1e3/60/60+"")+":"+parseInt(e/1e3/60%60+"")+":"+parseInt(e/1e3%60+"");const a=parseInt(e/1e3/60+""),o=10*Math.ceil(a/10);await t.getWashingmachinesJobsHelper().createOne({date_start:s,date_end:i,duration_calculated:r,duration_in_minutes_calculated:a,duration_in_minutes_rounded_10min_calculated:o,washingmachine:n.id,apartment:n.apartment})}}}}return t}))}(t,e);let r=null;switch(Vo.getSyncForCustomer()){case Yo.TEST:r=new vC;break;case Yo.HANNOVER:r=null;break;case Yo.OSNABRUECK:r=new AC}if(!r)return void console.log("No Parser set for Washingmachine Sync");let a=new Xo(t);W_.registerScheduleToRunWorkflowRuns({workflowRunInterface:new SC(r),myDatabaseHelper:a,schedule:i,cronOject:W_.EVERY_DAY_AT_17_59})};var xC=async({schedule:e,action:t,filter:n},s)=>{await yo.checkAllTablesExistWithApiContext("food_feedback_report",s)&&(t(go.MAILS_FILES+".items.create",(async(e,t)=>{let n=e.key,i=new Xo(s);await i.getMailsHelper();let r=await i.getMailsFilesHelper();console.log("Action get mail file with id: ",n);let a,o=await r.readOne(n);console.log("Action found mail files: ");let c=o.directus_files_id;if(c&&(a="string"==typeof c?c:c.id),!a)return void console.log("Action: directus_files_id is undefined - skipping");console.log("Action: found directus_files_id: ",a);let l=i.getFilesHelper();try{console.log("Action: setting mails_files_id ",o.id," for file: ",a),await l.updateOne(a,{mails_files_id:o.id})}catch(e){console.error("Action: Error setting mail_id for file: ",e)}})),n("shares.create",(async(e,t,n)=>(console.log("Filter: shares.create: "),console.log(JSON.stringify(e,null,2)),console.log("Accountability: "),console.log(JSON.stringify(n.accountability,null,2)),e))),n(go.MAILS+".items.create",(async(e,t,n)=>{let i=new Xo(s,n);console.log("Filter: Mails create: ",e),e.send_status="pending";let r=e.send_attachments_as_links;void 0===r&&(r=!0),e.template_name||(e.template_name="base-german-markdown-content");try{let t=[];console.log("input: "),console.log(JSON.stringify(e,null,2));let n=[];if(e.attachments){let t=e.attachments.create;if(t)for(let e of t){let t=e.directus_files_id;t&&("string"==typeof t?n.push(t):n.push(t.id))}}let a=i.getFilesHelper(),o=[];for(let e of n)try{let n=await a.readOne(e);if(r){let t=n.filename_disk||n.filename_download||"file",s=await a.createDirectusFilesShareLink({directus_files_id:e,name:t});s&&o.push({name:t,url:s})}else{let s=await a.readFileContent(e);t.push({filename:n.filename_download,content:s})}}catch(e){console.error("Filter: Error reading file: ",e)}let c=e.markdown_content;if(o.length>0){c+="\n\n",c+="\n\t\t\t\t\tSie knnen die Anhnge ber folgende Links herunterladen:\n\t\t\t\t\t\n\t\t\t\t\t";for(let e of o)c+=`\n\t\t\t\t\t\t[${e.name}](${e.url})\n\t\t\t\t\t`}e.markdown_content=c;let l=function(e){let t={};var n;return e.template_data&&(t={...t,...e.template_data}),e.markdown_content&&(t={...t,mailContentFieldRenderedAsHtml:(n=e.markdown_content,new hh({html:!0}).render(n))}),t}(e),u=await async function(e){let{MailService:t}=s.services;const n=s.getSchema;let i=new t({accountability:null,knex:s.database,schema:await n()});return await i.send(e)}({to:e.recipient,subject:e.subject,template:{name:e.template_name,data:l},attachments:t});e.send_status="success",e.log=JSON.stringify(u,null,2)}catch(t){e.send_status="failed",e.log=t.toString()}return e})))};class kC{constructor(e,t,n,s){this.workflowRun=e,this.myDatabaseHelper=t,this.logger=n,this.parser=s}async parse(){await this.logger.appendLog("Starting sync news parsing");try{await this.logger.appendLog("Getting news items");let e=await this.parser.getNewsItems();return await this.updateNews(e),await this.logger.appendLog("Finished"),await this.logger.getFinalLogWithStateAndParams({state:zo.SUCCESS})}catch(e){await this.logger.appendLog("Error: "+e.toString())}return await this.logger.getFinalLogWithStateAndParams({state:zo.FAILED})}async findOrCreateSingleNews(e){let t=await this.myDatabaseHelper.getNewsHelper();const n={external_identifier:null==e?void 0:e.basicNews.external_identifier};return await t.findOrCreateItem(n,n)}async updateNewsTranslations(e,t){await Oo.updateItemTranslations(e,t.translations,"news_id",go.NEWS,this.myDatabaseHelper.apiContext)}async updateOtherFields(e,t){let n=this.myDatabaseHelper.getNewsHelper();await n.updateOne(null==e?void 0:e.id,t.basicNews)}async updateNews(e){for(let t of e){let e=await this.findOrCreateSingleNews(t);e&&(null==e?void 0:e.id)&&(await this.updateOtherFields(e,t),await this.updateNewsTranslations(e,t))}}}class CC{constructor(){}async getNewsItems(){return[this.getDemoNewsItem("1"),this.getDemoNewsItem("2"),this.getDemoNewsItem("3")]}getDemoNewsItem(e){return{basicNews:{external_identifier:e,image_remote_url:"https://images.pexels.com/photos/1462630/pexels-photo-1462630.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",url:"https://www.pexels.com/de-de/foto/frau-die-im-flur-steht-wahrend-buch-halt-1462630/"},translations:{[Oo.LANGUAGE_CODE_DE]:{title:"Test News "+e,content:"Das ist ein Test News Artikel",be_source_for_translations:!0,let_be_translated:!1}}}}}const NC=class{constructor(){}async getNewsItems(e){return[...await this.getRealNewsItems(e)]}async getRealNewsItems(e){try{let t=await this.fetchNewsPage();return NC.parseNewsItems(t.data,e)}catch(e){return console.log(e),[]}}async fetchNewsPage(){return Ki.get(NC.newsUrl)}static async fetchArticlePage(e){return Ki.get(e)}static async parseNewsItems(e,t){const n=mC(e);let s=[],i=n("div.article"),r=t?Math.min(t,i.length):i.length;for(let e=0;e<i.length&&e<r;e++){let t=i[e],r=NC.extractImageUrl(n,t),a=n(t).find("h3").text().trim(),o=n(t).find("div.news_slider-content_teaser").text().trim(),c=NC.extractArticleUrl(n,t),l=await NC.fetchArticleDate(c),u=NC.extractCategories(n,t);s.push({basicNews:{external_identifier:"news_"+a.replace(/\W+/g,"_"),image_remote_url:r,alias:a,date:l,url:c,categories:u},translations:{[Oo.LANGUAGE_CODE_DE]:{title:a,content:o,be_source_for_translations:!0,let_be_translated:!1}}})}return s.reverse(),s}static extractImageUrl(e,t){let n=e(t).find("div.news-slider-image").attr("style"),s=n?n.match(/url\(['"]?(.*?)['"]?\)/):null;return s?NC.baseUrl+s[1]:""}static extractArticleUrl(e,t){let n=e(t).find("a.articleLink").attr("href");if(n&&n.startsWith(NC.newsDetailArticleUrlStart))return NC.baseUrl+n}static async fetchArticleDate(e){if(!e)return null;try{let t=await this.fetchArticlePage(e);let n=mC(t.data)(".news-list-date").text().trim().split("."),s=new Date(parseInt(n[2]),parseInt(n[1])-1,parseInt(n[0]));return s.setHours(12,0,0,0),s.toISOString()}catch(t){return console.log("Error fetching article page: "+e),null}}static extractCategories(e,t){let n={};return e(t).find("div.news_slider-content_categorie").each(((t,s)=>{let i=e(s).text().trim();i&&(n[i]=i)})),n}};let IC=NC;IC.baseUrl="https://www.studentenwerk-hannover.de",IC.newsUrl=`${NC.baseUrl}/unternehmen/news`,IC.newsDetailArticleUrlStart="/unternehmen/news";const RC=class{constructor(){}async getNewsItems(){return[...await this.getRealNewsItems()]}async getRealNewsItems(){try{let e=await Ki.get(RC.newsUrl),t=mC(e.data),n=t("div.article"),s=[];for(let e=0;e<n.length;e++){let i=n[e],r=t(i).find("img"),a=r.length?RC.baseUrl+r.attr("src"):"",o=t(i).find("a"),c=o.length?RC.baseUrl+o.attr("href"):"",l=await this.getArticleDetails(c),u=t(i).find("span"),d=u.length?u.text().trim():"",p=t(i).find("div.teaser-text").find("div"),h=p.length?p.text().trim():"";h=h.replace(/Weiterlesen$/,"").trim(),h=h.replace(/\n$/,"").trim(),h=h.replace(/\t$/,"").trim(),h=h.replace(/&nbsp;/g," ").trim(),s.push({basicNews:{external_identifier:"news_"+d.replace(/\W+/g,"_"),image_remote_url:a,alias:d,date:(null==l?void 0:l.date)?l.date.toISOString():null,url:c,categories:{}},translations:{[Oo.LANGUAGE_CODE_DE]:{title:d,content:h,be_source_for_translations:!0,let_be_translated:!1}}})}return s.reverse(),s}catch(e){console.log(e)}return[]}async getArticleDetails(e){let t={};try{let n=await Ki.get(e),s=mC(n.data)("div.datum"),i=s.length?s.text().trim():null;if(i){let e=i.split(".");if(3===e.length){let n,s=parseInt(e[0]+""),i=parseInt(e[1]+""),r=parseInt(e[2]+"");if(r<100){let e=(new Date).getFullYear(),t=parseInt((""+e).substring(0,2));n=parseInt(t+""+r)}else n=r;n&&(t.date=new Date(n,i-1,s,12,0,0))}}}catch(t){console.log("Error while fetching article details: "+e),console.log(t)}return t}};let DC=RC;DC.baseUrl="https://www.studentenwerk-osnabrueck.de/",DC.newsUrl="https://www.studentenwerk-osnabrueck.de/de/nachrichten.html",DC.newsArticleUrl="https://www.studentenwerk-osnabrueck.de//de/nachrichten/artikel-details";class OC extends q_{constructor(e){super(),this.newsParserInterface=e}getWorkflowId(){return"news-sync"}async runJob(e,t,n){await n.appendLog("Starting sync news parsing");try{const s=new kC(e,t,n,this.newsParserInterface);return await s.parse()}catch(e){return await n.appendLog("Error: "+e.toString()),n.getFinalLogWithStateAndParams({state:zo.FAILED})}}}var LC=async({action:e,init:t,schedule:n},s)=>{let i=null;switch(Vo.getSyncForCustomer()){case Yo.TEST:i=new CC;break;case Yo.HANNOVER:i=new IC;break;case Yo.OSNABRUECK:i=new DC}if(!i)return;let r=new Xo(s);W_.registerScheduleToRunWorkflowRuns({workflowRunInterface:new OC(i),myDatabaseHelper:r,schedule:n,cronOject:W_.EVERY_DAY_AT_4AM})};var FC=async({filter:e,schedule:t},n)=>{if(!await yo.checkAllTablesExistWithApiContext("profile_create",n))return;const s=new Xo(n);let i=s.getUsersHelper(),r=s.getProfilesHelper();t("0 * * * * *",(async()=>{let e=await i.readByQuery({filter:{profile:{_null:!0}},limit:-1});if(e&&e.length>0){console.log("Users without profiles: "+e.length);for(let t of e)try{let e=await r.createOne({});e&&"string"==typeof e&&(console.log("Created profile for user: "+t.id),await i.updateOne(t.id,{profile:e}))}catch(e){console.log("profileCreateHook: Error while creating profile for user: "+t.id),console.log(e)}}})),e(F_.USERS_LOGIN_EVENT,(async(e,t,n)=>{const{database:s}=n;let a=t.user;const o=(await s(go.USERS).where({id:a}))[0];if(!o)throw new Error("profileCreateHook: No user found with id: "+a);if(null==o?void 0:o.profile)return e;try{console.log("Creating profile for user: "+a);let t=await r.createOne({});if(console.log("Created profile for user: "+a),t&&"string"==typeof t)return console.log("New profile id: "+t),await i.updateOne(a,{profile:t}),e}catch(t){return console.log("profileCreateHook: Error while creating profile for user: "+a),console.log(t),e}return e}))};var MC=async({filter:e},t)=>{const n=go.PUSH_NOTIFICATIONS;if(!await yo.checkAllTablesExistWithApiContext("push_notification",t))return;const s=new Xo(t);async function i(e,t){console.log("Sending notification..."),console.log("Payload:"),console.log(e);let n,s,i,r=e.expo_push_tokens,a=e.expo_push_tokens;if("string"==typeof r?(console.log("expo_push_tokens is a string"),a=JSON.parse(r)):"object"==typeof r&&console.log("expo_push_tokens is an object"),!a)throw t.status="failed",t.status_log="expo_push_tokens is empty",new Error("expo_push_tokens is empty");console.log("expoPushTokens:"),console.log(a),e.message_title&&(n=e.message_title),e.message_body&&(s=e.message_body),e.message_data&&(i=e.message_data);const o=a.map((e=>({to:e,sound:"default",title:n,body:s,data:i})));console.log("Messages:"),console.log(o);try{await Ki.post("https://exp.host/--/api/v2/push/send",o)}catch(e){throw console.log(`Failed to send notification: ${e.message}`),t.status="failed",t.status_log=null==e?void 0:e.message.toString(),new Error(`Failed to send notification: ${e.message}`)}}e(n+".items.create",(async(e,{collection:t})=>("published"===e.status&&(await i(e,e),e.status="published"),e))),e(n+".items.update",(async(e,{keys:t,collection:n})=>{let r=s.getPushNotificationsHelper();if(!t||0===t.length)throw new Error("No keys provided for update");for(let n=0;n<t.length;n++){const s=t[n],a=await r.readByQuery({filter:{id:s}});if(!a||0===a.length)throw new Error(`Item with ID ${s} not found`);const o=a[0];if(o){for(const t in e)void 0!==e[t]&&(o[t]=e[t]);Fo.isStatusPublished(o)&&(await i(o,e),e=Fo.setStatusPublished(e))}}return e}))},PC=1e3,BC=6e4,UC=60*BC,HC=24*UC,jC=7*HC,GC=365.25*HC,$C=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*GC;case"weeks":case"week":case"w":return n*jC;case"days":case"day":case"d":return n*HC;case"hours":case"hour":case"hrs":case"hr":case"h":return n*UC;case"minutes":case"minute":case"mins":case"min":case"m":return n*BC;case"seconds":case"second":case"secs":case"sec":case"s":return n*PC;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=HC)return qC(e,t,HC,"day");if(t>=UC)return qC(e,t,UC,"hour");if(t>=BC)return qC(e,t,BC,"minute");if(t>=PC)return qC(e,t,PC,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=HC)return Math.round(e/HC)+"d";if(t>=UC)return Math.round(e/UC)+"h";if(t>=BC)return Math.round(e/BC)+"m";if(t>=PC)return Math.round(e/PC)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function qC(e,t,n,s){var i=t>=1.5*n;return Math.round(e/n)+" "+s+(i?"s":"")}var zC=$($C);class WC{static replaceAll(e,t,n){return e.replace(new RegExp(t,"g"),n)}}process.env.PUBLIC_URL;const YC="WILDCARD_REPLACEMENT";function VC(e,t){let n=t.split(YC),s=n.length>1?n[0]:t;return s.endsWith("/")&&(s=s.slice(0,-1)),e.startsWith(s)}function KC(e,t){if(!e)return!1;if("*"===e)return!0;const n=t.protocol,s=t.host,i=t.pathname,r=t.search;if(e.includes("://")){if(n.includes(YC))return!1;{let t=WC.replaceAll(e,"\\*",YC),a=new URL(t);const o=a.protocol,c=a.host,l=a.pathname,u=a.search;if(!VC(n,o))return!1;if(!VC(s,c))return!1;if(!VC(i,l))return!1;return!!VC(r,u)}}{let n="https://"+e,s=KC("http://"+e,t),i=KC(n,t);return s||i}}var QC={id:"redirect-with-token",handler:(e,t)=>{e.get("/",(async(e,n)=>{var s;if(!await yo.checkAllTablesExistWithApiContext("redirect_with_token",t))return;const i=e.headers.referer+"";console.log("REFERER: "+i);if(!["https://accounts.google.com/","https://appleid.apple.com/"].includes(i))return void n.status(400).send("Invalid referer URL ("+i+"). Please contact the administrator: info@rocket-meals.de");console.log("redirect comes from valid referer");const{services:r,database:a,getSchema:o,env:c,logger:l}=t,u=new Xo(t);let d=!0,p=e.query.redirect;if(p&&"string"==typeof p){let e=function(e){try{return new URL(e)}catch(e){return null}}(p);if(e){const t=await u.getAppSettingsHelper().getRedirectWhitelist();if(t){let n=!1;0===t.length&&(n=!0);for(let s=0;s<t.length&&!n;s++){let i=t[s];try{if(KC(i,e)){n=!0;break}}catch(t){console.log("Error in redirect with token endpoint"),console.log("redirectUrl: "+e),console.log("redirect_whitelist_entry: "+i),console.log(t)}}d=n}}else d=!1}else d=!1;if(!d)return void n.status(400).send("Invalid redirect URL ("+p+"). Please contact the administrator: info@rocket-meals.de");const h=e.cookies.directus_refresh_token;if(h){const e=p+h;return void n.redirect(e)}if(e.cookies.directus_session_token){const t=null==e?void 0:e.accountability,i=null==(s=null==e?void 0:e.accountability)?void 0:s.user;if(!i)return void n.status(400).send("No user found");const r=a,{nanoid:o}=await Promise.resolve().then((function(){return U})),l=o(64),u=zC(String(c.REFRESH_TOKEN_TTL))||0,d=new Date(Date.now()+u);await r("directus_sessions").insert({token:l,user:i,expires:d,ip:null==t?void 0:t.ip,user_agent:null==t?void 0:t.userAgent,origin:null==t?void 0:t.origin}),await r("directus_sessions").delete().where("expires","<",new Date);const h=p+l;n.redirect(h)}else n.status(400).send("No token found")}))}},XC={exports:{}},ZC={},JC={},eN={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}};!function(e){var t=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyIndexes=e.hasFlag=e.exists=e.list=void 0;const n=t(eN);e.list=Object.keys(n.default);const s={};function i(e){"string"!=typeof e&&(e=String(e));const t=e.indexOf("->");return-1===t?e.length:t}e.list.forEach((e=>{s[e]=n.default[e].flags.reduce((function(e,t){return e[t]=!0,e}),{})})),e.exists=function(e){return Boolean(n.default[e])},e.hasFlag=function(e,t){if(!s[e])throw new Error("Unknown command "+e);return Boolean(s[e][t])},e.getKeyIndexes=function(e,t,s){const r=n.default[e];if(!r)throw new Error("Unknown command "+e);if(!Array.isArray(t))throw new Error("Expect args to be an array");const a=[],o=Boolean(s&&s.parseExternalKey),c=(e,t)=>{const n=[],s=Number(e[t]);for(let e=0;e<s;e++)n.push(e+t+1);return n},l=(e,t,n)=>{for(let s=t;s<e.length-1;s+=1)if(String(e[s]).toLowerCase()===n.toLowerCase())return s+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":a.push(0,...c(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":a.push(...c(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":a.push(...c(t,0));break;case"georadius":{a.push(0);const e=l(t,5,"STORE");e&&a.push(e);const n=l(t,5,"STOREDIST");n&&a.push(n);break}case"georadiusbymember":{a.push(0);const e=l(t,4,"STORE");e&&a.push(e);const n=l(t,4,"STOREDIST");n&&a.push(n);break}case"sort":case"sort_ro":a.push(0);for(let e=1;e<t.length-1;e++){let n=t[e];if("string"!=typeof n)continue;const s=n.toUpperCase();"GET"===s?(e+=1,n=t[e],"#"!==n&&(o?a.push([e,i(n)]):a.push(e))):"BY"===s?(e+=1,o?a.push([e,i(t[e])]):a.push(e)):"STORE"===s&&(e+=1,a.push(e))}break;case"migrate":if(""===t[2])for(let e=5;e<t.length-1;e++){const n=t[e];if("string"==typeof n&&"KEYS"===n.toUpperCase()){for(let n=e+1;n<t.length;n++)a.push(n);break}}else a.push(2);break;case"xreadgroup":case"xread":for(let n="xread"===e?0:3;n<t.length-1;n++)if("STREAMS"===String(t[n]).toUpperCase()){for(let e=n+1;e<=n+(t.length-1-n)/2;e++)a.push(e);break}break;default:if(r.step>0){const e=r.keyStart-1,n=r.keyStop>0?r.keyStop:t.length+r.keyStop+1;for(let t=e;t<n;t+=r.step)a.push(t)}}return a}}(JC);var tN={},nN={};!function(e){let t;function n(n,s){try{const e=t;return t=null,e.apply(this,arguments)}catch(t){return e.errorObj.e=t,e.errorObj}}Object.defineProperty(e,"__esModule",{value:!0}),e.tryCatch=e.errorObj=void 0,e.errorObj={e:{}},e.tryCatch=function(e){return t=e,n}}(nN),Object.defineProperty(tN,"__esModule",{value:!0});const sN=nN;function iN(e){setTimeout((function(){throw e}),0)}tN.default=function(e,t,n){return"function"==typeof t&&e.then((e=>{let s;s=void 0!==n&&Object(n).spread&&Array.isArray(e)?sN.tryCatch(t).apply(void 0,[null].concat(e)):void 0===e?sN.tryCatch(t)(null):sN.tryCatch(t)(null,e),s===sN.errorObj&&iN(s.e)}),(e=>{if(!e){const t=new Error(e+"");Object.assign(t,{cause:e}),e=t}const n=sN.tryCatch(t)(e);n===sN.errorObj&&iN(n.e)})),e};var rN,aN,oN,cN,lN={};const uN=process.version.charCodeAt(1)<55&&46===process.version.charCodeAt(2)?function(){if(aN)return rN;aN=1;const e=v,t=m;function n(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function s(t,n,s){e(n),e.strictEqual(typeof s,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});const i=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=i,this.offset=s,this.buffer=n}function i(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});const t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}function r(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function a(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}return t.inherits(n,Error),Object.defineProperty(n.prototype,"name",{value:"RedisError",configurable:!0,writable:!0}),t.inherits(s,n),Object.defineProperty(s.prototype,"name",{value:"ParserError",configurable:!0,writable:!0}),t.inherits(i,n),Object.defineProperty(i.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0}),t.inherits(r,n),Object.defineProperty(r.prototype,"name",{value:"AbortError",configurable:!0,writable:!0}),t.inherits(a,r),Object.defineProperty(a.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0}),rN={RedisError:n,ParserError:s,ReplyError:i,AbortError:r,InterruptError:a}}():function(){if(cN)return oN;cN=1;const e=v;class t extends Error{get name(){return this.constructor.name}}class n extends t{get name(){return this.constructor.name}}return oN={RedisError:t,ParserError:class extends t{constructor(t,n,s){e(n),e.strictEqual(typeof s,"number");const i=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=i,this.offset=s,this.buffer=n}get name(){return this.constructor.name}},ReplyError:class extends t{constructor(e){const t=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=t}get name(){return this.constructor.name}},AbortError:n,InterruptError:class extends n{get name(){return this.constructor.name}}}}();var dN=uN,pN={},hN={exports:{}},fN=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],mN=hN.exports=function(e){for(var t,n=0,s=-1,i=0,r=0,a="string"==typeof e?function(e){for(var t,n=0,s=0,i=[],r=e.length;n<r;n++)(t=e.charCodeAt(n))<128?i[s++]=t:t<2048?(i[s++]=t>>6|192,i[s++]=63&t|128):55296==(64512&t)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)),i[s++]=t>>18|240,i[s++]=t>>12&63|128,i[s++]=t>>6&63|128,i[s++]=63&t|128):(i[s++]=t>>12|224,i[s++]=t>>6&63|128,i[s++]=63&t|128);return i}(e):e,o=a.length;n<o;){if(t=a[n++],-1===s)123===t&&(s=n);else if(125!==t)r=fN[255&(t^r>>8)]^r<<8;else if(n-1!==s)return 16383&r;i=fN[255&(t^i>>8)]^i<<8}return 16383&i};hN.exports.generateMulti=function(e){for(var t=1,n=e.length,s=mN(e[0]);t<n;)if(mN(e[t++])!==s)return-1;return s};var gN=hN.exports,_N={},yN={},EN=9007199254740991,bN="[object Arguments]",vN="[object Function]",TN="[object GeneratorFunction]",AN=/^(?:0|[1-9]\d*)$/;function SN(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var wN=Object.prototype,xN=wN.hasOwnProperty,kN=wN.toString,CN=wN.propertyIsEnumerable,NN=Math.max;function IN(e,t){var n=PN(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&BN(e)}(e)&&xN.call(e,"callee")&&(!CN.call(e,"callee")||kN.call(e)==bN)}(e)?function(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}(e.length,String):[],s=n.length,i=!!s;for(var r in e)!t&&!xN.call(e,r)||i&&("length"==r||FN(r,s))||n.push(r);return n}function RN(e,t,n,s){return void 0===e||MN(e,wN[n])&&!xN.call(s,n)?t:e}function DN(e,t,n){var s=e[t];xN.call(e,t)&&MN(s,n)&&(void 0!==n||t in e)||(e[t]=n)}function ON(e){if(!UN(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n,s,i=(n=(t=e)&&t.constructor,s="function"==typeof n&&n.prototype||wN,t===s),r=[];for(var a in e)("constructor"!=a||!i&&xN.call(e,a))&&r.push(a);return r}function LN(e,t){return t=NN(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=NN(n.length-t,0),r=Array(i);++s<i;)r[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r,SN(e,this,a)}}function FN(e,t){return!!(t=null==t?EN:t)&&("number"==typeof e||AN.test(e))&&e>-1&&e%1==0&&e<t}function MN(e,t){return e===t||e!=e&&t!=t}var PN=Array.isArray;function BN(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=EN}(e.length)&&!function(e){var t=UN(e)?kN.call(e):"";return t==vN||t==TN}(e)}function UN(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var HN,jN=(HN=function(e,t,n,s){!function(e,t,n,s){n||(n={});for(var i=-1,r=t.length;++i<r;){var a=t[i],o=s?s(n[a],e[a],a,n,e):void 0;DN(n,a,void 0===o?e[a]:o)}}(t,function(e){return BN(e)?IN(e,!0):ON(e)}(t),e,s)},LN((function(e,t){var n=-1,s=t.length,i=s>1?t[s-1]:void 0,r=s>2?t[2]:void 0;for(i=HN.length>3&&"function"==typeof i?(s--,i):void 0,r&&function(e,t,n){if(!UN(n))return!1;var s=typeof t;return!!("number"==s?BN(n)&&FN(t,n.length):"string"==s&&t in n)&&MN(n[t],e)}(t[0],t[1],r)&&(i=s<3?void 0:i,s=1),e=Object(e);++n<s;){var a=t[n];a&&HN(e,a,n,i)}return e})));var GN=LN((function(e){return e.push(void 0,RN),SN(jN,void 0,e)})),$N=9007199254740991,qN="[object Function]",zN="[object GeneratorFunction]",WN=Object.prototype,YN=WN.hasOwnProperty,VN=WN.toString,KN=WN.propertyIsEnumerable;var QN=function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=$N}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?VN.call(e):"";return t==qN||t==zN}(e)}(e)}(e)&&YN.call(e,"callee")&&(!KN.call(e,"callee")||"[object Arguments]"==VN.call(e))};Object.defineProperty(yN,"__esModule",{value:!0}),yN.isArguments=yN.defaults=yN.noop=void 0;const XN=GN;yN.defaults=XN;const ZN=QN;yN.isArguments=ZN,yN.noop=function(){};var JN={};Object.defineProperty(JN,"__esModule",{value:!0}),JN.genRedactedString=JN.getStringValue=JN.MAX_ARGUMENT_LENGTH=void 0;const eI=Ss;JN.MAX_ARGUMENT_LENGTH=200;function tI(e){if(null!==e)switch(typeof e){case"boolean":case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch(e){return}case"string":return e}}function nI(e,t){const{length:n}=e;return n<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+n+'">'}JN.getStringValue=tI,JN.genRedactedString=nI,JN.default=function(e){const t=(0,eI.default)(`ioredis:${e}`);function n(...e){if(t.enabled){for(let t=1;t<e.length;t++){const n=tI(e[t]);"string"==typeof n&&n.length>200&&(e[t]=nI(n,200))}return t.apply(null,e)}}return Object.defineProperties(n,{namespace:{get:()=>t.namespace},enabled:{get:()=>t.enabled},destroy:{get:()=>t.destroy},log:{get:()=>t.log,set(e){t.log=e}}}),n};var sI={};Object.defineProperty(sI,"__esModule",{value:!0});const iI="-----BEGIN CERTIFICATE-----\nMIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV\nBAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1\ndGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV\nBAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1\ndGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP\nJnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz\nrmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E\nQwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2\nBDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3\nTMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp\n4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w\nMB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w\nDQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta\nlbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6\nSu8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ\nuFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k\nBpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp\nZ4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx\nCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w\nKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN\nMTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG\nA1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy\nbWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA\nA4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv\nTq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4\nVuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym\nhjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W\nP0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN\nr0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw\nhhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s\nUzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u\nP1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9\nMjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT\nt5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID\nAQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy\nLnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw\nAYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G\nA1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4\nL2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB\nhjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr\nAP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW\nvcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw\n7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+\nXoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc\nAUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1\njQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh\n/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z\nzDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli\niF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43\niqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo\n616pxqo=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV\nBAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz\nTGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y\naXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC\nVVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz\nMS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw\nggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1\nG5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY\nDm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl\npp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT\nULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag\n54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ\nxeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC\nJpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K\n2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3\nStsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI\nSIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B\ncS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL\nyzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T\nAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg\nz5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu\nrYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3\n3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+\nhSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ\nD0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj\nTY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l\nFXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj\nmcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf\nybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji\nn8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F\nUhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM\nMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv\nYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y\nNTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu\nIG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy\nMDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf\n8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD\nBVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg\nofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK\ndZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh\ncounQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu\njE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG\nCCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW\nBBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj\nmove4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw\nMi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1\ncmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w\nK6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD\nVR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC\nAQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/\n3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY\n0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX\ny+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3\n15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5\nZgKnO/Fx2hBgTxhOTMYaD312kg==\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G\nA1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp\nZ24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4\nMTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG\nA1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI\nhvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8\nRgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT\ngHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm\nKPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd\nQQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ\nXriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw\nDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o\nLkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU\nRUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp\njjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK\n6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX\nmcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs\nMx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH\nWD9f\n-----END CERTIFICATE-----",rI={RedisCloudFixed:{ca:iI},RedisCloudFlexible:{ca:iI}};sI.default=rI,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.noop=e.defaults=e.Debug=e.zipMap=e.CONNECTION_CLOSED_ERROR_MSG=e.shuffle=e.sample=e.resolveTLSProfile=e.parseURL=e.optimizeErrorStack=e.toArg=e.convertMapToArray=e.convertObjectToArray=e.timeout=e.packObject=e.isInt=e.wrapMultiResult=e.convertBufferToString=void 0;const t=b,n=yN;Object.defineProperty(e,"defaults",{enumerable:!0,get:function(){return n.defaults}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return n.noop}});const s=JN;e.Debug=s.default;const i=sI;function r(e){const t=parseFloat(e);return!isNaN(e)&&(0|t)===t}e.convertBufferToString=function e(t,n){if(t instanceof Buffer)return t.toString(n);if(Array.isArray(t)){const s=t.length,i=Array(s);for(let r=0;r<s;++r)i[r]=t[r]instanceof Buffer&&"utf8"===n?t[r].toString():e(t[r],n);return i}return t},e.wrapMultiResult=function(e){if(!e)return null;const t=[],n=e.length;for(let s=0;s<n;++s){const n=e[s];n instanceof Error?t.push([n]):t.push([null,n])}return t},e.isInt=r,e.packObject=function(e){const t={},n=e.length;for(let s=1;s<n;s+=2)t[e[s-1]]=e[s];return t},e.timeout=function(e,t){let n=null;const s=function(){n&&(clearTimeout(n),n=null,e.apply(this,arguments))};return n=setTimeout(s,t,new Error("timeout")),s},e.convertObjectToArray=function(e){const t=[],n=Object.keys(e);for(let s=0,i=n.length;s<i;s++)t.push(n[s],e[n[s]]);return t},e.convertMapToArray=function(e){const t=[];let n=0;return e.forEach((function(e,s){t[n]=s,t[n+1]=e,n+=2})),t},e.toArg=function(e){return null==e?"":String(e)},e.optimizeErrorStack=function(e,t,n){const s=t.split("\n");let i,r="";for(i=1;i<s.length&&-1!==s[i].indexOf(n);++i);for(let e=i;e<s.length;++e)r+="\n"+s[e];if(e.stack){const t=e.stack.indexOf("\n");e.stack=e.stack.slice(0,t)+r}return e},e.parseURL=function(e){if(r(e))return{port:e};let s=(0,t.parse)(e,!0,!0);s.slashes||"/"===e[0]||(e="//"+e,s=(0,t.parse)(e,!0,!0));const i=s.query||{},a={};if(s.auth){const e=s.auth.indexOf(":");a.username=-1===e?s.auth:s.auth.slice(0,e),a.password=-1===e?"":s.auth.slice(e+1)}if(s.pathname&&("redis:"===s.protocol||"rediss:"===s.protocol?s.pathname.length>1&&(a.db=s.pathname.slice(1)):a.path=s.pathname),s.host&&(a.host=s.hostname),s.port&&(a.port=s.port),"string"==typeof i.family){const e=Number.parseInt(i.family,10);Number.isNaN(e)||(a.family=e)}return(0,n.defaults)(a,i),a},e.resolveTLSProfile=function(e){let t=null==e?void 0:e.tls;"string"==typeof t&&(t={profile:t});const n=i.default[null==t?void 0:t.profile];return n&&(t=Object.assign({},n,t),delete t.profile,e=Object.assign({},e,{tls:t})),e},e.sample=function(e,t=0){const n=e.length;return t>=n?null:e[t+Math.floor(Math.random()*(n-t))]},e.shuffle=function(e){let t=e.length;for(;t>0;){const n=Math.floor(Math.random()*t);t--,[e[t],e[n]]=[e[n],e[t]]}return e},e.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.",e.zipMap=function(e,t){const n=new Map;return e.forEach(((e,s)=>{n.set(e,t[s])})),n}}(_N),Object.defineProperty(pN,"__esModule",{value:!0});const aI=JC,oI=gN,cI=tN,lI=_N;class uI{constructor(e,t=[],n={},s){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=t.flat(),this.callback=s,this.initPromise(),n.keyPrefix){const e=n.keyPrefix instanceof Buffer;let t=e?n.keyPrefix:null;this._iterateKeys((s=>s instanceof Buffer?(null===t&&(t=Buffer.from(n.keyPrefix)),Buffer.concat([t,s])):e?Buffer.concat([n.keyPrefix,Buffer.from(String(s))]):n.keyPrefix+s))}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(uI.FLAGS).reduce(((e,t)=>(e[t]={},uI.FLAGS[t].forEach((n=>{e[t][n]=!0})),e)),{})),this.flagMap}getSlot(){if(void 0===this.slot){const e=this.getKeys()[0];this.slot=null==e?null:oI(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let t;const n="*"+(this.args.length+1)+"\r\n$"+Buffer.byteLength(this.name)+"\r\n"+this.name+"\r\n";if(this.bufferMode){const e=new hI;e.push(n);for(let t=0;t<this.args.length;++t){const n=this.args[t];n instanceof Buffer?0===n.length?e.push("$0\r\n\r\n"):(e.push("$"+n.length+"\r\n"),e.push(n),e.push("\r\n")):e.push("$"+Buffer.byteLength(n)+"\r\n"+n+"\r\n")}t=e.toBuffer()}else{t=n;for(let e=0;e<this.args.length;++e){const n=this.args[e];t+="$"+Buffer.byteLength(n)+"\r\n"+n+"\r\n"}}return t}stringifyArguments(){for(let e=0;e<this.args.length;++e){const t=this.args[e];"string"==typeof t||(t instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,lI.toArg)(t))}}transformReply(e){this.replyEncoding&&(e=(0,lI.convertBufferToString)(e,this.replyEncoding));const t=uI._transformer.reply[this.name];return t&&(e=t(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout((()=>{this.isResolved||this.reject(new Error("Command timed out"))}),e))}initPromise(){const e=new Promise(((e,t)=>{if(!this.transformed){this.transformed=!0;const e=uI._transformer.argument[this.name];e&&(this.args=e(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(e),this.errorStack?this.reject=e=>{t((0,lI.optimizeErrorStack)(e,this.errorStack.stack,__dirname))}:this.reject=t}));this.promise=(0,cI.default)(e,this.callback)}_iterateKeys(e=(e=>e)){if(void 0===this.keys&&(this.keys=[],(0,aI.exists)(this.name))){const t=(0,aI.getKeyIndexes)(this.name,this.args);for(const n of t)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return t=>{try{const n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(t)),this.isResolved=!0}catch(e){this.reject(e)}return this.promise}}}pN.default=uI,uI.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"]},uI._transformer={argument:{},reply:{}};const dI=function(e){if(1===e.length){if(e[0]instanceof Map)return(0,lI.convertMapToArray)(e[0]);if("object"==typeof e[0]&&null!==e[0])return(0,lI.convertObjectToArray)(e[0])}return e},pI=function(e){if(2===e.length){if(e[1]instanceof Map)return[e[0]].concat((0,lI.convertMapToArray)(e[1]));if("object"==typeof e[1]&&null!==e[1])return[e[0]].concat((0,lI.convertObjectToArray)(e[1]))}return e};uI.setArgumentTransformer("mset",dI),uI.setArgumentTransformer("msetnx",dI),uI.setArgumentTransformer("hset",pI),uI.setArgumentTransformer("hmset",pI),uI.setReplyTransformer("hgetall",(function(e){if(Array.isArray(e)){const t={};for(let n=0;n<e.length;n+=2){const s=e[n],i=e[n+1];s in t?Object.defineProperty(t,s,{value:i,configurable:!0,enumerable:!0,writable:!0}):t[s]=i}return t}return e}));class hI{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){const e=Buffer.allocUnsafe(this.length);let t=0;for(const n of this.items){const s=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,t):e.write(n,t,s),t+=s}return e}}var fI={};Object.defineProperty(fI,"__esModule",{value:!0});const mI=dN;class gI extends mI.RedisError{constructor(e,t){super(e),this.lastNodeError=t,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}fI.default=gI,gI.defaultMessage="Failed to refresh slots cache.";var _I={};Object.defineProperty(_I,"__esModule",{value:!0});const yI=n;class EI extends yI.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained)return void this.push(null);const e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.redis[this.opt.command](e,((e,t)=>{e?this.emit("error",e):(this._redisCursor=t[0]instanceof Buffer?t[0].toString():t[0],"0"===this._redisCursor&&(this._redisDrained=!0),this.push(t[1]))}))}close(){this._redisDrained=!0}}_I.default=EI;var bI={},vI={},TI={},AI={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.executeWithAutoPipelining=e.getFirstValueInFlattenedArray=e.shouldUseAutoPipelining=e.notAllowedAutoPipelineCommands=e.kCallbacks=e.kExec=void 0;const t=yN,n=gN,s=tN;function i(t,n){if(t._runningAutoPipelines.has(n))return;if(!t._autoPipelines.has(n))return;t._runningAutoPipelines.add(n);const s=t._autoPipelines.get(n);t._autoPipelines.delete(n);const r=s[e.kCallbacks];s[e.kCallbacks]=null,s.exec((function(e,s){if(t._runningAutoPipelines.delete(n),e)for(let t=0;t<r.length;t++)process.nextTick(r[t],e);else for(let e=0;e<r.length;e++)process.nextTick(r[e],...s[e]);t._autoPipelines.has(n)&&i(t,n)}))}function r(e){for(let n=0;n<e.length;n++){const s=e[n];if("string"==typeof s)return s;if(Array.isArray(s)||(0,t.isArguments)(s)){if(0===s.length)continue;return s[0]}const i=[s].flat();if(i.length>0)return i[0]}}e.kExec=Symbol("exec"),e.kCallbacks=Symbol("callbacks"),e.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select"],e.shouldUseAutoPipelining=function(t,n,s){return n&&t.options.enableAutoPipelining&&!t.isPipeline&&!e.notAllowedAutoPipelineCommands.includes(s)&&!t.options.autoPipeliningIgnoredCommands.includes(s)},e.getFirstValueInFlattenedArray=r,e.executeWithAutoPipelining=function a(o,c,l,u,d){if(o.isCluster&&!o.slots.length)return"wait"===o.status&&o.connect().catch(t.noop),(0,s.default)(new Promise((function(e,t){o.delayUntilReady((n=>{n?t(n):a(o,c,l,u,null).then(e,t)}))})),d);const p=o.options.keyPrefix||"",h=o.isCluster?o.slots[n(`${p}${r(u)}`)].join(","):"main";if(!o._autoPipelines.has(h)){const t=o.pipeline();t[e.kExec]=!1,t[e.kCallbacks]=[],o._autoPipelines.set(h,t)}const f=o._autoPipelines.get(h);f[e.kExec]||(f[e.kExec]=!0,setImmediate(i,o,h));const m=new Promise((function(t,n){f[e.kCallbacks].push((function(e,s){e?n(e):t(s)})),"call"===c&&u.unshift(l),f[c](...u)}));return(0,s.default)(m,d)}}(AI);var SI={};Object.defineProperty(SI,"__esModule",{value:!0});const wI=C,xI=pN,kI=tN;SI.default=class{constructor(e,t=null,n="",s=!1){this.lua=e,this.numberOfKeys=t,this.keyPrefix=n,this.readOnly=s,this.sha=(0,wI.createHash)("sha1").update(e).digest("hex");const i=this.sha,r=new WeakSet;this.Command=class extends xI.default{toWritable(t){const n=this.reject;return this.reject=e=>{-1!==e.message.indexOf("NOSCRIPT")&&r.delete(t),n.call(this,e)},r.has(t)?"eval"===this.name&&(this.name="evalsha",this.args[0]=i):(r.add(t),this.name="eval",this.args[0]=e),super.toWritable(t)}}}execute(e,t,n,s){"number"==typeof this.numberOfKeys&&t.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);const i=new this.Command("evalsha",[this.sha,...t],n);return i.promise=i.promise.catch((s=>{if(-1===s.message.indexOf("NOSCRIPT"))throw s;const i=new this.Command("evalsha",[this.sha,...t],n);return(e.isPipeline?e.redis:e).sendCommand(i)})),(0,kI.default)(i.promise,s),e.sendCommand(i)}},Object.defineProperty(TI,"__esModule",{value:!0});const CI=JC,NI=AI,II=pN,RI=SI;class DI{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return OI.slice(0)}createBuiltinCommand(e){return{string:LI(null,e,"utf8"),buffer:LI(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=LI(e,e,"utf8"),this[e+"Buffer"]=LI(e+"Buffer",e,null)}defineCommand(e,t){const n=new RI.default(t.lua,t.numberOfKeys,this.options.keyPrefix,t.readOnly);this.scriptsSet[e]=n,this[e]=FI(e,e,n,"utf8"),this[e+"Buffer"]=FI(e+"Buffer",e,n,null)}sendCommand(e,t,n){throw new Error('"sendCommand" is not implemented')}}const OI=CI.list.filter((e=>"monitor"!==e));function LI(e,t,n){return void 0===n&&(n=t,t=null),function(...s){const i=t||s.shift();let r=s[s.length-1];"function"==typeof r?s.pop():r=void 0;const a={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:n};return(0,NI.shouldUseAutoPipelining)(this,e,i)?(0,NI.executeWithAutoPipelining)(this,e,i,s,r):this.sendCommand(new II.default(i,s,a,r))}}function FI(e,t,n,s){return function(...i){const r="function"==typeof i[i.length-1]?i.pop():void 0,a={replyEncoding:s};return this.options.showFriendlyErrorStack&&(a.errorStack=new Error),(0,NI.shouldUseAutoPipelining)(this,e,t)?(0,NI.executeWithAutoPipelining)(this,e,t,i,r):n.execute(this,i,a,r)}}OI.push("sentinel"),OI.forEach((function(e){DI.prototype[e]=LI(e,e,"utf8"),DI.prototype[e+"Buffer"]=LI(e+"Buffer",e,null)})),DI.prototype.call=LI("call","utf8"),DI.prototype.callBuffer=LI("callBuffer",null),DI.prototype.send_command=DI.prototype.call,TI.default=DI,Object.defineProperty(vI,"__esModule",{value:!0});const MI=gN,PI=JC,BI=tN,UI=m,HI=pN,jI=_N,GI=TI;class $I extends GI.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster="Cluster"===this.redis.constructor.name||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach((t=>{const n=e.scriptsSet[t];this._shaToScript[n.sha]=n,this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]})),e.addedBuiltinSet.forEach((t=>{this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]})),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}));const t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}fillResult(e,t){if("exec"===this._queue[t].name&&Array.isArray(e[1])){const n=e[1].length;for(let s=0;s<n;s++){if(e[1][s]instanceof Error)continue;const i=this._queue[t-(n-s)];try{e[1][s]=i.transformReply(e[1][s])}catch(t){e[1][s]=t}}}if(this._result[t]=e,--this.replyPending)return;if(this.isCluster){let e,t=!0;for(let n=0;n<this._result.length;++n){const s=this._result[n][0],i=this._queue[n];if(s){if("exec"===i.name&&"EXECABORT Transaction discarded because of previous errors."===s.message)continue;if(e){if(e.name!==s.name||e.message!==s.message){t=!1;break}}else e={name:s.name,message:s.message}}else if(!i.inTransaction){if(!((0,PI.exists)(i.name)&&(0,PI.hasFlag)(i.name,"readonly"))){t=!1;break}}}if(e&&t){const t=this,n=e.message.split(" "),s=this._queue;let i=!1;this._queue=[];for(let e=0;e<s.length;++e){if(!("ASK"!==n[0]||i||"asking"===s[e].name||s[e-1]&&"asking"===s[e-1].name)){const e=new HI.default("asking");e.ignore=!0,this.sendCommand(e)}s[e].initPromise(),this.sendCommand(s[e]),i=s[e].inTransaction}let r=!0;void 0===this.leftRedirections&&(this.leftRedirections={});const a=function(){t.exec()},o=this.redis;if(o.handleError(e,this.leftRedirections,{moved:function(e,s){t.preferKey=s,o.slots[n[1]]=[s],o._groupsBySlot[n[1]]=o._groupsIds[o.slots[n[1]].join(";")],o.refreshSlotsCache(),t.exec()},ask:function(e,n){t.preferKey=n,t.exec()},tryagain:a,clusterDown:a,connectionClosed:a,maxRedirections:()=>{r=!1},defaults:()=>{r=!1}}),r)return}}let n=0;for(let e=0;e<this._queue.length-n;++e)this._queue[e+n].ignore&&(n+=1),this._result[e]=this._result[e+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);const t=this._queue.length;return e.pipelineIndex=t,e.promise.then((e=>{this.fillResult([null,e],t)})).catch((e=>{this.fillResult([e],t)})),this._queue.push(e),this}addBatch(e){let t,n,s;for(let i=0;i<e.length;++i)t=e[i],n=t[0],s=t.slice(1),this[n].apply(this,s);return this}}vI.default=$I;const qI=$I.prototype.multi;$I.prototype.multi=function(){return this._transactions+=1,qI.apply(this,arguments)};const zI=$I.prototype.execBuffer;$I.prototype.execBuffer=(0,UI.deprecate)((function(){return this._transactions>0&&(this._transactions-=1),zI.apply(this,arguments)}),"Pipeline#execBuffer: Use Pipeline#exec instead"),$I.prototype.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(jI.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,BI.default)(this.promise,e)),this.redis.delayUntilReady((t=>{t?this.reject(t):this.exec(e)})),this.promise;if(this._transactions>0)return this._transactions-=1,zI.apply(this,arguments);let t;if(this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,BI.default)(this.promise,e)),this._queue.length||this.resolve([]),this.isCluster){const e=[];for(let t=0;t<this._queue.length;t++){const n=this._queue[t].getKeys();if(n.length&&e.push(n[0]),n.length&&MI.generateMulti(n)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(e.length){if(t=function(e,t){const n=MI(t[0]),s=e._groupsBySlot[n];for(let n=1;n<t.length;n++)if(e._groupsBySlot[MI(t[n])]!==s)return-1;return n}(this.redis,e),t<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=16384*Math.random()|0}const n=this;return function(){let e,s=n.replyPending=n._queue.length;n.isCluster&&(e={slot:t,redis:n.redis.connectionPool.nodes.all[n.preferKey]});let i,r="";const a={isPipeline:!0,destination:n.isCluster?e:{redis:n.redis},write(e){"string"!=typeof e?(i||(i=[]),r&&(i.push(Buffer.from(r,"utf8")),r=""),i.push(e)):r+=e,--s||(i?(r&&i.push(Buffer.from(r,"utf8")),a.destination.redis.stream.write(Buffer.concat(i))):a.destination.redis.stream.write(r),s=n._queue.length,r="",i=void 0)}};for(let t=0;t<n._queue.length;++t)n.redis.sendCommand(n._queue[t],a,e);n.promise}(),this.promise},Object.defineProperty(bI,"__esModule",{value:!0}),bI.addTransactionSupport=void 0;const WI=_N,YI=tN,VI=vI;bI.addTransactionSupport=function(e){e.pipeline=function(e){const t=new VI.default(this);return Array.isArray(e)&&t.addBatch(e),t};const{multi:t}=e;e.multi=function(e,n){if(void 0!==n||Array.isArray(e)||(n=e,e=null),n&&!1===n.pipeline)return t.call(this);const s=new VI.default(this);s.multi(),Array.isArray(e)&&s.addBatch(e);const i=s.exec;s.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(WI.noop),(0,YI.default)(new Promise(((e,t)=>{this.redis.delayUntilReady((n=>{n?t(n):this.exec(s).then(e,t)}))})),e);if(this._transactions>0&&i.call(s),this.nodeifiedPromise)return i.call(s);const t=i.call(s);return(0,YI.default)(t.then((function(e){const t=e[e.length-1];if(void 0===t)throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(t[0]){t[0].previousErrors=[];for(let n=0;n<e.length-1;++n)e[n][0]&&t[0].previousErrors.push(e[n][0]);throw t[0]}return(0,WI.wrapMultiResult)(t[1])})),e)};const{execBuffer:r}=s;return s.execBuffer=function(e){return this._transactions>0&&r.call(s),s.exec(e)},s};const{exec:n}=e;e.exec=function(e){return(0,YI.default)(n.call(this).then((function(e){return Array.isArray(e)&&(e=(0,WI.wrapMultiResult)(e)),e})),e)}};var KI={};Object.defineProperty(KI,"__esModule",{value:!0}),KI.default=function(e,t){Object.getOwnPropertyNames(t.prototype).forEach((n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))}))};var QI={};Object.defineProperty(QI,"__esModule",{value:!0}),QI.DEFAULT_CLUSTER_OPTIONS=void 0;const XI=N;QI.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+2*e,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:XI.resolveSrv,dnsLookup:XI.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[]};var ZI={},JI={};Object.defineProperty(JI,"__esModule",{value:!0}),JI.getConnectionName=JI.weightSrvRecords=JI.groupSrvRecords=JI.getUniqueHostnamesFromOptions=JI.normalizeNodeOptions=JI.nodeKeyToRedisOptions=JI.getNodeKey=void 0;const eR=_N,tR=I;var nR;JI.getNodeKey=function(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port},JI.nodeKeyToRedisOptions=function(e){const t=e.lastIndexOf(":");if(-1===t)throw new Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}},JI.normalizeNodeOptions=function(e){return e.map((e=>{const t={};if("object"==typeof e)Object.assign(t,e);else if("string"==typeof e)Object.assign(t,(0,eR.parseURL)(e));else{if("number"!=typeof e)throw new Error("Invalid argument "+e);t.port=e}return"string"==typeof t.port&&(t.port=parseInt(t.port,10)),delete t.db,t.port||(t.port=6379),t.host||(t.host="127.0.0.1"),(0,eR.resolveTLSProfile)(t)}))},JI.getUniqueHostnamesFromOptions=function(e){const t={};return e.forEach((e=>{t[e.host]=!0})),Object.keys(t).filter((e=>!(0,tR.isIP)(e)))},JI.groupSrvRecords=function(e){const t={};for(const n of e)t.hasOwnProperty(n.priority)?(t[n.priority].totalWeight+=n.weight,t[n.priority].records.push(n)):t[n.priority]={totalWeight:n.weight,records:[n]};return t},JI.weightSrvRecords=function(e){if(1===e.records.length)return e.totalWeight=0,e.records.shift();const t=Math.floor(Math.random()*(e.totalWeight+e.records.length));let n=0;for(const[s,i]of e.records.entries())if(n+=1+i.weight,n>t)return e.totalWeight-=i.weight,e.records.splice(s,1),i},JI.getConnectionName=function(e,t){const n=`ioredis-cluster(${e})`;return t?`${n}:${t}`:n};var sR,iR={};var rR={};function aR(e,t){t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}aR.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),t=this._head+t&this._capacityMask,this._list[t]}},aR.prototype.get=function(e){return this.peekAt(e)},aR.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},aR.prototype.peekFront=function(){return this.peek()},aR.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(aR.prototype,"length",{get:function(){return this.size()}}),aR.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},aR.prototype.unshift=function(e){if(0===arguments.length)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},aR.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},aR.prototype.push=function(e){if(0===arguments.length)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},aR.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}},aR.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var n=this.size(),s=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n),t=this._head+t&this._capacityMask;var i,r=this._list[t];if(e<n/2){for(i=e;i>0;i--)this._list[t]=this._list[t=t-1+s&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+s&this._capacityMask}else{for(i=n-1-e;i>0;i--)this._list[t]=this._list[t=t+1+s&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+s&this._capacityMask}return r}}},aR.prototype.remove=function(e,t){var n,s=e,i=t;if(s===(0|s)&&this._head!==this._tail){var r=this.size(),a=this._list.length;if(!(s>=r||s<-r||t<1)){if(s<0&&(s+=r),1===t||!t)return(n=new Array(1))[0]=this.removeOne(s),n;if(0===s&&s+t>=r)return n=this.toArray(),this.clear(),n;var o;for(s+t>r&&(t=r-s),n=new Array(t),o=0;o<t;o++)n[o]=this._list[this._head+s+o&this._capacityMask];if(s=this._head+s&this._capacityMask,e+t===r){for(this._tail=this._tail-t+a&this._capacityMask,o=t;o>0;o--)this._list[s=s+1+a&this._capacityMask]=void 0;return n}if(0===e){for(this._head=this._head+t+a&this._capacityMask,o=t-1;o>0;o--)this._list[s=s+1+a&this._capacityMask]=void 0;return n}if(s<r/2){for(this._head=this._head+e+t+a&this._capacityMask,o=e;o>0;o--)this.unshift(this._list[s=s-1+a&this._capacityMask]);for(s=this._head-1+a&this._capacityMask;i>0;)this._list[s=s-1+a&this._capacityMask]=void 0,i--;e<0&&(this._tail=s)}else{for(this._tail=s,s=s+t+a&this._capacityMask,o=r-(t+e);o>0;o--)this.push(this._list[s++]);for(s=this._tail;i>0;)this._list[s=s+1+a&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}},aR.prototype.splice=function(e,t){var n=e;if(n===(0|n)){var s=this.size();if(n<0&&(n+=s),!(n>s)){if(arguments.length>2){var i,r,a,o=arguments.length,c=this._list.length,l=2;if(!s||n<s/2){for(r=new Array(n),i=0;i<n;i++)r[i]=this._list[this._head+i&this._capacityMask];for(0===t?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,t),this._head=this._head+n+c&this._capacityMask);o>l;)this.unshift(arguments[--o]);for(i=n;i>0;i--)this.unshift(r[i-1])}else{var u=(r=new Array(s-(n+t))).length;for(i=0;i<u;i++)r[i]=this._list[this._head+n+t+i&this._capacityMask];for(0===t?(a=[],n!=s&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,t),this._tail=this._tail-u+c&this._capacityMask);l<o;)this.push(arguments[l++]);for(i=0;i<u;i++)this.push(r[i])}return a}return this.remove(n,t)}}},aR.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},aR.prototype.isEmpty=function(){return this._head===this._tail},aR.prototype.toArray=function(){return this._copyArray(!1)},aR.prototype._fromArray=function(e){var t=e.length,n=this._nextPowerOf2(t);this._list=new Array(n),this._capacityMask=n-1,this._tail=t;for(var s=0;s<t;s++)this._list[s]=e[s]},aR.prototype._copyArray=function(e,t){var n=this._list,s=n.length,i=this.length;if((t|=i)==i&&this._head<this._tail)return this._list.slice(this._head,this._tail);var r,a=new Array(t),o=0;if(e||this._head>this._tail){for(r=this._head;r<s;r++)a[o++]=n[r];for(r=0;r<this._tail;r++)a[o++]=n[r]}else for(r=this._head;r<this._tail;r++)a[o++]=n[r];return a},aR.prototype._growArray=function(){if(0!=this._head){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},aR.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},aR.prototype._nextPowerOf2=function(e){var t=1<<Math.log(e)/Math.log(2)+1;return Math.max(t,4)};var oR=aR;Object.defineProperty(rR,"__esModule",{value:!0});const cR=oR,lR=(0,_N.Debug)("delayqueue");var uR;function dR(){if(uR)return lN;uR=1,Object.defineProperty(lN,"__esModule",{value:!0});const e=JC,t=k,n=dN,s=tN,i=pN,r=fI,a=fD(),o=_I,c=bI,l=_N,u=KI,d=TI,p=QI,h=function(){if(nR)return ZI;nR=1,Object.defineProperty(ZI,"__esModule",{value:!0});const e=JI,t=_N,n=fD(),s=(0,t.Debug)("cluster:subscriber");return ZI.default=class{constructor(t,n){this.connectionPool=t,this.emitter=n,this.started=!1,this.subscriber=null,this.onSubscriberEnd=()=>{this.started?(s("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()):s("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.")},this.connectionPool.on("-node",((t,n)=>{this.started&&this.subscriber&&(0,e.getNodeKey)(this.subscriber.options)===n&&(s("subscriber has left, selecting a new one..."),this.selectSubscriber())})),this.connectionPool.on("+node",(()=>{this.started&&!this.subscriber&&(s("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())}))}getInstance(){return this.subscriber}start(){this.started=!0,this.selectSubscriber(),s("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null),s("stopped")}selectSubscriber(){const i=this.lastActiveSubscriber;i&&(i.off("end",this.onSubscriberEnd),i.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());const r=(0,t.sample)(this.connectionPool.getNodes());if(!r)return s("selecting subscriber failed since there is no node discovered in the cluster yet"),void(this.subscriber=null);const{options:a}=r;s("selected a subscriber %s:%s",a.host,a.port),this.subscriber=new n.default({port:a.port,host:a.host,username:a.username,password:a.password,enableReadyCheck:!0,connectionName:(0,e.getConnectionName)("subscriber",a.connectionName),lazyConnect:!0,tls:a.tls,retryStrategy:null}),this.subscriber.on("error",t.noop),this.subscriber.once("end",this.onSubscriberEnd);const o={subscribe:[],psubscribe:[],ssubscribe:[]};if(i){const e=i.condition||i.prevCondition;e&&e.subscriber&&(o.subscribe=e.subscriber.channels("subscribe"),o.psubscribe=e.subscriber.channels("psubscribe"),o.ssubscribe=e.subscriber.channels("ssubscribe"))}if(o.subscribe.length||o.psubscribe.length||o.ssubscribe.length){let e=0;for(const t of["subscribe","psubscribe","ssubscribe"]){const n=o[t];n.length&&(e+=1,s("%s %d channels",t,n.length),this.subscriber[t](n).then((()=>{--e||(this.lastActiveSubscriber=this.subscriber)})).catch((()=>{s("failed to %s %d channels",t,n.length)})))}}else this.lastActiveSubscriber=this.subscriber;for(const e of["message","messageBuffer","smessage","smessageBuffer"])this.subscriber.on(e,((t,n)=>{this.emitter.emit(e,t,n)}));for(const e of["pmessage","pmessageBuffer"])this.subscriber.on(e,((t,n,s)=>{this.emitter.emit(e,t,n,s)}))}},ZI}(),f=function(){if(sR)return iR;sR=1,Object.defineProperty(iR,"__esModule",{value:!0});const e=k,t=_N,n=JI,s=fD(),i=(0,t.Debug)("cluster:connectionPool");let r=class extends e.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){const t=this.nodes[e];return Object.keys(t).map((e=>t[e]))}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){const n=Object.keys(this.nodes[e]),s=(0,t.sample)(n);return this.nodes[e][s]}findOrCreate(e,r=!1){const a=(0,n.getNodeKey)(e);let o;return r=Boolean(r),this.specifiedOptions[a]?Object.assign(e,this.specifiedOptions[a]):this.specifiedOptions[a]=e,this.nodes.all[a]?(o=this.nodes.all[a],o.options.readOnly!==r&&(o.options.readOnly=r,i("Change role of %s to %s",a,r?"slave":"master"),o[r?"readonly":"readwrite"]().catch(t.noop),r?(delete this.nodes.master[a],this.nodes.slave[a]=o):(delete this.nodes.slave[a],this.nodes.master[a]=o))):(i("Connecting to %s as %s",a,r?"slave":"master"),o=new s.default((0,t.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},e,this.redisOptions,{lazyConnect:!0})),this.nodes.all[a]=o,this.nodes[r?"slave":"master"][a]=o,o.once("end",(()=>{this.removeNode(a),this.emit("-node",o,a),Object.keys(this.nodes.all).length||this.emit("drain")})),this.emit("+node",o,a),o.on("error",(function(e){this.emit("nodeError",e,a)}))),o}reset(e){i("Reset with %O",e);const t={};e.forEach((e=>{const s=(0,n.getNodeKey)(e);e.readOnly&&t[s]||(t[s]=e)})),Object.keys(this.nodes.all).forEach((e=>{t[e]||(i("Disconnect %s because the node does not hold any slot",e),this.nodes.all[e].disconnect(),this.removeNode(e))})),Object.keys(t).forEach((e=>{const n=t[e];this.findOrCreate(n,n.readOnly)}))}removeNode(e){const{nodes:t}=this;t.all[e]&&(i("Remove %s from the pool",e),delete t.all[e]),delete t.master[e],delete t.slave[e]}};return iR.default=r,iR}(),m=rR,g=JI,_=oR,y=(0,l.Debug)("cluster"),E=new WeakSet;class b extends d.default{constructor(e,n={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new m.default,this.offlineQueue=new _,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,t.EventEmitter.call(this),this.startupNodes=e,this.options=(0,l.defaults)({},n,p.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),"function"!=typeof this.options.scaleReads&&-1===["all","master","slave"].indexOf(this.options.scaleReads))throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new f.default(this.options.redisOptions),this.connectionPool.on("-node",((e,t)=>{this.emit("-node",e)})),this.connectionPool.on("+node",(e=>{this.emit("+node",e)})),this.connectionPool.on("drain",(()=>{this.setStatus("close")})),this.connectionPool.on("nodeError",((e,t)=>{this.emit("node error",e,t)})),this.subscriber=new h.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach((([e,t])=>{this.defineCommand(e,t)})),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch((e=>{y("connecting failed: %s",e)}))}connect(){return new Promise(((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(new Error("Redis is already connecting/connected"));const s=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then((i=>{if(this.connectionEpoch!==s)return y("discard connecting after resolving startup nodes because epoch not match: %d != %d",s,this.connectionEpoch),void t(new n.RedisError("Connection is discarded because a new connection is made"));if("connecting"!==this.status)return y("discard connecting after resolving startup nodes because the status changed to %s",this.status),void t(new n.RedisError("Connection is aborted"));this.connectionPool.reset(i);const o=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()};let c;const l=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",c),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck(((e,t)=>{e||t?(y("Ready check failed (%s). Reconnecting...",e||t),"connect"===this.status&&this.disconnect(!0)):o()})):o()};c=()=>{const e=new Error("None of startup nodes is available");this.removeListener("refresh",l),this.invokeReadyDelayedCallbacks(e),t(e)},this.once("refresh",l),this.once("close",c),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache((e=>{e&&e.message===r.default.defaultMessage&&(a.default.prototype.silentEmit.call(this,"error",e),this.connectionPool.reset([]))})),this.subscriber.start()})).catch((e=>{this.setStatus("close"),this.handleCloseEvent(e),this.invokeReadyDelayedCallbacks(e),t(e)}))}))}disconnect(e=!1){const t=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,y("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),"wait"===t?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){const t=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),"wait"===t){const t=(0,s.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),t}return(0,s.default)(Promise.all(this.nodes().map((e=>e.quit().catch((e=>{if(e.message===l.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw e}))))).then((()=>"OK")),e)}duplicate(e=[],t={}){const n=e.length>0?e:this.startupNodes.slice(0),s=Object.assign({},this.options,t);return new b(n,s)}nodes(e="all"){if("all"!==e&&"master"!==e&&"slave"!==e)throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values())e+=t.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;const t=this,n=e=>{this.isRefreshing=!1;for(const t of this._refreshSlotsCacheCallbacks)t(e);this._refreshSlotsCacheCallbacks=[]},s=(0,l.shuffle)(this.connectionPool.getNodes());let i=null;!function e(a){if(a===s.length){const e=new r.default(r.default.defaultMessage,i);return n(e)}const o=s[a],c=`${o.options.host}:${o.options.port}`;y("getting slot cache from %s",c),t.getInfoFromNode(o,(function(s){switch(t.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}s?(t.emit("node error",s,c),i=s,e(a+1)):(t.emit("refresh"),n())}))}(0)}sendCommand(t,s,r){if("wait"===this.status&&this.connect().catch(l.noop),"end"===this.status)return t.reject(new Error(l.CONNECTION_CLOSED_ERROR_MSG)),t.promise;let a=this.options.scaleReads;if("master"!==a){t.isReadOnly||(0,e.exists)(t.name)&&(0,e.hasFlag)(t.name,"readonly")||(a="master")}let o=r?r.slot:t.getSlot();const c={},u=this;if(!r&&!E.has(t)){E.add(t);const e=t.reject;t.reject=function(n){const s=d.bind(null,!0);u.handleError(n,c,{moved:function(e,n){y("command %s is moved to %s",t.name,n),o=Number(e),u.slots[e]?u.slots[e][0]=n:u.slots[e]=[n],u._groupsBySlot[e]=u._groupsIds[u.slots[e].join(";")],u.connectionPool.findOrCreate(u.natMapper(n)),d(),y("refreshing slot caches... (triggered by MOVED error)"),u.refreshSlotsCache()},ask:function(e,n){y("command %s is required to ask %s:%s",t.name,n);const s=u.natMapper(n);u.connectionPool.findOrCreate(s),d(!1,`${s.host}:${s.port}`)},tryagain:s,clusterDown:s,connectionClosed:s,maxRedirections:function(n){e.call(t,n)},defaults:function(){e.call(t,n)}})}}function d(e,c){if("end"===u.status)return void t.reject(new n.AbortError("Cluster is ended."));let d;if("ready"===u.status||"cluster"===t.name){if(r&&r.redis)d=r.redis;else if(i.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.name)||i.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.name)){if(d=u.subscriber.getInstance(),!d)return void t.reject(new n.AbortError("No subscriber for the cluster"))}else{if(!e){if("number"==typeof o&&u.slots[o]){const e=u.slots[o];if("function"==typeof a){const n=e.map((function(e){return u.connectionPool.getInstanceByKey(e)}));d=a(n,t),Array.isArray(d)&&(d=(0,l.sample)(d)),d||(d=n[0])}else{let t;t="all"===a?(0,l.sample)(e):"slave"===a&&e.length>1?(0,l.sample)(e,1):e[0],d=u.connectionPool.getInstanceByKey(t)}}c&&(d=u.connectionPool.getInstanceByKey(c),d.asking())}d||(d=("function"==typeof a?null:u.connectionPool.getSampleInstance(a))||u.connectionPool.getSampleInstance("all"))}r&&!r.redis&&(r.redis=d)}d?d.sendCommand(t,s):u.options.enableOfflineQueue?u.offlineQueue.push({command:t,stream:s,node:r}):t.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return d(),t.promise}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}handleError(e,t,n){if(void 0===t.value?t.value=this.options.maxRedirections:t.value-=1,t.value<=0)return void n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));const s=e.message.split(" ");if("MOVED"===s[0]){const e=this.options.retryDelayOnMoved;e&&"number"==typeof e?this.delayQueue.push("moved",n.moved.bind(null,s[1],s[2]),{timeout:e}):n.moved(s[1],s[2])}else"ASK"===s[0]?n.ask(s[1],s[2]):"TRYAGAIN"===s[0]?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):"CLUSTERDOWN"===s[0]&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===l.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&"ready"===this.status?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new _}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;const e=()=>{this.slotsTimer=setTimeout((()=>{y('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache((()=>{e()}))}),this.options.slotsRefreshInterval)};e()}setStatus(e){y("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick((()=>{this.emit(e)}))}handleCloseEvent(e){let t;e&&y("closed because %s",e),this.manuallyClosing||"function"!=typeof this.options.clusterRetryStrategy||(t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),"number"==typeof t?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout((()=>{this.reconnectTimeout=null,y("Cluster is disconnected. Retrying after %dms",t),this.connect().catch((function(e){y("Got error %s when reconnecting. Ignoring...",e)}))}),t)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let t;for(;t=this.offlineQueue.shift();)t.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){y("send %d commands in offline queue",this.offlineQueue.length);const e=this.offlineQueue;let t;for(this.resetOfflineQueue();t=e.shift();)this.sendCommand(t.command,t.stream,t.node)}}natMapper(e){if(this.options.natMap&&"object"==typeof this.options.natMap){const t="string"==typeof e?e:`${e.host}:${e.port}`,n=this.options.natMap[t];if(n)return y("NAT mapping %s -> %O",t,n),Object.assign({},n)}return"string"==typeof e?(0,g.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,t){if(!e)return t(new Error("Node is disconnected"));const n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,g.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",l.noop),n.cluster("SLOTS",(0,l.timeout)(((e,s)=>{if(n.disconnect(),e)return t(e);if("disconnecting"===this.status||"close"===this.status||"end"===this.status)return y("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),void t();const i=[];y("cluster slots result count: %d",s.length);for(let e=0;e<s.length;++e){const t=s[e],n=t[0],r=t[1],a=[];for(let e=2;e<t.length;e++){if(!t[e][0])continue;const n=this.natMapper({host:t[e][0],port:t[e][1]});n.readOnly=2!==e,i.push(n),a.push(n.host+":"+n.port)}y("cluster slots result [%d]: slots %d~%d served by %s",e,n,r,a);for(let e=n;e<=r;e++)this.slots[e]=a}this._groupsIds=Object.create(null);let r=0;for(let e=0;e<16384;e++){const t=(this.slots[e]||[]).join(";");t.length?(this._groupsIds[t]||(this._groupsIds[t]=++r),this._groupsBySlot[e]=this._groupsIds[t]):this._groupsBySlot[e]=void 0}this.connectionPool.reset(i),t()}),this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(const t of this._readyDelayedCallbacks)process.nextTick(t,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",((t,n)=>{if(t)return e(t);if("string"!=typeof n)return e();let s;const i=n.split("\r\n");for(let e=0;e<i.length;++e){const t=i[e].split(":");if("cluster_state"===t[0]){s=t[1];break}}"fail"===s?(y("cluster state not ok (%s)",s),e(null,s)):e()}))}resolveSrv(e){return new Promise(((t,n)=>{this.options.resolveSrv(e,((e,s)=>{if(e)return n(e);const i=this,r=(0,g.groupSrvRecords)(s),a=Object.keys(r).sort(((e,t)=>parseInt(e)-parseInt(t)));!function e(s){if(!a.length)return n(s);const o=a[0],c=r[o],l=(0,g.weightSrvRecords)(c);c.records.length||a.shift(),i.dnsLookup(l.name).then((e=>t({host:e,port:l.port})),e)}()}))}))}dnsLookup(e){return new Promise(((t,n)=>{this.options.dnsLookup(e,((s,i)=>{s?(y("failed to resolve hostname %s to IP: %s",e,s.message),n(s)):(y("resolved hostname %s to IP %s",e,i),t(i))}))}))}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||0===this.startupNodes.length)throw new Error("`startupNodes` should contain at least one node.");const e=(0,g.normalizeNodeOptions)(this.startupNodes),t=(0,g.getUniqueHostnamesFromOptions)(e);if(0===t.length)return e;const n=await Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),s=(0,l.zipMap)(t,n);return e.map((e=>{const t=s.get(e.host);return t?this.options.useSRVRecords?Object.assign({},e,t):Object.assign({},e,{host:t}):e}))}createScanStream(e,{key:t,options:n={}}){return new o.default({objectMode:!0,key:t,redis:this,command:e,...n})}}return(0,u.default)(b,t.EventEmitter),(0,c.addTransactionSupport)(b.prototype),lN.default=b,lN}rR.default=class{constructor(){this.queues={},this.timeouts={}}push(e,t,n){const s=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new cR);this.queues[e].push(t),this.timeouts[e]||(this.timeouts[e]=setTimeout((()=>{s((()=>{this.timeouts[e]=null,this.execute(e)}))}),n.timeout))}execute(e){const t=this.queues[e];if(!t)return;const{length:n}=t;if(n)for(lR("send %d commands in %s queue",n,e),this.queues[e]=null;t.length>0;)t.shift()()}};var pR={},hR={},fR={};Object.defineProperty(fR,"__esModule",{value:!0});const mR=(0,_N.Debug)("AbstractConnector");fR.default=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){const e=this.stream,t=setTimeout((()=>{mR("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()}),this.disconnectTimeout);e.on("close",(()=>clearTimeout(t))),e.end()}}},Object.defineProperty(hR,"__esModule",{value:!0});const gR=I,_R=R,yR=_N,ER=fR;class bR extends ER.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){const{options:t}=this;let n;return this.connecting=!0,"path"in t&&t.path?n={path:t.path}:(n={},"port"in t&&null!=t.port&&(n.port=t.port),"host"in t&&null!=t.host&&(n.host=t.host),"family"in t&&null!=t.family&&(n.family=t.family)),t.tls&&Object.assign(n,t.tls),new Promise(((e,s)=>{process.nextTick((()=>{if(this.connecting){try{t.tls?this.stream=(0,_R.connect)(n):this.stream=(0,gR.createConnection)(n)}catch(e){return void s(e)}this.stream.once("error",(e=>{this.firstError=e})),e(this.stream)}else s(new Error(yR.CONNECTION_CLOSED_ERROR_MSG))}))}))}}hR.default=bR;var vR={},TR={};function AR(e,t){return(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379)}Object.defineProperty(TR,"__esModule",{value:!0});TR.default=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){const e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&1!==this.cursor&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let t=0;t<this.sentinels.length;t++)if(AR(e,this.sentinels[t]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};var SR={};Object.defineProperty(SR,"__esModule",{value:!0}),SR.FailoverDetector=void 0;const wR=(0,_N.Debug)("FailoverDetector"),xR="+switch-master";var kR,CR;function NR(){if(kR)return vR;kR=1,Object.defineProperty(vR,"__esModule",{value:!0}),vR.SentinelIterator=void 0;const e=I,t=_N,n=R,s=TR;vR.SentinelIterator=s.default;const i=fR,r=fD(),a=SR,o=(0,t.Debug)("SentinelConnector");let c=class extends i.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new s.default(this.options.sentinels)}check(e){const t=!e.role||this.options.role===e.role;return t||(o("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),t}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(s){let i;this.connecting=!0,this.retryAttempts=0;const r=async()=>{const a=this.sentinelIterator.next();if(a.done){this.sentinelIterator.reset(!1);const e="function"==typeof this.options.sentinelRetryStrategy?this.options.sentinelRetryStrategy(++this.retryAttempts):null;let t="number"!=typeof e?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${e}ms.`;i&&(t+=` Last error: ${i.message}`),o(t);const n=new Error(t);if("number"==typeof e)return s("error",n),await new Promise((t=>setTimeout(t,e))),r();throw n}let c=null,l=null;try{c=await this.resolve(a.value)}catch(e){l=e}if(!this.connecting)throw new Error(t.CONNECTION_CLOSED_ERROR_MSG);const u=a.value.host+":"+a.value.port;if(c)return o("resolved: %s:%s from sentinel %s",c.host,c.port,u),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(c,this.options.tls),this.stream=(0,n.connect)(c),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,e.createConnection)(c),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",(e=>{this.firstError=e})),this.stream;{const e=l?"failed to connect to sentinel "+u+" because "+l.message:"connected to sentinel "+u+" successfully, but got an invalid reply: "+c;return o(e),s("sentinelError",new Error(e)),l&&(i=l),r()}};return r()}async updateSentinels(e){if(!this.options.updateSentinels)return;const n=await e.sentinel("sentinels",this.options.name);Array.isArray(n)&&(n.map(t.packObject).forEach((e=>{if(-1===(e.flags?e.flags.split(","):[]).indexOf("disconnected")&&e.ip&&e.port){const t=this.sentinelNatResolve(l(e));this.sentinelIterator.add(t)&&o("adding sentinel %s:%s",t.host,t.port)}})),o("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){const t=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:Number(t[1])}:null)}async resolveSlave(e){const n=await e.sentinel("slaves",this.options.name);if(!Array.isArray(n))return null;const s=n.map(t.packObject).filter((e=>e.flags&&!e.flags.match(/(disconnected|s_down|o_down)/)));return this.sentinelNatResolve(function(e,n){if(0===e.length)return null;let s;if("function"==typeof n)s=n(e);else if(null!==n&&"object"==typeof n){const t=Array.isArray(n)?n:[n];t.sort(((e,t)=>(e.prio||(e.prio=1),t.prio||(t.prio=1),e.prio<t.prio?-1:e.prio>t.prio?1:0)));for(let n=0;n<t.length;n++){for(let i=0;i<e.length;i++){const r=e[i];if(r.ip===t[n].ip&&r.port===t[n].port){s=r;break}}if(s)break}}s||(s=(0,t.sample)(e));return l(s)}(s,this.options.preferredSlaves))}sentinelNatResolve(e){return e&&this.options.natMap&&this.options.natMap[`${e.host}:${e.port}`]||e}connectToSentinel(e,t){return new r.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...t})}async resolve(e){const t=this.connectToSentinel(e);t.on("error",u);try{return"slave"===this.options.role?await this.resolveSlave(t):await this.resolveMaster(t)}finally{t.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);const t=[];for(;t.length<this.options.sentinelMaxConnections;){const{done:e,value:n}=this.sentinelIterator.next();if(e)break;const s=this.connectToSentinel(n,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",(()=>{var e;null===(e=this.emitter)||void 0===e||e.emit("sentinelReconnecting")})),t.push({address:n,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new a.FailoverDetector(this,t),await this.failoverDetector.subscribe(),null===(e=this.emitter)||void 0===e||e.emit("failoverSubscribed")}};function l(e){return{host:e.ip,port:Number(e.port)}}function u(){}return vR.default=c,vR}SR.FailoverDetector=class{constructor(e,t){this.isDisconnected=!1,this.connector=e,this.sentinels=t}cleanup(){this.isDisconnected=!0;for(const e of this.sentinels)e.client.disconnect()}async subscribe(){wR("Starting FailoverDetector");const e=[];for(const t of this.sentinels){const n=t.client.subscribe(xR).catch((e=>{wR("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,e.message)}));e.push(n),t.client.on("message",(e=>{this.isDisconnected||e!==xR||this.disconnect()}))}await Promise.all(e)}disconnect(){this.isDisconnected=!0,wR("Failover detected, disconnecting"),this.connector.disconnect()}};var IR={},RR={},DR={};Object.defineProperty(DR,"__esModule",{value:!0});const OR=dN;class LR extends OR.AbortError{constructor(e){super(`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}DR.default=LR,Object.defineProperty(RR,"__esModule",{value:!0}),RR.MaxRetriesPerRequestError=void 0;const FR=DR;RR.MaxRetriesPerRequestError=FR.default;var MR={};const PR=D.Buffer,BR=new(0,L.StringDecoder),UR=dN,HR=UR.ReplyError,jR=UR.ParserError;var GR=PR.allocUnsafe(32768),$R=0,qR=null,zR=0,WR=0;function YR(e){const t=e.offset,n=e.buffer,s=n.length-1;for(var i=t;i<s;)if(13===n[i++])return e.offset=i+1,!0===e.optionReturnBuffers?e.buffer.slice(t,i-1):e.buffer.toString("utf8",t,i-1)}function VR(e){const t=e.buffer.length-1;for(var n=e.offset,s=0;n<t;){const t=e.buffer[n++];if(13===t)return e.offset=n+1,s;s=10*s+(t-48)}}function KR(e,t,n){e.arrayCache.push(t),e.arrayPos.push(n)}function QR(e){const t=e.arrayCache.pop();var n=e.arrayPos.pop();if(e.arrayCache.length){const s=QR(e);if(void 0===s)return void KR(e,t,n);t[n++]=s}return XR(e,t,n)}function XR(e,t,n){const s=e.buffer.length;for(;n<t.length;){const i=e.offset;if(e.offset>=s)return void KR(e,t,n);const r=ZR(e,e.buffer[e.offset++]);if(void 0===r)return e.arrayCache.length||e.bufferCache.length||(e.offset=i),void KR(e,t,n);t[n]=r,n++}return t}function ZR(e,t){switch(t){case 36:return function(e){const t=VR(e);if(void 0===t)return;if(t<0)return null;const n=e.offset+t;if(n+2>e.buffer.length)return e.bigStrSize=n+2,e.totalChunkSize=e.buffer.length,void e.bufferCache.push(e.buffer);const s=e.offset;return e.offset=n+2,!0===e.optionReturnBuffers?e.buffer.slice(s,n):e.buffer.toString("utf8",s,n)}(e);case 43:return YR(e);case 42:return function(e){const t=VR(e);if(void 0===t)return;return t<0?null:XR(e,new Array(t),0)}(e);case 58:return function(e){return!0===e.optionStringNumbers?function(e){const t=e.buffer.length-1;var n=e.offset,s=0,i="";for(45===e.buffer[n]&&(i+="-",n++);n<t;){var r=e.buffer[n++];if(13===r)return e.offset=n+1,0!==s&&(i+=s),i;s>429496728?(i+=10*s+(r-48),s=0):48===r&&0===s?i+=0:s=10*s+(r-48)}}(e):function(e){const t=e.buffer.length-1;var n=e.offset,s=0,i=1;for(45===e.buffer[n]&&(i=-1,n++);n<t;){const t=e.buffer[n++];if(13===t)return e.offset=n+1,i*s;s=10*s+(t-48)}}(e)}(e);case 45:return function(e){var t=YR(e);if(void 0!==t)return!0===e.optionReturnBuffers&&(t=t.toString()),new HR(t)}(e);default:return function(e,t){const n=new jR("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(n)}(e,t)}}function JR(){if(GR.length>51200)if(1===zR||WR>2*zR){const e=Math.floor(GR.length/10),t=e<$R?$R:e;$R=0,GR=GR.slice(t,GR.length)}else WR++,zR--;else clearInterval(qR),zR=0,WR=0,qR=null}function eD(e){const t=e.bufferCache,n=e.offset,s=e.bigStrSize-n-2;var i=t.length,r=e.bigStrSize-e.totalChunkSize;if(e.offset=r,r<=2){if(2===i)return t[0].slice(n,t[0].length+r-2);i--,r=t[t.length-2].length+r}!function(e){if(GR.length<e+$R){const t=e>78643200?2:3;$R>116391936&&($R=52428800),GR=PR.allocUnsafe(e*t+$R),$R=0,zR++,null===qR&&(qR=setInterval(JR,50))}}(s);const a=$R;t[0].copy(GR,a,n,t[0].length),$R+=t[0].length-n;for(var o=1;o<i-1;o++)t[o].copy(GR,$R),$R+=t[o].length;return t[o].copy(GR,$R,0,r-2),$R+=r-2,GR.slice(a,$R)}var tD=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if("function"!=typeof e.returnError||"function"!=typeof e.returnReply)throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if("boolean"!=typeof e)throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if("boolean"!=typeof e)throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(null===this.buffer)this.buffer=e,this.offset=0;else if(0===this.bigStrSize){const t=this.buffer.length,n=t-this.offset,s=PR.allocUnsafe(n+e.length);if(this.buffer.copy(s,0,this.offset,t),e.copy(s,n,0,e.length),this.buffer=s,this.offset=0,this.arrayCache.length){const e=QR(this);if(void 0===e)return;this.returnReply(e)}}else{if(!(this.totalChunkSize+e.length>=this.bigStrSize))return this.bufferCache.push(e),void(this.totalChunkSize+=e.length);this.bufferCache.push(e);var t=this.optionReturnBuffers?eD(this):function(e){const t=e.bufferCache,n=e.offset;var s=t.length,i=e.bigStrSize-e.totalChunkSize;if(e.offset=i,i<=2){if(2===s)return t[0].toString("utf8",n,t[0].length+i-2);s--,i=t[t.length-2].length+i}for(var r=BR.write(t[0].slice(n)),a=1;a<s-1;a++)r+=BR.write(t[a]);return r+BR.end(t[a].slice(0,i-2))}(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=t,void 0===(t=QR(this))))return;this.returnReply(t)}for(;this.offset<this.buffer.length;){const e=this.offset,t=this.buffer[this.offset++],n=ZR(this,t);if(void 0===n)return void(this.arrayCache.length||this.bufferCache.length||(this.offset=e));45===t?this.returnError(n):this.returnReply(n)}this.buffer=null}},nD=tD,sD={};Object.defineProperty(sD,"__esModule",{value:!0});function iD(e){return"unsubscribe"===e?"subscribe":"punsubscribe"===e?"psubscribe":"sunsubscribe"===e?"ssubscribe":e}sD.default=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,t){this.set[iD(e)][t]=!0}del(e,t){delete this.set[iD(e)][t]}channels(e){return Object.keys(this.set[iD(e)])}isEmpty(){return 0===this.channels("subscribe").length&&0===this.channels("psubscribe").length&&0===this.channels("ssubscribe").length}},Object.defineProperty(MR,"__esModule",{value:!0});const rD=pN,aD=nD,oD=sD,cD=(0,_N.Debug)("dataHandler");MR.default=class{constructor(e,t){this.redis=e;const n=new aD({stringNumbers:t.stringNumbers,returnBuffers:!0,returnError:e=>{this.returnError(e)},returnFatalError:e=>{this.returnFatalError(e)},returnReply:e=>{this.returnReply(e)}});e.stream.on("data",(e=>{n.execute(e)}))}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){const t=this.shiftCommand(e);t&&(e.command={name:t.command.name,args:t.command.args},this.redis.handleReconnection(e,t))}returnReply(e){if(this.handleMonitorReply(e))return;if(this.handleSubscriberReply(e))return;const t=this.shiftCommand(e);t&&(rD.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)?(this.redis.condition.subscriber=new oD.default,this.redis.condition.subscriber.add(t.command.name,e[1].toString()),uD(t.command,e[2])||this.redis.commandQueue.unshift(t)):rD.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)?dD(t.command,e[2])||this.redis.commandQueue.unshift(t):t.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;const t=Array.isArray(e)?e[0].toString():null;switch(cD('receive reply "%s" in subscriber mode',t),t){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{const t=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",t,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",t,e[2],e[3]);break}case"smessage":this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break;case"ssubscribe":case"subscribe":case"psubscribe":{const n=e[1].toString();this.redis.condition.subscriber.add(t,n);const s=this.shiftCommand(e);if(!s)return;uD(s.command,e[2])||this.redis.commandQueue.unshift(s);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{const n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(t,n);const s=e[2];0===Number(s)&&(this.redis.condition.subscriber=!1);const i=this.shiftCommand(e);if(!i)return;dD(i.command,s)||this.redis.commandQueue.unshift(i);break}default:{const t=this.shiftCommand(e);if(!t)return;t.command.resolve(e)}}return!0}handleMonitorReply(e){if("monitoring"!==this.redis.status)return!1;const t=e.toString();if("OK"===t)return!1;const n=t.indexOf(" "),s=t.slice(0,n),i=t.indexOf('"'),r=t.slice(i+1,-1).split('" "').map((e=>e.replace(/\\"/g,'"'))),a=t.slice(n+2,i-2).split(" ");return this.redis.emit("monitor",s,r,a[1],a[0]),!0}shiftCommand(e){const t=this.redis.commandQueue.shift();if(!t){const t=new Error("Command queue state error. If you can reproduce this, please report it."+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",t),null}return t}};const lD=new WeakMap;function uD(e,t){let n=lD.has(e)?lD.get(e):e.args.length;return n-=1,n<=0?(e.resolve(t),lD.delete(e),!0):(lD.set(e,n),!1)}function dD(e,t){let n=lD.has(e)?lD.get(e):e.args.length;return 0===n?0===Number(t)&&(lD.delete(e),e.resolve(t),!0):(n-=1,n<=0?(e.resolve(t),!0):(lD.set(e,n),!1))}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readyHandler=e.errorHandler=e.closeHandler=e.connectHandler=void 0;const t=dN,n=pN,s=RR,i=_N,r=MR,a=(0,i.Debug)("connection");function o(e){const n=new t.AbortError("Command aborted due to connection close");return n.command={name:e.name,args:e.args},n}e.connectHandler=function(t){return function(){t.setStatus("connect"),t.resetCommandQueue();let n=!1;const{connectionEpoch:s}=t;t.condition.auth&&t.auth(t.condition.auth,(function(e){s===t.connectionEpoch&&e&&(-1!==e.message.indexOf("no password is set")?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):-1!==e.message.indexOf("without any password configured for the default user")?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):-1!==e.message.indexOf("wrong number of arguments for 'auth' command")?console.warn("[ERROR] The server returned \"wrong number of arguments for 'auth' command\". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under."):(n=!0,t.recoverFromFatalError(e,e)))})),t.condition.select&&t.select(t.condition.select).catch((e=>{t.silentEmit("error",e)})),t.options.enableReadyCheck||e.readyHandler(t)(),new r.default(t,{stringNumbers:t.options.stringNumbers}),t.options.enableReadyCheck&&t._readyCheck((function(i,r){s===t.connectionEpoch&&(i?n||t.recoverFromFatalError(new Error("Ready check failed: "+i.message),i):t.connector.check(r)?e.readyHandler(t)():t.disconnect(!0))}))}},e.closeHandler=function(e){return function(){const n=e.status;if(e.setStatus("close"),e.commandQueue.length&&function(e){var t;let n=0;for(let s=0;s<e.length;){const i=null===(t=e.peekAt(s))||void 0===t?void 0:t.command,r=i.pipelineIndex;void 0!==r&&0!==r||(n=0),void 0===r||r===n++?s++:(e.remove(s,1),i.reject(o(i)))}}(e.commandQueue),e.offlineQueue.length&&function(e){var t;for(let n=0;n<e.length;){const s=null===(t=e.peekAt(n))||void 0===t?void 0:t.command;if("multi"===s.name)break;if("exec"===s.name){e.remove(n,1),s.reject(o(s));break}s.inTransaction?(e.remove(n,1),s.reject(o(s))):n++}}(e.offlineQueue),"ready"===n&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,a("skip reconnecting since the connection is manually closed."),t();if("function"!=typeof e.options.retryStrategy)return a("skip reconnecting because `retryStrategy` is not a function"),t();const r=e.options.retryStrategy(++e.retryAttempts);if("number"!=typeof r)return a("skip reconnecting because `retryStrategy` doesn't return a number"),t();a("reconnect in %sms",r),e.setStatus("reconnecting",r),e.reconnectTimeout=setTimeout((function(){e.reconnectTimeout=null,e.connect().catch(i.noop)}),r);const{maxRetriesPerRequest:c}=e.options;if("number"==typeof c)if(c<0)a("maxRetriesPerRequest is negative, ignoring...");else{0===e.retryAttempts%(c+1)&&(a("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new s.MaxRetriesPerRequestError(c)))}};function t(){e.setStatus("end"),e.flushQueue(new Error(i.CONNECTION_CLOSED_ERROR_MSG))}},e.errorHandler=function(e){return function(t){a("error: %s",t),e.silentEmit("error",t)}},e.readyHandler=function(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then((()=>e.setStatus("monitoring")),(t=>e.emit("error",t)));const{sendCommand:t}=e;return e.sendCommand=function(s){return n.default.checkFlag("VALID_IN_MONITOR_MODE",s.name)?t.call(e,s):(s.reject(new Error("Connection is in monitoring mode, can't process commands.")),s.promise)},void e.once("close",(function(){delete e.sendCommand}))}const t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.connectionName&&(a("set the connection name [%s]",e.options.connectionName),e.client("setname",e.options.connectionName).catch(i.noop)),e.options.readOnly&&(a("set the connection to readonly mode"),e.readonly().catch(i.noop)),e.prevCondition){const n=e.prevCondition;if(e.prevCondition=null,n.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(a("connect to db [%d]",t),e.select(t));const s=n.subscriber.channels("subscribe");s.length&&(a("subscribe %d channels",s.length),e.subscribe(s));const i=n.subscriber.channels("psubscribe");i.length&&(a("psubscribe %d channels",i.length),e.psubscribe(i));const r=n.subscriber.channels("ssubscribe");r.length&&(a("ssubscribe %d channels",r.length),e.ssubscribe(r))}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(a("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){const t=e.prevCommandQueue.shift();t.select!==e.condition.select&&"select"!==t.command.name&&e.select(t.select),e.sendCommand(t.command,t.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){a("send %d commands in offline queue",e.offlineQueue.length);const t=e.offlineQueue;for(e.resetOfflineQueue();t.length>0;){const n=t.shift();n.select!==e.condition.select&&"select"!==n.command.name&&e.select(n.select),e.sendCommand(n.command,n.stream)}}e.condition.select!==t&&(a("connect to db [%d]",t),e.select(t))}}}(IR);var pD,hD={};function fD(){if(pD)return ZC;pD=1,Object.defineProperty(ZC,"__esModule",{value:!0});const e=JC,t=k,n=tN,s=dR(),i=pN,r=function(){if(CR)return pR;CR=1,Object.defineProperty(pR,"__esModule",{value:!0}),pR.SentinelConnector=pR.StandaloneConnector=void 0;const e=hR;pR.StandaloneConnector=e.default;const t=NR();return pR.SentinelConnector=t.default,pR}(),a=NR(),o=IR,c=hD,l=_I,u=bI,d=_N,p=KI,h=TI,f=yN,m=oR,g=(0,d.Debug)("redis");class _ extends h.default{constructor(e,n,s){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,n,s),t.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){const e=new a.default(this.options);e.emitter=this,this.connector=e}else this.connector=new r.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach((([e,t])=>{this.defineCommand(e,t)})),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(f.noop)}static createClient(...e){return new _(...e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values())e+=t.length;return e}connect(e){const t=new Promise(((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(new Error("Redis is already connecting/connected"));this.connectionEpoch+=1,this.setStatus("connecting");const{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};const i=this;(0,n.default)(this.connector.connect((function(e,t){i.silentEmit(e,t)})),(function(n,r){if(n)return i.flushQueue(n),i.silentEmit("error",n),t(n),void i.setStatus("end");let a=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(a="connect"),i.stream=r,s.noDelay&&r.setNoDelay(!0),"number"==typeof s.keepAlive&&(r.connecting?r.once(a,(()=>{r.setKeepAlive(!0,s.keepAlive)})):r.setKeepAlive(!0,s.keepAlive)),r.connecting){if(r.once(a,o.connectHandler(i)),s.connectTimeout){let e=!1;r.setTimeout(s.connectTimeout,(function(){if(e)return;r.setTimeout(0),r.destroy();const t=new Error("connect ETIMEDOUT");t.errorno="ETIMEDOUT",t.code="ETIMEDOUT",t.syscall="connect",o.errorHandler(i)(t)})),r.once(a,(function(){e=!0,r.setTimeout(0)}))}}else if(r.destroyed){const e=i.connector.firstError;e&&process.nextTick((()=>{o.errorHandler(i)(e)})),process.nextTick(o.closeHandler(i))}else process.nextTick(o.connectHandler(i));r.destroyed||(r.once("error",o.errorHandler(i)),r.once("close",o.closeHandler(i)));const c=function(){i.removeListener("close",l),e()};var l=function(){i.removeListener("ready",c),t(new Error(d.CONNECTION_CLOSED_ERROR_MSG))};i.once("ready",c),i.once("close",l)}))}));return(0,n.default)(t,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),"wait"===this.status?o.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new _({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":(null===(e=this.condition)||void 0===e?void 0:e.subscriber)?"subscriber":"normal"}monitor(e){const t=this.duplicate({monitor:!0,lazyConnect:!1});return(0,n.default)(new Promise((function(e,n){t.once("error",n),t.once("monitoring",(function(){e(t)}))})),e)}sendCommand(t,n){var s,r;if("wait"===this.status&&this.connect().catch(f.noop),"end"===this.status)return t.reject(new Error(d.CONNECTION_CLOSED_ERROR_MSG)),t.promise;if((null===(s=this.condition)||void 0===s?void 0:s.subscriber)&&!i.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",t.name))return t.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),t.promise;"number"==typeof this.options.commandTimeout&&t.setTimeout(this.options.commandTimeout);let a="ready"===this.status||!n&&"connect"===this.status&&(0,e.exists)(t.name)&&(0,e.hasFlag)(t.name,"loading");if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(a=!1):a=!1,a)g.enabled&&g("write command[%s]: %d -> %s(%o)",this._getDescription(),null===(r=this.condition)||void 0===r?void 0:r.select,t.name,t.args),n?"isPipeline"in n&&n.isPipeline?n.write(t.toWritable(n.destination.redis.stream)):n.write(t.toWritable(n)):this.stream.write(t.toWritable(this.stream)),this.commandQueue.push({command:t,stream:n,select:this.condition.select}),i.default.checkFlag("WILL_DISCONNECT",t.name)&&(this.manuallyClosing=!0),void 0!==this.options.socketTimeout&&void 0===this.socketTimeoutTimer&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return t.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),t.promise;if("quit"===t.name&&0===this.offlineQueue.length)return this.disconnect(),t.resolve(Buffer.from("OK")),t.promise;g.enabled&&g("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,t.name,t.args),this.offlineQueue.push({command:t,stream:n,select:this.condition.select})}if("select"===t.name&&(0,d.isInt)(t.args[0])){const e=parseInt(t.args[0],10);this.condition.select!==e&&(this.condition.select=e,this.emit("select",e),g("switch to db [%d]",this.condition.select))}return t.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout((()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0}),this.options.socketTimeout),this.stream.once("data",(()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,0!==this.commandQueue.length&&this.setSocketTimeout()}))}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}silentEmit(e,t){let n;if("error"===e){if(n=t,"end"===this.status)return;if(this.manuallyClosing&&n instanceof Error&&(n.message===d.CONNECTION_CLOSED_ERROR_MSG||"connect"===n.syscall||"read"===n.syscall))return}return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,t,n){this.flushQueue(t,n),this.silentEmit("error",t),this.disconnect(!0)}handleReconnection(e,t){var n;let s=!1;switch(this.options.reconnectOnError&&(s=this.options.reconnectOnError(e)),s){case 1:case!0:"reconnecting"!==this.status&&this.disconnect(!0),t.command.reject(e);break;case 2:"reconnecting"!==this.status&&this.disconnect(!0),(null===(n=this.condition)||void 0===n?void 0:n.select)!==t.select&&"select"!==t.command.name&&this.select(t.select),this.sendCommand(t.command);break;default:t.command.reject(e)}}_getDescription(){let e;return e="path"in this.options&&this.options.path?this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?this.options.host+":"+this.options.port:"",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new m}resetOfflineQueue(){this.offlineQueue=new m}parseOptions(...e){const t={};let n=!1;for(let s=0;s<e.length;++s){const i=e[s];if(null!=i)if("object"==typeof i)(0,f.defaults)(t,i);else if("string"==typeof i)(0,f.defaults)(t,(0,d.parseURL)(i)),i.startsWith("rediss://")&&(n=!0);else{if("number"!=typeof i)throw new Error("Invalid argument "+i);t.port=i}}n&&(0,f.defaults)(t,{tls:!0}),(0,f.defaults)(t,_.defaultOptions),"string"==typeof t.port&&(t.port=parseInt(t.port,10)),"string"==typeof t.db&&(t.db=parseInt(t.db,10)),this.options=(0,d.resolveTLSProfile)(t)}setStatus(e,t){g.enabled&&g("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,t))}createScanStream(e,{key:t,options:n={}}){return new l.default({objectMode:!0,key:t,redis:this,command:e,...n})}flushQueue(e,t){let n;if((t=(0,f.defaults)({},t,{offlineQueue:!0,commandQueue:!0})).offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(t.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){const t=this;this.info((function(n,s){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if("string"!=typeof s)return e(null,s);const i={},r=s.split("\r\n");for(let e=0;e<r.length;++e){const[t,...n]=r[e].split(":"),s=n.join(":");s&&(i[t]=s)}if(i.loading&&"0"!==i.loading){const n=1e3*(i.loading_eta_seconds||1),s=t.options.maxLoadingRetryTime&&t.options.maxLoadingRetryTime<n?t.options.maxLoadingRetryTime:n;g("Redis server still loading, trying again in "+s+"ms"),setTimeout((function(){t._readyCheck(e)}),s)}else e(null,i)})).catch(f.noop)}}return _.Cluster=s.default,_.Command=i.default,_.defaultOptions=c.DEFAULT_REDIS_OPTIONS,(0,p.default)(_,t.EventEmitter),(0,u.addTransactionSupport)(_.prototype),ZC.default=_,ZC}Object.defineProperty(hD,"__esModule",{value:!0}),hD.DEFAULT_REDIS_OPTIONS=void 0,hD.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(50*e,2e3)},keepAlive:0,noDelay:!0,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(10*e,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.print=t.ReplyError=t.SentinelIterator=t.SentinelConnector=t.AbstractConnector=t.Pipeline=t.ScanStream=t.Command=t.Cluster=t.Redis=t.default=void 0,t=e.exports=fD().default;var n=fD();Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.default}});var s=fD();Object.defineProperty(t,"Redis",{enumerable:!0,get:function(){return s.default}});var i=dR();Object.defineProperty(t,"Cluster",{enumerable:!0,get:function(){return i.default}});var r=pN;Object.defineProperty(t,"Command",{enumerable:!0,get:function(){return r.default}});var a=_I;Object.defineProperty(t,"ScanStream",{enumerable:!0,get:function(){return a.default}});var o=vI;Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return o.default}});var c=fR;Object.defineProperty(t,"AbstractConnector",{enumerable:!0,get:function(){return c.default}});var l=NR();Object.defineProperty(t,"SentinelConnector",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"SentinelIterator",{enumerable:!0,get:function(){return l.SentinelIterator}}),t.ReplyError=dN.ReplyError,Object.defineProperty(t,"Promise",{get:()=>(console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise),set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}}),t.print=function(e,t){e?console.log("Error: "+e):console.log("Reply: "+t)}}(XC,XC.exports);var mD=$(XC.exports);const gD="WILDCARD_REPLACEMENT";class _D{static isRedirectUrlAllowedForWhitelistEntriesWithSimpleWildcards(e,t){for(let n=0;n<e.length;n++){let s=e[n];try{if(_D.isRedirectUrlAllowedForWhitelistEntry(s,t))return!0}catch(e){console.log("Error in redirect with token endpoint"),console.log("redirectUrl: "+t),console.log("redirect_whitelist_entry: "+s),console.log(e)}}return!1}static isRedirectUrlAllowedForWhitelistEntry(e,t){if(!e)return!1;if("*"===e)return!0;const n=t.protocol,s=t.host,i=t.pathname,r=t.search;if(e.includes("://")){if(n.includes(gD))return!1;{let t=WC.replaceAll(e,"\\*",gD),a=new URL(t);const o=a.protocol,c=a.host,l=a.pathname,u=a.search;if(!_D.startsWithUntilWildcardReplacement(n,o))return!1;if(!_D.startsWithUntilWildcardReplacement(s,c))return!1;if(!_D.startsWithUntilWildcardReplacement(i,l))return!1;return!!_D.startsWithUntilWildcardReplacement(r,u)}}{let n="http://"+e,s="https://"+e,i=_D.isRedirectUrlAllowedForWhitelistEntry(n,t),r=_D.isRedirectUrlAllowedForWhitelistEntry(s,t);return i||r}}static startsWithUntilWildcardReplacement(e,t){let n=t.split(gD),s=n.length>1?n[0]:t;return s.endsWith("/")&&(s=s.slice(0,-1)),e.startsWith(s)}static getUrlFromString(e){try{return new URL(e)}catch(e){return null}}}var yD,ED={},bD={},vD={name:"joi",description:"Object schema validation",version:"17.13.3",repository:"git://github.com/hapijs/joi",main:"lib/index.js",types:"lib/index.d.ts",browser:"dist/joi-browser.min.js",files:["lib/**/*","dist/*"],keywords:["schema","validation"],dependencies:{"@hapi/hoek":"^9.3.0","@hapi/topo":"^5.1.0","@sideway/address":"^4.1.5","@sideway/formula":"^3.0.1","@sideway/pinpoint":"^2.0.0"},devDependencies:{"@hapi/bourne":"2.x.x","@hapi/code":"8.x.x","@hapi/joi-legacy-test":"npm:@hapi/joi@15.x.x","@hapi/lab":"^25.1.3","@types/node":"^14.18.63",typescript:"4.3.x"},scripts:{prepublishOnly:"cd browser && npm install && npm run build",test:"lab -t 100 -a @hapi/code -L -Y","test-cov-html":"lab -r html -o coverage.html -a @hapi/code"},license:"BSD-3-Clause"},TD={};function AD(){if(yD)return TD;yD=1;const e=eL(),t={};return t.wrap=e.string().min(1).max(2).allow(!1),TD.preferences=e.object({allowUnknown:e.boolean(),abortEarly:e.boolean(),artifacts:e.boolean(),cache:e.boolean(),context:e.object(),convert:e.boolean(),dateFormat:e.valid("date","iso","string","time","utc"),debug:e.boolean(),errors:{escapeHtml:e.boolean(),label:e.valid("path","key",!1),language:[e.string(),e.object().ref()],render:e.boolean(),stack:e.boolean(),wrap:{label:t.wrap,array:t.wrap,string:t.wrap}},externals:e.boolean(),messages:e.object(),noDefaults:e.boolean(),nonEnumerables:e.boolean(),presence:e.valid("required","optional","forbidden"),skipFunctions:e.boolean(),stripUnknown:e.object({arrays:e.boolean(),objects:e.boolean()}).or("arrays","objects").allow(!0,!1),warnings:e.boolean()}).strict(),t.nameRx=/^[a-zA-Z0-9]\w*$/,t.rule=e.object({alias:e.array().items(e.string().pattern(t.nameRx)).single(),args:e.array().items(e.string(),e.object({name:e.string().pattern(t.nameRx).required(),ref:e.boolean(),assert:e.alternatives([e.function(),e.object().schema()]).conditional("ref",{is:!0,then:e.required()}),normalize:e.function(),message:e.string().when("assert",{is:e.function(),then:e.required()})})),convert:e.boolean(),manifest:e.boolean(),method:e.function().allow(!1),multi:e.boolean(),validate:e.function()}),TD.extension=e.object({type:e.alternatives([e.string(),e.object().regex()]).required(),args:e.function(),cast:e.object().pattern(t.nameRx,e.object({from:e.function().maxArity(1).required(),to:e.function().minArity(1).maxArity(2).required()})),base:e.object().schema().when("type",{is:e.object().regex(),then:e.forbidden()}),coerce:[e.function().maxArity(3),e.object({method:e.function().maxArity(3).required(),from:e.array().items(e.string()).single()})],flags:e.object().pattern(t.nameRx,e.object({setter:e.string(),default:e.any()})),manifest:{build:e.function().arity(2)},messages:[e.object(),e.string()],modifiers:e.object().pattern(t.nameRx,e.function().minArity(1).maxArity(2)),overrides:e.object().pattern(t.nameRx,e.function()),prepare:e.function().maxArity(3),rebuild:e.function().arity(1),rules:e.object().pattern(t.nameRx,t.rule),terms:e.object().pattern(t.nameRx,e.object({init:e.array().allow(null).required(),manifest:e.object().pattern(/.+/,[e.valid("schema","single"),e.object({mapped:e.object({from:e.string().required(),to:e.string().required()}).required()})])})),validate:e.function().maxArity(3)}).strict(),TD.extensions=e.array().items(e.object(),e.function().arity(1)).strict(),t.desc={buffer:e.object({buffer:e.string()}),func:e.object({function:e.function().required(),options:{literal:!0}}),override:e.object({override:!0}),ref:e.object({ref:e.object({type:e.valid("value","global","local"),path:e.array().required(),separator:e.string().length(1).allow(!1),ancestor:e.number().min(0).integer().allow("root"),map:e.array().items(e.array().length(2)).min(1),adjust:e.function(),iterables:e.boolean(),in:e.boolean(),render:e.boolean()}).required()}),regex:e.object({regex:e.string().min(3)}),special:e.object({special:e.valid("deep").required()}),template:e.object({template:e.string().required(),options:e.object()}),value:e.object({value:e.alternatives([e.object(),e.array()]).required()})},t.desc.entity=e.alternatives([e.array().items(e.link("...")),e.boolean(),e.function(),e.number(),e.string(),t.desc.buffer,t.desc.func,t.desc.ref,t.desc.regex,t.desc.special,t.desc.template,t.desc.value,e.link("/")]),t.desc.values=e.array().items(null,e.boolean(),e.function(),e.number().allow(1/0,-1/0),e.string().allow(""),e.symbol(),t.desc.buffer,t.desc.func,t.desc.override,t.desc.ref,t.desc.regex,t.desc.template,t.desc.value),t.desc.messages=e.object().pattern(/.+/,[e.string(),t.desc.template,e.object().pattern(/.+/,[e.string(),t.desc.template])]),TD.description=e.object({type:e.string().required(),flags:e.object({cast:e.string(),default:e.any(),description:e.string(),empty:e.link("/"),failover:t.desc.entity,id:e.string(),label:e.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:e.boolean(),unit:e.string()}).unknown(),preferences:{allowUnknown:e.boolean(),abortEarly:e.boolean(),artifacts:e.boolean(),cache:e.boolean(),convert:e.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:e.boolean(),label:["path","key"],language:[e.string(),t.desc.ref],wrap:{label:t.wrap,array:t.wrap}},externals:e.boolean(),messages:t.desc.messages,noDefaults:e.boolean(),nonEnumerables:e.boolean(),presence:["required","optional","forbidden"],skipFunctions:e.boolean(),stripUnknown:e.object({arrays:e.boolean(),objects:e.boolean()}).or("arrays","objects").allow(!0,!1),warnings:e.boolean()},allow:t.desc.values,invalid:t.desc.values,rules:e.array().min(1).items({name:e.string().required(),args:e.object().min(1),keep:e.boolean(),message:[e.string(),t.desc.messages],warn:e.boolean()}),keys:e.object().pattern(/.*/,e.link("/")),link:t.desc.ref}).pattern(/^[a-z]\w*$/,e.any()),TD}var SD,wD,xD={},kD={exports:{}},CD={},ND={};function ID(){if(SD)return ND;SD=1;const e=re,t=jD(),n={annotations:Symbol("annotations")};return ND.error=function(s){if(!this._original||"object"!=typeof this._original)return this.details[0].message;const i=s?"":"[31m",r=s?"":"[41m",a=s?"":"[0m",o=e(this._original);for(let e=this.details.length-1;e>=0;--e){const s=e+1,i=this.details[e],r=i.path;let a=o;for(let e=0;;++e){const o=r[e];if(t.isSchema(a)&&(a=a.clone()),!(e+1<r.length&&"string"!=typeof a[o])){const e=a[n.annotations]||{errors:{},missing:{}};a[n.annotations]=e;const t=o||i.context.key;void 0!==a[o]?(e.errors[t]=e.errors[t]||[],e.errors[t].push(s)):e.missing[t]=s;break}a=a[o]}}const c=/_\$key\$_([, \d]+)_\$end\$_"/g,l=/"_\$miss\$_([^|]+)\|(\d+)_\$end\$_": "__missing__"/g,u=/\s*"_\$idx\$_([, \d]+)_\$end\$_",?\n(.*)/g,d=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)]"/g;let p=n.safeStringify(o,2).replace(c,((e,t)=>`" ${i}[${t}]${a}`)).replace(l,((e,t,n)=>`${r}"${t}"${a}${i} [${n}]: -- missing --${a}`)).replace(u,((e,t,n)=>`\n${n} ${i}[${t}]${a}`)).replace(d,((e,t)=>t));p=`${p}\n${i}`;for(let e=0;e<this.details.length;++e){p=`${p}\n[${e+1}] ${this.details[e].message}`}return p+=a,p},n.safeStringify=function(e,t){return JSON.stringify(e,n.serializer(),t)},n.serializer=function(){const e=[],t=[],s=(n,s)=>t[0]===s?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(s)).join(".")+"]";return function(i,r){if(t.length>0){const n=t.indexOf(this);~n?(t.length=n+1,e.length=n+1,e[n]=i):(t.push(this),e.push(i)),~t.indexOf(r)&&(r=s.call(this,i,r))}else t.push(r);if(r){const e=r[n.annotations];if(e){if(Array.isArray(r)){const t=[];for(let n=0;n<r.length;++n)e.errors[n]&&t.push(`_$idx$_${e.errors[n].sort().join(", ")}_$end$_`),t.push(r[n]);r=t}else{for(const t in e.errors)r[`${t}_$key$_${e.errors[t].sort().join(", ")}_$end$_`]=r[t],r[t]=void 0;for(const t in e.missing)r[`_$miss$_${t}|${e.missing[t]}_$end$_`]="__missing__"}return r}}return r===1/0||r===-1/0||Number.isNaN(r)||"function"==typeof r||"symbol"==typeof r?"["+r.toString()+"]":r}},ND}function RD(){return wD||(wD=1,function(e){const t=ID(),n=jD(),s=UD();e.Report=class{constructor(t,n,s,i,r,a,o){if(this.code=t,this.flags=i,this.messages=r,this.path=a.path,this.prefs=o,this.state=a,this.value=n,this.message=null,this.template=null,this.local=s||{},this.local.label=e.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(t,n){return e.template(this.value,t,n||this.code,this.state,this.prefs)}},e.path=function(e){let t="";for(const n of e)"object"!=typeof n&&("string"==typeof n?(t&&(t+="."),t+=n):t+=`[${n}]`);return t},e.template=function(e,t,i,r,a){if(!t)return;if(s.isTemplate(t))return"root"!==i?t:null;let o=a.errors.language;if(n.isResolvable(o)&&(o=o.resolve(e,r,a)),o&&t[o]){if(void 0!==t[o][i])return t[o][i];if(void 0!==t[o]["*"])return t[o]["*"]}return t[i]?t[i]:t["*"]},e.label=function(t,n,s,i){if(!s.errors.label)return"";if(t.label)return t.label;let r=n.path;"key"===s.errors.label&&n.path.length>1&&(r=n.path.slice(-1));const a=e.path(r);return a||(e.template(null,s.messages,"root",n,s)||i&&e.template(null,i,"root",n,s)||"value")},e.process=function(t,n,s){if(!t)return null;const{override:i,message:r,details:a}=e.details(t);if(i)return i;if(s.errors.stack)return new e.ValidationError(r,a,n);const o=Error.stackTraceLimit;Error.stackTraceLimit=0;const c=new e.ValidationError(r,a,n);return Error.stackTraceLimit=o,c},e.details=function(e,t={}){let n=[];const s=[];for(const i of e){if(i instanceof Error){if(!1!==t.override)return{override:i};const e=i.toString();n.push(e),s.push({message:e,type:"override",context:{error:i}});continue}const e=i.toString();n.push(e),s.push({message:e,path:i.path.filter((e=>"object"!=typeof e)),type:i.code,context:i.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:s}},e.ValidationError=class extends Error{constructor(e,t,n){super(e),this._original=n,this.details=t}static isError(t){return t instanceof e.ValidationError}},e.ValidationError.prototype.isJoi=!0,e.ValidationError.prototype.name="ValidationError",e.ValidationError.prototype.annotate=t.error}(CD)),CD}var DD,OD,LD,FD,MD,PD={};function BD(){return DD||(DD=1,function(e){const t=V,n=re,s=X,i=jD();let r;const a={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};e.create=function(e,n={}){t("string"==typeof e,"Invalid reference key:",e),i.assertOptions(n,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),t(!n.prefix||"object"==typeof n.prefix,"options.prefix must be of type object");const s=Object.assign({},a.defaults,n);delete s.prefix;const r=s.separator,o=a.context(e,r,n.prefix);if(s.type=o.type,e=o.key,"value"===s.type)if(o.root&&(t(!r||e[0]!==r,"Cannot specify relative path with root prefix"),s.ancestor="root",e||(e=null)),r&&r===e)e=null,s.ancestor=0;else if(void 0!==s.ancestor)t(!r||!e||e[0]!==r,"Cannot combine prefix with ancestor option");else{const[t,n]=a.ancestor(e,r);n&&""===(e=e.slice(n))&&(e=null),s.ancestor=t}return s.path=r?null===e?[]:e.split(r):[e],new a.Ref(s)},e.in=function(t,n={}){return e.create(t,{...n,in:!0})},e.isRef=function(e){return!!e&&!!e[i.symbols.ref]},a.Ref=class{constructor(e){t("object"==typeof e,"Invalid reference construction"),i.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),t([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),t(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),t(!e.map||Array.isArray(e.map),"options.map must be an array"),t(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,a.defaults,e),t("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,n,s,i,r={}){return t(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(s.context,n,r):"local"===this.type?this._resolve(i,n,r):this.ancestor?"root"===this.ancestor?this._resolve(n.ancestors[n.ancestors.length-1],n,r):(t(this.ancestor<=n.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(n.ancestors[this.ancestor-1],n,r)):this._resolve(e,n,r)}_resolve(e,t,n){let i;if("value"===this.type&&t.mainstay.shadow&&!1!==n.shadow&&(i=t.mainstay.shadow.get(this.absolute(t))),void 0===i&&(i=s(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(i=this.adjust(i)),this.map){const e=this.map.get(i);void 0!==e&&(i=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,i),i}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},a.Ref.prototype[i.symbols.ref]=!0,e.build=function(e){return"value"===(e=Object.assign({},a.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new a.Ref(e)},a.context=function(e,t,n={}){if(e=e.trim(),n){const s=void 0===n.global?"$":n.global;if(s!==t&&e.startsWith(s))return{key:e.slice(s.length),type:"global"};const i=void 0===n.local?"#":n.local;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"local"};const r=void 0===n.root?"/":n.root;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"value",root:!0}}return{key:e,type:"value"}},a.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let n=2;for(;e[n]===t;)++n;return[n-1,n]},e.toSibling=0,e.toParent=1,e.Manager=class{constructor(){this.refs=[]}register(t,n){if(t)if(n=void 0===n?e.toParent:n,Array.isArray(t))for(const e of t)this.register(e,n);else if(i.isSchema(t))for(const e of t._refs.refs)e.ancestor-n>=0&&this.refs.push({ancestor:e.ancestor-n,root:e.root});else e.isRef(t)&&"value"===t.type&&t.ancestor-n>=0&&this.refs.push({ancestor:t.ancestor-n,root:t.root}),r=r||UD(),r.isTemplate(t)&&this.register(t.refs(),n)}get length(){return this.refs.length}clone(){const t=new e.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}}(PD)),PD}function UD(){return OD||(OD=1,function(e,t){const n=V,s=re,i=oe,r=ce,a=jD(),o=RD(),c=BD(),l={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=l.Template=class{constructor(e,t){if(n("string"==typeof e,"Template source must be a string"),n(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,t){const{functions:e,...i}=t;this._settings=Object.keys(i).length?s(i):void 0,this._functions=e,this._functions&&(n(Object.keys(this._functions).every((e=>"string"==typeof e)),"Functions keys must be strings"),n(Object.values(this._functions).every((e=>"function"==typeof e)),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const e=l.encode(this.source),t=l.split(e);let n=!1;const s=[],i=t.shift();i&&s.push(i);for(const e of t){const t="{"!==e[0],i=t?"}":"}}",r=e.indexOf(i);if(-1===r||"{"===e[1]){s.push(`{${l.decode(e)}`);continue}let a=e.slice(t?0:1,r);const o=":"===a[0];o&&(a=a.slice(1));const c=this._ref(l.decode(a),{raw:t,wrapped:o});s.push(c),"string"!=typeof c&&(n=!0);const u=e.slice(r+i.length);u&&s.push(l.decode(u))}n?this._template=s:this.rendered=s.join("")}static date(e,t){return l.dateFormat[t.dateFormat].call(e)}describe(e={}){if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),this._functions&&(t.functions=this._functions),t}static build(e){return new l.Template(e.template,e.options||e.functions?{...e.options,functions:e.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[a.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,n,s){return this._template&&1===this._template.length?this._part(this._template[0],e,t,n,s,{}):this.render(e,t,n,s)}_part(e,...t){return e.ref?e.ref.resolve(...t):e.formula.evaluate(t)}render(e,t,n,s,r={}){if(!this.isDynamic())return this.rendered;const a=[];for(const o of this._template)if("string"==typeof o)a.push(o);else{const c=this._part(o,e,t,n,s,r),u=l.stringify(c,e,t,n,s,r);if(void 0!==u){const e=o.raw||!1===(r.errors&&r.errors.escapeHtml)?u:i(u);a.push(l.wrap(e,o.wrapped&&n.errors.wrap.label))}}return a.join("")}_ref(e,{raw:t,wrapped:n}){const s=[],i=e=>{const t=c.create(e,this._settings);return s.push(t),e=>{const n=t.resolve(...e);return void 0!==n?n:null}};try{const t=this._functions?{...l.functions,...this._functions}:l.functions;var a=new r.Parser(e,{reference:i,functions:t,constants:l.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(a.single){if("reference"===a.single.type){const e=s[0];return{ref:e,raw:t,refs:s,wrapped:n||"local"===e.type&&"label"===e.key}}return l.stringify(a.single.value)}return{formula:a,raw:t,refs:s}}toString(){return this.source}},l.Template.prototype[a.symbols.template]=!0,l.Template.prototype.isImmutable=!0,l.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>l.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>l.closes.slice(0,t.length)))},l.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},l.split=function(e){const t=[];let n="";for(let s=0;s<e.length;++s){const i=e[s];if("{"===i){let i="";for(;s+1<e.length&&"{"===e[s+1];)i+="{",++s;t.push(n),n=i}else n+=i}return t.push(n),t},l.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},l.stringify=function(e,t,n,s,i,r={}){const a=typeof e,o=s&&s.errors&&s.errors.wrap||{};let u=!1;if(c.isRef(e)&&e.render&&(u=e.in,e=e.resolve(t,n,s,i,{in:e.in,...r})),null===e)return"null";if("string"===a)return l.wrap(e,r.arrayItems&&o.string);if("number"===a||"function"===a||"symbol"===a)return e.toString();if("object"!==a)return JSON.stringify(e);if(e instanceof Date)return l.Template.date(e,s);if(e instanceof Map){const t=[];for(const[n,s]of e.entries())t.push(`${n.toString()} -> ${s.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const d=[];for(const a of e)d.push(l.stringify(a,t,n,s,i,{arrayItems:!0,...r}));return l.wrap(d.join(", "),!u&&o.array)},l.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},l.functions={if:(e,t,n)=>e?t:n,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,n,s,i,r]=this,a=r.messages;if(!a)return"";const c=o.template(t,a[0],e,n,s)||o.template(t,a[1],e,n,s);return c?c.render(t,n,s,i,r):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}}(kD)),kD.exports}function HD(){return LD||(LD=1,function(e){const t=V,n=re,s=UD();e.compile=function(e,i){if("string"==typeof e)return t(!i,"Cannot set single message string"),new s(e);if(s.isTemplate(e))return t(!i,"Cannot set single message template"),e;t("object"==typeof e&&!Array.isArray(e),"Invalid message options"),i=i?n(i):{};for(let n in e){const r=e[n];if("root"===n||s.isTemplate(r)){i[n]=r;continue}if("string"==typeof r){i[n]=new s(r);continue}t("object"==typeof r&&!Array.isArray(r),"Invalid message for",n);const a=n;for(n in i[a]=i[a]||{},r){const e=r[n];"root"===n||s.isTemplate(e)?i[a][n]=e:(t("string"==typeof e,"Invalid message for",n,"in",a),i[a][n]=new s(e))}}return i},e.decompile=function(e){const t={};for(let n in e){const i=e[n];if("root"===n){t.root=i;continue}if(s.isTemplate(i)){t[n]=i.describe({compact:!0});continue}const r=n;for(n in t[r]={},i){const e=i[n];"root"!==n?t[r][n]=e.describe({compact:!0}):t[r].root=e}}return t},e.merge=function(i,r){if(!i)return e.compile(r);if(!r)return i;if("string"==typeof r)return new s(r);if(s.isTemplate(r))return r;const a=n(i);for(let e in r){const n=r[e];if("root"===e||s.isTemplate(n)){a[e]=n;continue}if("string"==typeof n){a[e]=new s(n);continue}t("object"==typeof n&&!Array.isArray(n),"Invalid message for",e);const i=e;for(e in a[i]=a[i]||{},n){const r=n[e];"root"===e||s.isTemplate(r)?a[i][e]=r:(t("string"==typeof r,"Invalid message for",e,"in",i),a[i][e]=new s(r))}}return a}}(xD)),xD}function jD(){return FD||(FD=1,function(e){const t=V,n=W,s=vD;let i,r;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};e.version=s.version,e.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},e.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},e.assertOptions=function(e,n,s="Options"){t(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const i=Object.keys(e).filter((e=>!n.includes(e)));t(0===i.length,`${s} contain unknown keys: ${i}`)},e.checkPreferences=function(e){r=r||AD();const t=r.preferences.validate(e);if(t.error)throw new n([t.error.details[0].message])},e.compare=function(e,t,n){switch(n){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},e.default=function(e,t){return void 0===e?t:e},e.isIsoDate=function(e){return a.isoDate.test(e)},e.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.isResolvable=function(t){return!!t&&(t[e.symbols.ref]||t[e.symbols.template])},e.isSchema=function(n,s={}){const i=n&&n[e.symbols.any];return!!i&&(t(s.legacy||i.version===e.version,"Cannot mix different versions of joi schemas"),!0)},e.isValues=function(t){return t[e.symbols.values]},e.limit=function(e){return Number.isSafeInteger(e)&&e>=0},e.preferences=function(t,n){i=i||HD(),t=t||{},n=n||{};const s=Object.assign({},t,n);return n.errors&&t.errors&&(s.errors=Object.assign({},t.errors,n.errors),s.errors.wrap=Object.assign({},t.errors.wrap,n.errors.wrap)),n.messages&&(s.messages=i.compile(n.messages,t.messages)),delete s[e.symbols.prefs],s},e.tryWithPath=function(e,t,n={}){try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,n.append&&(e.message=`${e.message} (${e.path})`),e}},e.validateArg=function(t,n,{assert:s,message:i}){if(e.isSchema(s)){const e=s.validate(t);if(!e.error)return;return e.error.message}if(!s(t))return n?`${n} ${i}`:i},e.verifyFlat=function(e,n){for(const s of e)t(!Array.isArray(s),"Method no longer accepts array arguments:",n)}}(bD)),bD}function GD(){if(MD)return ED;MD=1;const e=V,t=re,n=jD(),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};return ED.provider={provision:e=>new s.Cache(e)},s.Cache=class{constructor(t={}){n.assertOptions(t,["max"]),e(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this._max=t.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(e,t){if(null!==e&&!s.supported.has(typeof e))return;let n=this._map.get(e);if(n)return n.value=t,void this._list.first(n);n=this._list.unshift({key:e,value:t}),this._map.set(e,n),this._compact()}get(e){const n=this._map.get(e);if(n)return this._list.first(n),t(n.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:n}=e;return t.prev=n,n&&(n.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}},ED}var $D,qD={};function zD(){return $D||($D=1,function(e){const t=V,n=jD(),s=BD(),i={};e.schema=function(e,t,s={}){n.assertOptions(s,["appendPath","override"]);try{return i.schema(e,t,s)}catch(e){throw s.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},i.schema=function(e,s,r){t(void 0!==s,"Invalid undefined schema"),Array.isArray(s)&&(t(s.length,"Invalid empty array schema"),1===s.length&&(s=s[0]));const a=(t,...n)=>!1!==r.override?t.valid(e.override,...n):t.valid(...n);if(i.simple(s))return a(e,s);if("function"==typeof s)return e.custom(s);if(t("object"==typeof s,"Invalid schema content:",typeof s),n.isResolvable(s))return a(e,s);if(n.isSchema(s))return s;if(Array.isArray(s)){for(const t of s)if(!i.simple(t))return e.alternatives().try(...s);return a(e,...s)}return s instanceof RegExp?e.string().regex(s):s instanceof Date?a(e.date(),s):(t(Object.getPrototypeOf(s)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(s))},e.ref=function(e,t){return s.isRef(e)?e:s.create(e,t)},e.compile=function(s,r,a={}){n.assertOptions(a,["legacy"]);const o=r&&r[n.symbols.any];if(o)return t(a.legacy||o.version===n.version,"Cannot mix different versions of joi schemas:",o.version,n.version),r;if("object"!=typeof r||!a.legacy)return e.schema(s,r,{appendPath:!0});const c=i.walk(r);return c?c.compile(c.root,r):e.schema(s,r,{appendPath:!0})},i.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=i.walk(t);if(e)return e}return null}const s=e[n.symbols.any];if(s)return{root:e[s.root],compile:s.compile};t(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const n=i.walk(e[t]);if(n)return n}return null},i.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},e.when=function(r,a,o){if(void 0===o&&(t(a&&"object"==typeof a,"Missing options"),o=a,a=s.create(".")),Array.isArray(o)&&(o={switch:o}),n.assertOptions(o,["is","not","then","otherwise","switch","break"]),n.isSchema(a))return t(void 0===o.is,'"is" can not be used with a schema condition'),t(void 0===o.not,'"not" can not be used with a schema condition'),t(void 0===o.switch,'"switch" can not be used with a schema condition'),i.condition(r,{is:a,then:o.then,otherwise:o.otherwise,break:o.break});if(t(s.isRef(a)||"string"==typeof a,"Invalid condition:",a),t(void 0===o.not||void 0===o.is,'Cannot combine "is" with "not"'),void 0===o.switch){let c=o;void 0!==o.not&&(c={is:o.not,then:o.otherwise,otherwise:o.then,break:o.break});let l=void 0!==c.is?r.$_compile(c.is):r.$_root.invalid(null,!1,0,"").required();return t(void 0!==c.then||void 0!==c.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),t(void 0===c.break||void 0===c.then||void 0===c.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===o.is||s.isRef(o.is)||n.isSchema(o.is)||(l=l.required()),i.condition(r,{ref:e.ref(a),is:l,then:c.then,otherwise:c.otherwise,break:c.break})}t(Array.isArray(o.switch),'"switch" must be an array'),t(void 0===o.is,'Cannot combine "switch" with "is"'),t(void 0===o.not,'Cannot combine "switch" with "not"'),t(void 0===o.then,'Cannot combine "switch" with "then"');const c={ref:e.ref(a),switch:[],break:o.break};for(let e=0;e<o.switch.length;++e){const i=o.switch[e],a=e===o.switch.length-1;n.assertOptions(i,a?["is","then","otherwise"]:["is","then"]),t(void 0!==i.is,'Switch statement missing "is"'),t(void 0!==i.then,'Switch statement missing "then"');const l={is:r.$_compile(i.is),then:r.$_compile(i.then)};if(s.isRef(i.is)||n.isSchema(i.is)||(l.is=l.is.required()),a){t(void 0===o.otherwise||void 0===i.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const e=void 0!==o.otherwise?o.otherwise:i.otherwise;void 0!==e&&(t(void 0===c.break,"Cannot specify both otherwise and break"),l.otherwise=r.$_compile(e))}c.switch.push(l)}return c},i.condition=function(e,t){for(const n of["then","otherwise"])void 0===t[n]?delete t[n]:t[n]=e.$_compile(t[n]);return t}}(qD)),qD}var WD,YD={};function VD(){if(WD)return YD;WD=1;const e=V,t=re,n=jD(),s=HD(),i={};return YD.type=function(r,a){const o=Object.getPrototypeOf(r),c=t(o),l=r._assign(Object.create(c)),u=Object.assign({},a);delete u.base,c._definition=u;const d=o._definition||{};u.messages=s.merge(d.messages,u.messages),u.properties=Object.assign({},d.properties,u.properties),l.type=u.type,u.flags=Object.assign({},d.flags,u.flags);const p=Object.assign({},d.terms);if(u.terms)for(const t in u.terms){const n=u.terms[t];e(void 0===l.$_terms[t],"Invalid term override for",u.type,t),l.$_terms[t]=n.init,p[t]=n}u.terms=p,u.args||(u.args=d.args),u.prepare=i.prepare(u.prepare,d.prepare),u.coerce&&("function"==typeof u.coerce&&(u.coerce={method:u.coerce}),u.coerce.from&&!Array.isArray(u.coerce.from)&&(u.coerce={method:u.coerce.method,from:[].concat(u.coerce.from)})),u.coerce=i.coerce(u.coerce,d.coerce),u.validate=i.validate(u.validate,d.validate);const h=Object.assign({},d.rules);if(u.rules)for(const t in u.rules){const s=u.rules[t];e("object"==typeof s,"Invalid rule definition for",u.type,t);let i=s.method;if(void 0===i&&(i=function(){return this.$_addRule(t)}),i&&(e(!c[t],"Rule conflict in",u.type,t),c[t]=i),e(!h[t],"Rule conflict in",u.type,t),h[t]=s,s.alias){const e=[].concat(s.alias);for(const t of e)c[t]=s.method}s.args&&(s.argsByName=new Map,s.args=s.args.map((t=>("string"==typeof t&&(t={name:t}),e(!s.argsByName.has(t.name),"Duplicated argument name",t.name),n.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),s.argsByName.set(t.name,t),t))))}u.rules=h;const f=Object.assign({},d.modifiers);if(u.modifiers)for(const t in u.modifiers){e(!c[t],"Rule conflict in",u.type,t);const n=u.modifiers[t];e("function"==typeof n,"Invalid modifier definition for",u.type,t);const s=function(e){return this.rule({[t]:e})};c[t]=s,f[t]=n}if(u.modifiers=f,u.overrides){c._super=o,l.$_super={};for(const t in u.overrides)e(o[t],"Cannot override missing",t),u.overrides[t][n.symbols.parent]=o[t],l.$_super[t]=o[t].bind(l);Object.assign(c,u.overrides)}u.cast=Object.assign({},d.cast,u.cast);const m=Object.assign({},d.manifest,u.manifest);return m.build=i.build(u.manifest&&u.manifest.build,d.manifest&&d.manifest.build),u.manifest=m,u.rebuild=i.rebuild(u.rebuild,d.rebuild),l},i.build=function(e,t){return e&&t?function(n,s){return t(e(n,s),s)}:e||t},i.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(n,s){let i;if((!t.from||t.from.includes(typeof n))&&(i=t.method(n,s),i)){if(i.errors||void 0===i.value)return i;n=i.value}if(!e.from||e.from.includes(typeof n)){const t=e.method(n,s);if(t)return t}return i}}:e||t},i.prepare=function(e,t){return e&&t?function(n,s){const i=e(n,s);if(i){if(i.errors||void 0===i.value)return i;n=i.value}return t(n,s)||i}:e||t},i.rebuild=function(e,t){return e&&t?function(n){t(n),e(n)}:e||t},i.validate=function(e,t){return e&&t?function(n,s){const i=t(n,s);if(i){if(i.errors&&(!Array.isArray(i.errors)||i.errors.length))return i;n=i.value}return e(n,s)||i}:e||t},YD}var KD,QD={};function XD(){if(KD)return QD;KD=1;const e=V,t=re,n=jD(),s=HD(),i=BD(),r=UD();let a;const o={};return QD.describe=function(i){const r=i._definition,a={type:i.type,flags:{},rules:[]};for(const e in i._flags)"_"!==e[0]&&(a.flags[e]=o.describe(i._flags[e]));Object.keys(a.flags).length||delete a.flags,i._preferences&&(a.preferences=t(i._preferences,{shallow:["messages"]}),delete a.preferences[n.symbols.prefs],a.preferences.messages&&(a.preferences.messages=s.decompile(a.preferences.messages))),i._valids&&(a.allow=i._valids.describe()),i._invalids&&(a.invalid=i._invalids.describe());for(const e of i._rules){if(!1===r.rules[e.name].manifest)continue;const t={name:e.name};for(const n in r.modifiers)void 0!==e[n]&&(t[n]=o.describe(e[n]));if(e.args){t.args={};for(const n in e.args){const s=e.args[n];("options"!==n||Object.keys(s).length)&&(t.args[n]=o.describe(s,{assign:n}))}Object.keys(t.args).length||delete t.args}a.rules.push(t)}a.rules.length||delete a.rules;for(const t in i.$_terms){if("_"===t[0])continue;e(!a[t],"Cannot describe schema due to internal name conflict with",t);const s=i.$_terms[t];if(!s)continue;if(s instanceof Map){s.size&&(a[t]=[...s.entries()]);continue}if(n.isValues(s)){a[t]=s.describe();continue}e(r.terms[t],"Term",t,"missing configuration");const c=r.terms[t].manifest,l="object"==typeof c;if(!s.length&&!l)continue;const u=[];for(const e of s)u.push(o.describe(e));if(l){const{from:e,to:n}=c.mapped;a[t]={};for(const s of u)a[t][s[n]]=s[e]}else"single"!==c?a[t]=u:(e(1===u.length,"Term",t,"contains more than one item"),a[t]=u[0])}return o.validate(i.$_root,a),a},o.describe=function(e,s={}){if(Array.isArray(e))return e.map(o.describe);if(e===n.symbols.deepDefault)return{special:"deep"};if("object"!=typeof e||null===e)return e;if("options"===s.assign)return t(e);if(Buffer&&Buffer.isBuffer(e))return{buffer:e.toString("binary")};if(e instanceof Date)return e.toISOString();if(e instanceof Error)return e;if(e instanceof RegExp)return"regex"===s.assign?e.toString():{regex:e.toString()};if(e[n.symbols.literal])return{function:e.literal};if("function"==typeof e.describe)return"ref"===s.assign?e.describe().ref:e.describe();const i={};for(const t in e){const n=e[t];void 0!==n&&(i[t]=o.describe(n,{assign:t}))}return i},QD.build=function(e,t){return new o.Builder(e).parse(t)},o.Builder=class{constructor(e){this.joi=e}parse(t){o.validate(this.joi,t);let n=this.joi[t.type]()._bare();const s=n._definition;if(t.flags)for(const i in t.flags){const r=s.flags[i]&&s.flags[i].setter||i;e("function"==typeof n[r],"Invalid flag",i,"for type",t.type),n=n[r](this.build(t.flags[i]))}if(t.preferences&&(n=n.preferences(this.build(t.preferences))),t.allow&&(n=n.allow(...this.build(t.allow))),t.invalid&&(n=n.invalid(...this.build(t.invalid))),t.rules)for(const i of t.rules){e("function"==typeof n[i.name],"Invalid rule",i.name,"for type",t.type);const r=[];if(i.args){const n={};for(const e in i.args)n[e]=this.build(i.args[e],{assign:e});const a=Object.keys(n),o=s.rules[i.name].args;if(o){e(a.length<=o.length,"Invalid number of arguments for",t.type,i.name,"(expected up to",o.length,", found",a.length,")");for(const{name:e}of o)r.push(n[e])}else e(1===a.length,"Invalid number of arguments for",t.type,i.name,"(expected up to 1, found",a.length,")"),r.push(n[a[0]])}n=n[i.name](...r);const a={};for(const e in s.modifiers)void 0!==i[e]&&(a[e]=this.build(i[e]));Object.keys(a).length&&(n=n.rule(a))}const i={};for(const n in t){if(["allow","flags","invalid","whens","preferences","rules","type"].includes(n))continue;e(s.terms[n],"Term",n,"missing configuration");const r=s.terms[n].manifest;if("schema"!==r)if("values"!==r)if("single"!==r)if("object"!=typeof r)i[n]=this.build(t[n]);else{i[n]={};for(const e in t[n]){const s=t[n][e];i[n][e]=this.parse(s)}}else i[n]=this.build(t[n]);else i[n]=t[n].map((e=>this.build(e)));else i[n]=t[n].map((e=>this.parse(e)))}return t.whens&&(i.whens=t.whens.map((e=>this.build(e)))),n=s.manifest.build(n,i),n.$_temp.ruleset=!1,n}build(s,a={}){if(null===s)return null;if(Array.isArray(s))return s.map((e=>this.build(e)));if(s instanceof Error)return s;if("options"===a.assign)return t(s);if("regex"===a.assign)return o.regex(s);if("ref"===a.assign)return i.build(s);if("object"!=typeof s)return s;if(1===Object.keys(s).length){if(s.buffer)return e(Buffer,"Buffers are not supported"),Buffer&&Buffer.from(s.buffer,"binary");if(s.function)return{[n.symbols.literal]:!0,literal:s.function};if(s.override)return n.symbols.override;if(s.ref)return i.build(s.ref);if(s.regex)return o.regex(s.regex);if(s.special)return e(["deep"].includes(s.special),"Unknown special value",s.special),n.symbols.deepDefault;if(s.value)return t(s.value)}if(s.type)return this.parse(s);if(s.template)return r.build(s);const c={};for(const e in s)c[e]=this.build(s[e],{assign:e});return c}},o.regex=function(e){const t=e.lastIndexOf("/"),n=e.slice(1,t),s=e.slice(t+1);return new RegExp(n,s)},o.validate=function(e,t){a=a||AD(),e.assert(t,a.description)},QD}var ZD,JD={};function eO(){if(ZD)return JD;ZD=1;const e=de,t=pe,n=RD(),s={codes:{error:1,pass:2,full:3},labels:{0:"never used",1:"always error",2:"always pass"}};return JD.setup=function(e){const t=function(){return e._tracer=e._tracer||new s.Tracer,e._tracer};e.trace=t,e[Symbol.for("@hapi/lab/coverage/initialize")]=t,e.untrace=()=>{e._tracer=null}},JD.location=function(e){return e.$_setFlag("_tracerLocation",t.location(2))},s.Tracer=class{constructor(){this.name="Joi",this._schemas=new Map}_register(e){const n=this._schemas.get(e);if(n)return n.store;const i=new s.Store(e),{filename:r,line:a}=e._flags._tracerLocation||t.location(5);return this._schemas.set(e,{filename:r,line:a,store:i}),i}_combine(e,t){for(const{store:n}of this._schemas.values())n._combine(e,t)}report(e){const t=[];for(const{filename:n,line:i,store:r}of this._schemas.values()){if(e&&e!==n)continue;const a=[],o=[];for(const[e,t]of r._sources.entries()){if(s.sub(t.paths,o))continue;if(!t.entry){a.push({status:"never reached",paths:[...t.paths]}),o.push(...t.paths);continue}for(const n of["valid","invalid"]){const s=e[`_${n}s`];if(!s)continue;const i=new Set(s._values),r=new Set(s._refs);for(const{value:e,ref:s}of t[n])i.delete(e),r.delete(s);(i.size||r.size)&&a.push({status:[...i,...[...r].map((e=>e.display))],rule:`${n}s`})}const n=e._rules.map((e=>e.name));for(const t of["default","failover"])void 0!==e._flags[t]&&n.push(t);for(const e of n){const n=s.labels[t.rule[e]||0];if(n){const s={rule:e,status:n};t.paths.size&&(s.paths=[...t.paths]),a.push(s)}}}a.length&&t.push({filename:n,line:i,missing:a,severity:"error",message:`Schema missing tests for ${a.map(s.message).join(", ")}`})}return t.length?t:null}},s.Store=class{constructor(e){this.active=!0,this._sources=new Map,this._combos=new Map,this._scan(e)}debug(e,t,n,s){e.mainstay.debug&&e.mainstay.debug.push({type:t,name:n,result:s,path:e.path})}entry(e,t){s.debug(t,{type:"entry"}),this._record(e,(e=>{e.entry=!0}))}filter(e,t,n,i){s.debug(t,{type:n,...i}),this._record(e,(e=>{e[n].add(i)}))}log(e,t,n,i,r){s.debug(t,{type:n,name:i,result:"full"===r?"pass":r}),this._record(e,(e=>{e[n][i]=e[n][i]||0,e[n][i]|=s.codes[r]}))}resolve(e,t,n){if(!e.mainstay.debug)return;const s={type:"resolve",ref:t.display,to:n,path:e.path};e.mainstay.debug.push(s)}value(t,n,s,i,r){if(!t.mainstay.debug||e(s,i))return;const a={type:"value",by:n,from:s,to:i,path:t.path};r&&(a.name=r),t.mainstay.debug.push(a)}_record(e,t){const n=this._sources.get(e);if(n)return void t(n);const s=this._combos.get(e);for(const e of s)this._record(e,t)}_scan(e,t){const n=t||[];let i=this._sources.get(e);i||(i={paths:new Set,entry:!1,rule:{},valid:new Set,invalid:new Set},this._sources.set(e,i)),n.length&&i.paths.add(n);e.$_modify({each:(e,t)=>{const i=s.id(e,t);this._scan(e,n.concat(i))},ref:!1})}_combine(e,t){this._combos.set(e,t)}},s.message=function(e){return`${e.paths?n.path(e.paths[0])+(e.rule?":":""):""}${e.rule||""} (${e.status})`},s.id=function(e,{source:t,name:n,path:s,key:i}){return e._flags.id?e._flags.id:i||(n=`@${n}`,"terms"===t?[n,s[Math.min(s.length-1,1)]]:n)},s.sub=function(t,n){for(const s of t)for(const t of n)if(e(s.slice(0,t.length),t))return!0;return!1},s.debug=function(e,t){e.mainstay.debug&&(t.path=e.debug?[...e.path,e.debug]:e.path,e.mainstay.debug.push(t))},JD}var tO,nO={};var sO,iO,rO,aO,oO,cO,lO,uO,dO,pO,hO,fO,mO,gO,_O,yO,EO,bO,vO,TO,AO,SO,wO,xO,kO,CO,NO,IO,RO,DO,OO,LO,FO,MO,PO,BO={};function UO(){return rO||(rO=1,function(e){const t=V,n=re,s=ye,i=X,r=jD(),a=RD(),o=function(){if(iO)return sO;iO=1;const e=re,t=X,n=jD(),s={value:Symbol("value")};return sO=s.State=class{constructor(e,t,n){this.path=e,this.ancestors=t,this.mainstay=n.mainstay,this.schemas=n.schemas,this.debug=null}localize(e,t=null,n=null){const i=new s.State(e,t,this);return n&&i.schemas&&(i.schemas=[s.schemas(n),...i.schemas]),i}nest(e,t){const n=new s.State(this.path,this.ancestors,this);return n.schemas=n.schemas&&[s.schemas(e),...n.schemas],n.debug=t,n}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=e(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},s.schemas=function(e){return n.isSchema(e)?{schema:e}:e},s.Shadow=class{constructor(){this._values=null}set(e,t,n){if(!e.length)return;if("strip"===n&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let i=this._values;for(let t=0;t<e.length;++t){const n=e[t];let s=i.get(n);s||(s=new Map,i.set(n,s)),i=s}i[s.value]=t}get(e){const t=this.node(e);if(t)return t[s.value]}node(e){if(this._values)return t(this._values,e,{iterables:!0})}override(e,n){if(!this._values)return;const s=e.slice(0,-1),i=e[e.length-1],r=t(this._values,s,{iterables:!0});n?r.set(i,n):r&&r.delete(i)}},sO}(),c={result:Symbol("result")};e.entry=function(e,n,s){let i=r.defaults;s&&(t(void 0===s.warnings,"Cannot override warnings preference in synchronous validation"),t(void 0===s.artifacts,"Cannot override artifacts preference in synchronous validation"),i=r.preferences(r.defaults,s));const o=c.entry(e,n,i);t(!o.mainstay.externals.length,"Schema with external rules must use validateAsync()");const l={value:o.value};return o.error&&(l.error=o.error),o.mainstay.warnings.length&&(l.warning=a.details(o.mainstay.warnings)),o.mainstay.debug&&(l.debug=o.mainstay.debug),o.mainstay.artifacts&&(l.artifacts=o.mainstay.artifacts),l},e.entryAsync=async function(e,t,n){let s=r.defaults;n&&(s=r.preferences(r.defaults,n));const o=c.entry(e,t,s),l=o.mainstay;if(o.error)throw l.debug&&(o.error.debug=l.debug),o.error;if(l.externals.length){let t=o.value;const u=[];for(const o of l.externals){const d=o.state.path,p="link"===o.schema.type?l.links.get(o.schema):null;let h,f,m=t;const g=d.length?[t]:[],_=d.length?i(e,d):e;if(d.length){h=d[d.length-1];let e=t;for(const t of d.slice(0,-1))e=e[t],g.unshift(e);f=g[0],m=f[h]}try{const e=(e,t)=>(p||o.schema).$_createError(e,m,t,o.state,s),i=await o.method(m,{schema:o.schema,linked:p,state:o.state,prefs:n,original:_,error:e,errorsArray:c.errorsArray,warn:(e,t)=>l.warnings.push((p||o.schema).$_createError(e,m,t,o.state,s)),message:(e,t)=>(p||o.schema).$_createError("external",m,t,o.state,s,{messages:e})});if(void 0===i||i===m)continue;if(i instanceof a.Report){if(l.tracer.log(o.schema,o.state,"rule","external","error"),u.push(i),s.abortEarly)break;continue}if(Array.isArray(i)&&i[r.symbols.errors]){if(l.tracer.log(o.schema,o.state,"rule","external","error"),u.push(...i),s.abortEarly)break;continue}f?(l.tracer.value(o.state,"rule",m,i,"external"),f[h]=i):(l.tracer.value(o.state,"rule",t,i,"external"),t=i)}catch(e){throw s.errors.label&&(e.message+=` (${o.label})`),e}}if(o.value=t,u.length)throw o.error=a.process(u,e,s),l.debug&&(o.error.debug=l.debug),o.error}if(!s.warnings&&!s.debug&&!s.artifacts)return o.value;const u={value:o.value};return l.warnings.length&&(u.warning=a.details(l.warnings)),l.debug&&(u.debug=l.debug),l.artifacts&&(u.artifacts=l.artifacts),u},c.Mainstay=class{constructor(e,t,n){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=n,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},c.entry=function(t,n,s){const{tracer:i,cleanup:r}=c.tracer(n,s),l=s.debug?[]:null,u=n._ids._schemaChain?new Map:null,d=new c.Mainstay(i,l,u),p=n._ids._schemaChain?[{schema:n}]:null,h=new o([],[],{mainstay:d,schemas:p}),f=e.validate(t,n,h,s);r&&n.$_root.untrace();const m=a.process(f.errors,t,s);return{value:f.value,error:m,mainstay:d}},c.tracer=function(e,n){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:n.debug?(t(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:c.ignore}},e.validate=function(e,t,n,s,i={}){if(t.$_terms.whens&&(t=t._generate(e,n,s).schema),t._preferences&&(s=c.prefs(t,s)),t._cache&&s.cache){const s=t._cache.get(e);if(n.mainstay.tracer.debug(n,"validate","cached",!!s),s)return s}const a=(i,r,a)=>t.$_createError(i,e,r,a||n,s),o={original:e,prefs:s,schema:t,state:n,error:a,errorsArray:c.errorsArray,warn:(e,t,s)=>n.mainstay.warnings.push(a(e,t,s)),message:(i,r)=>t.$_createError("custom",e,r,n,s,{messages:i})};n.mainstay.tracer.entry(t,n);const l=t._definition;if(l.prepare&&void 0!==e&&s.convert){const t=l.prepare(e,o);if(t){if(n.mainstay.tracer.value(n,"prepare",e,t.value),t.errors)return c.finalize(t.value,[].concat(t.errors),o);e=t.value}}if(l.coerce&&void 0!==e&&s.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,o);if(t){if(n.mainstay.tracer.value(n,"coerced",e,t.value),t.errors)return c.finalize(t.value,[].concat(t.errors),o);e=t.value}}const u=t._flags.empty;u&&u.$_match(c.trim(e,t),n.nest(u),r.defaults)&&(n.mainstay.tracer.value(n,"empty",e,void 0),e=void 0);const d=i.presence||t._flags.presence||(t._flags._endedSwitch?null:s.presence);if(void 0===e){if("forbidden"===d)return c.finalize(e,null,o);if("required"===d)return c.finalize(e,[t.$_createError("any.required",e,null,n,s)],o);if("optional"===d){if(t._flags.default!==r.symbols.deepDefault)return c.finalize(e,null,o);n.mainstay.tracer.value(n,"default",e,{}),e={}}}else if("forbidden"===d)return c.finalize(e,[t.$_createError("any.unknown",e,null,n,s)],o);const p=[];if(t._valids){const i=t._valids.get(e,n,s,t._flags.insensitive);if(i)return s.convert&&(n.mainstay.tracer.value(n,"valids",e,i.value),e=i.value),n.mainstay.tracer.filter(t,n,"valid",i),c.finalize(e,null,o);if(t._flags.only){const i=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},n,s);if(s.abortEarly)return c.finalize(e,[i],o);p.push(i)}}if(t._invalids){const i=t._invalids.get(e,n,s,t._flags.insensitive);if(i){n.mainstay.tracer.filter(t,n,"invalid",i);const r=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},n,s);if(s.abortEarly)return c.finalize(e,[r],o);p.push(r)}}if(l.validate){const t=l.validate(e,o);if(t&&(n.mainstay.tracer.value(n,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return p.push(t.errors),c.finalize(e,p,o);if(t.errors.length)return p.push(...t.errors),c.finalize(e,p,o)}}return t._rules.length?c.rules(e,p,o):c.finalize(e,p,o)},c.rules=function(e,t,n){const{schema:s,state:i,prefs:a}=n;for(const o of s._rules){const l=s._definition.rules[o.method];if(l.convert&&a.convert){i.mainstay.tracer.log(s,i,"rule",o.name,"full");continue}let u,d=o.args;if(o._resolve.length){d=Object.assign({},d);for(const t of o._resolve){const n=l.argsByName.get(t),o=d[t].resolve(e,i,a),c=n.normalize?n.normalize(o):o,p=r.validateArg(c,null,n);if(p){u=s.$_createError("any.ref",o,{arg:t,ref:d[t],reason:p},i,a);break}d[t]=c}}u=u||l.validate(e,n,d,o);const p=c.rule(u,o);if(p.errors){if(i.mainstay.tracer.log(s,i,"rule",o.name,"error"),o.warn){i.mainstay.warnings.push(...p.errors);continue}if(a.abortEarly)return c.finalize(e,p.errors,n);t.push(...p.errors)}else i.mainstay.tracer.log(s,i,"rule",o.name,"pass"),i.mainstay.tracer.value(i,"rule",e,p.value,o.name),e=p.value}return c.finalize(e,t,n)},c.rule=function(e,t){return e instanceof a.Report?(c.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[r.symbols.errors]?(e.forEach((e=>c.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},c.error=function(e,t){return t.message&&e._setTemplate(t.message),e},c.finalize=function(e,n,s){n=n||[];const{schema:i,state:r,prefs:o}=s;if(n.length){const t=c.default("failover",void 0,n,s);void 0!==t&&(r.mainstay.tracer.value(r,"failover",e,t),e=t,n=[])}if(n.length&&i._flags.error)if("function"==typeof i._flags.error){n=i._flags.error(n),Array.isArray(n)||(n=[n]);for(const e of n)t(e instanceof Error||e instanceof a.Report,"error() must return an Error object")}else n=[i._flags.error];if(void 0===e){const t=c.default("default",e,n,s);r.mainstay.tracer.value(r,"default",e,t),e=t}if(i._flags.cast&&void 0!==e){const t=i._definition.cast[i._flags.cast];if(t.from(e)){const n=t.to(e,s);r.mainstay.tracer.value(r,"cast",e,n,i._flags.cast),e=n}}if(i.$_terms.externals&&o.externals&&!1!==o._externals)for(const{method:e}of i.$_terms.externals)r.mainstay.externals.push({method:e,schema:i,state:r,label:a.label(i._flags,r,o)});const l={value:e,errors:n.length?n:null};return i._flags.result&&(l.value="strip"===i._flags.result?void 0:s.original,r.mainstay.tracer.value(r,i._flags.result,e,l.value),r.shadow(e,i._flags.result)),i._cache&&!1!==o.cache&&!i._refs.length&&i._cache.set(s.original,l),void 0===e||l.errors||void 0===i._flags.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(i._flags.artifact)||r.mainstay.artifacts.set(i._flags.artifact,[]),r.mainstay.artifacts.get(i._flags.artifact).push(r.path)),l},c.prefs=function(e,t){const n=t===r.defaults;return n&&e._preferences[r.symbols.prefs]?e._preferences[r.symbols.prefs]:(t=r.preferences(t,e._preferences),n&&(e._preferences[r.symbols.prefs]=t),t)},c.default=function(e,t,s,i){const{schema:a,state:o,prefs:c}=i,l=a._flags[e];if(c.noDefaults||void 0===l)return t;if(o.mainstay.tracer.log(a,o,"rule",e,"full"),!l)return l;if("function"==typeof l){const t=l.length?[n(o.ancestors[0]),i]:[];try{return l(...t)}catch(t){return void s.push(a.$_createError(`any.${e}`,null,{error:t},o,c))}}return"object"!=typeof l?l:l[r.symbols.literal]?l.literal:r.isResolvable(l)?l.resolve(t,o,c):n(l)},c.trim=function(e,t){if("string"!=typeof e)return e;const n=t.$_getRule("trim");return n&&n.args.enabled?e.trim():e},c.ignore={active:!1,debug:s,entry:s,filter:s,log:s,resolve:s,value:s},c.errorsArray=function(){const e=[];return e[r.symbols.errors]=!0,e}}(BO)),BO}function HO(){if(oO)return aO;oO=1;const e=V,t=de,n=jD(),s={};return aO=s.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=s.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){n.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,n){if(e=e||new s.Values,t){if(t._override)return t.clone();for(const n of[...t._values,...t._refs])e.add(n)}if(n)for(const t of[...n._values,...n._refs])e.remove(t);return e.length?e:null}remove(e){n.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,n,s){return!!this.get(e,t,n,s)}get(e,n,s,i){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&i){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const n of this._values)if(t(n,e))return{value:n};if(n)for(const r of this._refs){const a=r.resolve(e,n,s,null,{in:!0});if(void 0===a)continue;const o=r.in&&"object"==typeof a?Array.isArray(a)?a:Object.keys(a):[a];for(const n of o)if(typeof n==typeof e)if(i&&e&&"string"==typeof e){if(n.toLowerCase()===e.toLowerCase())return{value:n,ref:r}}else if(t(n,e))return{value:n,ref:r}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new s.Values(this._values,this._refs);return e._override=this._override,e}concat(t){e(!t._override,"Cannot concat override set of values");const n=new s.Values([...this._values,...t._values],[...this._refs,...t._refs]);return n._override=this._override,n}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},s.Values.prototype[n.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(e){const t=new Map;if(e)for(const n of e)"string"==typeof n&&t.set(n.toLowerCase(),n);return t},aO}function jO(){if(lO)return cO;lO=1;const e=V,t=re,n=de,s=_e,i=GD(),r=jD(),a=zD(),o=RD(),c=VD(),l=XD(),u=HD(),d=(tO||(tO=1,function(e){const t=V,n=jD(),s=BD(),i={};e.Ids=i.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new i.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[n,s]of e._byId.entries())t(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,s);for(const[n,s]of e._byKey.entries())t(!this._byId.has(n),"Schema key conflicts with existing id:",n),this._byKey.set(n,s)}fork(e,s,r){const a=this._collect(e);a.push({schema:r});const o=a.shift();let c={id:o.id,schema:s(o.schema)};t(n.isSchema(c.schema),"adjuster function failed to return a joi schema type");for(const e of a)c={id:e.id,schema:i.fork(e.schema,c.id,c.schema)};return c.schema}labels(e,t=[]){const n=e[0],s=this._get(n);if(!s)return[...t,...e].join(".");const i=e.slice(1);return t=[...t,s.schema._flags.label||n],i.length?s.schema._ids.labels(i,t):t.join(".")}reach(e,n=[]){const s=e[0],i=this._get(s);t(i,"Schema does not contain path",[...n,...e].join("."));const r=e.slice(1);return r.length?i.schema._ids.reach(r,[...n,s]):i.schema}register(e,{key:s}={}){if(!e||!n.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const i=e._flags.id;if(i){const n=this._byId.get(i);t(!n||n.schema===e,"Cannot add different schemas with the same id:",i),t(!this._byKey.has(i),"Schema id conflicts with existing key:",i),this._byId.set(i,{schema:e,id:i})}s&&(t(!this._byKey.has(s),"Schema already contains key:",s),t(!this._byId.has(s),"Schema key conflicts with existing id:",s),this._byKey.set(s,{schema:e,id:s}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,n=[],s=[]){const i=e[0],r=this._get(i);t(r,"Schema does not contain path",[...n,...e].join(".")),s=[r,...s];const a=e.slice(1);return a.length?r.schema._ids._collect(a,[...n,i],s):s}_get(e){return this._byId.get(e)||this._byKey.get(e)}},i.fork=function(t,n,s){const i=e.schema(t,{each:(e,{key:t})=>{if(n===(e._flags.id||t))return s},ref:!1});return i?i.$_mutateRebuild():t},e.schema=function(e,t){let n;for(const s in e._flags){if("_"===s[0])continue;const r=i.scan(e._flags[s],{source:"flags",name:s},t);void 0!==r&&(n=n||e.clone(),n._flags[s]=r)}for(let s=0;s<e._rules.length;++s){const r=e._rules[s],a=i.scan(r.args,{source:"rules",name:r.name},t);if(void 0!==a){n=n||e.clone();const t=Object.assign({},r);t.args=a,n._rules[s]=t,n._singleRules.get(r.name)===r&&n._singleRules.set(r.name,t)}}for(const s in e.$_terms){if("_"===s[0])continue;const r=i.scan(e.$_terms[s],{source:"terms",name:s},t);void 0!==r&&(n=n||e.clone(),n.$_terms[s]=r)}return n},i.scan=function(e,t,r,a,o){const c=a||[];if(null===e||"object"!=typeof e)return;let l;if(Array.isArray(e)){for(let n=0;n<e.length;++n){const s="terms"===t.source&&"keys"===t.name&&e[n].key,a=i.scan(e[n],t,r,[n,...c],s);void 0!==a&&(l=l||e.slice(),l[n]=a)}return l}if(!1!==r.schema&&n.isSchema(e)||!1!==r.ref&&s.isRef(e)){const n=r.each(e,{...t,path:c,key:o});if(n===e)return;return n}for(const n in e){if("_"===n[0])continue;const s=i.scan(e[n],t,r,[n,...c],o);void 0!==s&&(l=l||Object.assign({},e),l[n]=s)}return l}}(nO)),nO),p=BD(),h=eO(),f=UO(),m=HO(),g={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new d.Ids,this._preferences=null,this._refs=new p.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return e("function"==typeof l.describe,"Manifest functionality disabled"),l.describe(this)}allow(...e){return r.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(t){e(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),e(!this._inRuleset(),"Cannot set alterations inside a ruleset");const n=this.clone();n.$_terms.alterations=n.$_terms.alterations||[];for(const s in t){const i=t[s];e("function"==typeof i,"Alteration adjuster for",s,"must be a function"),n.$_terms.alterations.push({target:s,adjuster:i})}return n.$_temp.ruleset=!1,n}artifact(t){return e(void 0!==t,"Artifact cannot be undefined"),e(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return e(!1===t||"string"==typeof t,"Invalid to value"),e(!1===t||this._definition.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(e,t){return this._default("default",e,t)}description(t){return e(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(t){return e(t,"Missing error"),e(t instanceof Error||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,n={}){return e(void 0!==t,"Missing example"),r.assertOptions(n,["override"]),this._inner("examples",t,{single:!0,override:n.override})}external(t,n){return"object"==typeof t&&(e(!n,"Cannot combine options with description"),n=t.description,t=t.method),e("function"==typeof t,"Method must be a function"),e(void 0===n||n&&"string"==typeof n,"Description must be a non-empty string"),this._inner("externals",{method:t,description:n},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(t){return t?(e("string"==typeof t,"id must be a non-empty string"),e(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}label(t){return e(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return e(void 0!==t,"Meta cannot be undefined"),this._inner("metas",t,{single:!0})}note(...t){e(t.length,"Missing notes");for(const n of t)e(n&&"string"==typeof n,"Notes must be non-empty strings");return this._inner("notes",t)}only(t=!0){return e("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){e(t,"Missing preferences"),e(void 0===t.context,"Cannot override context"),e(void 0===t.externals,"Cannot override externals"),e(void 0===t.warnings,"Cannot override warnings"),e(void 0===t.debug,"Cannot override debug"),r.checkPreferences(t);const n=this.clone();return n._preferences=r.preferences(n._preferences,t),n}presence(t){return e(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}result(t){return e(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(e){const t=this.clone(),n=void 0!==e&&!e;return t._preferences=r.preferences(t._preferences,{convert:n}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}tag(...t){e(t.length,"Missing tags");for(const n of t)e(n&&"string"==typeof n,"Tags must be non-empty strings");return this._inner("tags",t)}unit(t){return e(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(...e){r.verifyFlat(e,"valid");const t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(t,n){const s=this.clone();s.$_terms.whens||(s.$_terms.whens=[]);const i=a.when(s,t,n);if(!["any","link"].includes(s.type)){const t=i.is?[i]:i.switch;for(const n of t)e(!n.then||"any"===n.then.type||n.then.type===s.type,"Cannot combine",s.type,"with",n.then&&n.then.type),e(!n.otherwise||"any"===n.otherwise.type||n.otherwise.type===s.type,"Cannot combine",s.type,"with",n.otherwise&&n.otherwise.type)}return s.$_terms.whens.push(i),s.$_mutateRebuild()}cache(t){e(!this._inRuleset(),"Cannot set caching inside a ruleset"),e(!this._cache,"Cannot override schema cache"),e(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const n=this.clone();return n._cache=t||i.provider.provision(),n.$_temp.ruleset=!1,n}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(t){e(r.isSchema(t),"Invalid schema object"),e("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),e(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),e(!t._inRuleset(),"Cannot concatenate a schema with open ruleset");let n=this.clone();if("any"===this.type&&"any"!==t.type){const e=t.clone();for(const t of Object.keys(n))"type"!==t&&(e[t]=n[t]);n=e}n._ids.concat(t._ids),n._refs.register(t,p.toSibling),n._preferences=n._preferences?r.preferences(n._preferences,t._preferences):t._preferences,n._valids=m.merge(n._valids,t._valids,t._invalids),n._invalids=m.merge(n._invalids,t._invalids,t._valids);for(const e of t._singleRules.keys())n._singleRules.has(e)&&(n._rules=n._rules.filter((t=>t.keep||t.name!==e)),n._singleRules.delete(e));for(const e of t._rules)t._definition.rules[e.method].multi||n._singleRules.set(e.name,e),n._rules.push(e);if(n._flags.empty&&t._flags.empty){n._flags.empty=n._flags.empty.concat(t._flags.empty);const e=Object.assign({},t._flags);delete e.empty,s(n._flags,e)}else if(t._flags.empty){n._flags.empty=t._flags.empty;const e=Object.assign({},t._flags);delete e.empty,s(n._flags,e)}else s(n._flags,t._flags);for(const e in t.$_terms){const s=t.$_terms[e];s?n.$_terms[e]?n.$_terms[e]=n.$_terms[e].concat(s):n.$_terms[e]=s.slice():n.$_terms[e]||(n.$_terms[e]=s)}return this.$_root._tracer&&this.$_root._tracer._combine(n,[this,t]),n.$_mutateRebuild()}extend(t){return e(!t.base,"Cannot extend type with another base"),c.type(this,t)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(t,n){e(!this._inRuleset(),"Cannot fork inside a ruleset");let s=this;for(let e of[].concat(t))e=Array.isArray(e)?e:e.split("."),s=s._ids.fork(e,n,s);return s.$_temp.ruleset=!1,s}rule(n){const s=this._definition;r.assertOptions(n,Object.keys(s.modifiers)),e(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const i=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;e(i>=0&&i<this._rules.length,"Cannot apply rules to empty ruleset");const a=this.clone();for(let r=i;r<a._rules.length;++r){const i=a._rules[r],o=t(i);for(const t in n)s.modifiers[t](o,n[t]),e(o.name===i.name,"Cannot change rule name");a._rules[r]=o,a._singleRules.get(o.name)===i&&a._singleRules.set(o.name,o)}return a.$_temp.ruleset=!1,a.$_mutateRebuild()}get ruleset(){e(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t._rules.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),e(!this._inRuleset(),"Cannot tailor inside a ruleset");let n=this;if(this.$_terms.alterations)for(const{target:s,adjuster:i}of this.$_terms.alterations)t.includes(s)&&(n=i(n),e(r.isSchema(n),"Alteration adjuster for",s,"failed to return a schema object"));return n=n.$_modify({each:e=>e.tailor(t),ref:!1}),n.$_temp.ruleset=!1,n.$_mutateRebuild()}tracer(){return h.location?h.location(this):this}validate(e,t){return f.entry(e,this,t)}validateAsync(e,t){return f.entryAsync(e,this,t)}$_addRule(t){"string"==typeof t&&(t={name:t}),e(t&&"object"==typeof t,"Invalid options"),e(t.name&&"string"==typeof t.name,"Invalid rule name");for(const n in t)e("_"!==n[0],"Cannot set private rule properties");const n=Object.assign({},t);n._resolve=[],n.method=n.method||n.name;const s=this._definition.rules[n.method],i=n.args;e(s,"Unknown rule",n.method);const a=this.clone();if(i){e(1===Object.keys(i).length||Object.keys(i).length===this._definition.rules[n.name].args.length,"Invalid rule definition for",this.type,n.name);for(const t in i){let o=i[t];if(s.argsByName){const c=s.argsByName.get(t);if(c.ref&&r.isResolvable(o))n._resolve.push(t),a.$_mutateRegister(o);else if(c.normalize&&(o=c.normalize(o),i[t]=o),c.assert){const n=r.validateArg(o,t,c);e(!n,n,"or reference")}}void 0!==o?i[t]=o:delete i[t]}}return s.multi||(a._ruleRemove(n.name,{clone:!1}),a._singleRules.set(n.name,n)),!1===a.$_temp.ruleset&&(a.$_temp.ruleset=null),s.priority?a._rules.unshift(n):a._rules.push(n),a}$_compile(e,t){return a.schema(this.$_root,e,t)}$_createError(e,t,n,s,i,r={}){const a=!1!==r.flags?this._flags:{},c=r.messages?u.merge(this._definition.messages,r.messages):this._definition.messages;return new o.Report(e,t,n,a,c,s,i)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,n,s){(n=Object.assign({},n)).abortEarly=!0,n._externals=!1,t.snapshot();const i=!f.validate(e,this,t,n,s).errors;return t.restore(),i}$_modify(e){return r.assertOptions(e,["each","once","ref","schema"]),d.schema(this,e)||this}$_mutateRebuild(){e(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset();return this.$_modify({each:(e,{source:t,name:n,path:s,key:i})=>{const r=this._definition[t][n]&&this._definition[t][n].register;!1!==r&&this.$_mutateRegister(e,{family:r,key:i})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e,{family:t,key:n}={}){this._refs.register(e,t),this._ids.register(e,{key:n})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(t,s,i={}){e("_"===t[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const r=this._definition.flags[t]||{};if(n(s,r.default)&&(s=void 0),n(s,this._flags[t]))return this;const a=!1!==i.clone?this.clone():this;return void 0!==s?(a._flags[t]=s,a.$_mutateRegister(s)):delete a._flags[t],"_"!==t[0]&&(a.$_temp.ruleset=!1),a}$_parent(e,...t){return this[e][r.symbols.parent].call(this,...t)}$_validate(e,t,n){return f.validate(e,this,t,n)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=t(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const n in t){const s=t[n];e.$_terms[n]=s.init}return e.$_mutateRebuild()}_default(t,n,s={}){r.assertOptions(s,"literal"),e(void 0!==n,"Missing",t,"value"),e("function"==typeof n||!s.literal,"Only function value supports literal option"),"function"==typeof n&&s.literal&&(n={[r.symbols.literal]:!0,literal:n});return this.$_setFlag(t,n)}_generate(e,t,n){if(!this.$_terms.whens)return{schema:this};const s=[],i=[];for(let r=0;r<this.$_terms.whens.length;++r){const a=this.$_terms.whens[r];if(a.concat){s.push(a.concat),i.push(`${r}.concat`);continue}const o=a.ref?a.ref.resolve(e,t,n):e,c=a.is?[a]:a.switch,l=i.length;for(let l=0;l<c.length;++l){const{is:u,then:d,otherwise:p}=c[l],h=`${r}${a.switch?"."+l:""}`;if(u.$_match(o,t.nest(u,`${h}.is`),n)){if(d){const r=t.localize([...t.path,`${h}.then`],t.ancestors,t.schemas),{schema:a,id:o}=d._generate(e,r,n);s.push(a),i.push(`${h}.then${o?`(${o})`:""}`);break}}else if(p){const r=t.localize([...t.path,`${h}.otherwise`],t.ancestors,t.schemas),{schema:a,id:o}=p._generate(e,r,n);s.push(a),i.push(`${h}.otherwise${o?`(${o})`:""}`);break}}if(a.break&&i.length>l)break}const r=i.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",r),!r)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let a=this;this._definition.generate&&(a=this._definition.generate(this,e,t,n));for(const e of s)a=a.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(a,[this,...s]),this.$_temp.whens[r]=a,{schema:a,id:r}}_inner(t,n,s={}){e(!this._inRuleset(),`Cannot set ${t} inside a ruleset`);const i=this.clone();return i.$_terms[t]&&!s.override||(i.$_terms[t]=[]),s.single?i.$_terms[t].push(n):i.$_terms[t].push(...n),i.$_temp.ruleset=!1,i}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e,t={}){if(!this._singleRules.has(e))return this;const n=!1!==t.clone?this.clone():this;n._singleRules.delete(e);const s=[];for(let t=0;t<n._rules.length;++t){const i=n._rules[t];i.name!==e||i.keep?s.push(i):n._inRuleset()&&t<n.$_temp.ruleset&&--n.$_temp.ruleset}return n._rules=s,n}_values(t,n){r.verifyFlat(t,n.slice(1,-1));const s=this.clone(),i=t[0]===r.symbols.override;if(i&&(t=t.slice(1)),!s[n]&&t.length?s[n]=new m:i&&(s[n]=t.length?new m:null,s.$_mutateRebuild()),!s[n])return s;i&&s[n].override();for(const i of t){e(void 0!==i,"Cannot call allow/valid/invalid with undefined"),e(i!==r.symbols.override,"Override must be the first value");const t="_invalids"===n?"_valids":"_invalids";s[t]&&(s[t].remove(i),s[t].length||(e("_valids"===n||!s._flags.only,"Setting invalid value",i,"leaves schema rejecting all values due to previous valid rule"),s[t]=null)),s[n].add(i,s._refs)}return s}}};return g.Base.prototype[r.symbols.any]={version:r.version,compile:a.compile,root:"$_root"},g.Base.prototype.isImmutable=!0,g.Base.prototype.deny=g.Base.prototype.invalid,g.Base.prototype.disallow=g.Base.prototype.invalid,g.Base.prototype.equal=g.Base.prototype.valid,g.Base.prototype.exist=g.Base.prototype.required,g.Base.prototype.not=g.Base.prototype.invalid,g.Base.prototype.options=g.Base.prototype.prefs,g.Base.prototype.preferences=g.Base.prototype.prefs,cO=new g.Base}function GO(){if(dO)return uO;dO=1;const e=V,t=jO(),n=jD(),s=HD();return uO=t.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,n){return e("function"==typeof t,"Method must be a function"),e(void 0===n||n&&"string"==typeof n,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:n}})},validate(e,t,{method:n}){try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(t){e(n.isSchema(t)&&t._flags.id,"Schema must be a schema with an id");const s=this.clone();return s.$_terms.shared=s.$_terms.shared||[],s.$_terms.shared.push(t),s.$_mutateRegister(t),s}},warning:{method(t,n){return e(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:n},warn:!0})},validate:(e,t,{code:n,local:s})=>t.error(n,s),args:["code","local"],multi:!0}},modifiers:{keep(e,t=!0){e.keep=t},message(e,t){e.message=s.compile(t)},warn(e,t=!0){e.warn=t}},manifest:{build(e,t){for(const n in t){const s=t[n];if(["examples","externals","metas","notes","tags"].includes(n))for(const t of s)e=e[n.slice(0,-1)](t);else if("alterations"!==n)if("whens"!==n){if("shared"===n)for(const t of s)e=e.shared(t)}else for(const t of s){const{ref:n,is:s,not:i,then:r,otherwise:a,concat:o}=t;e=o?e.concat(o):n?e.when(n,{is:s,not:i,then:r,otherwise:a,switch:t.switch,break:t.break}):e.when(s,{then:r,otherwise:a,break:t.break})}else{const t={};for(const{target:e,adjuster:n}of s)t[e]=n;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}}),uO}function $O(){if(hO)return pO;hO=1;const e=V,t=_e,n=GO(),s=jD(),i=zD(),r=RD(),a=BD(),o={};return pO=n.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:a.toSibling}},args:(e,...t)=>1===t.length&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t),validate(e,n){const{schema:s,error:i,state:a,prefs:c}=n;if(s._flags.match){const n=[],o=[];for(let t=0;t<s.$_terms.matches.length;++t){const i=s.$_terms.matches[t],r=a.nest(i.schema,`match.${t}`);r.snapshot();const l=i.schema.$_validate(e,r,c);l.errors?(o.push(l.errors),r.restore()):(n.push(l.value),r.commit())}if(0===n.length){const e={details:o.map((e=>r.details(e,{override:!1})))};return{errors:i("alternatives.any",e)}}if("one"===s._flags.match)return 1===n.length?{value:n[0]}:{errors:i("alternatives.one")};if(n.length!==s.$_terms.matches.length){const e={details:o.map((e=>r.details(e,{override:!1})))};return{errors:i("alternatives.all",e)}}const l=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&l(e.schema)));return l(s)?{value:n.reduce(((e,n)=>t(e,n,{mergeArrays:!1})))}:{value:n[n.length-1]}}const l=[];for(let t=0;t<s.$_terms.matches.length;++t){const n=s.$_terms.matches[t];if(n.schema){const s=a.nest(n.schema,`match.${t}`);s.snapshot();const i=n.schema.$_validate(e,s,c);if(!i.errors)return s.commit(),i;s.restore(),l.push({schema:n.schema,reports:i.errors});continue}const i=n.ref?n.ref.resolve(e,a,c):e,r=n.is?[n]:n.switch;for(let s=0;s<r.length;++s){const o=r[s],{is:l,then:u,otherwise:d}=o,p=`match.${t}${n.switch?"."+s:""}`;if(l.$_match(i,a.nest(l,`${p}.is`),c)){if(u)return u.$_validate(e,a.nest(u,`${p}.then`),c)}else if(d)return d.$_validate(e,a.nest(d,`${p}.otherwise`),c)}}return o.errors(l,n)},rules:{conditional:{method(t,n){e(!this._flags._endedSwitch,"Unreachable condition"),e(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),e(void 0===n.break,"Cannot use break option with alternatives conditional");const s=this.clone(),r=i.when(s,t,n),a=r.is?[r]:r.switch;for(const e of a)if(e.then&&e.otherwise){s.$_setFlag("_endedSwitch",!0,{clone:!1});break}return s.$_terms.matches.push(r),s.$_mutateRebuild()}},match:{method(t){if(e(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const n of this.$_terms.matches)e(n.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(...t){e(t.length,"Missing alternative schemas"),s.verifyFlat(t,"try"),e(!this._flags._endedSwitch,"Unreachable condition");const n=this.clone();for(const e of t)n.$_terms.matches.push({schema:n.$_compile(e)});return n.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,n)=>"is"!==n.path[0]&&"string"!=typeof t._flags.label?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{s.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const n of t.matches){const{schema:t,ref:s,is:i,not:r,then:a,otherwise:o}=n;e=t?e.try(t):s?e.conditional(s,{is:i,then:a,not:r,otherwise:o,switch:n.switch}):e.conditional(i,{then:a,otherwise:o})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),o.errors=function(e,{error:t,state:n}){if(!e.length)return{errors:t("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const s=new Set,i=[];for(const{reports:a,schema:c}of e){if(a.length>1)return o.unmatched(e,t);const l=a[0];if(l instanceof r.Report==!1)return o.unmatched(e,t);if(l.state.path.length!==n.path.length){i.push({type:c.type,report:l});continue}if("any.only"===l.code){for(const e of l.local.valids)s.add(e);continue}const[u,d]=l.code.split(".");"base"!==d?i.push({type:c.type,report:l}):"object.base"===l.code?s.add(l.local.type):s.add(u)}return i.length?1===i.length?{errors:i[0].report}:o.unmatched(e,t):{errors:t("alternatives.types",{types:[...s]})}},o.unmatched=function(e,t){const n=[];for(const t of e)n.push(...t.reports);return{errors:t("alternatives.match",r.details(n,{override:!1}))}},pO}function qO(){if(mO)return fO;mO=1;const e=V,t=de,n=X,s=GO(),i=jD(),r=zD(),a={};return fO=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:n,prefs:s}){if(!Array.isArray(e))return;const i=t.$_getRule("sort");return i?a.sort(t,e,i.args.options,n,s):void 0}},validate(e,{schema:t,error:n}){if(!Array.isArray(e)){if(t._flags.single){const t=[e];return t[i.symbols.arraySingle]=!0,{value:t}}return{errors:n("array.base")}}if(t.$_getRule("items")||t.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:n,error:s},{schema:i}){const r=[e,...t.ancestors];for(let s=0;s<e.length;++s){const a=t.localize([...t.path,s],r,i);if(i.$_match(e[s],a,n))return e}const a=i._flags.label;return a?s("array.hasKnown",{patternLabel:a}):s("array.hasUnknown",null)},multi:!0},items:{method(...e){i.verifyFlat(e,"items");const t=this.$_addRule("items");for(let n=0;n<e.length;++n){const s=i.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});t.$_terms.items.push(s)}return t.$_mutateRebuild()},validate(e,{schema:t,error:n,state:s,prefs:r,errorsArray:o}){const c=t.$_terms._requireds.slice(),l=t.$_terms.ordered.slice(),u=[...t.$_terms._inclusions,...c],d=!e[i.symbols.arraySingle];delete e[i.symbols.arraySingle];const p=o();let h=e.length;for(let i=0;i<h;++i){const o=e[i];let f=!1,m=!1;const g=d?i:new Number(i),_=[...s.path,g];if(!t._flags.sparse&&void 0===o){if(p.push(n("array.sparse",{key:g,path:_,pos:i,value:void 0},s.localize(_))),r.abortEarly)return p;l.shift();continue}const y=[e,...s.ancestors];for(const e of t.$_terms._exclusions)if(e.$_match(o,s.localize(_,y,e),r,{presence:"ignore"})){if(p.push(n("array.excludes",{pos:i,value:o},s.localize(_))),r.abortEarly)return p;f=!0,l.shift();break}if(f)continue;if(t.$_terms.ordered.length){if(l.length){const c=l.shift(),u=c.$_validate(o,s.localize(_,y,c),r);if(u.errors){if(p.push(...u.errors),r.abortEarly)return p}else if("strip"===c._flags.result)a.fastSplice(e,i),--i,--h;else{if(!t._flags.sparse&&void 0===u.value){if(p.push(n("array.sparse",{key:g,path:_,pos:i,value:void 0},s.localize(_))),r.abortEarly)return p;continue}e[i]=u.value}continue}if(!t.$_terms.items.length){if(p.push(n("array.orderedLength",{pos:i,limit:t.$_terms.ordered.length})),r.abortEarly)return p;break}}const E=[];let b=c.length;for(let l=0;l<b;++l){const u=s.localize(_,y,c[l]);u.snapshot();const d=c[l].$_validate(o,u,r);if(E[l]=d,!d.errors){if(u.commit(),e[i]=d.value,m=!0,a.fastSplice(c,l),--l,--b,!t._flags.sparse&&void 0===d.value&&(p.push(n("array.sparse",{key:g,path:_,pos:i,value:void 0},s.localize(_))),r.abortEarly))return p;break}u.restore()}if(m)continue;const v=r.stripUnknown&&!!r.stripUnknown.arrays||!1;b=u.length;for(const l of u){let u;const d=c.indexOf(l);if(-1!==d)u=E[d];else{const c=s.localize(_,y,l);if(c.snapshot(),u=l.$_validate(o,c,r),!u.errors){c.commit(),"strip"===l._flags.result?(a.fastSplice(e,i),--i,--h):t._flags.sparse||void 0!==u.value?e[i]=u.value:(p.push(n("array.sparse",{key:g,path:_,pos:i,value:void 0},s.localize(_))),f=!0),m=!0;break}c.restore()}if(1===b){if(v){a.fastSplice(e,i),--i,--h,m=!0;break}if(p.push(...u.errors),r.abortEarly)return p;f=!0;break}}if(!f&&((t.$_terms._inclusions.length||t.$_terms._requireds.length)&&!m)){if(v){a.fastSplice(e,i),--i,--h;continue}if(p.push(n("array.includes",{pos:i,value:o},s.localize(_))),r.abortEarly)return p}}return c.length&&a.fillMissedErrors(t,p,c,e,s,r),l.length&&(a.fillOrderedErrors(t,p,l,e,s,r),p.length||a.fillDefault(l,e,s,r)),p.length?p:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:s,operator:r,args:a})=>i.compare(e.length,n,r)?e:t.error("array."+s,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:i.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){i.verifyFlat(e,"ordered");const t=this.$_addRule("items");for(let n=0;n<e.length;++n){const s=i.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});a.validateSingle(s,t),t.$_mutateRegister(s),t.$_terms.ordered.push(s)}return t.$_mutateRebuild()}},single:{method(t){const n=void 0===t||!!t;return e(!n||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",n)}},sort:{method(t={}){i.assertOptions(t,["by","order"]);const n={order:t.order||"ascending"};return t.by&&(n.by=r.ref(t.by,{ancestor:0}),e(!n.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:n}})},validate(e,{error:t,state:n,prefs:s,schema:i},{options:r}){const{value:o,errors:c}=a.sort(i,e,r,n,s);if(c)return c;for(let n=0;n<e.length;++n)if(e[n]!==o[n])return t("array.sort",{order:r.order,by:r.by?r.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;if(this._flags.sparse===t)return this;return(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(t,n={}){e(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),i.assertOptions(n,["ignoreUndefined","separator"]);const s={name:"unique",args:{options:n,comparator:t}};if(t)if("string"==typeof t){const e=i.default(n.separator,".");s.path=e?t.split(e):[t]}else s.comparator=t;return this.$_addRule(s)},validate(s,{state:i,error:r,schema:a},{comparator:o,options:c},{comparator:l,path:u}){const d={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},p=l||t,h=c.ignoreUndefined;for(let t=0;t<s.length;++t){const a=u?n(s[t],u):s[t],c=l?d.custom:d[typeof a];if(e(c,"Failed to find unique map container for type",typeof a),c instanceof Map){const e=c.entries();let n;for(;!(n=e.next()).done;)if(p(n.value[0],a)){const e=i.localize([...i.path,t],[s,...i.ancestors]),a={pos:t,value:s[t],dupePos:n.value[1],dupeValue:s[n.value[1]]};return u&&(a.path=o),r("array.unique",a,e)}c.set(a,t)}else{if((!h||void 0!==a)&&void 0!==c[a]){const e={pos:t,value:s[t],dupePos:c[a],dupeValue:s[c[a]]};u&&(e.path=o);return r("array.unique",e,i.localize([...i.path,t],[s,...i.ancestors]))}c[a]=t}}return s},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)a.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)a.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),a.fillMissedErrors=function(e,t,n,s,i,r){const a=[];let o=0;for(const e of n){const t=e._flags.label;t?a.push(t):++o}a.length?o?t.push(e.$_createError("array.includesRequiredBoth",s,{knownMisses:a,unknownMisses:o},i,r)):t.push(e.$_createError("array.includesRequiredKnowns",s,{knownMisses:a},i,r)):t.push(e.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:o},i,r))},a.fillOrderedErrors=function(e,t,n,s,i,r){const o=[];for(const e of n)"required"===e._flags.presence&&o.push(e);o.length&&a.fillMissedErrors(e,t,o,s,i,r)},a.fillDefault=function(e,t,n,s){const i=[];let r=!0;for(let a=e.length-1;a>=0;--a){const o=e[a],c=[t,...n.ancestors],l=o.$_validate(void 0,n.localize(n.path,c,o),s).value;if(r){if(void 0===l)continue;r=!1}i.unshift(l)}i.length&&t.push(...i)},a.fastSplice=function(e,t){let n=t;for(;n<e.length;)e[n++]=e[n];--e.length},a.validateSingle=function(t,n){("array"===t.type||t._flags._arrayItems)&&(e(!n._flags.single,"Cannot specify array item with single rule enabled"),n.$_setFlag("_arrayItems",!0,{clone:!1}))},a.sort=function(e,t,n,s,i){const r="ascending"===n.order?1:-1,o=-1*r,c=r,l=(l,u)=>{let d=a.compare(l,u,o,c);if(null!==d)return d;if(n.by&&(l=n.by.resolve(l,s,i),u=n.by.resolve(u,s,i)),d=a.compare(l,u,o,c),null!==d)return d;const p=typeof l;if(p!==typeof u)throw e.$_createError("array.sort.mismatching",t,null,s,i);if("number"!==p&&"string"!==p)throw e.$_createError("array.sort.unsupported",t,{type:p},s,i);return"number"===p?(l-u)*r:l<u?o:c};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},a.compare=function(e,t,n,s){return e===t?0:void 0===e?1:void 0===t?-1:null===e?s:null===t?n:null},fO}function zO(){if(_O)return gO;_O=1;const e=V,t=GO(),n=jD(),s=HO(),i={isBool:function(e){return"boolean"==typeof e}};return gO=t.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,{schema:t}){if("boolean"!=typeof e){if("string"==typeof e){const n=t._flags.sensitive?e:e.toLowerCase();e="true"===n||"false"!==n&&e}return"boolean"!=typeof e&&(e=t.$_terms.truthy&&t.$_terms.truthy.has(e,null,null,!t._flags.sensitive)||(!t.$_terms.falsy||!t.$_terms.falsy.has(e,null,null,!t._flags.sensitive))&&e),{value:e}}},validate(e,{error:t}){if("boolean"!=typeof e)return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...t){n.verifyFlat(t,"truthy");const i=this.clone();i.$_terms.truthy=i.$_terms.truthy||new s;for(let n=0;n<t.length;++n){const s=t[n];e(void 0!==s,"Cannot call truthy with undefined"),i.$_terms.truthy.add(s)}return i}},falsy:{method(...t){n.verifyFlat(t,"falsy");const i=this.clone();i.$_terms.falsy=i.$_terms.falsy||new s;for(let n=0;n<t.length;++n){const s=t[n];e(void 0!==s,"Cannot call falsy with undefined"),i.$_terms.falsy.add(s)}return i}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:i.isBool,to:(e,t)=>e?1:0},string:{from:i.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}}),gO}function WO(){if(EO)return yO;EO=1;const e=V,t=GO(),n=jD(),s=UD(),i={isDate:function(e){return e instanceof Date}};return yO=t.extend({type:"date",coerce:{from:["number","string"],method:(e,{schema:t})=>({value:i.parse(e,t._flags.format)||e})},validate(e,{schema:t,error:n,prefs:s}){if(e instanceof Date&&!isNaN(e.getTime()))return;const i=t._flags.format;return s.convert&&i&&"string"==typeof e?{value:e,errors:n("date.format",{format:i})}:{value:e,errors:n("date.base")}},rules:{compare:{method:!1,validate(e,t,{date:s},{name:i,operator:r,args:a}){const o="now"===s?Date.now():s.getTime();return n.compare(e.getTime(),o,r)?e:t.error("date."+i,{limit:a.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:i.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(t){return e(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(t="javascript"){return e(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:i.isDate,to:(e,t)=>e.getTime()},string:{from:i.isDate,to:(e,{prefs:t})=>s.date(e,t)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),i.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return n.isIsoDate(e)?i.date(e.toString()):null;const s=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return i.date(1*e);if("unix"===t)return i.date(1e3*e);if("string"==typeof s)return null}return i.date(e)},i.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t},yO}function YO(){if(vO)return bO;vO=1;const e=Se,t=V,n=re,s=we,i=GO(),r=jD(),a=zD(),o=RD(),c=BD(),l=UD(),u={renameDefaults:{alias:!1,multiple:!1,override:!1}};return bO=i.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,{schema:t,error:n,state:s,prefs:i}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:t.$_property("typeof")})};if(!(t.$_terms.renames||t.$_terms.dependencies||t.$_terms.keys||t.$_terms.patterns||t.$_terms.externals))return;e=u.clone(e,i);const r=[];if(t.$_terms.renames&&!u.rename(t,e,s,i,r))return{value:e,errors:r};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:r};const a=new Set(Object.keys(e));if(t.$_terms.keys){const n=[e,...s.ancestors];for(const o of t.$_terms.keys){const t=o.key,c=e[t];a.delete(t);const l=s.localize([...s.path,t],n,o),u=o.schema.$_validate(c,l,i);if(u.errors){if(i.abortEarly)return{value:e,errors:u.errors};void 0!==u.value&&(e[t]=u.value),r.push(...u.errors)}else"strip"===o.schema._flags.result||void 0===u.value&&void 0!==c?delete e[t]:void 0!==u.value&&(e[t]=u.value)}}if(a.size||t._flags._hasPatternMatch){const n=u.unknown(t,e,a,r,s,i);if(n)return n}if(t.$_terms.dependencies)for(const n of t.$_terms.dependencies){if(null!==n.key&&!1===u.isPresent(n.options)(n.key.resolve(e,s,i,null,{shadow:!1})))continue;const a=u.dependencies[n.rel](t,n,e,s,i);if(a){const n=t.$_createError(a.code,e,a.context,s,i);if(i.abortEarly)return{value:e,errors:n};r.push(n)}}return{value:e,errors:r}},rules:{and:{method(...e){return r.verifyFlat(e,"and"),u.dependency(this,"and",null,e)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,n,s){l.isTemplate(e)||(e=a.ref(e)),t(void 0===s||"string"==typeof s,"Message must be a string"),n=this.$_compile(n,{appendPath:!0});const i=this.$_addRule({name:"assert",args:{subject:e,schema:n,message:s}});return i.$_mutateRegister(e),i.$_mutateRegister(n),i},validate(e,{error:t,prefs:n,state:s},{subject:i,schema:r,message:a}){const o=i.resolve(e,s,n),l=c.isRef(i)?i.absolute(s):[];return r.$_match(o,s.localize(l,[e,...s.ancestors],r),n)?e:t("object.assert",{subject:i,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(e,n){return t("function"==typeof e,"constructor must be a function"),n=n||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:n}})},validate:(e,t,{constructor:n,name:s})=>e instanceof n?e:t.error("object.instance",{type:s,value:e}),args:["constructor","name"]},keys:{method(e){t(void 0===e||"object"==typeof e,"Object schema must be a valid object"),t(!r.isSchema(e),"Object schema cannot be a joi schema");const n=this.clone();if(e)if(Object.keys(e).length){n.$_terms.keys=n.$_terms.keys?n.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new u.Keys;for(const t in e)r.tryWithPath((()=>n.$_terms.keys.push({key:t,schema:this.$_compile(e[t])})),t)}else n.$_terms.keys=new u.Keys;else n.$_terms.keys=null;return n.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:s,operator:i,args:a})=>r.compare(Object.keys(e).length,n,i)?e:t.error("object."+s,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:r.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return r.verifyFlat(e,"nand"),u.dependency(this,"nand",null,e)}},or:{method(...e){return r.verifyFlat(e,"or"),u.dependency(this,"or",null,e)}},oxor:{method(...e){return u.dependency(this,"oxor",null,e)}},pattern:{method(e,n,s={}){const i=e instanceof RegExp;i||(e=this.$_compile(e,{appendPath:!0})),t(void 0!==n,"Invalid rule"),r.assertOptions(s,["fallthrough","matches"]),i&&t(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),n=this.$_compile(n,{appendPath:!0});const a=this.clone();a.$_terms.patterns=a.$_terms.patterns||[];const o={[i?"regex":"schema"]:e,rule:n};return s.matches&&(o.matches=this.$_compile(s.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),a.$_mutateRegister(o.matches),a.$_setFlag("_hasPatternMatch",!0,{clone:!1})),s.fallthrough&&(o.fallthrough=!0),a.$_terms.patterns.push(o),a.$_mutateRegister(n),a}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>c.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(n,s,i={}){t("string"==typeof n||n instanceof RegExp,"Rename missing the from argument"),t("string"==typeof s||s instanceof l,"Invalid rename to argument"),t(s!==n,"Cannot rename key to same name:",n),r.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);const a=this.clone();a.$_terms.renames=a.$_terms.renames||[];for(const e of a.$_terms.renames)t(e.from!==n,"Cannot rename the same key multiple times");return s instanceof l&&a.$_mutateRegister(s),a.$_terms.renames.push({from:n,to:s,options:e(u.renameDefaults,i)}),a}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate:(e,t,{type:n})=>!r.isSchema(e)||"any"!==n&&e.type!==n?t.error("object.schema",{type:n}):e},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t,n={}){return u.dependency(this,"with",e,t,n)}},without:{method(e,t,n={}){return u.dependency(this,"without",e,t,n)}},xor:{method(...e){return r.verifyFlat(e,"xor"),u.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return void 0===e&&(e=r.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new s.Sorter;for(const n of e.$_terms.keys)r.tryWithPath((()=>t.add(n,{after:n.schema.$_rootReferences(),group:n.key})),n.key);e.$_terms.keys=new u.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:n,key:s=null,peers:i,options:r}of t.dependencies)e=u.dependency(e,n,s,i,r);if(t.patterns)for(const{regex:n,schema:s,rule:i,fallthrough:r,matches:a}of t.patterns)e=e.pattern(n||s,i,{fallthrough:r,matches:a});if(t.renames)for(const{from:n,to:s,options:i}of t.renames)e=e.rename(n,s,i);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),u.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return n(e,{shallow:!0});const s=Object.create(Object.getPrototypeOf(e));return Object.assign(s,e),s}const s=function(...t){return e.apply(this,t)};return s.prototype=n(e.prototype),Object.defineProperty(s,"name",{value:e.name,writable:!1}),Object.defineProperty(s,"length",{value:e.length,writable:!1}),Object.assign(s,e),s},u.dependency=function(e,n,s,i,o){t(null===s||"string"==typeof s,n,"key must be a strings"),o||(o=i.length>1&&"object"==typeof i[i.length-1]?i.pop():{}),r.assertOptions(o,["separator","isPresent"]),i=[].concat(i);const c=r.default(o.separator,"."),l=[];for(const e of i)t("string"==typeof e,n,"peers must be strings"),l.push(a.ref(e,{separator:c,ancestor:0,prefix:!1}));null!==s&&(s=a.ref(s,{separator:c,ancestor:0,prefix:!1}));const d=e.clone();return d.$_terms.dependencies=d.$_terms.dependencies||[],d.$_terms.dependencies.push(new u.Dependency(n,s,l,i,o)),d},u.dependencies={and(e,t,n,s,i){const r=[],a=[],o=t.peers.length,c=u.isPresent(t.options);for(const e of t.peers)!1===c(e.resolve(n,s,i,null,{shadow:!1}))?r.push(e.key):a.push(e.key);if(r.length!==o&&a.length!==o)return{code:"object.and",context:{present:a,presentWithLabels:u.keysToLabels(e,a),missing:r,missingWithLabels:u.keysToLabels(e,r)}}},nand(e,t,n,s,i){const r=[],a=u.isPresent(t.options);for(const e of t.peers)a(e.resolve(n,s,i,null,{shadow:!1}))&&r.push(e.key);if(r.length!==t.peers.length)return;const o=t.paths[0],c=t.paths.slice(1);return{code:"object.nand",context:{main:o,mainWithLabel:u.keysToLabels(e,o),peers:c,peersWithLabels:u.keysToLabels(e,c)}}},or(e,t,n,s,i){const r=u.isPresent(t.options);for(const e of t.peers)if(r(e.resolve(n,s,i,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)}}},oxor(e,t,n,s,i){const r=[],a=u.isPresent(t.options);for(const e of t.peers)a(e.resolve(n,s,i,null,{shadow:!1}))&&r.push(e.key);if(!r.length||1===r.length)return;const o={peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)};return o.present=r,o.presentWithLabels=u.keysToLabels(e,r),{code:"object.oxor",context:o}},with(e,t,n,s,i){const r=u.isPresent(t.options);for(const a of t.peers)if(!1===r(a.resolve(n,s,i,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:u.keysToLabels(e,t.key.key),peer:a.key,peerWithLabel:u.keysToLabels(e,a.key)}}},without(e,t,n,s,i){const r=u.isPresent(t.options);for(const a of t.peers)if(r(a.resolve(n,s,i,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:u.keysToLabels(e,t.key.key),peer:a.key,peerWithLabel:u.keysToLabels(e,a.key)}}},xor(e,t,n,s,i){const r=[],a=u.isPresent(t.options);for(const e of t.peers)a(e.resolve(n,s,i,null,{shadow:!1}))&&r.push(e.key);if(1===r.length)return;const o={peers:t.paths,peersWithLabels:u.keysToLabels(e,t.paths)};return 0===r.length?{code:"object.missing",context:o}:(o.present=r,o.presentWithLabels=u.keysToLabels(e,r),{code:"object.xor",context:o})}},u.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},u.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},u.rename=function(e,t,n,s,i){const r={};for(const a of e.$_terms.renames){const o=[],c="string"!=typeof a.from;if(c)for(const e in t){if(void 0===t[e]&&a.options.ignoreUndefined)continue;if(e===a.to)continue;const n=a.from.exec(e);n&&o.push({from:e,to:a.to,match:n})}else!Object.prototype.hasOwnProperty.call(t,a.from)||void 0===t[a.from]&&a.options.ignoreUndefined||o.push(a);for(const u of o){const o=u.from;let d=u.to;if(d instanceof l&&(d=d.render(t,n,s,u.match)),o!==d){if(!a.options.multiple&&r[d]&&(i.push(e.$_createError("object.rename.multiple",t,{from:o,to:d,pattern:c},n,s)),s.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,d)&&!a.options.override&&!r[d]&&(i.push(e.$_createError("object.rename.override",t,{from:o,to:d,pattern:c},n,s)),s.abortEarly))return!1;void 0===t[o]?delete t[d]:t[d]=t[o],r[d]=!0,a.options.alias||delete t[o]}}}return!0},u.unknown=function(e,t,n,s,i,a){if(e.$_terms.patterns){let r=!1;const c=e.$_terms.patterns.map((e=>{if(e.matches)return r=!0,[]})),l=[t,...i.ancestors];for(const r of n){const o=t[r],u=[...i.path,r];for(let d=0;d<e.$_terms.patterns.length;++d){const p=e.$_terms.patterns[d];if(p.regex){const e=p.regex.test(r);if(i.mainstay.tracer.debug(i,"rule",`pattern.${d}`,e?"pass":"error"),!e)continue}else if(!p.schema.$_match(r,i.nest(p.schema,`pattern.${d}`),a))continue;n.delete(r);const h=i.localize(u,l,{schema:p.rule,key:r}),f=p.rule.$_validate(o,h,a);if(f.errors){if(a.abortEarly)return{value:t,errors:f.errors};s.push(...f.errors)}if(p.matches&&c[d].push(r),t[r]=f.value,!p.fallthrough)break}}if(r)for(let n=0;n<c.length;++n){const r=c[n];if(!r)continue;const u=e.$_terms.patterns[n].matches,d=i.localize(i.path,l,u),p=u.$_validate(r,d,a);if(p.errors){const n=o.details(p.errors,{override:!1});n.matches=r;const c=e.$_createError("object.pattern.match",t,n,i,a);if(a.abortEarly)return{value:t,errors:c};s.push(c)}}}if(!n.size||!e.$_terms.keys&&!e.$_terms.patterns)return;if(a.stripUnknown&&void 0===e._flags.unknown||a.skipFunctions){const e=!!a.stripUnknown&&(!0===a.stripUnknown||!!a.stripUnknown.objects);for(const s of n)e?(delete t[s],n.delete(s)):"function"==typeof t[s]&&n.delete(s)}if(!r.default(e._flags.unknown,a.allowUnknown))for(const r of n){const n=i.localize([...i.path,r],[]),o=e.$_createError("object.unknown",t[r],{child:r},n,a,{flags:!1});if(a.abortEarly)return{value:t,errors:o};s.push(o)}},u.Dependency=class{constructor(e,t,n,s,i){this.rel=e,this.key=t,this.peers=n,this.paths=s,this.options=i}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},u.Keys=class extends Array{concat(e){const t=this.slice(),n=new Map;for(let e=0;e<t.length;++e)n.set(t[e].key,e);for(const s of e){const e=s.key,i=n.get(e);void 0!==i?t[i]={key:e,schema:t[i].schema.concat(s.schema)}:t.push(s)}return t}},bO}function VO(){if(AO)return TO;AO=1;const e=V,t=YO();return TO=t.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return e(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(e,t,{n:n})=>e.length===n?e:t.error("function.arity",{n:n})},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(t){return e(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(e,t,{n:n})=>e.length>=n?e:t.error("function.minArity",{n:n})},maxArity:{method(t){return e(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(e,t,{n:n})=>e.length<=n?e:t.error("function.maxArity",{n:n})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}}),TO}function KO(){if(wO)return SO;wO=1;const e=V,t=GO(),n=jD(),s=zD(),i=RD(),r={};return SO=t.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(t,{schema:n,state:s,prefs:i}){e(n.$_terms.link,"Uninitialized link schema");const a=r.generate(n,t,s,i),o=n.$_terms.link[0].ref;return a.$_validate(t,s.nest(a,`link:${o.display}:${a.type}`),i)},generate:(e,t,n,s)=>r.generate(e,t,n,s),rules:{ref:{method(t){e(!this.$_terms.link,"Cannot reinitialize schema"),t=s.ref(t),e("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),e("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const n=this.clone();return n.$_terms.link=[{ref:t}],n}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(t){e(this.$_terms.link,"Uninitialized link schema"),e(n.isSchema(t),"Invalid schema object"),e("link"!==t.type,"Cannot merge type link with another link");const s=this.clone();return s.$_terms.whens||(s.$_terms.whens=[]),s.$_terms.whens.push({concat:t}),s.$_mutateRebuild()}},manifest:{build:(t,n)=>(e(n.link,"Invalid link description missing link"),t.ref(n.link))}}),r.generate=function(e,t,n,s){let i=n.mainstay.links.get(e);if(i)return i._generate(t,n,s).schema;const a=e.$_terms.link[0].ref,{perspective:o,path:c}=r.perspective(a,n);r.assert(o,"which is outside of schema boundaries",a,e,n,s);try{i=c.length?o.$_reach(c):o}catch(t){r.assert(!1,"to non-existing schema",a,e,n,s)}return r.assert("link"!==i.type,"which is another link",a,e,n,s),e._flags.relative||n.mainstay.links.set(e,i),i._generate(t,n,s).schema},r.perspective=function(e,t){if("local"===e.type){for(const{schema:n,key:s}of t.schemas){if((n._flags.id||s)===e.path[0])return{perspective:n,path:e.path.slice(1)};if(n.$_terms.shared)for(const t of n.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},r.assert=function(t,n,s,r,a,o){t||e(!1,`"${i.label(r._flags,a,o)}" contains link reference "${s.display}" ${n}`)},SO}function QO(){if(kO)return xO;kO=1;const e=V,t=GO(),n=jD(),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(e){const t=e.toString(),n=t.indexOf("."),s=t.indexOf("e");return(n<0?0:(s<0?t.length:s)-n-1)+(s<0?0:Math.max(0,-parseInt(t.slice(s+1))))}};return xO=t.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:n}){if(!e.match(s.numberRx))return;e=e.trim();const i={value:parseFloat(e)};if(0===i.value&&(i.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(s.extractSignificantDigits(e)!==s.extractSignificantDigits(String(i.value)))return i.errors=n("number.unsafe"),i}else{const t=i.value.toString();if(t.match(/e/i))return i;if(t!==s.normalizeDecimal(e))return i.errors=n("number.unsafe"),i}return i}},validate(e,{schema:t,error:s,prefs:i}){if(e===1/0||e===-1/0)return{value:e,errors:s("number.infinity")};if(!n.isNumber(e))return{value:e,errors:s("number.base")};const r={value:e};if(i.convert){const e=t.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);r.value=Math.round(r.value*t)/t}}return 0===r.value&&(r.value=0),!t._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(r.errors=s("number.unsafe")),r},rules:{compare:{method:!1,validate:(e,t,{limit:s},{name:i,operator:r,args:a})=>n.compare(e,s,r)?e:t.error("number."+i,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:n.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){const t="number"==typeof e?s.decimalPlaces(e):null,n=Math.pow(10,t);return this.$_addRule({name:"multiple",args:{base:e,baseDecimalPlace:t,pfactor:n}})},validate:(e,t,{base:n,baseDecimalPlace:i,pfactor:r},a)=>s.decimalPlaces(e)>i?t.error("number.multiple",{multiple:a.args.base,value:e}):Math.round(r*e)%Math.round(r*n)==0?e:t.error("number.multiple",{multiple:a.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return e(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(e,t,{limit:n}){const i=e.toString().match(s.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=n?e:t.error("number.precision",{limit:n,value:e})},convert:!0},sign:{method(t){return e(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(e,t,{sign:n})=>"negative"===n&&e<0||"positive"===n&&e>0?e:t.error(`number.${n}`)},unsafe:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.extractSignificantDigits=function(e){return e.replace(s.exponentialPartRegex,"").replace(s.dotRegex,"").replace(s.trailingZerosRegex,"").replace(s.leadingSignAndZerosRegex,"")},s.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e},xO}function XO(){if(NO)return CO;NO=1;const e=YO();return CO=e.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})}function ZO(){if(RO)return IO;RO=1;const e=V,t=Ne,n=Re,s=Fe,i=Pe,r=qe,a=Me,o=GO(),c=jD(),l={tlds:r instanceof Set&&{tlds:{allow:r,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};return IO=o.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:n,prefs:s}){const i=t.$_getRule("normalize");i&&(e=e.normalize(i.args.form));const r=t.$_getRule("case");r&&(e="upper"===r.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const a=t.$_getRule("trim");if(a&&a.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(const n of t.$_terms.replacements)e=e.replace(n.pattern,n.replacement);const o=t.$_getRule("hex");if(o&&o.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),t.$_getRule("isoDate")){const t=l.isoDate(e);t&&(e=t)}if(t._flags.truncate){const i=t.$_getRule("max");if(i){let r=i.args.limit;if(c.isResolvable(r)&&(r=r.resolve(e,n,s),!c.limit(r)))return{value:e,errors:t.$_createError("any.ref",r,{ref:i.args.limit,arg:"limit",reason:"must be a positive integer"},n,s)};e=e.slice(0,r)}}return{value:e}}},validate(e,{schema:t,error:n}){if("string"!=typeof e)return{value:e,errors:n("string.base")};if(""===e){const s=t.$_getRule("min");if(s&&0===s.args.limit)return;return{value:e,errors:n("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(t={}){return c.assertOptions(t,["paddingRequired","urlSafe"]),t={urlSafe:!1,paddingRequired:!0,...t},e("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),e("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(e,t,{options:n})=>l.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")},case:{method(t){return e(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(e,t,{direction:n})=>"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error(`string.${n}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let n=e.length,s=0,i=1;for(;n--;){const t=e.charAt(n)*i;s+=t-9*(t>9),i^=3}return s>0&&s%10==0?e:t.error("string.creditCard")}},dataUri:{method(t={}){return c.assertOptions(t,["paddingRequired"]),t={paddingRequired:!0,...t},e("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(e,t,{options:n}){const s=e.match(l.dataUriRegex);if(s){if(!s[2])return e;if("base64"!==s[2])return e;if(l.base64Regex[n.paddingRequired].false.test(s[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&c.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=l.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:(e,n,s,{address:i})=>t.isValid(e,i)?e:n.error("string.domain")},email:{method(t={}){c.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),e(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const n=l.addressOptions(t),s=new RegExp(`\\s*[${t.separator?i(t.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:t},regex:s,address:n})},validate(e,t,{options:s},{regex:i,address:r}){const a=s.multiple?e.split(i):[e],o=[];for(const e of a)n.isValid(e,r)||o.push(e);return o.length?t.error("string.email",{value:e,invalids:o}):e}},guid:{alias:"uuid",method(t={}){c.assertOptions(t,["version","separator"]);let n="";if(t.version){const s=[].concat(t.version);e(s.length>=1,"version must have at least 1 valid version specified");const i=new Set;for(let t=0;t<s.length;++t){const r=s[t];e("string"==typeof r,"version at position "+t+" must be a string");const a=l.guidVersions[r.toLowerCase()];e(a,"version at position "+t+" must be one of "+Object.keys(l.guidVersions).join(", ")),e(!i.has(a),"version at position "+t+" must not be a duplicate"),n+=a,i.add(a)}}e(l.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const s=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":`\\${t.separator}`,i=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${s})[0-9A-F]{4}\\2?[${n||"0-9A-F"}][0-9A-F]{3}\\2?[${n?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:t},regex:i})},validate(e,t,n,{regex:s}){const i=s.exec(e);return i?l.guidBrackets[i[1]]!==i[i.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(t={}){return c.assertOptions(t,["byteAligned","prefix"]),t={byteAligned:!1,prefix:!1,...t},e("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),e("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(e,t,{options:n})=>("optional"===n.prefix?l.hexRegex.withOptionalPrefix:!0===n.prefix?l.hexRegex.withPrefix:l.hexRegex.withoutPrefix).test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(e,n)=>t.isValid(e,{minDomainSegments:1})||l.ipRegex.test(e)?e:n.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(e={}){c.assertOptions(e,["cidr","version"]);const{cidr:t,versions:n,regex:i}=s.regex(e),r=e.version?n:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:r}},regex:i})},validate:(e,t,{options:n},{regex:s})=>s.test(e)?e:n.version?t.error("string.ipVersion",{value:e,cidr:n.cidr,version:n.version}):t.error("string.ip",{value:e,cidr:n.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(e,{error:t})=>l.isoDate(e)?e:t("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>l.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return l.length(this,"length",e,"=",t)},validate(e,t,{limit:n,encoding:s},{name:i,operator:r,args:a}){const o=s?Buffer&&Buffer.byteLength(e,s):e.length;return c.compare(o,n,r)?e:t.error("string."+i,{limit:a.limit,value:e,encoding:s})},args:[{name:"limit",ref:!0,assert:c.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return l.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return l.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(t="NFC"){return e(l.normalizationForms.includes(t),"normalization form must be one of "+l.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(e,{error:t},{form:n})=>e===e.normalize(n)?e:t("string.normalize",{value:e,form:n}),convert:!0},pattern:{alias:"regex",method(t,n={}){e(t instanceof RegExp,"regex must be a RegExp"),e(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof n&&(n={name:n}),c.assertOptions(n,["invert","name"]);const s=["string.pattern",n.invert?".invert":"",n.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:n},errorCode:s})},validate:(e,t,{regex:n,options:s},{errorCode:i})=>n.test(e)^s.invert?e:t.error(i,{name:s.name,regex:n,value:e}),args:["regex","options"],multi:!0},replace:{method(t,n){"string"==typeof t&&(t=new RegExp(i(t),"g")),e(t instanceof RegExp,"pattern must be a RegExp"),e("string"==typeof n,"replacement must be a String");const s=this.clone();return s.$_terms.replacements||(s.$_terms.replacements=[]),s.$_terms.replacements.push({pattern:t,replacement:n}),s}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(e,t,{enabled:n})=>n&&e!==e.trim()?t.error("string.trim"):e,convert:!0},truncate:{method(t=!0){return e("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(e={}){c.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),e.domain&&c.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:n}=a.regex(e),s=e.domain?l.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:s,scheme:n})},validate(e,n,{options:s},{regex:i,domain:r,scheme:a}){if(["http:/","https:/"].includes(e))return n.error("string.uri");let o=i.exec(e);if(!o&&n.prefs.convert&&s.encodeUri){const t=encodeURI(e);o=i.exec(t),o&&(e=t)}if(o){const i=o[1]||o[2];return!r||s.allowRelative&&!i||t.isValid(i,r)?e:n.error("string.domain",{value:i})}return s.relativeOnly?n.error("string.uriRelativeOnly"):s.scheme?n.error("string.uriCustomScheme",{scheme:a,value:e}):n.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:n,replacement:s}of t.replacements)e=e.replace(n,s);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),l.addressOptions=function(t){if(!t)return l.tlds||t;if(e(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),e(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return e(l.tlds,"Built-in TLD list disabled"),Object.assign({},t,l.tlds);e("object"==typeof t.tlds,"tlds must be true, false, or an object");const n=t.tlds.deny;if(n)return Array.isArray(n)&&(t=Object.assign({},t,{tlds:{deny:new Set(n)}})),e(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),e(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),l.validateTlds(t.tlds.deny,"tlds.deny"),t;const s=t.tlds.allow;return s?!0===s?(e(l.tlds,"Built-in TLD list disabled"),Object.assign({},t,l.tlds)):(Array.isArray(s)&&(t=Object.assign({},t,{tlds:{allow:new Set(s)}})),e(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),l.validateTlds(t.tlds.allow,"tlds.allow"),t):t},l.validateTlds=function(n,s){for(const i of n)e(t.isValid(i,{minDomainSegments:1,maxDomainSegments:1}),`${s} must contain valid top level domain names`)},l.isoDate=function(e){if(!c.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},l.length=function(t,n,s,i,r){return e(!r||Buffer&&Buffer.isEncoding(r),"Invalid encoding:",r),t.$_addRule({name:n,method:"length",args:{limit:s,encoding:r},operator:i})},IO}function JO(){if(OO)return DO;OO=1;const e=V,t=GO(),n={};return n.Map=class extends Map{slice(){return new n.Map(this)}},DO=t.extend({type:"symbol",terms:{map:{init:new n.Map}},coerce:{method(e,{schema:t,error:n}){const s=t.$_terms.map.get(e);return s&&(e=s),t._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:t.$_terms.map})}:{value:e}}},validate(e,{error:t}){if("symbol"!=typeof e)return{value:e,errors:t("symbol.base")}},rules:{map:{method(t){t&&!t[Symbol.iterator]&&"object"==typeof t&&(t=Object.entries(t)),e(t&&t[Symbol.iterator],"Iterable must be an iterable or object");const n=this.clone(),s=[];for(const i of t){e(i&&i[Symbol.iterator],"Entry must be an iterable");const[t,r]=i;e("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),e("symbol"==typeof r,"Value must be a Symbol"),n.$_terms.map.set(t,r),s.push(r)}return n.valid(...s)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}}),DO}function eL(){if(PO)return MO;PO=1;const e=V,t=re,n=GD(),s=jD(),i=zD(),r=RD(),a=VD(),o=XD(),c=BD(),l=UD(),u=eO();let d;const p={types:{alternatives:$O(),any:GO(),array:qO(),boolean:zO(),date:WO(),function:VO(),link:KO(),number:QO(),object:XO(),string:ZO(),symbol:JO()},aliases:{alt:"alternatives",bool:"boolean",func:"function"}};return Buffer&&(p.types.binary=function(){if(FO)return LO;FO=1;const e=V,t=GO(),n=jD();return LO=t.extend({type:"binary",coerce:{from:["string","object"],method(e,{schema:t}){if("string"==typeof e||null!==e&&"Buffer"===e.type)try{return{value:Buffer.from(e,t._flags.encoding)}}catch(e){}}},validate(e,{error:t}){if(!Buffer.isBuffer(e))return{value:e,errors:t("binary.base")}},rules:{encoding:{method(t){return e(Buffer.isEncoding(t),"Invalid encoding:",t),this.$_setFlag("encoding",t)}},length:{method(e){return this.$_addRule({name:"length",method:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:s},{name:i,operator:r,args:a})=>n.compare(e.length,s,r)?e:t.error("binary."+i,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:n.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}}},cast:{string:{from:e=>Buffer.isBuffer(e),to:(e,t)=>e.toString()}},messages:{"binary.base":"{{#label}} must be a buffer or a string","binary.length":"{{#label}} must be {{#limit}} bytes","binary.max":"{{#label}} must be less than or equal to {{#limit}} bytes","binary.min":"{{#label}} must be at least {{#limit}} bytes"}}),LO}()),p.root=function(){const t={_types:new Set(Object.keys(p.types))};for(const n of t._types)t[n]=function(...t){return e(!t.length||["alternatives","link","object"].includes(n),"The",n,"type does not allow arguments"),p.generate(this,p.types[n],t)};for(const e of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[e]=function(...t){return this.any()[e](...t)};Object.assign(t,p.methods);for(const e in p.aliases){const n=p.aliases[e];t[e]=t[n]}return t.x=t.expression,u.setup&&u.setup(t),t},p.methods={ValidationError:r.ValidationError,version:s.version,cache:n.provider,assert(e,t,...n){p.assert(e,t,!0,n)},attempt:(e,t,...n)=>p.assert(e,t,!1,n),build(t){return e("function"==typeof o.build,"Manifest functionality disabled"),o.build(this,t)},checkPreferences(e){s.checkPreferences(e)},compile(e,t){return i.compile(this,e,t)},defaults(t){e("function"==typeof t,"modifier must be a function");const n=Object.assign({},this);for(const i of n._types){const r=t(n[i]());e(s.isSchema(r),"modifier must return a valid schema object"),n[i]=function(...e){return p.generate(this,r,e)}}return n},expression:(...e)=>new l(...e),extend(...t){s.verifyFlat(t,"extend"),d=d||AD(),e(t.length,"You need to provide at least one extension"),this.assert(t,d.extensions);const n=Object.assign({},this);n._types=new Set(n._types);for(let s of t){"function"==typeof s&&(s=s(n)),this.assert(s,d.extension);const t=p.expandExtension(s,n);for(const s of t){e(void 0===n[s.type]||n._types.has(s.type),"Cannot override name",s.type);const t=s.base||this.any(),i=a.type(t,s);n._types.add(s.type),n[s.type]=function(...e){return p.generate(this,i,e)}}}return n},isError:r.ValidationError.isError,isExpression:l.isTemplate,isRef:c.isRef,isSchema:s.isSchema,in:(...e)=>c.in(...e),override:s.symbols.override,ref:(...e)=>c.create(...e),types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in p.aliases)e[t]=this[t]();return e}},p.assert=function(e,n,i,a){const o=a[0]instanceof Error||"string"==typeof a[0]?a[0]:null,c=null!==o?a[1]:a[0],l=n.validate(e,s.preferences({errors:{stack:!0}},c||{}));let u=l.error;if(!u)return l.value;if(o instanceof Error)throw o;const d=i&&"function"==typeof u.annotate?u.annotate():u.message;throw u instanceof r.ValidationError==!1&&(u=t(u)),u.message=o?`${o} ${d}`:d,u},p.generate=function(t,n,s){return e(t,"Must be invoked on a Joi instance."),n.$_root=t,n._definition.args&&s.length?n._definition.args(n,...s):n},p.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const n=[];for(const s of t._types)if(e.type.test(s)){const i=Object.assign({},e);i.type=s,i.base=t[s](),n.push(i)}return n},MO=p.root()}var tL=$(eL()),nL={table:"directus_collections",defaults:{collection:null,hidden:!1,singleton:!1,icon:null,note:null,translations:null,display_template:null,accountability:"all"},data:[{collection:"directus_access",icon:"admin_panel_settings",note:"$t:directus_collection.directus_access",display_template:"{{ policy.name }}",sort_field:"sort"},{collection:"directus_activity",note:"$t:directus_collection.directus_activity",accountability:null},{collection:"directus_collections",icon:"database",note:"$t:directus_collection.directus_collections"},{collection:"directus_fields",icon:"input",note:"$t:directus_collection.directus_fields"},{collection:"directus_files",icon:"folder",note:"$t:directus_collection.directus_files",display_template:"{{ $thumbnail }} {{ title }}"},{collection:"directus_folders",note:"$t:directus_collection.directus_folders",display_template:"{{ name }}"},{collection:"directus_migrations",note:"$t:directus_collection.directus_migrations"},{collection:"directus_permissions",icon:"admin_panel_settings",note:"$t:directus_collection.directus_permissions"},{collection:"directus_policies",icon:"admin_panel_settings",note:"$t:directus_collection.directus_policies"},{collection:"directus_presets",icon:"bookmark",note:"$t:directus_collection.directus_presets",accountability:null},{collection:"directus_relations",icon:"merge_type",note:"$t:directus_collection.directus_relations"},{collection:"directus_revisions",note:"$t:directus_collection.directus_revisions",accountability:null},{collection:"directus_roles",icon:"supervised_user_circle",note:"$t:directus_collection.directus_roles"},{collection:"directus_sessions",note:"$t:directus_collection.directus_sessions"},{collection:"directus_settings",singleton:!0,note:"$t:directus_collection.directus_settings"},{collection:"directus_users",archive_field:"status",archive_value:"archived",unarchive_value:"draft",icon:"people_alt",note:"$t:directus_collection.directus_users",display_template:"{{ first_name }} {{ last_name }}"},{collection:"directus_webhooks",note:"$t:directus_collection.directus_webhooks"},{collection:"directus_dashboards",note:"$t:directus_collection.directus_dashboards"},{collection:"directus_panels",note:"$t:directus_collection.directus_panels"},{collection:"directus_notifications",note:"$t:directus_collection.directus_notifications"},{collection:"directus_shares",icon:"share",note:"$t:directus_collection.directus_shares"},{collection:"directus_flows",note:"$t:directus_collection.directus_flows"},{collection:"directus_operations",note:"$t:directus_collection.directus_operations"},{collection:"directus_translations",note:"$t:directus_collection.directus_translations"},{collection:"directus_versions",note:"$t:directus_collection.directus_versions"},{collection:"directus_extensions",note:"$t:directus_collection.directus_extensions"}]};nL.data.map((e=>({...nL.defaults,...e,system:!0}))),nL.data.map((e=>e.collection));var sL={table:"directus_relations",defaults:{many_collection:"directus_users",many_field:null,one_collection:null,one_field:null,one_allowed_collections:null,one_collection_field:null,one_deselect_action:"nullify",junction_field:null,sort_field:null},data:[{many_collection:"directus_collections",many_field:"group",one_collection:"directus_collections"},{many_collection:"directus_users",many_field:"role",one_collection:"directus_roles",one_field:"users"},{many_collection:"directus_users",many_field:"avatar",one_collection:"directus_files"},{many_collection:"directus_revisions",many_field:"activity",one_collection:"directus_activity",one_field:"revisions"},{many_collection:"directus_revisions",many_field:"parent",one_collection:"directus_revisions"},{many_collection:"directus_revisions",many_field:"version",one_collection:"directus_versions"},{many_collection:"directus_presets",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_presets",many_field:"role",one_collection:"directus_roles"},{many_collection:"directus_folders",many_field:"parent",one_collection:"directus_folders"},{many_collection:"directus_files",many_field:"folder",one_collection:"directus_folders"},{many_collection:"directus_files",many_field:"uploaded_by",one_collection:"directus_users"},{many_collection:"directus_files",many_field:"modified_by",one_collection:"directus_users"},{many_collection:"directus_fields",many_field:"collection",one_collection:"directus_collections",one_field:"fields"},{many_collection:"directus_fields",many_field:"group",one_collection:"directus_fields"},{many_collection:"directus_activity",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_settings",many_field:"project_logo",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_foreground",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_background",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"public_favicon",one_collection:"directus_files"},{many_collection:"directus_settings",many_field:"storage_default_folder",one_collection:"directus_folders"},{many_collection:"directus_settings",many_field:"public_registration_role",one_collection:"directus_roles"},{many_collection:"directus_panels",many_field:"dashboard",one_collection:"directus_dashboards",one_field:"panels"},{many_collection:"directus_panels",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_flows",many_field:"operation",one_collection:"directus_operations"},{many_collection:"directus_flows",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_operations",many_field:"flow",one_collection:"directus_flows",one_field:"operations",one_deselect_action:"delete"},{many_collection:"directus_operations",many_field:"resolve",one_collection:"directus_operations"},{many_collection:"directus_operations",many_field:"reject",one_collection:"directus_operations"},{many_collection:"directus_operations",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_sessions",many_field:"user",one_collection:"directus_users"},{many_collection:"directus_sessions",many_field:"share",one_collection:"directus_shares"},{many_collection:"directus_dashboards",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_notifications",many_field:"recipient",one_collection:"directus_users"},{many_collection:"directus_notifications",many_field:"sender",one_collection:"directus_users"},{many_collection:"directus_shares",many_field:"role",one_collection:"directus_roles"},{many_collection:"directus_shares",many_field:"collection",one_collection:"directus_collections"},{many_collection:"directus_shares",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_versions",many_field:"collection",one_collection:"directus_collections"},{many_collection:"directus_versions",many_field:"user_created",one_collection:"directus_users"},{many_collection:"directus_versions",many_field:"user_updated",one_collection:"directus_users"},{many_collection:"directus_permissions",many_field:"policy",one_collection:"directus_policies",one_field:"permissions",one_deselect_action:"delete"},{many_collection:"directus_access",many_field:"policy",one_collection:"directus_policies",one_field:"roles",one_deselect_action:"delete",junction_field:"role"},{many_collection:"directus_access",many_field:"policy",one_collection:"directus_policies",one_field:"users",one_deselect_action:"delete",junction_field:"user"},{many_collection:"directus_access",many_field:"role",one_collection:"directus_roles",one_field:"policies",one_deselect_action:"delete",junction_field:"policy",sort_field:"sort"},{many_collection:"directus_access",many_field:"user",one_collection:"directus_users",one_field:"policies",one_deselect_action:"delete",junction_field:"policy",sort_field:"sort"},{many_collection:"directus_roles",many_field:"parent",one_collection:"directus_roles",one_field:"children"},{many_collection:"directus_webhooks",many_field:"migrated_flow",one_collection:"directus_flows"}]};sL.data.map((e=>({...sL.defaults,...e,system:!0})));var iL={collection:null,field:null,special:null,interface:null,options:null,display:null,display_options:null,readonly:!1,hidden:!1,sort:null,width:"full",group:null,translations:null,note:null,conditions:null,required:!1},rL={table:"directus_settings",fields:[{field:"id",hidden:!0},{field:"project_name",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_settings.project_name_placeholder"},width:"half"},{field:"project_descriptor",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_settings.project_name_placeholder"},width:"half"},{field:"project_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com"},width:"half"},{field:"default_language",interface:"system-language",options:{iconRight:"language",placeholder:"en-US"},width:"half"},{field:"theming_group",interface:"group-raw",special:["alias","no-data","group"]},{field:"branding_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:fields.directus_settings.branding"},special:["alias","no-data"],width:"full",group:"theming_group"},{field:"project_color",interface:"select-color",note:"$t:field_options.directus_settings.project_color_note",width:"half",group:"theming_group"},{field:"project_logo",interface:"file",note:"$t:field_options.directus_settings.project_logo_note",width:"half",group:"theming_group"},{field:"public_foreground",interface:"file",width:"half",group:"theming_group"},{field:"public_background",interface:"file",width:"half",group:"theming_group"},{field:"public_favicon",interface:"file",note:"$t:field_options.directus_settings.project_favicon_note",width:"half",group:"theming_group"},{field:"public_note",interface:"input",options:{placeholder:"$t:field_options.directus_settings.public_note_placeholder",iconRight:"info"},width:"half",group:"theming_group"},{field:"theming_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:fields.directus_settings.theming"},special:["alias","no-data"],width:"full",group:"theming_group"},{field:"default_appearance",interface:"select-dropdown",width:"half",options:{choices:[{value:"auto",text:"$t:appearance_auto"},{value:"light",text:"$t:appearance_light"},{value:"dark",text:"$t:appearance_dark"}]},group:"theming_group"},{field:"default_theme_light",width:"full",interface:"system-theme",options:{appearance:"light"},group:"theming_group"},{field:"theme_light_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"light"},group:"theming_group",special:["cast-json"]},{field:"default_theme_dark",width:"full",interface:"system-theme",options:{appearance:"dark"},group:"theming_group"},{field:"theme_dark_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"dark"},group:"theming_group",special:["cast-json"]},{field:"custom_css",interface:"input-code",options:{language:"css",lineNumber:!0,template:"#app, #main-content, body {\n  --v-button-background-color: #6644FF !important;\n  --v-button-background-color-hover: #5E41EC !important;\n}\n"},width:"full",group:"theming_group"},{field:"modules_divider",interface:"presentation-divider",options:{icon:"menu_open",title:"$t:modules"},special:["alias","no-data"],width:"full"},{field:"module_bar",interface:"system-modules",special:["cast-json"]},{field:"security_divider",interface:"presentation-divider",options:{icon:"shield",title:"$t:security"},special:["alias","no-data"],width:"full"},{field:"auth_password_policy",interface:"select-dropdown",options:{choices:[{value:null,text:"$t:field_options.directus_settings.auth_password_policy.none_text"},{value:"/^.{8,}$/",text:"$t:field_options.directus_settings.auth_password_policy.weak_text"},{value:"/(?=^.{8,}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+}{';'?>.<,])(?!.*\\s).*$/",text:"$t:field_options.directus_settings.auth_password_policy.strong_text"}],allowOther:!0},width:"half"},{field:"auth_login_attempts",interface:"input",options:{iconRight:"lock",placeholder:"$t:unlimited"},width:"half"},{field:"public_registration_divider",interface:"presentation-divider",options:{icon:"person_add",title:"$t:fields.directus_settings.public_registration"},special:["alias","no-data"],width:"full"},{field:"public_registration",interface:"boolean",note:"$t:fields.directus_settings.public_registration_note",width:"half",options:{label:"$t:enabled"},special:["cast-boolean"]},{field:"public_registration_role",interface:"select-dropdown-m2o",note:"$t:fields.directus_settings.public_registration_role_note",options:{template:"{{ name }}"},special:["m2o"],width:"half",display:"related-values",display_options:{template:"{{ name }}"}},{field:"public_registration_verify_email",interface:"boolean",note:"$t:fields.directus_settings.public_registration_verify_email_note",width:"half",options:{label:"$t:enabled"},special:["cast-boolean"]},{field:"public_registration_email_filter",interface:"system-filter",note:"$t:fields.directus_settings.public_registration_email_filter_note",options:{collectionName:"directus_users",collectionField:"email",fieldName:"email"},special:["cast-json"],width:"half"},{field:"files_divider",interface:"presentation-divider",options:{icon:"folder",title:"$t:fields.directus_settings.files_and_thumbnails"},special:["alias","no-data"],width:"full"},{field:"storage_asset_transform",interface:"select-dropdown",options:{choices:[{value:"all",text:"$t:fields.directus_settings.transformations_all"},{value:"none",text:"$t:fields.directus_settings.transformations_none"},{value:"presets",text:"$t:fields.directus_settings.transformations_presets"}]},width:"half"},{field:"storage_default_folder",interface:"system-folder",width:"half",note:"$t:interfaces.system-folder.field_hint"},{field:"storage_asset_presets",interface:"list",options:{fields:[{field:"key",name:"$t:key",type:"string",schema:{is_nullable:!1},meta:{interface:"input",options:{slug:!0,onlyOnCreate:!1},width:"full",required:!0}},{field:"fit",name:"$t:field_options.directus_settings.storage_asset_presets.fit_label",type:"string",schema:{is_nullable:!1},meta:{interface:"select-dropdown",options:{choices:[{value:"contain",text:"$t:field_options.directus_settings.storage_asset_presets.fit.contain_text"},{value:"cover",text:"$t:field_options.directus_settings.storage_asset_presets.fit.cover_text"},{value:"inside",text:"$t:field_options.directus_settings.storage_asset_presets.fit.fit_text"},{value:"outside",text:"$t:field_options.directus_settings.storage_asset_presets.fit.outside_text"}]},width:"half"}},{field:"width",name:"$t:width",type:"integer",schema:{is_nullable:!1},meta:{interface:"input",width:"half"}},{field:"height",name:"$t:height",type:"integer",schema:{is_nullable:!1},meta:{interface:"input",width:"half"}},{field:"quality",type:"integer",name:"$t:quality",schema:{default_value:80,is_nullable:!1},meta:{interface:"slider",options:{max:100,min:0,step:1},width:"half"}},{field:"withoutEnlargement",name:"$t:field_options.directus_settings.storage_asset_presets.upscaling",type:"boolean",schema:{default_value:!1},meta:{interface:"boolean",width:"half",options:{label:"$t:no_upscale"}}},{field:"format",name:"$t:format",type:"string",schema:{is_nullable:!1,default_value:""},meta:{interface:"select-dropdown",options:{allowNone:!0,choices:[{value:"auto",text:"Auto"},{value:"jpeg",text:"JPEG"},{value:"png",text:"PNG"},{value:"webp",text:"WebP"},{value:"tiff",text:"Tiff"},{value:"avif",text:"AVIF"}]},width:"half"}},{field:"transforms",name:"$t:field_options.directus_settings.additional_transforms",type:"json",schema:{is_nullable:!1,default_value:[]},meta:{note:"$t:field_options.directus_settings.transforms_note",interface:"json",options:{template:'[\n  ["blur", 45],\n  ["grayscale"],\n  ["extend", { "right": 500, "background": "rgb(255, 0, 0)" }]\n]\n',placeholder:'[\n  ["blur", 45],\n  ["grayscale"],\n  ["extend", { "right": 500, "background": "rgb(255, 0, 0)" }]\n]\n'},width:"full"}}],template:"{{key}}"},special:["cast-json"],width:"full"},{field:"reporting_divider",interface:"presentation-divider",options:{icon:"feedback",title:"$t:fields.directus_settings.reporting"},special:["alias","no-data"],width:"full"},{field:"report_feature_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com/feature"},width:"half"},{field:"report_bug_url",interface:"input",options:{iconRight:"link",placeholder:"https://example.com/bug"},width:"half"},{field:"report_error_url",interface:"system-display-template",options:{placeholder:"https://example.com/error",fields:[{name:"Error",field:"error",key:"error",path:"error",children:[{name:"Name",field:"name",key:"error.name",path:"error.name"},{name:"Message",field:"message",key:"error.message",path:"error.message"}]},{name:"Navigator",field:"navigator",key:"navigator",path:"navigator",children:[{name:"Language",field:"language",key:"navigator.language",path:"navigator.language"},{name:"User Agent",field:"userAgent",key:"navigator.userAgent",path:"navigator.userAgent"}]},{name:"Route",field:"route",key:"route",path:"route",children:[{name:"Full Path",field:"fullPath",key:"route.fullPath",path:"route.fullPath"},{name:"Hash",field:"hash",key:"route.hash",path:"route.hash"},{name:"Name",field:"name",key:"route.name",path:"route.name"},{name:"Path",field:"path",key:"route.path",path:"route.path"},{name:"Query",field:"query",key:"route.query",path:"route.query"}]},{name:"User",field:"user",key:"user",path:"user",children:[{name:"ID",field:"id",key:"user.id",path:"user.id"},{name:"First Name",field:"first_name",key:"user.first_name",path:"user.first_name"},{name:"Last Name",field:"last_name",key:"user.last_name",path:"user.last_name"},{name:"Status",field:"status",key:"user.status",path:"user.status"},{name:"Title",field:"title",key:"user.title",path:"user.title"},{name:"Description",field:"description",key:"user.description",path:"user.description"},{name:"Location",field:"location",key:"user.location",path:"user.location"}]},{name:"Role",field:"role",key:"role",path:"role",children:[{name:"ID",field:"id",key:"role.id",path:"role.id"},{name:"Name",field:"name",key:"role.name",path:"role.name"}]}]},width:"full"},{field:"map_divider",interface:"presentation-divider",options:{icon:"map",title:"$t:fields.directus_settings.mapping"},special:["alias","no-data"],width:"full"},{field:"mapbox_key",interface:"input",options:{icon:"key",title:"$t:field_options.directus_settings.mapbox_key",placeholder:"$t:field_options.directus_settings.mapbox_placeholder",iconLeft:"vpn_key",font:"monospace"},width:"full"},{field:"basemaps",interface:"list",special:["cast-json"],options:{template:"{{name}}",fields:[{field:"name",name:"$t:name",schema:{is_nullable:!1},meta:{interface:"text-input",required:!0,options:{placeholder:"$t:field_options.directus_settings.basemaps_name_placeholder"}}},{field:"type",name:"$t:type",meta:{interface:"select-dropdown",options:{choices:[{value:"raster",text:"$t:field_options.directus_settings.basemaps_raster"},{value:"tile",text:"$t:field_options.directus_settings.basemaps_tile"},{value:"style",text:"$t:field_options.directus_settings.basemaps_style"}]}}},{field:"url",name:"$t:url",schema:{is_nullable:!1},meta:{interface:"text-input",options:{placeholder:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}},{field:"tileSize",name:"$t:tile_size",type:"integer",schema:{is_nullable:!0},meta:{interface:"input",options:{placeholder:"512"},conditions:[{name:"typeNeqRaster",rule:{type:{_neq:"raster"}},hidden:!0}]}},{field:"attribution",name:"$t:fields.directus_settings.attribution",type:"string",schema:{is_nullable:!0},meta:{interface:"input",options:{placeholder:"$t:fields.directus_settings.attribution_placeholder"}}}]}},{field:"image_editor",interface:"presentation-divider",options:{icon:"image",title:"$t:fields.directus_settings.image_editor"},special:["alias","no-data"],width:"full"},{field:"custom_aspect_ratios",interface:"list",special:["cast-json"],options:{template:"{{text}}",fields:[{field:"text",name:"$t:text",type:"string",meta:{interface:"text-input",width:"half",required:!0,options:{placeholder:"$t:text"}}},{field:"value",name:"$t:value",type:"float",meta:{interface:"input",width:"half",required:!0,options:{placeholder:"$t:value"}}}]}}]},aL=[];function oL(e){let{fields:t,table:n}=e;t.forEach(((e,t)=>{aL.push({system:!0,...iL,...e,collection:n,sort:t+1})}))}oL({table:"directus_access",fields:[{field:"id",special:["uuid"],hidden:!0,width:"half"},{field:"role",hidden:!0,width:"half",special:["m2o"]},{field:"user",hidden:!0,width:"half",special:["m2o"]},{field:"policy",hidden:!0,width:"half",special:["m2o"]},{field:"sort",hidden:!0,width:"half"}]}),oL({table:"directus_activity",fields:[{field:"id",width:"half"},{field:"item",width:"half"},{field:"action",display:"labels",display_options:{choices:[{text:"$t:field_options.directus_activity.create",value:"create",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{text:"$t:field_options.directus_activity.update",value:"update",foreground:"var(--blue)",background:"var(--blue-25)"},{text:"$t:field_options.directus_activity.delete",value:"delete",foreground:"var(--theme--danger)",background:"var(--danger-25)"},{text:"$t:field_options.directus_activity.login",value:"login",foreground:"var(--purple)",background:"var(--purple-25)"}]},width:"half"},{field:"collection",display:"collection",display_options:{icon:!0},width:"half"},{field:"timestamp",display:"datetime",special:["date-created","cast-timestamp"],options:{relative:!0},width:"half"},{field:"user",display:"user",width:"half"},{field:"comment",display:"formatted-value",display_options:{color:"var(--theme--foreground-subdued)"},width:"half"},{field:"user_agent",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"origin",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"ip",display:"formatted-value",display_options:{font:"monospace"},width:"half"},{field:"revisions",interface:"list-o2m",special:["o2m"],options:{fields:["collection","item"]},width:"half"}]}),oL({table:"directus_collections",fields:[{field:"collection_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"box",title:"$t:field_options.directus_collections.collection_setup"},width:"full"},{field:"collection",interface:"input",options:{font:"monospace"},readonly:!0,width:"half"},{field:"note",interface:"input",options:{placeholder:"$t:field_options.directus_collections.note_placeholder"},width:"half"},{field:"icon",interface:"select-icon",options:null,width:"half"},{field:"color",interface:"select-color",options:{placeholder:"$t:interfaces.select-color.placeholder"},width:"half"},{field:"display_template",interface:"system-display-template",options:{collectionField:"collection"},width:"full"},{field:"hidden",special:["cast-boolean"],interface:"boolean",options:{label:"$t:field_options.directus_collections.hidden_label"},width:"half"},{field:"singleton",special:["cast-boolean"],interface:"boolean",options:{label:"$t:singleton_label"},width:"half"},{field:"translations",special:["cast-json"],interface:"list",options:{template:"{{ translation }} ({{ language }})",fields:[{field:"language",name:"$t:language",type:"string",schema:{default_value:"en-US"},meta:{interface:"system-language",width:"half",required:!0}},{field:"translation",name:"$t:field_options.directus_collections.collection_name",type:"string",meta:{interface:"input",width:"half",required:!0,options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}},{field:"singular",name:"$t:field_options.directus_collections.singular_unit",type:"string",meta:{interface:"input",width:"half",options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}},{field:"plural",name:"$t:field_options.directus_collections.plural_unit",type:"string",meta:{interface:"input",width:"half",options:{placeholder:"$t:field_options.directus_collections.translation_placeholder"}}}]},width:"full"},{field:"preview_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"preview",title:"$t:field_options.directus_collections.preview_divider"},width:"full"},{field:"preview_url",interface:"system-display-template",options:{collectionField:"collection",injectVersionField:!0},width:"full"},{field:"content_versioning_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"published_with_changes",title:"$t:field_options.directus_collections.content_versioning_divider"},width:"full"},{field:"versioning",interface:"boolean",special:["cast-boolean"],options:{label:"$t:field_options.directus_collections.enable_versioning"},width:"half"},{field:"archive_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"archive",title:"$t:field_options.directus_collections.archive_divider"},width:"full"},{field:"archive_field",interface:"system-field",options:{collectionField:"collection",allowNone:!0,placeholder:"$t:field_options.directus_collections.archive_field_placeholder"},width:"half"},{field:"archive_app_filter",interface:"boolean",special:["cast-boolean"],options:{label:"$t:field_options.directus_collections.archive_app_filter"},width:"half"},{field:"archive_value",interface:"input",options:{font:"monospace",iconRight:"archive",placeholder:"$t:field_options.directus_collections.archive_value"},width:"half"},{field:"unarchive_value",interface:"input",options:{font:"monospace",iconRight:"unarchive",placeholder:"$t:field_options.directus_collections.unarchive_value"},width:"half"},{field:"sort_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"sort",title:"$t:field_options.directus_collections.sort_divider"},width:"full"},{field:"sort_field",interface:"system-field",options:{collectionField:"collection",placeholder:"$t:field_options.directus_collections.sort_field",typeAllowList:["float","decimal","integer"],allowNone:!0,allowPrimaryKey:!1,allowForeignKeys:!1},width:"half"},{field:"accountability_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"admin_panel_settings",title:"$t:field_options.directus_collections.accountability_divider"},width:"full"},{field:"accountability",interface:"select-dropdown",options:{choices:[{text:"$t:field_options.directus_collections.track_activity_revisions",value:"all"},{text:"$t:field_options.directus_collections.only_track_activity",value:"activity"},{text:"$t:field_options.directus_collections.do_not_track_anything",value:null}]},width:"half"},{field:"duplication_divider",special:["alias","no-data"],interface:"presentation-divider",options:{icon:"content_copy",title:"$t:field_options.directus_collections.duplication_divider"}},{field:"item_duplication_fields",special:["cast-json"],interface:"system-field-tree",options:{collectionField:"collection"}},{field:"sort",hidden:!0},{field:"group",hidden:!0},{field:"collapse",hidden:!0}]}),oL({table:"directus_dashboards",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"panels",special:["o2m"]},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"note"},{field:"color"}]}),oL({table:"directus_extensions",fields:[{collection:"directus_extensions",field:"id",special:["uuid"]},{collection:"directus_extensions",field:"folder"},{collection:"directus_extensions",field:"source"},{collection:"directus_extensions",field:"bundle"},{collection:"directus_extensions",field:"enabled",special:["cast-boolean"]}]}),oL({table:"directus_fields",fields:[{collection:"directus_fields",field:"id",width:"half"},{collection:"directus_fields",field:"collection",width:"half"},{collection:"directus_fields",field:"field",width:"half"},{collection:"directus_fields",field:"special",hidden:!0,special:["cast-csv"],width:"half"},{collection:"directus_fields",field:"interface",width:"half"},{collection:"directus_fields",field:"options",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"display",width:"half"},{collection:"directus_fields",field:"display_options",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"readonly",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"hidden",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"required",hidden:!0,special:["cast-boolean"],width:"half"},{collection:"directus_fields",field:"sort",width:"half"},{collection:"directus_fields",field:"width",width:"half"},{collection:"directus_fields",field:"group",width:"half"},{collection:"directus_fields",field:"translations",hidden:!0,special:["cast-json"],width:"half"},{collection:"directus_fields",field:"note",width:"half"},{collection:"directus_fields",field:"conditions",hidden:!0,special:["cast-json"]},{collection:"directus_fields",field:"validation",hidden:!0,special:["cast-json"]},{collection:"directus_fields",field:"validation_message",hidden:!0}]}),oL({table:"directus_files",fields:[{field:"id",hidden:!0,interface:"input",special:["uuid"]},{field:"title",interface:"input",options:{iconRight:"title",placeholder:"$t:field_options.directus_files.title"},width:"full"},{field:"description",interface:"input-multiline",width:"full",options:{placeholder:"$t:field_options.directus_files.description"}},{field:"tags",interface:"tags",options:{iconRight:"local_offer"},special:["cast-json"],width:"full",display:"labels",display_options:{choices:null,format:!1}},{field:"location",interface:"input",options:{iconRight:"place",placeholder:"$t:field_options.directus_files.location"},width:"half"},{field:"storage",interface:"input",options:{iconRight:"storage"},width:"half",readonly:!0},{field:"focal_point_divider",interface:"presentation-divider",options:{icon:"image_search",title:"$t:field_options.directus_files.focal_point_divider"},special:["alias","no-data"],width:"full"},{field:"focal_point_x",width:"half"},{field:"focal_point_y",width:"half"},{field:"storage_divider",interface:"presentation-divider",options:{icon:"insert_drive_file",title:"$t:field_options.directus_files.storage_divider"},special:["alias","no-data"],width:"full"},{field:"filename_disk",interface:"input",options:{iconRight:"publish",placeholder:"$t:field_options.directus_files.filename_disk"},readonly:!0,width:"half"},{field:"filename_download",interface:"input",options:{iconRight:"get_app",placeholder:"$t:field_options.directus_files.filename_download"},width:"half"},{field:"metadata",hidden:!0,special:["cast-json"]},{field:"type",display:"mime-type",readonly:!0},{field:"filesize",display:"filesize",readonly:!0},{field:"created_on",interface:"datetime",display:"datetime",width:"half",special:["date-created"],readonly:!0},{field:"modified_by",interface:"select-dropdown-m2o",special:["user-updated"],width:"half",display:"user",readonly:!0,options:{template:"{{avatar.$thumbnail}} {{first_name}} {{last_name}}"}},{field:"modified_on",interface:"datetime",special:["date-updated"],width:"half",display:"datetime",readonly:!0},{field:"embed",width:"half",hidden:!0},{field:"uploaded_by",display:"user",width:"half",hidden:!0,special:["user-created"]},{field:"uploaded_on",display:"datetime",width:"half",hidden:!0},{field:"folder",width:"half",readonly:!0,special:["m2o"],display:"related-values",display_options:{template:"{{ name }}"}},{field:"width",width:"half",readonly:!0},{field:"height",width:"half",readonly:!0},{field:"charset",width:"half",readonly:!0},{field:"duration",width:"half",readonly:!0},{field:"tus_id",width:"half",hidden:!0},{field:"tus_data",width:"half",hidden:!0,special:["cast-json"]}]}),oL({table:"directus_flows",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"color"},{field:"description"},{field:"status"},{field:"trigger"},{field:"accountability"},{field:"options",special:["cast-json"]},{field:"operation"},{field:"operations",special:["o2m"]},{field:"date_created",special:["date-created"]},{field:"user_created",special:["user-created"]}]}),oL({table:"directus_folders",fields:[{field:"id",interface:"input",special:["uuid"],width:"half"},{field:"parent",width:"half"},{field:"name",width:"full"}]}),oL({table:"directus_migrations",fields:[{collection:"directus_migrations",field:"version"},{collection:"directus_migrations",field:"name"},{collection:"directus_migrations",field:"timestamp"}]}),oL({table:"directus_notifications",fields:[{field:"id"},{field:"timestamp",special:["date-created","cast-timestamp"]},{field:"status"},{field:"recipient"},{field:"sender"},{field:"subject"},{field:"message"},{field:"collection"},{field:"item"}]}),oL({table:"directus_operations",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"key"},{field:"type"},{field:"position_x"},{field:"position_y"},{field:"options",special:["cast-json"]},{field:"resolve"},{field:"reject"},{field:"flow"},{field:"date_created",special:["date-created"]},{field:"user_created",special:["user-created"]}]}),oL({table:"directus_panels",fields:[{field:"id",special:["uuid"]},{field:"name"},{field:"icon"},{field:"color"},{field:"note"},{field:"type"},{field:"show_header",special:["cast-boolean"]},{field:"position_x"},{field:"position_y"},{field:"width"},{field:"height"},{field:"options",special:["cast-json"]},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"dashboard"}]}),oL({table:"directus_permissions",fields:[{field:"permissions",hidden:!0,special:["cast-json"],width:"half"},{field:"presets",hidden:!0,special:["cast-json"],width:"half"},{field:"policy",hidden:!0,interface:"select-dropdown-m2o",width:"half",special:["m2o"]},{field:"collection",width:"half"},{field:"id",width:"half"},{field:"fields",width:"half",special:["cast-csv"]},{field:"action",width:"half"},{field:"validation",width:"half",special:["cast-json"]}]}),oL({table:"directus_policies",fields:[{field:"id",hidden:!0,special:["uuid"]},{field:"name",required:!0,width:"half",display:"formatted-value",display_options:{translate:!0}},{field:"icon",interface:"select-icon",display:"icon",width:"half"},{field:"description",interface:"input",options:{placeholder:"$t:field_options.directus_policies.description"},width:"full",display:"formatted-value",display_options:{translate:!0}},{field:"permissions",interface:"system-permissions",special:["o2m"]},{field:"app_access",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"admin_access",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"ip_access",interface:"tags",options:{placeholder:"$t:field_options.directus_policies.ip_access"},special:["cast-csv"],width:"full"},{field:"enforce_tfa",note:"$t:field_options.directus_policies.enforce_tfa",interface:"boolean",special:["cast-boolean"],width:"half"},{field:"assigned_to_divider",interface:"presentation-divider",options:{title:"$t:field_options.directus_policies.assigned_to"},special:["alias","no-data"],width:"full"},{field:"users",interface:"list-m2m",options:{template:"{{ user.first_name }} {{ user.last_name }}",junctionFilter:{user:{_nnull:!0}}},special:["m2m"]},{field:"roles",interface:"list-m2m",options:{template:"{{ role.name }}",junctionFilter:{role:{_nnull:!0}}},special:["m2m"]}]}),oL({table:"directus_presets",fields:[{field:"filter",hidden:!0,special:["cast-json"]},{field:"layout_query",hidden:!0,special:["cast-json"]},{field:"layout_options",hidden:!0,special:["cast-json"]},{field:"role",width:"half",special:["m2o"],display:"related-values",display_options:{template:"{{ name }}"}},{field:"user",width:"half",special:["m2o"],display:"related-values",display_options:{template:"{{ email }}"}},{field:"id",width:"half"},{field:"bookmark",width:"half"},{field:"icon",width:"half",display:"icon"},{field:"color",width:"half",display:"color"},{field:"search",width:"half"},{field:"collection",width:"half"},{field:"layout",width:"half"},{field:"refresh_interval"}]}),oL({table:"directus_relations",fields:[{field:"id",width:"half"},{field:"many_collection",width:"half"},{field:"many_field",width:"half"},{field:"one_collection",width:"half"},{field:"one_field",width:"half"},{field:"one_collection_field",width:"half"},{field:"one_allowed_collections",special:["cast-csv"],width:"half"},{field:"junction_field",width:"half"},{field:"sort_field",width:"half"},{field:"one_deselect_action",width:"half"}]}),oL({table:"directus_revisions",fields:[{field:"id",width:"half"},{field:"activity",width:"half"},{field:"collection",width:"half"},{field:"item",width:"half"},{field:"data",hidden:!0,special:["cast-json"]},{field:"delta",hidden:!0,special:["cast-json"]},{field:"parent",width:"half"},{field:"version",width:"half"}]}),oL({table:"directus_roles",fields:[{field:"id",hidden:!0,interface:"input",special:["uuid"]},{field:"name",required:!0,interface:"input",options:{placeholder:"$t:field_options.directus_roles.name"},width:"half",display:"formatted-value",display_options:{translate:!0}},{field:"icon",interface:"select-icon",display:"icon",width:"half"},{field:"description",interface:"input",options:{placeholder:"$t:field_options.directus_roles.description"},width:"full",display:"formatted-value",display_options:{translate:!0}},{field:"parent",interface:"select-dropdown-m2o",note:"$t:field_options.directus_roles.parent_note",options:{template:"{{ name }}",filter:{id:{_neq:"{{ id }}"}}},special:["m2o"],width:"half",display:"related-values",display_options:{template:"{{ name }}"}},{field:"children",hidden:!0,interface:"list-o2m-tree-view",note:"$t:field_options.directus_roles.children_note",special:["o2m"],options:{displayTemplate:"{{ name }}",enableCreate:!1,fields:["name"],filter:{id:{_neq:"{{ id }}"}}},display:"related-values",display_options:{template:"{{ name }}"},width:"full"},{field:"policies",interface:"list-m2m",options:{layout:"list"},display:"related-values",special:["m2m"],width:"full"},{field:"users_group",interface:"group-raw",special:["alias","no-data","group"]},{field:"users_divider",interface:"presentation-divider",options:{icon:"people_alt",title:"$t:users"},special:["alias","no-data"],width:"full",group:"users_group"},{field:"users",interface:"list-o2m",special:["o2m"],options:{fields:["first_name","last_name"]},width:"full",group:"users_group"}]}),oL({table:"directus_sessions",fields:[{field:"token",width:"half"},{field:"user",width:"half"},{field:"expires",width:"half"},{field:"ip",width:"half"},{field:"user_agent",width:"half"},{field:"origin",width:"half"},{field:"share",width:"half"},{field:"next_token",width:"half"}]}),oL(rL),oL({table:"directus_shares",fields:[{field:"id",special:["uuid"],readonly:!0,hidden:!0},{field:"name"},{field:"collection",width:"half",hidden:!0},{field:"item",width:"half",hidden:!0},{field:"role",interface:"select-dropdown-m2o",width:"half",options:{template:"{{name}}",filter:{admin_access:{_eq:!1}}}},{field:"password",special:["hash","conceal"],interface:"input-hash",options:{iconRight:"lock",masked:!0},width:"half",note:"$t:shared_leave_blank_for_passwordless_access"},{field:"date_start",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"date_end",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"max_uses",width:"half",note:"$t:shared_leave_blank_for_unlimited"},{field:"times_used",width:"half",readonly:!0},{field:"date_created",special:["date-created","cast-timestamp"],width:"half",readonly:!0,conditions:[{name:"notCreatedYet",rule:{id:{_null:!0}},hidden:!0}]},{field:"user_created",special:["user-created"],interface:"select-dropdown-m2o",width:"half",display:"user",options:{template:"{{avatar.$thumbnail}} {{first_name}} {{last_name}}"},readonly:!0,conditions:[{name:"notCreatedYet",rule:{id:{_null:!0}},hidden:!0}]}]}),oL({table:"directus_translations",fields:[{field:"id",hidden:!0,sort:1,special:["uuid"]},{field:"key",width:"half",sort:2,required:!0,interface:"input",options:{font:"monospace",placeholder:"$t:translation_key_placeholder"}},{field:"language",interface:"system-language",width:"half",sort:3,required:!0},{field:"value",interface:"input-multiline",sort:4,required:!0,options:{placeholder:"$t:enter_a_value"}}]}),oL({table:"directus_users",fields:[{field:"first_name",interface:"input",options:{iconRight:"account_circle"},width:"half"},{field:"last_name",interface:"input",options:{iconRight:"account_circle"},width:"half"},{field:"email",interface:"input",options:{iconRight:"email"},width:"half"},{field:"password",special:["hash","conceal"],interface:"input-hash",options:{iconRight:"lock",masked:!0},width:"half"},{field:"avatar",interface:"file",width:"full",display:"image"},{field:"location",interface:"input",options:{iconRight:"place"},width:"half"},{field:"title",interface:"input",options:{iconRight:"work"},width:"half"},{field:"description",interface:"input-multiline",width:"full"},{field:"tags",interface:"tags",special:["cast-json"],width:"full",options:{iconRight:"local_offer"},display:"labels",display_options:{choices:null,format:!1}},{field:"preferences_divider",interface:"presentation-divider",options:{icon:"face",title:"$t:fields.directus_users.user_preferences"},special:["alias","no-data"],width:"full"},{field:"language",interface:"system-language",width:"half",options:{includeProjectDefault:!0}},{field:"tfa_secret",interface:"system-mfa-setup",special:["conceal"],width:"half"},{field:"email_notifications",interface:"boolean",width:"half",special:["cast-boolean"]},{field:"theming_divider",interface:"presentation-divider",options:{icon:"palette",title:"$t:theme"},special:["alias","no-data"],width:"full"},{field:"appearance",interface:"select-dropdown",options:{choices:[{value:null,text:"$t:default_sync_with_project"},{value:"auto",text:"$t:appearance_auto"},{value:"light",text:"$t:appearance_light"},{value:"dark",text:"$t:appearance_dark"}]},width:"half"},{field:"theme_light",width:"full",interface:"system-theme",options:{appearance:"light",includeNull:!0}},{field:"theme_light_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"light"},special:["cast-json"]},{field:"theme_dark",width:"full",interface:"system-theme",options:{appearance:"dark",includeNull:!0}},{field:"theme_dark_overrides",width:"full",interface:"system-theme-overrides",options:{appearance:"dark"},special:["cast-json"]},{field:"admin_divider",interface:"presentation-divider",options:{icon:"verified_user",title:"$t:fields.directus_users.admin_options",color:"var(--theme--danger)"},special:["alias","no-data"],width:"full"},{field:"status",interface:"select-dropdown",options:{choices:[{text:"$t:fields.directus_users.status_draft",value:"draft"},{text:"$t:fields.directus_users.status_invited",value:"invited"},{text:"$t:fields.directus_users.status_unverified",value:"unverified"},{text:"$t:fields.directus_users.status_active",value:"active"},{text:"$t:fields.directus_users.status_suspended",value:"suspended"},{text:"$t:fields.directus_users.status_archived",value:"archived"}]},width:"half"},{field:"role",interface:"select-dropdown-m2o",options:{template:"{{ name }}"},special:["m2o"],width:"half",display:"related-values",display_options:{template:"{{ name }}"}},{field:"policies",interface:"list-m2m",options:{layout:"list"},display:"related-values",special:["m2m"],width:"full"},{field:"token",interface:"system-token",special:["conceal"],width:"full"},{field:"id",special:["uuid"],interface:"input",options:{iconRight:"vpn_key"},width:"full"},{field:"last_page",width:"half"},{field:"last_access",width:"half",display:"datetime",readonly:!0,display_options:{relative:!0}},{field:"provider",width:"half",interface:"select-dropdown",options:{choices:[{text:"$t:default_provider",value:"default"}]}},{field:"external_identifier",width:"half",options:{iconRight:"account_circle"},interface:"input"},{field:"auth_data",hidden:!0}]}),oL({table:"directus_versions",fields:[{field:"id",special:["uuid"],readonly:!0,hidden:!0},{field:"key"},{field:"name"},{field:"collection"},{field:"item"},{field:"hash",readonly:!0,hidden:!0},{field:"date_created",special:["date-created","cast-timestamp"]},{field:"date_updated",special:["date-updated","cast-timestamp"]},{field:"user_created",special:["user-created"]},{field:"user_updated",special:["user-updated"]}]}),oL({table:"directus_webhooks",fields:[{field:"id",hidden:!0},{field:"name",interface:"input",options:{iconRight:"title"},width:"full"},{field:"method",interface:"select-dropdown",display:"labels",display_options:{choices:[{value:"POST",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{value:"GET",foreground:"var(--theme--secondary)",background:"var(--secondary-25)"}],format:!1},options:{choices:["GET","POST"]},width:"half"},{field:"url",interface:"input",options:{iconRight:"link"},width:"half"},{field:"status",interface:"select-dropdown",display:"labels",display_options:{showAsDot:!0,choices:[{text:"$t:field_options.directus_webhooks.status_options_active",value:"active",foreground:"var(--theme--primary-background)",background:"var(--theme--primary)"},{text:"$t:field_options.directus_webhooks.status_options_inactive",value:"inactive",foreground:"var(--theme--foreground)",background:"var(--background-normal-alt)"}]},options:{choices:[{text:"$t:field_options.directus_webhooks.status_options_active",value:"active"},{text:"$t:field_options.directus_webhooks.status_options_inactive",value:"inactive"}]},width:"half"},{field:"data",interface:"boolean",options:{label:"$t:fields.directus_webhooks.data_label"},special:["cast-boolean"],width:"half",display:"boolean"},{field:"headers",special:["cast-json"],interface:"list",options:{template:"{{ header }}: {{ value }}",addLabel:"$t:field_options.directus_webhooks.headers.add",fields:[{field:"header",name:"$t:field_options.directus_webhooks.headers.header",type:"string",meta:{interface:"input",width:"half"}},{field:"value",name:"$t:field_options.directus_webhooks.headers.value",type:"string",meta:{interface:"input",width:"half"}}]},width:"full"},{field:"triggers_divider",interface:"presentation-divider",options:{icon:"api",title:"$t:fields.directus_webhooks.triggers"},special:["alias","no-data"],width:"full"},{field:"actions",interface:"select-multiple-checkbox",options:{choices:[{text:"$t:create",value:"create"},{text:"$t:update",value:"update"},{text:"$t:delete_label",value:"delete"}]},special:["cast-csv"],width:"full",display:"labels",display_options:{choices:[{text:"$t:create",value:"create",foreground:"var(--theme--primary)",background:"var(--theme--primary-subdued)"},{text:"$t:update",value:"update",foreground:"var(--blue)",background:"var(--blue-25)"},{text:"$t:delete_label",value:"delete",foreground:"var(--theme--danger)",background:"var(--danger-25)"},{text:"$t:login",value:"login",foreground:"var(--purple)",background:"var(--purple-25)"}]}},{field:"collections",interface:"system-collections",special:["cast-csv"],width:"full",display:"labels",display_options:{choices:null,format:!1}},{field:"was_active_before_deprecation",hidden:!0},{field:"migrated_flow",hidden:!0}]});var cL={policy:null,permissions:{},validation:null,presets:null,fields:["*"],system:!0};function lL(e,t){if("__proto__"!==e)return t}[...[{collection:"directus_collections",action:"read"},{collection:"directus_fields",action:"read"},{collection:"directus_relations",action:"read"}].map((e=>({...cL,...e}))),{collection:"directus_activity",action:"read",permissions:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_activity",action:"create",validation:{comment:{_nnull:!0}}},{collection:"directus_presets",action:"read",permissions:{_or:[{user:{_eq:"$CURRENT_USER"}},{_and:[{user:{_null:!0}},{role:{_eq:"$CURRENT_ROLE"}}]},{_and:[{user:{_null:!0}},{role:{_null:!0}}]}]}},{collection:"directus_presets",action:"create",validation:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_presets",action:"update",permissions:{user:{_eq:"$CURRENT_USER"}},validation:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_presets",action:"delete",permissions:{user:{_eq:"$CURRENT_USER"}}},{collection:"directus_roles",action:"read",permissions:{id:{_in:"$CURRENT_ROLES"}}},{collection:"directus_settings",action:"read"},{collection:"directus_translations",action:"read"},{collection:"directus_notifications",action:"read",permissions:{recipient:{_eq:"$CURRENT_USER"}}},{collection:"directus_notifications",action:"update",permissions:{recipient:{_eq:"$CURRENT_USER"}},fields:["status"]},{collection:"directus_shares",action:"read",permissions:{user_created:{_eq:"$CURRENT_USER"}}},{collection:"directus_users",action:"read",permissions:{id:{_eq:"$CURRENT_USER"}},fields:["id","first_name","last_name","last_page","email","password","location","title","description","tags","preferences_divider","avatar","language","appearance","theme_light","theme_dark","tfa_secret","status","role"]}].map((e=>({...cL,...e}))),tL.extend({type:"string",base:tL.string(),messages:{"string.contains":"{{#label}} must contain [{{#substring}}]","string.icontains":"{{#label}} must contain case insensitive [{{#substring}}]","string.ncontains":"{{#label}} can't contain [{{#substring}}]"},rules:{contains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"contains",args:{substring:e}})},validate:(e,t,{substring:n})=>!1===e.includes(n)?t.error("string.contains",{substring:n}):e},icontains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"icontains",args:{substring:e}})},validate:(e,t,{substring:n})=>!1===e.toLowerCase().includes(n.toLowerCase())?t.error("string.icontains",{substring:n}):e},ncontains:{args:[{name:"substring",ref:!0,assert:e=>"string"==typeof e,message:"must be a string"}],method(e){return this.$_addRule({name:"ncontains",args:{substring:e}})},validate:(e,t,{substring:n})=>!0===e.includes(n)?t.error("string.ncontains",{substring:n}):e}}});const uL="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,dL=new Set,pL="object"==typeof process&&process?process:{},hL=(e,t,n,s)=>{"function"==typeof pL.emitWarning?pL.emitWarning(e,t,n,s):console.error(`[${n}] ${t}: ${e}`)};let fL=globalThis.AbortController,mL=globalThis.AbortSignal;if(void 0===fL){mL=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},fL=class{constructor(){t()}signal=new mL;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==pL.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,hL("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const gL=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),_L=e=>gL(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?yL:null:null;class yL extends Array{constructor(e){super(e),this.fill(0)}}class EL{heap;length;static#e=!1;static create(e){const t=_L(e);if(!t)return[];EL.#e=!0;const n=new EL(e,t);return EL.#e=!1,n}constructor(e,t){if(!EL.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class bL{#t;#n;#s;#i;#r;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#o;#c;#l;#u;#d;#p;#h;#f;#m;#g;#_;#y;#E;#b;#v;#T;static unsafeExposeInternals(e){return{starts:e.#y,ttls:e.#E,sizes:e.#_,keyMap:e.#c,keyList:e.#l,valList:e.#u,next:e.#d,prev:e.#p,get head(){return e.#h},get tail(){return e.#f},free:e.#m,isBackgroundFetch:t=>e.#A(t),backgroundFetch:(t,n,s,i)=>e.#S(t,n,s,i),moveToTail:t=>e.#w(t),indexes:t=>e.#x(t),rindexes:t=>e.#k(t),isStale:t=>e.#C(t)}}get max(){return this.#t}get maxSize(){return this.#n}get calculatedSize(){return this.#o}get size(){return this.#a}get fetchMethod(){return this.#r}get dispose(){return this.#s}get disposeAfter(){return this.#i}constructor(e){const{max:t=0,ttl:n,ttlResolution:s=1,ttlAutopurge:i,updateAgeOnGet:r,updateAgeOnHas:a,allowStale:o,dispose:c,disposeAfter:l,noDisposeOnSet:u,noUpdateTTL:d,maxSize:p=0,maxEntrySize:h=0,sizeCalculation:f,fetchMethod:m,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:_,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:E,ignoreFetchAbort:b}=e;if(0!==t&&!gL(t))throw new TypeError("max option must be a nonnegative integer");const v=t?_L(t):Array;if(!v)throw new Error("invalid max value: "+t);if(this.#t=t,this.#n=p,this.maxEntrySize=h||this.#n,this.sizeCalculation=f,this.sizeCalculation){if(!this.#n&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==m&&"function"!=typeof m)throw new TypeError("fetchMethod must be a function if specified");if(this.#r=m,this.#v=!!m,this.#c=new Map,this.#l=new Array(t).fill(void 0),this.#u=new Array(t).fill(void 0),this.#d=new v(t),this.#p=new v(t),this.#h=0,this.#f=0,this.#m=EL.create(t),this.#a=0,this.#o=0,"function"==typeof c&&(this.#s=c),"function"==typeof l?(this.#i=l,this.#g=[]):(this.#i=void 0,this.#g=void 0),this.#b=!!this.#s,this.#T=!!this.#i,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!y,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!b,0!==this.maxEntrySize){if(0!==this.#n&&!gL(this.#n))throw new TypeError("maxSize must be a positive integer if specified");if(!gL(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#N()}if(this.allowStale=!!o,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!r,this.updateAgeOnHas=!!a,this.ttlResolution=gL(s)||0===s?s:1,this.ttlAutopurge=!!i,this.ttl=n||0,this.ttl){if(!gL(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#I()}if(0===this.#t&&0===this.ttl&&0===this.#n)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#n){const e="LRU_CACHE_UNBOUNDED";if((e=>!dL.has(e))(e)){dL.add(e);hL("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,bL)}}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#I(){const e=new yL(this.#t),t=new yL(this.#t);this.#E=e,this.#y=t,this.#R=(n,s,i=uL.now())=>{if(t[n]=0!==s?i:0,e[n]=s,0!==s&&this.ttlAutopurge){const e=setTimeout((()=>{this.#C(n)&&this.delete(this.#l[n])}),s+1);e.unref&&e.unref()}},this.#D=n=>{t[n]=0!==e[n]?uL.now():0},this.#O=(i,r)=>{if(e[r]){const a=e[r],o=t[r];if(!a||!o)return;i.ttl=a,i.start=o,i.now=n||s();const c=i.now-o;i.remainingTTL=a-c}};let n=0;const s=()=>{const e=uL.now();if(this.ttlResolution>0){n=e;const t=setTimeout((()=>n=0),this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=i=>{const r=this.#c.get(i);if(void 0===r)return 0;const a=e[r],o=t[r];if(!a||!o)return 1/0;return a-((n||s())-o)},this.#C=i=>{const r=t[i],a=e[i];return!!a&&!!r&&(n||s())-r>a}}#D=()=>{};#O=()=>{};#R=()=>{};#C=()=>!1;#N(){const e=new yL(this.#t);this.#o=0,this.#_=e,this.#L=t=>{this.#o-=e[t],e[t]=0},this.#F=(e,t,n,s)=>{if(this.#A(t))return 0;if(!gL(n)){if(!s)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof s)throw new TypeError("sizeCalculation must be a function");if(n=s(t,e),!gL(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return n},this.#M=(t,n,s)=>{if(e[t]=n,this.#n){const n=this.#n-e[t];for(;this.#o>n;)this.#P(!0)}this.#o+=e[t],s&&(s.entrySize=n,s.totalCalculatedSize=this.#o)}}#L=e=>{};#M=(e,t,n)=>{};#F=(e,t,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#f;this.#B(t)&&(!e&&this.#C(t)||(yield t),t!==this.#h);)t=this.#p[t]}*#k({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#h;this.#B(t)&&(!e&&this.#C(t)||(yield t),t!==this.#f);)t=this.#d[t]}#B(e){return void 0!==e&&this.#c.get(this.#l[e])===e}*entries(){for(const e of this.#x())void 0===this.#u[e]||void 0===this.#l[e]||this.#A(this.#u[e])||(yield[this.#l[e],this.#u[e]])}*rentries(){for(const e of this.#k())void 0===this.#u[e]||void 0===this.#l[e]||this.#A(this.#u[e])||(yield[this.#l[e],this.#u[e]])}*keys(){for(const e of this.#x()){const t=this.#l[e];void 0===t||this.#A(this.#u[e])||(yield t)}}*rkeys(){for(const e of this.#k()){const t=this.#l[e];void 0===t||this.#A(this.#u[e])||(yield t)}}*values(){for(const e of this.#x()){void 0===this.#u[e]||this.#A(this.#u[e])||(yield this.#u[e])}}*rvalues(){for(const e of this.#k()){void 0===this.#u[e]||this.#A(this.#u[e])||(yield this.#u[e])}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const n of this.#x()){const s=this.#u[n],i=this.#A(s)?s.__staleWhileFetching:s;if(void 0!==i&&e(i,this.#l[n],this))return this.get(this.#l[n],t)}}forEach(e,t=this){for(const n of this.#x()){const s=this.#u[n],i=this.#A(s)?s.__staleWhileFetching:s;void 0!==i&&e.call(t,i,this.#l[n],this)}}rforEach(e,t=this){for(const n of this.#k()){const s=this.#u[n],i=this.#A(s)?s.__staleWhileFetching:s;void 0!==i&&e.call(t,i,this.#l[n],this)}}purgeStale(){let e=!1;for(const t of this.#k({allowStale:!0}))this.#C(t)&&(this.delete(this.#l[t]),e=!0);return e}info(e){const t=this.#c.get(e);if(void 0===t)return;const n=this.#u[t],s=this.#A(n)?n.__staleWhileFetching:n;if(void 0===s)return;const i={value:s};if(this.#E&&this.#y){const e=this.#E[t],n=this.#y[t];if(e&&n){const t=e-(uL.now()-n);i.ttl=t,i.start=Date.now()}}return this.#_&&(i.size=this.#_[t]),i}dump(){const e=[];for(const t of this.#x({allowStale:!0})){const n=this.#l[t],s=this.#u[t],i=this.#A(s)?s.__staleWhileFetching:s;if(void 0===i||void 0===n)continue;const r={value:i};if(this.#E&&this.#y){r.ttl=this.#E[t];const e=uL.now()-this.#y[t];r.start=Math.floor(Date.now()-e)}this.#_&&(r.size=this.#_[t]),e.unshift([n,r])}return e}load(e){this.clear();for(const[t,n]of e){if(n.start){const e=Date.now()-n.start;n.start=uL.now()-e}this.set(t,n.value,n)}}set(e,t,n={}){if(void 0===t)return this.delete(e),this;const{ttl:s=this.ttl,start:i,noDisposeOnSet:r=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:o}=n;let{noUpdateTTL:c=this.noUpdateTTL}=n;const l=this.#F(e,t,n.size||0,a);if(this.maxEntrySize&&l>this.maxEntrySize)return o&&(o.set="miss",o.maxEntrySizeExceeded=!0),this.delete(e),this;let u=0===this.#a?void 0:this.#c.get(e);if(void 0===u)u=0===this.#a?this.#f:0!==this.#m.length?this.#m.pop():this.#a===this.#t?this.#P(!1):this.#a,this.#l[u]=e,this.#u[u]=t,this.#c.set(e,u),this.#d[this.#f]=u,this.#p[u]=this.#f,this.#f=u,this.#a++,this.#M(u,l,o),o&&(o.set="add"),c=!1;else{this.#w(u);const n=this.#u[u];if(t!==n){if(this.#v&&this.#A(n)){n.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=n;void 0===t||r||(this.#b&&this.#s?.(t,e,"set"),this.#T&&this.#g?.push([t,e,"set"]))}else r||(this.#b&&this.#s?.(n,e,"set"),this.#T&&this.#g?.push([n,e,"set"]));if(this.#L(u),this.#M(u,l,o),this.#u[u]=t,o){o.set="replace";const e=n&&this.#A(n)?n.__staleWhileFetching:n;void 0!==e&&(o.oldValue=e)}}else o&&(o.set="update")}if(0===s||this.#E||this.#I(),this.#E&&(c||this.#R(u,s,i),o&&this.#O(o,u)),!r&&this.#T&&this.#g){const e=this.#g;let t;for(;t=e?.shift();)this.#i?.(...t)}return this}pop(){try{for(;this.#a;){const e=this.#u[this.#h];if(this.#P(!0),this.#A(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#T&&this.#g){const e=this.#g;let t;for(;t=e?.shift();)this.#i?.(...t)}}}#P(e){const t=this.#h,n=this.#l[t],s=this.#u[t];return this.#v&&this.#A(s)?s.__abortController.abort(new Error("evicted")):(this.#b||this.#T)&&(this.#b&&this.#s?.(s,n,"evict"),this.#T&&this.#g?.push([s,n,"evict"])),this.#L(t),e&&(this.#l[t]=void 0,this.#u[t]=void 0,this.#m.push(t)),1===this.#a?(this.#h=this.#f=0,this.#m.length=0):this.#h=this.#d[t],this.#c.delete(n),this.#a--,t}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=t,i=this.#c.get(e);if(void 0!==i){const e=this.#u[i];if(this.#A(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#C(i))return n&&this.#D(i),s&&(s.has="hit",this.#O(s,i)),!0;s&&(s.has="stale",this.#O(s,i))}else s&&(s.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,s=this.#c.get(e);if(void 0===s||!n&&this.#C(s))return;const i=this.#u[s];return this.#A(i)?i.__staleWhileFetching:i}#S(e,t,n,s){const i=void 0===t?void 0:this.#u[t];if(this.#A(i))return i;const r=new fL,{signal:a}=n;a?.addEventListener("abort",(()=>r.abort(a.reason)),{signal:r.signal});const o={signal:r.signal,options:n,context:s},c=(s,i=!1)=>{const{aborted:a}=r.signal,c=n.ignoreFetchAbort&&void 0!==s;if(n.status&&(a&&!i?(n.status.fetchAborted=!0,n.status.fetchError=r.signal.reason,c&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),a&&!c&&!i)return l(r.signal.reason);const d=u;return this.#u[t]===u&&(void 0===s?d.__staleWhileFetching?this.#u[t]=d.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,s,o.options))),s},l=s=>{const{aborted:i}=r.signal,a=i&&n.allowStaleOnFetchAbort,o=a||n.allowStaleOnFetchRejection,c=o||n.noDeleteOnFetchRejection,l=u;if(this.#u[t]===u){!c||void 0===l.__staleWhileFetching?this.delete(e):a||(this.#u[t]=l.__staleWhileFetching)}if(o)return n.status&&void 0!==l.__staleWhileFetching&&(n.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw s};n.status&&(n.status.fetchDispatched=!0);const u=new Promise(((t,s)=>{const a=this.#r?.(e,i,o);a&&a instanceof Promise&&a.then((e=>t(void 0===e?void 0:e)),s),r.signal.addEventListener("abort",(()=>{n.ignoreFetchAbort&&!n.allowStaleOnFetchAbort||(t(void 0),n.allowStaleOnFetchAbort&&(t=e=>c(e,!0)))}))})).then(c,(e=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=e),l(e)))),d=Object.assign(u,{__abortController:r,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,d,{...o.options,status:void 0}),t=this.#c.get(e)):this.#u[t]=d,d}#A(e){if(!this.#v)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof fL}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:o=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:h=this.allowStaleOnFetchAbort,context:f,forceRefresh:m=!1,status:g,signal:_}=t;if(!this.#v)return g&&(g.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:i,status:g});const y={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:i,ttl:r,noDisposeOnSet:a,size:o,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:h,ignoreFetchAbort:p,status:g,signal:_};let E=this.#c.get(e);if(void 0===E){g&&(g.fetch="miss");const t=this.#S(e,E,y,f);return t.__returned=t}{const t=this.#u[E];if(this.#A(t)){const e=n&&void 0!==t.__staleWhileFetching;return g&&(g.fetch="inflight",e&&(g.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const i=this.#C(E);if(!m&&!i)return g&&(g.fetch="hit"),this.#w(E),s&&this.#D(E),g&&this.#O(g,E),t;const r=this.#S(e,E,y,f),a=void 0!==r.__staleWhileFetching&&n;return g&&(g.fetch=i?"stale":"refresh",a&&i&&(g.returnedStale=!0)),a?r.__staleWhileFetching:r.__returned=r}}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:r}=t,a=this.#c.get(e);if(void 0!==a){const t=this.#u[a],o=this.#A(t);return r&&this.#O(r,a),this.#C(a)?(r&&(r.get="stale"),o?(r&&n&&void 0!==t.__staleWhileFetching&&(r.returnedStale=!0),n?t.__staleWhileFetching:void 0):(i||this.delete(e),r&&n&&(r.returnedStale=!0),n?t:void 0)):(r&&(r.get="hit"),o?t.__staleWhileFetching:(this.#w(a),s&&this.#D(a),t))}r&&(r.get="miss")}#U(e,t){this.#p[t]=e,this.#d[e]=t}#w(e){e!==this.#f&&(e===this.#h?this.#h=this.#d[e]:this.#U(this.#p[e],this.#d[e]),this.#U(this.#f,e),this.#f=e)}delete(e){let t=!1;if(0!==this.#a){const n=this.#c.get(e);if(void 0!==n)if(t=!0,1===this.#a)this.clear();else{this.#L(n);const t=this.#u[n];if(this.#A(t)?t.__abortController.abort(new Error("deleted")):(this.#b||this.#T)&&(this.#b&&this.#s?.(t,e,"delete"),this.#T&&this.#g?.push([t,e,"delete"])),this.#c.delete(e),this.#l[n]=void 0,this.#u[n]=void 0,n===this.#f)this.#f=this.#p[n];else if(n===this.#h)this.#h=this.#d[n];else{const e=this.#p[n];this.#d[e]=this.#d[n];const t=this.#d[n];this.#p[t]=this.#p[n]}this.#a--,this.#m.push(n)}}if(this.#T&&this.#g?.length){const e=this.#g;let t;for(;t=e?.shift();)this.#i?.(...t)}return t}clear(){for(const e of this.#k({allowStale:!0})){const t=this.#u[e];if(this.#A(t))t.__abortController.abort(new Error("deleted"));else{const n=this.#l[e];this.#b&&this.#s?.(t,n,"delete"),this.#T&&this.#g?.push([t,n,"delete"])}}if(this.#c.clear(),this.#u.fill(void 0),this.#l.fill(void 0),this.#E&&this.#y&&(this.#E.fill(0),this.#y.fill(0)),this.#_&&this.#_.fill(0),this.#h=0,this.#f=0,this.#m.length=0,this.#o=0,this.#a=0,this.#T&&this.#g){const e=this.#g;let t;for(;t=e?.shift();)this.#i?.(...t)}}}var vL=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),TL=_(w),AL=_(x),SL=new TextEncoder,wL=new TextDecoder,xL=e=>(e=>SL.encode(e))(JSON.stringify(e)),kL=e=>{const t=(e=>wL.decode(e))(e);return n=t,String(n).includes("__proto__")?JSON.parse(n,lL):JSON.parse(n);var n},CL=(e,t)=>`${t}:${e}`,NL=class{store;constructor(e){this.store="maxKeys"in e?new bL({max:e.maxKeys}):new Map}async get(e){const t=this.store.get(e);if(void 0!==t)return kL(t)}async set(e,t){const n=xL(t);this.store.set(e,n)}async delete(e){this.store.delete(e)}async has(e){return this.store.has(e)}async increment(e,t=1){const n=await this.get(e)??0;if("number"!=typeof n)throw new Error(`The value for key "${e}" is not a number.`);const s=n+t;return await this.set(e,s),s}async setMax(e,t){const n=await this.get(e)??0;if("number"!=typeof n)throw new Error(`The value for key "${e}" is not a number.`);return!(n>t)&&(await this.set(e,t),!0)}async clear(){this.store.clear()}},IL=class{redis;namespace;compression;compressionMinSize;constructor(e){"setMax"in e.redis==!1&&e.redis.defineCommand("setMax",{numberOfKeys:1,lua:"\n  local key = KEYS[1]\n  local value = tonumber(ARGV[1])\n\n  if redis.call(\"EXISTS\", key) == 1 then\n    local oldValue = tonumber(redis.call('GET', key))\n\n    if value <= oldValue then\n      return false\n    end\n  end\n\n  redis.call('SET', key, value)\n\n  return true\n"}),this.redis=e.redis,this.namespace=e.namespace,this.compression=e.compression??!0,this.compressionMinSize=e.compressionMinSize??1e3}async get(e){const t=await this.redis.getBuffer(CL(e,this.namespace));if(null===t)return;let n=vL(t);return!0===this.compression&&(e=>!(e.byteLength<19)&&31===e[0]&&139===e[1]&&8===e[2])(n)&&(n=await(async e=>{const t=await AL(e);return vL(t)})(n)),kL(n)}async set(e,t){if("number"==typeof t)await this.redis.set(CL(e,this.namespace),t);else{let n=xL(t);!0===this.compression&&n.byteLength>=this.compressionMinSize&&(n=await(async e=>{const t=await TL(e);return vL(t)})(n)),await this.redis.set(CL(e,this.namespace),(e=>O.from(e))(n))}}async delete(e){await this.redis.unlink(CL(e,this.namespace))}async has(e){return 0!==await this.redis.exists(CL(e,this.namespace))}async increment(e,t=1){return await this.redis.incrby(CL(e,this.namespace),t)}async setMax(e,t){return 0!==await this.redis.setMax(CL(e,this.namespace),t)}async clear(){const e=this.redis.scanStream({match:CL("*",this.namespace)}),t=this.redis.pipeline();for await(const n of e)t.unlink(n);await t.exec()}};const RL=process.env,DL=RL.PUBLIC_URL||"";class OL{constructor(e,t){this.duration=t,this.redis=new mD(e)}del(...e){return this.redis.del(e)}get(e){return this.redis.get(e)}set(e,t){return this.redis.set(e,t,"EX",this.duration)}}class LL{constructor(e){this.duration=e,this.cache=(e=>{if("local"===e.type)return new NL(e);if("redis"===e.type)return new IL(e);throw new Error("Invalid KV configuration: Type does not exist.")})({type:"local"})}async del(...e){let t=0;for(let n of e)await this.cache.delete(n),t++;return t}async get(e){const t=await this.cache.get(e);if(!t)return null;const{value:n,expiration:s}=t;return Date.now()>s?(await this.cache.delete(e),null):n}async set(e,t){const n={value:t,expiration:Date.now()+1e3*this.duration};return await this.cache.set(e,n),"OK"}}const FL=class{constructor(e,t){const n=t||300;this.kvImplementation=e?new OL(e,n):new LL(n)}async setCodeChallenge(e,t){JSON.stringify(t,null,2),await this.kvImplementation.set(FL.prefix_code_challenge+e,JSON.stringify(t))}async getCodeChallenge(e){let t=await this.kvImplementation.get(FL.prefix_code_challenge+e);if(t){let e=JSON.parse(t);return JSON.stringify(e,null,2),e}return null}async setStateInformation(e,t){JSON.stringify(t,null,2),await this.kvImplementation.set(FL.prefix_save_session+e,JSON.stringify(t))}async getStateInformation(e){let t=await this.kvImplementation.get(FL.prefix_save_session+e);if(t){let e=JSON.parse(t);return JSON.stringify(e,null,2),e}return null}async clearStateInformation(e){await this.kvImplementation.del(FL.prefix_save_session+e)}async clearAssociatedCodeChallengeFromCode(e){await this.kvImplementation.del(FL.prefix_code_challenge+e)}};let ML=FL;ML.prefix_code_challenge="pkce_code_challenge_",ML.prefix_save_session="pkce_save_session_";class PL{}PL.METHOD_S256="S256",PL.METHOD_plain="plain";const BL="proof-key-code-exchange";async function UL(e,t,n){const s=e.toString(),i=function(e){let t=null==RL?void 0:RL[function(e){return`AUTH_${e.toUpperCase()}_REDIRECT_ALLOW_LIST`}(e)],n=[];return t&&(n="string"==typeof t?null==t?void 0:t.split(","):t),n}(t);return!!s.startsWith(DL)||_D.isRedirectUrlAllowedForWhitelistEntriesWithSimpleWildcards(i,e)}function HL(e){return function(){const e=null==RL?void 0:RL.AUTH_PROVIDERS;let t=[];return Array.isArray(e)?t=e:e&&(t=null==e?void 0:e.split(",")),t}().includes(e)}var jL={id:BL,handler:(e,t)=>{const{services:n,database:s,getSchema:i,env:r,logger:a}=t,o=null==r?void 0:r.REDIS;let c=null;if(!o||0===o.length)return;c=o;const l=new ML(c,300);e.post("/authorize",(async(e,t)=>{const{provider:n,code_challenge:s,redirect_url:i,code_challenge_method:r}=e.body;e.body;const a=s;if(!a)return t.status(400).json({error:"Missing required parameters code_challenge."});let o=r||PL.METHOD_plain;if(o!==PL.METHOD_S256&&o!==PL.METHOD_plain)return t.status(400).json({error:`Code challenge method provided ${o} method has to be either "${PL.METHOD_S256}" or "${PL.METHOD_plain}"`});if(!n)return t.status(400).json({error:"Missing required parameter provider. Has to be an auth provider configured in directus."});if(!HL(n))return t.status(400).json({error:`Provider ${n} not listed in AUTH_PROVIDERS`});if(!i)return t.status(400).json({error:"Missing required parameter redirect_url"});let c=_D.getUrlFromString(i);if(!c)return t.status(400).json({error:`Parameter redirect_url is not a well formed url: ${i}`});if(!UL(c,n))return t.status(400).json({error:`Redirect url ${i} is not included in the redirect allow list for the provider ${n}`});const u=function(e){const t=e||32;return C.randomBytes(t).toString("hex")}();await l.setCodeChallenge(u,{code_challenge:a,code_challenge_method:o,directus_refresh_token:null});const d=C.randomBytes(32).toString("hex");await l.setStateInformation(d,{authorization_code:u,redirect_url:c.toString()});const p=`${DL}/${BL}/save-session?state=${d}`,h=`${DL}/auth/login/${n}?redirect=${p}`;return t.json({urlToProviderLogin:h})})),e.get("/save-session",(async(e,t)=>{var n;e.cookies;const{state:i}=e.query;if(!i)return t.status(400).json({error:"Missing required parameter state."});const r=i.toString(),a=e.cookies.directus_session_token;if(!a)return t.status(400).json({error:"Missing directus_session_token in cookies."});let o=await l.getStateInformation(r);if(!o)return t.status(400).json({error:"No information found for state. Might be too long"});const c=o.redirect_url,u=o.authorization_code;if(!u||!c)return t.status(400).json({error:"No information found for state. Might be too long / outdated"});await l.clearStateInformation(r);const d=await l.getCodeChallenge(u);if(!d||!d.code_challenge_method||!d.code_challenge)return t.status(400).json({error:"No information found for saved authorization code. Might be too long"});const p=null==e?void 0:e.accountability,h=null==(n=null==e?void 0:e.accountability)?void 0:n.user;if(!p||!h)return t.status(400).json({error:"No accountability or userId found."});let f=await async function(e,t,n,s){if(!n)throw new Error("No user Id given");const i=s,{nanoid:r}=await Promise.resolve().then((function(){return U})),a=r(64),o=zC(String(RL.REFRESH_TOKEN_TTL))||0,c=new Date(Date.now()+o);return await i("directus_sessions").insert({token:a,user:n,expires:c,ip:null==t?void 0:t.ip,user_agent:null==t?void 0:t.userAgent,origin:null==t?void 0:t.origin}),await i("directus_sessions").delete().where("expires","<",new Date),a}(0,p,h,s);await l.setCodeChallenge(o.authorization_code,{code_challenge:null==d?void 0:d.code_challenge,code_challenge_method:null==d?void 0:d.code_challenge_method,directus_refresh_token:f});const m=c+"?code="+u;return t.redirect(m)})),e.post("/token",(async(e,t)=>{const{code:n,code_verifier:s}=e.body,i=s;if(!i)return t.status(400).json({error:"Missing required parameter: code_verifier."});const r=n,a=await l.getCodeChallenge(r);if(!a)return t.status(400).json({error:"Invalid or expired state."});try{let e=C.createHash("sha256").update(i).digest("base64url");if(a.code_challenge_method===PL.METHOD_plain&&(e=i),!C.timingSafeEqual(Buffer.from(e),Buffer.from(a.code_challenge)))return t.status(400).json({error:"Invalid code verifier."});const n=a.directus_refresh_token;return await l.clearAssociatedCodeChallengeFromCode(r),t.json({message:"Validation successful",directus_refresh_token:n})}catch(e){return t.status(500).json({error:"Internal server error.",message:e.toString()})}}))}};class GL{static getAdminAccountability(e){const t=JSON.parse(JSON.stringify(e));return t.admin=!0,t}}class $L{static async deleteAvatarOfUser(e,t,n,s,i){const r=await $L.getAdminFileServiceInstance(n,s,e);if(!i)throw new Error("deleteAvatarOfUser: No userId provided: ");const a=await t("directus_users").where({id:i}).first();if(!a)throw new Error("deleteAvatarOfUser: No user found with id: "+i);const o=a.avatar;o&&await r.deleteOne(o)}static async getAdminFileServiceInstance(e,t,n){const{FilesService:s}=n;return new s({schema:e,accountability:GL.getAdminAccountability(t)})}}var qL=async({filter:e},t)=>{if(!await yo.checkAllTablesExistWithApiContext("users_avatar_delete",t))return;const{services:n,database:s,getSchema:i,env:r,logger:a}=t;e(F_.USERS_DELETE_EVENT,(async(e,t,{database:s,schema:i,accountability:r})=>{const a=e;for(const e of a)await $L.deleteAvatarOfUser(n,s,i,r,e);return e}))};var zL=async({action:e,filter:t},n)=>{t(F_.USERS_CREATE_EVENT,(async(e,t,n)=>{const s=e;return function(e){const t=e.provider;if(t)return!(""===t||"default"===t);return!1}(s)&&(s.first_name=null,s.last_name=null,s.email=null),e=s}))};class WL{constructor(e,t,n){this.myDatabaseHelper=t,this.workflowRun=e,this.logger=n}async parse(){await this.logger.appendLog("Starting");try{await this.logger.appendLog("Loading all canteens");let e=await this.getAllCanteens();for(let t of e)await this.calcForecastForCanteen(t);return await this.logger.appendLog("Finished"),this.logger.getFinalLogWithStateAndParams({state:zo.SUCCESS})}catch(e){return await this.logger.appendLog("Error: "+e.toString()),this.logger.getFinalLogWithStateAndParams({state:zo.FAILED})}}async calcForecastForCanteen(e){await this.logger.appendLog("Calculating forecast for canteen - label: "+(null==e?void 0:e.alias));let t=await this.findOrCreateOrUpdateUtilizationGroupForCanteen(e);if(t){let n=await this.getAllCashregistersForCanteen(e),s=15,i=8,r=[],a=new Date;a.setDate(a.getDate()-1);for(let e=0;e<i;e++)r.push(new Date(a)),a.setDate(a.getDate()+1);for(let i of r)await this.logger.appendLog("- Calculating forecast for date: "+i.toISOString()),await this.updateUtilizationEntryForCanteenAtDate(e,t,n,i,s)}else console.log("Houston we got a problem at calcForecastForCanteen")}async createUtilizationEntry(e,t,n){let s=this.myDatabaseHelper.getUtilizationEntriesHelper();await s.createOne({utilization_group:null==e?void 0:e.id,date_start:Po.formatDateToIso8601WithoutTimezone(t),date_end:Po.formatDateToIso8601WithoutTimezone(n)})}async getUtilizationEntry(e,t,n){let s=this.myDatabaseHelper.getUtilizationEntriesHelper();return(await s.readByQuery({filter:{_and:[{utilization_group:{_eq:null==e?void 0:e.id}},{date_start:{_eq:Po.formatDateToIso8601WithoutTimezone(t)}},{date_end:{_eq:Po.formatDateToIso8601WithoutTimezone(n)}}]},fields:["*"],limit:-1}))[0]}async countCashRegistersTransactionsForInterval(e,t,n){let s=0,i=this.myDatabaseHelper.getCashregisterHelper();for(let r of e){s+=(await i.getTransactionIdsForCashregister(r.id,t,n,6e4)).length}return s}async updateUtilizationEntryForCanteenAtDate(e,t,n,s,i){let r=new Date,a=await this.getInterval(i,s);for(let s of a){let i=s.date_start,a=s.date_end,o=await this.getUtilizationEntry(t,i,a);if(o||(await this.createUtilizationEntry(t,i,a),o=await this.getUtilizationEntry(t,i,a)),o){let s=!1;if(i<r&&a<r&&(s=!0),s||(o.value_forecast_current=await this.predictUtilizationForInterval(t,n,e,i,a)),s){let e=await this.countCashRegistersTransactionsForInterval(n,i,a);if(o.value_real=e,!t.all_time_high||e>t.all_time_high&&0!==e){t.all_time_high=e;let n=this.myDatabaseHelper.getUtilizationGroupsHelper();await n.updateOne(t.id,{all_time_high:e})}}let c=this.myDatabaseHelper.getUtilizationEntriesHelper();await c.updateOne(o.id,o)}else console.log("Houston we got a problem")}}async predictUtilizationForInterval(e,t,n,s,i){let r=new Date(s);r.setDate(s.getDate()-7);let a=new Date(i);a.setDate(i.getDate()-7);let o=await this.getUtilizationEntry(e,r,a),c=null==o?void 0:o.value_forecast_current;return(null==o?void 0:o.value_real)||c}async getInterval(e,t){let n=[],s=new Date(t);s.setHours(0,0,0,0);for(let t=0;t<1440;t+=e){let i=new Date(s);i.setMinutes(t);let r=new Date(i);r.setMinutes(i.getMinutes()+e),n.push({date_start:i,date_end:r})}return n}async getAllCanteens(){let e=this.myDatabaseHelper.getCanteensHelper();return await e.readByQuery({limit:-1})}async getAllCashregistersForCanteen(e){return await this.myDatabaseHelper.getCashregisterHelper().getCashregistersForCanteen(e.id)}async findOrCreateOrUpdateUtilizationGroupForCanteen(e){const t=this.myDatabaseHelper.getCanteensHelper();let n=null==e?void 0:e.utilization_group,s=this.myDatabaseHelper.getUtilizationGroupsHelper(),i=null;if(n&&"string"==typeof n)i=await s.readOne(n);else{let n={},r=await s.createOne(n);i=await s.readOne(r),e.utilization_group=null==i?void 0:i.id,await t.updateOne(e.id,{utilization_group:null==i?void 0:i.id})}return i?(await s.updateOne(i.id,{alias:null==e?void 0:e.alias}),i=await s.readOne(i.id)):console.log("Error at findOrCreateOrUpdateUtilizationGroupForCanteen"),i}}class YL extends q_{getWorkflowId(){return"utilization-canteen-calculation"}async runJob(e,t,n){await n.appendLog("Starting utilization canteen calculation");try{const s=new WL(e,t,n);return await s.parse()}catch(e){return await n.appendLog("Error: "+e.toString()),n.getFinalLogWithStateAndParams({state:zo.FAILED})}}}const VL=[{name:"activity-auto-cleanup-schedule",config:wo},{name:"admin-password-setup-from-env-hook",config:Jo},{name:"app-feedbacks-hook",config:mh},{name:"auto-translation-hook",config:U_},{name:"cashregister-hook",config:sy},{name:"collections-last-update-hook",config:iy},{name:"directus-file-owner-update-on-user-delete-hook",config:ry},{name:"food-feedback-rating-calculate-hook",config:cy},{name:"food-feedback-report-schedule",config:ky},{name:"food-notify-schedule-hook",config:Iy},{name:"food-sync-hook",config:rE},{name:"forms-sync-hook",config:YE},{name:"housing-sync-hook",config:EC},{name:"washingmachines-sync-hook",config:wC},{name:"mails-hook",config:xC},{name:"news-sync-hook",config:LC},{name:"profile-create-hook",config:FC},{name:"push-notification-hook",config:MC},{name:"users-avatar-delete-hook",config:qL},{name:"users-sso-hide-identity-hook",config:zL},{name:"utilization-canteen-hook",config:async({init:e,action:t,schedule:n},s)=>{let i=new Xo(s);W_.registerScheduleToRunWorkflowRuns({workflowRunInterface:new YL,myDatabaseHelper:i,schedule:n,cronOject:W_.EVERY_15_MINUTES})}},{name:"workflows-runs-sync-hook",config:ty}],KL=[{name:"redirect-with-token-endpoint",config:QC},{name:"proof-key-code-exchange-endpoint",config:jL}],QL=[];export{KL as endpoints,VL as hooks,QL as operations};
