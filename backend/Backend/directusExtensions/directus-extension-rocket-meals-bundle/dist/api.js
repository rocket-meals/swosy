import{webcrypto as e}from"node:crypto";import t from"events";import n from"assert";import s,{TextEncoder as i}from"util";import a from"url";import r from"tty";import o from"os";import c,{Readable as l}from"stream";import u from"crypto";import p from"dns";import d from"net";import h from"tls";import f from"buffer";import m from"string_decoder";import g from"path";import y from"http";import _ from"https";import E from"fs";import b from"zlib";import T from"timers";const v="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",x=128;let S,A;var w=Object.freeze({__proto__:null,nanoid:function(t=21){var n;n=t-=0,!S||S.length<n?(S=Buffer.allocUnsafe(n*x),e.getRandomValues(S),A=0):A+n>S.length&&(e.getRandomValues(S),A=0),A+=n;let s="";for(let e=A-t;e<A;e++)s+=v[63&S[e]];return s},urlAlphabet:v}),C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function N(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function I(e,t){return function(){return e.apply(t,arguments)}}const{toString:k}=Object.prototype,{getPrototypeOf:O}=Object,D=(R=Object.create(null),e=>{const t=k.call(e);return R[t]||(R[t]=t.slice(8,-1).toLowerCase())});var R;const L=e=>(e=e.toLowerCase(),t=>D(t)===e),P=e=>t=>typeof t===e,{isArray:M}=Array,F=P("undefined");const B=L("ArrayBuffer");const U=P("string"),H=P("function"),j=P("number"),G=e=>null!==e&&"object"==typeof e,q=e=>{if("object"!==D(e))return!1;const t=O(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Y=L("Date"),z=L("File"),V=L("Blob"),W=L("FileList"),Q=L("URLSearchParams");function K(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,i;if("object"!=typeof e&&(e=[e]),M(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let r;for(s=0;s<a;s++)r=i[s],t.call(null,e[r],r,e)}}function Z(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,i=n.length;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const $="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,X=e=>!F(e)&&e!==$;const J=(ee="undefined"!=typeof Uint8Array&&O(Uint8Array),e=>ee&&e instanceof ee);var ee;const te=L("HTMLFormElement"),ne=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),se=L("RegExp"),ie=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};K(n,((n,i)=>{let a;!1!==(a=t(n,i,e))&&(s[i]=a||n)})),Object.defineProperties(e,s)},ae="abcdefghijklmnopqrstuvwxyz",re="0123456789",oe={DIGIT:re,ALPHA:ae,ALPHA_DIGIT:ae+ae.toUpperCase()+re};const ce=L("AsyncFunction");var le={isArray:M,isArrayBuffer:B,isBuffer:function(e){return null!==e&&!F(e)&&null!==e.constructor&&!F(e.constructor)&&H(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||H(e.append)&&("formdata"===(t=D(e))||"object"===t&&H(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&B(e.buffer),t},isString:U,isNumber:j,isBoolean:e=>!0===e||!1===e,isObject:G,isPlainObject:q,isUndefined:F,isDate:Y,isFile:z,isBlob:V,isRegExp:se,isFunction:H,isStream:e=>G(e)&&H(e.pipe),isURLSearchParams:Q,isTypedArray:J,isFileList:W,forEach:K,merge:function e(){const{caseless:t}=X(this)&&this||{},n={},s=(s,i)=>{const a=t&&Z(n,i)||i;q(n[a])&&q(s)?n[a]=e(n[a],s):q(s)?n[a]=e({},s):M(s)?n[a]=s.slice():n[a]=s};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&K(arguments[e],s);return n},extend:(e,t,n,{allOwnKeys:s}={})=>(K(t,((t,s)=>{n&&H(t)?e[s]=I(t,n):e[s]=t}),{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let i,a,r;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)r=i[a],s&&!s(r,e,t)||o[r]||(t[r]=e[r],o[r]=!0);e=!1!==n&&O(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:D,kindOfTest:L,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(M(e))return e;let t=e.length;if(!j(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:te,hasOwnProperty:ne,hasOwnProp:ne,reduceDescriptors:ie,freezeMethods:e=>{ie(e,((t,n)=>{if(H(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];H(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach((e=>{n[e]=!0}))};return M(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Z,global:$,isContextDefined:X,ALPHABET:oe,generateString:(e=16,t=oe.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n},isSpecCompliantForm:function(e){return!!(e&&H(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(G(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const i=M(e)?[]:{};return K(e,((e,t)=>{const a=n(e,s+1);!F(a)&&(i[t]=a)})),t[s]=void 0,i}}return e};return n(e,0)},isAsyncFn:ce,isThenable:e=>e&&(G(e)||H(e))&&H(e.then)&&H(e.catch)};function ue(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i)}le.inherits(ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const pe=ue.prototype,de={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{de[e]={value:e}})),Object.defineProperties(ue,de),Object.defineProperty(pe,"isAxiosError",{value:!0}),ue.from=(e,t,n,s,i,a)=>{const r=Object.create(pe);return le.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),ue.call(r,e.message,t,n,s,i),r.cause=e,r.name=e.name,a&&Object.assign(r,a),r};var he=c.Stream,fe=me;function me(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}s.inherits(me,he),me.create=function(e,t){var n=new this;for(var s in t=t||{})n[s]=t[s];n.source=e;var i=e.emit;return e.emit=function(){return n._handleEmit(arguments),i.apply(e,arguments)},e.on("error",(function(){})),n.pauseStream&&e.pause(),n},Object.defineProperty(me.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),me.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},me.prototype.resume=function(){this._released||this.release(),this.source.resume()},me.prototype.pause=function(){this.source.pause()},me.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},me.prototype.pipe=function(){var e=he.prototype.pipe.apply(this,arguments);return this.resume(),e},me.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},me.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}};var ge=s,ye=c.Stream,_e=fe,Ee=be;function be(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}ge.inherits(be,ye),be.create=function(e){var t=new this;for(var n in e=e||{})t[n]=e[n];return t},be.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},be.prototype.append=function(e){if(be.isStreamLike(e)){if(!(e instanceof _e)){var t=_e.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},be.prototype.pipe=function(e,t){return ye.prototype.pipe.call(this,e,t),this.resume(),e},be.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},be.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){be.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},be.prototype._pipeNext=function(e){if(this._currentStream=e,be.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},be.prototype._handleErrors=function(e){var t=this;e.on("error",(function(e){t._emitError(e)}))},be.prototype.write=function(e){this.emit("data",e)},be.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},be.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},be.prototype.end=function(){this._reset(),this.emit("end")},be.prototype.destroy=function(){this._reset(),this.emit("close")},be.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},be.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},be.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(t){t.dataSize&&(e.dataSize+=t.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},be.prototype._emitError=function(e){this._reset(),this.emit("error",e)};var Te={},ve={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
!function(e){var t=ve,n=g.extname,s=/^\s*([^;\s]*)(?:;|\s|$)/,i=/^text\//i;function a(e){if(!e||"string"!=typeof e)return!1;var n=s.exec(e),a=n&&t[n[1].toLowerCase()];return a&&a.charset?a.charset:!(!n||!i.test(n[1]))&&"UTF-8"}e.charset=a,e.charsets={lookup:a},e.contentType=function(t){if(!t||"string"!=typeof t)return!1;var n=-1===t.indexOf("/")?e.lookup(t):t;if(!n)return!1;if(-1===n.indexOf("charset")){var s=e.charset(n);s&&(n+="; charset="+s.toLowerCase())}return n},e.extension=function(t){if(!t||"string"!=typeof t)return!1;var n=s.exec(t),i=n&&e.extensions[n[1].toLowerCase()];if(!i||!i.length)return!1;return i[0]},e.extensions=Object.create(null),e.lookup=function(t){if(!t||"string"!=typeof t)return!1;var s=n("x."+t).toLowerCase().substr(1);if(!s)return!1;return e.types[s]||!1},e.types=Object.create(null),function(e,n){var s=["nginx","apache",void 0,"iana"];Object.keys(t).forEach((function(i){var a=t[i],r=a.extensions;if(r&&r.length){e[i]=r;for(var o=0;o<r.length;o++){var c=r[o];if(n[c]){var l=s.indexOf(t[n[c]].source),u=s.indexOf(a.source);if("application/octet-stream"!==n[c]&&(l>u||l===u&&"application/"===n[c].substr(0,12)))continue}n[c]=i}}}))}(e.extensions,e.types)}(Te);var xe=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)},Se=function(e){var t=!1;return xe((function(){t=!0})),function(n,s){t?e(n,s):xe((function(){e(n,s)}))}};var Ae=function(e){Object.keys(e.jobs).forEach(we.bind(e)),e.jobs={}};function we(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}var Ce=Se,Ne=Ae,Ie=function(e,t,n,s){var i=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[i]=function(e,t,n,s){var i;i=2==e.length?e(n,Ce(s)):e(n,t,Ce(s));return i}(t,i,e[i],(function(e,t){i in n.jobs&&(delete n.jobs[i],e?Ne(n):n.results[i]=t,s(e,n.results))}))};var ke=function(e,t){var n=!Array.isArray(e),s={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};t&&s.keyedList.sort(n?t:function(n,s){return t(e[n],e[s])});return s};var Oe=Ae,De=Se,Re=function(e){if(!Object.keys(this.jobs).length)return;this.index=this.size,Oe(this),De(e)(null,this.results)};var Le=Ie,Pe=ke,Me=Re,Fe=function(e,t,n){var s=Pe(e);for(;s.index<(s.keyedList||e).length;)Le(e,t,s,(function(e,t){e?n(e,t):0!==Object.keys(s.jobs).length||n(null,s.results)})),s.index++;return Me.bind(s,n)};var Be={exports:{}},Ue=Ie,He=ke,je=Re;function Ge(e,t){return e<t?-1:e>t?1:0}Be.exports=function(e,t,n,s){var i=He(e,n);return Ue(e,t,i,(function n(a,r){a?s(a,r):(i.index++,i.index<(i.keyedList||e).length?Ue(e,t,i,n):s(null,i.results))})),je.bind(i,s)},Be.exports.ascending=Ge,Be.exports.descending=function(e,t){return-1*Ge(e,t)};var qe=Be.exports,Ye=qe;var ze={parallel:Fe,serial:function(e,t,n){return Ye(e,t,null,n)},serialOrdered:qe},Ve=Ee,We=s,Qe=g,Ke=y,Ze=_,$e=a.parse,Xe=E,Je=c.Stream,et=Te,tt=ze,nt=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e},st=it;function it(e){if(!(this instanceof it))return new it(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],Ve.call(this),e=e||{})this[t]=e[t]}We.inherits(it,Ve),it.LINE_BREAK="\r\n",it.DEFAULT_CONTENT_TYPE="application/octet-stream",it.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var s=Ve.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),We.isArray(t))this._error(new Error("Arrays are not supported."));else{var i=this._multiPartHeader(e,t,n),a=this._multiPartFooter();s(i),s(t),s(a),this._trackLength(i,t,n)}},it.prototype._trackLength=function(e,t,n){var s=0;null!=n.knownLength?s+=+n.knownLength:Buffer.isBuffer(t)?s=t.length:"string"==typeof t&&(s=Buffer.byteLength(t)),this._valueLength+=s,this._overheadLength+=Buffer.byteLength(e)+it.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof Je)&&(n.knownLength||this._valuesToMeasure.push(t))},it.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):Xe.stat(e.path,(function(n,s){var i;n?t(n):(i=s.size-(e.start?e.start:0),t(null,i))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},it.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var s,i=this._getContentDisposition(t,n),a=this._getContentType(t,n),r="",o={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(a||[])};for(var c in"object"==typeof n.header&&nt(o,n.header),o)o.hasOwnProperty(c)&&null!=(s=o[c])&&(Array.isArray(s)||(s=[s]),s.length&&(r+=c+": "+s.join("; ")+it.LINE_BREAK));return"--"+this.getBoundary()+it.LINE_BREAK+r+it.LINE_BREAK},it.prototype._getContentDisposition=function(e,t){var n,s;return"string"==typeof t.filepath?n=Qe.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=Qe.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=Qe.basename(e.client._httpMessage.path||"")),n&&(s='filename="'+n+'"'),s},it.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=et.lookup(e.name)),!n&&e.path&&(n=et.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=et.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=it.DEFAULT_CONTENT_TYPE),n},it.prototype._multiPartFooter=function(){return function(e){var t=it.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},it.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+it.LINE_BREAK},it.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},it.prototype.setBoundary=function(e){this._boundary=e},it.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},it.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,s=this._streams.length;n<s;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(it.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},it.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},it.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},it.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},it.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?tt.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,s){n?e(n):(s.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},it.prototype.submit=function(e,t){var n,s,i={method:"post"};return"string"==typeof e?(e=$e(e),s=nt({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(s=nt(e,i)).port||(s.port="https:"==s.protocol?443:80),s.headers=this.getHeaders(e.headers),n="https:"==s.protocol?Ze.request(s):Ke.request(s),this.getLength(function(e,s){if(e&&"Unknown stream"!==e)this._error(e);else if(s&&n.setHeader("Content-Length",s),this.pipe(n),t){var i,a=function(e,s){return n.removeListener("error",a),n.removeListener("response",i),t.call(this,e,s)};i=a.bind(this,null),n.on("error",a),n.on("response",i)}}.bind(this)),n},it.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},it.prototype.toString=function(){return"[object FormData]"};var at=N(st);function rt(e){return le.isPlainObject(e)||le.isArray(e)}function ot(e){return le.endsWith(e,"[]")?e.slice(0,-2):e}function ct(e,t,n){return e?e.concat(t).map((function(e,t){return e=ot(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const lt=le.toFlatObject(le,{},null,(function(e){return/^is[A-Z]/.test(e)}));function ut(e,t,n){if(!le.isObject(e))throw new TypeError("target must be an object");t=t||new(at||FormData);const s=(n=le.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!le.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,a=n.dots,r=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&le.isSpecCompliantForm(t);if(!le.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(le.isDate(e))return e.toISOString();if(!o&&le.isBlob(e))throw new ue("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(e)||le.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let o=e;if(e&&!i&&"object"==typeof e)if(le.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(le.isArray(e)&&function(e){return le.isArray(e)&&!e.some(rt)}(e)||(le.isFileList(e)||le.endsWith(n,"[]"))&&(o=le.toArray(e)))return n=ot(n),o.forEach((function(e,s){!le.isUndefined(e)&&null!==e&&t.append(!0===r?ct([n],s,a):null===r?n:n+"[]",c(e))})),!1;return!!rt(e)||(t.append(ct(i,n,a),c(e)),!1)}const u=[],p=Object.assign(lt,{defaultVisitor:l,convertValue:c,isVisitable:rt});if(!le.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!le.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+s.join("."));u.push(n),le.forEach(n,(function(n,a){!0===(!(le.isUndefined(n)||null===n)&&i.call(t,n,le.isString(a)?a.trim():a,s,p))&&e(n,s?s.concat(a):[a])})),u.pop()}}(e),t}function pt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function dt(e,t){this._pairs=[],e&&ut(e,this,t)}const ht=dt.prototype;function ft(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mt(e,t,n){if(!t)return e;const s=n&&n.encode||ft,i=n&&n.serialize;let a;if(a=i?i(t,n):le.isURLSearchParams(t)?t.toString():new dt(t,n).toString(s),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}ht.append=function(e,t){this._pairs.push([e,t])},ht.toString=function(e){const t=e?function(t){return e.call(this,t,pt)}:pt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};let gt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){le.forEach(this.handlers,(function(t){null!==t&&e(t)}))}};var yt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_t={isNode:!0,classes:{URLSearchParams:a.URLSearchParams,FormData:at,Blob:"undefined"!=typeof Blob&&Blob||null},protocols:["http","https","file","data"]};const Et="undefined"!=typeof window&&"undefined"!=typeof document,bt=(Tt="undefined"!=typeof navigator&&navigator.product,Et&&["ReactNative","NativeScript","NS"].indexOf(Tt)<0);var Tt;const vt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var xt={...Object.freeze({__proto__:null,hasBrowserEnv:Et,hasStandardBrowserEnv:bt,hasStandardBrowserWebWorkerEnv:vt}),..._t};function St(e){function t(e,n,s,i){let a=e[i++];if("__proto__"===a)return!0;const r=Number.isFinite(+a),o=i>=e.length;if(a=!a&&le.isArray(s)?s.length:a,o)return le.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!r;s[a]&&le.isObject(s[a])||(s[a]=[]);return t(e,n,s[a],i)&&le.isArray(s[a])&&(s[a]=function(e){const t={},n=Object.keys(e);let s;const i=n.length;let a;for(s=0;s<i;s++)a=n[s],t[a]=e[a];return t}(s[a])),!r}if(le.isFormData(e)&&le.isFunction(e.entries)){const n={};return le.forEachEntry(e,((e,s)=>{t(function(e){return le.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,n,0)})),n}return null}const At={transitional:yt,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=le.isObject(e);i&&le.isHTMLForm(e)&&(e=new FormData(e));if(le.isFormData(e))return s?JSON.stringify(St(e)):e;if(le.isArrayBuffer(e)||le.isBuffer(e)||le.isStream(e)||le.isFile(e)||le.isBlob(e))return e;if(le.isArrayBufferView(e))return e.buffer;if(le.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ut(e,new xt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return xt.isNode&&le.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=le.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ut(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),function(e,t,n){if(le.isString(e))try{return(t||JSON.parse)(e),le.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||At.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(e&&le.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw ue.from(e,ue.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xt.classes.FormData,Blob:xt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],(e=>{At.headers[e]={}}));const wt=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Ct=Symbol("internals");function Nt(e){return e&&String(e).trim().toLowerCase()}function It(e){return!1===e||null==e?e:le.isArray(e)?e.map(It):String(e)}function kt(e,t,n,s,i){return le.isFunction(s)?s.call(this,t,n):(i&&(t=n),le.isString(t)?le.isString(s)?-1!==t.indexOf(s):le.isRegExp(s)?s.test(t):void 0:void 0)}let Ot=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(e,t,n){const i=Nt(t);if(!i)throw new Error("header name must be a non-empty string");const a=le.findKey(s,i);(!a||void 0===s[a]||!0===n||void 0===n&&!1!==s[a])&&(s[a||t]=It(e))}const a=(e,t)=>le.forEach(e,((e,n)=>i(e,n,t)));return le.isPlainObject(e)||e instanceof this.constructor?a(e,t):le.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a((e=>{const t={};let n,s,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),s=e.substring(i+1).trim(),!n||t[n]&&wt[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=Nt(e)){const n=le.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(le.isFunction(t))return t.call(this,e,n);if(le.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Nt(e)){const n=le.findKey(this,e);return!(!n||void 0===this[n]||t&&!kt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function i(e){if(e=Nt(e)){const i=le.findKey(n,e);!i||t&&!kt(0,n[i],i,t)||(delete n[i],s=!0)}}return le.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];e&&!kt(0,this[i],i,e,!0)||(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return le.forEach(this,((s,i)=>{const a=le.findKey(n,i);if(a)return t[a]=It(s),void delete t[i];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();r!==i&&delete t[i],t[r]=It(s),n[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return le.forEach(this,((n,s)=>{null!=n&&!1!==n&&(t[s]=e&&le.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Ct]=this[Ct]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=Nt(e);t[s]||(!function(e,t){const n=le.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+n,{value:function(e,n,i){return this[s].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[s]=!0)}return le.isArray(e)?e.forEach(s):s(e),this}};function Dt(e,t){const n=this||At,s=t||n,i=Ot.from(s.headers);let a=s.data;return le.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Rt(e){return!(!e||!e.__CANCEL__)}function Lt(e,t,n){ue.call(this,null==e?"canceled":e,ue.ERR_CANCELED,t,n),this.name="CanceledError"}function Pt(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new ue("Request failed with status code "+n.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function Mt(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}Ot.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),le.reduceDescriptors(Ot.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),le.freezeMethods(Ot),le.inherits(Lt,ue,{__CANCEL__:!0});var Ft={},Bt=a.parse,Ut={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},Ht=String.prototype.endsWith||function(e){return e.length<=this.length&&-1!==this.indexOf(e,this.length-e.length)};function jt(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}var Gt,qt,Yt,zt,Vt,Wt=Ft.getProxyForUrl=function(e){var t="string"==typeof e?Bt(e):e||{},n=t.protocol,s=t.host,i=t.port;if("string"!=typeof s||!s||"string"!=typeof n)return"";if(n=n.split(":",1)[0],!function(e,t){var n=(jt("npm_config_no_proxy")||jt("no_proxy")).toLowerCase();if(!n)return!0;if("*"===n)return!1;return n.split(/[,\s]/).every((function(n){if(!n)return!0;var s=n.match(/^(.+):(\d+)$/),i=s?s[1]:n,a=s?parseInt(s[2]):0;return!(!a||a===t)||(/^[.*]/.test(i)?("*"===i.charAt(0)&&(i=i.slice(1)),!Ht.call(e,i)):e!==i)}))}(s=s.replace(/:\d*$/,""),i=parseInt(i)||Ut[n]||0))return"";var a=jt("npm_config_"+n+"_proxy")||jt(n+"_proxy")||jt("npm_config_proxy")||jt("all_proxy");return a&&-1===a.indexOf("://")&&(a=n+"://"+a),a},Qt={exports:{}},Kt={exports:{}},Zt={exports:{}};function $t(){if(qt)return Gt;qt=1;var e=1e3,t=60*e,n=60*t,s=24*n,i=7*s,a=365.25*s;function r(e,t,n,s){var i=t>=1.5*n;return Math.round(e/n)+" "+s+(i?"s":"")}return Gt=function(o,c){c=c||{};var l=typeof o;if("string"===l&&o.length>0)return function(r){if((r=String(r)).length>100)return;var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!o)return;var c=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*s;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(o);if("number"===l&&isFinite(o))return c.long?function(i){var a=Math.abs(i);if(a>=s)return r(i,a,s,"day");if(a>=n)return r(i,a,n,"hour");if(a>=t)return r(i,a,t,"minute");if(a>=e)return r(i,a,e,"second");return i+" ms"}(o):function(i){var a=Math.abs(i);if(a>=s)return Math.round(i/s)+"d";if(a>=n)return Math.round(i/n)+"h";if(a>=t)return Math.round(i/t)+"m";if(a>=e)return Math.round(i/e)+"s";return i+"ms"}(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))},Gt}function Xt(){if(zt)return Yt;return zt=1,Yt=function(e){function t(e){let s,i,a,r=null;function o(...e){if(!o.enabled)return;const n=o,i=Number(new Date),a=i-(s||i);n.diff=a,n.prev=s,n.curr=i,s=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let r=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((s,i)=>{if("%%"===s)return"%";r++;const a=t.formatters[i];if("function"==typeof a){const t=e[r];s=a.call(n,t),e.splice(r,1),r--}return s})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=n,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==r?r:(i!==t.namespaces&&(i=t.namespaces,a=t.enabled(e)),a),set:e=>{r=e}}),"function"==typeof t.init&&t.init(o),o}function n(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),i=s.length;for(n=0;n<i;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=$t(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},Yt}var Jt,en,tn,nn,sn,an={exports:{}};function rn(){return en?Jt:(en=1,Jt=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(n+e),i=t.indexOf("--");return-1!==s&&(-1===i||s<i)})}"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?Kt.exports=(Vt||(Vt=1,function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let s=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(i=s))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=Xt()(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(Zt,Zt.exports)),Zt.exports):Kt.exports=(sn||(sn=1,function(e,t){const n=r,i=s;t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let s=0;s<n.length;s++)e.inspectOpts[n[s]]=t.inspectOpts[n[s]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:s,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),a=`  ${i};1m${s} [0m`;n[0]=a+n[0].split("\n").join("\n"+a),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=function(){if(nn)return tn;nn=1;const e=o,t=r,n=rn(),{env:s}=process;let i;function a(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function c(t,a){if(0===i)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(t&&!a&&void 0===i)return 0;const r=i||0;if("dumb"===s.TERM)return r;if("win32"===process.platform){const t=e.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in s))||"codeship"===s.CI_NAME?1:r;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:r}return n("no-color")||n("no-colors")||n("color=false")||n("color=never")?i=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(i=1),"FORCE_COLOR"in s&&(i="true"===s.FORCE_COLOR?1:"false"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),tn={supportsColor:function(e){return a(c(e,e&&e.isTTY))},stdout:a(c(!0,t.isatty(1))),stderr:a(c(!0,t.isatty(2)))},tn}();e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[n]=s,e}),{}),e.exports=Xt()(t);const{formatters:a}=e.exports;a.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},a.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}}(an,an.exports)),an.exports);var on,cn=Kt.exports,ln=a,un=ln.URL,pn=y,dn=_,hn=c.Writable,fn=n,mn=function(){if(!on){try{on=cn("follow-redirects")}catch(e){}"function"!=typeof on&&(on=function(){})}on.apply(null,arguments)},gn=!1;try{fn(new un)}catch(e){gn="ERR_INVALID_URL"===e.code}var yn=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],_n=["abort","aborted","connect","error","socket","timeout"],En=Object.create(null);_n.forEach((function(e){En[e]=function(t,n,s){this._redirectable.emit(e,t,n,s)}}));var bn=Rn("ERR_INVALID_URL","Invalid URL",TypeError),Tn=Rn("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),vn=Rn("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",Tn),xn=Rn("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Sn=Rn("ERR_STREAM_WRITE_AFTER_END","write after end"),An=hn.prototype.destroy||Nn;function wn(e,t){hn.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(e){try{n._processResponse(e)}catch(e){n.emit("error",e instanceof Tn?e:new Tn({cause:e}))}},this._performRequest()}function Cn(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(s){var i=s+":",a=n[i]=e[s],r=t[s]=Object.create(a);Object.defineProperties(r,{request:{value:function(e,s,a){var r;return r=e,un&&r instanceof un?e=On(e):Pn(e)?e=On(In(e)):(a=s,s=kn(e),e={protocol:i}),Mn(s)&&(a=s,s=null),(s=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,s)).nativeProtocols=n,Pn(s.host)||Pn(s.hostname)||(s.hostname="::1"),fn.equal(s.protocol,i,"protocol mismatch"),mn("options",s),new wn(s,a)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,n){var s=r.request(e,t,n);return s.end(),s},configurable:!0,enumerable:!0,writable:!0}})})),t}function Nn(){}function In(e){var t;if(gn)t=new un(e);else if(!Pn((t=kn(ln.parse(e))).protocol))throw new bn({input:e});return t}function kn(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new bn({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new bn({input:e.href||e});return e}function On(e,t){var n=t||{};for(var s of yn)n[s]=e[s];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),""!==n.port&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function Dn(e,t){var n;for(var s in t)e.test(s)&&(n=t[s],delete t[s]);return null==n?void 0:String(n).trim()}function Rn(e,t,n){function s(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return s.prototype=new(n||Error),Object.defineProperties(s.prototype,{constructor:{value:s,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),s}function Ln(e,t){for(var n of _n)e.removeListener(n,En[n]);e.on("error",Nn),e.destroy(t)}function Pn(e){return"string"==typeof e||e instanceof String}function Mn(e){return"function"==typeof e}wn.prototype=Object.create(hn.prototype),wn.prototype.abort=function(){Ln(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},wn.prototype.destroy=function(e){return Ln(this._currentRequest,e),An.call(this,e),this},wn.prototype.write=function(e,t,n){if(this._ending)throw new Sn;if(!Pn(e)&&("object"!=typeof(s=e)||!("length"in s)))throw new TypeError("data should be a string, Buffer or Uint8Array");var s;Mn(t)&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new xn),this.abort()):n&&n()},wn.prototype.end=function(e,t,n){if(Mn(e)?(n=e,e=t=null):Mn(t)&&(n=t,t=null),e){var s=this,i=this._currentRequest;this.write(e,t,(function(){s._ended=!0,i.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},wn.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},wn.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},wn.prototype.setTimeout=function(e,t){var n=this;function s(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function i(t){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),a()}),e),s(t)}function a(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",a),n.removeListener("error",a),n.removeListener("response",a),n.removeListener("close",a),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",s),this.on("abort",a),this.on("error",a),this.on("response",a),this.on("close",a),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){wn.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(wn.prototype,e,{get:function(){return this._currentRequest[e]}})})),wn.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},wn.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var s=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var i of(s._redirectable=this,_n))s.on(i,En[i]);if(this._currentUrl=/^\//.test(this._options.path)?ln.format(this._options):this._options.path,this._isRedirect){var a=0,r=this,o=this._requestBodyBuffers;!function e(t){if(s===r._currentRequest)if(t)r.emit("error",t);else if(a<o.length){var n=o[a++];s.finished||s.write(n.data,n.encoding,e)}else r._ended&&s.end()}()}},wn.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n,s=e.headers.location;if(!s||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(Ln(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new vn;var i=this._options.beforeRedirect;i&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var a=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Dn(/^content-/i,this._options.headers));var r,o,c=Dn(/^host$/i,this._options.headers),l=In(this._currentUrl),u=c||l.host,p=/^\w+:/.test(s)?this._currentUrl:ln.format(Object.assign(l,{host:u})),d=(r=s,o=p,gn?new un(r,o):In(ln.resolve(o,r)));if(mn("redirecting to",d.href),this._isRedirect=!0,On(d,this._options),(d.protocol!==l.protocol&&"https:"!==d.protocol||d.host!==u&&!function(e,t){fn(Pn(e)&&Pn(t));var n=e.length-t.length-1;return n>0&&"."===e[n]&&e.endsWith(t)}(d.host,u))&&Dn(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),Mn(i)){var h={headers:e.headers,statusCode:t},f={url:p,method:a,headers:n};i(this._options,h,f),this._sanitizeOptions(this._options)}this._performRequest()},Qt.exports=Cn({http:pn,https:dn}),Qt.exports.wrap=Cn;var Fn=Qt.exports,Bn=N(Fn);const Un="1.6.7";function Hn(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const jn=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function Gn(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i,a=0,r=0;return t=void 0!==t?t:1e3,function(o){const c=Date.now(),l=s[r];i||(i=c),n[a]=o,s[a]=c;let u=r,p=0;for(;u!==a;)p+=n[u++],u%=e;if(a=(a+1)%e,a===r&&(r=(r+1)%e),c-i<t)return;const d=l&&c-l;return d?Math.round(1e3*p/d):void 0}}const qn=Symbol("internals");let Yn=class extends c.Transform{constructor(e){e=le.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,((e,t)=>!le.isUndefined(t[e]))),super({readableHighWaterMark:e.chunkSize});const t=this,n=this[qn]={length:e.length,timeWindow:e.timeWindow,ticksRate:e.ticksRate,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},s=Gn(n.ticksRate*e.samplesCount,n.timeWindow);this.on("newListener",(e=>{"progress"===e&&(n.isCaptured||(n.isCaptured=!0))}));let i=0;n.updateProgress=function(e,t){let n=0;const s=1e3/t;let i=null;return function(t,a){const r=Date.now();if(t||r-n>s)return i&&(clearTimeout(i),i=null),n=r,e.apply(null,a);i||(i=setTimeout((()=>(i=null,n=Date.now(),e.apply(null,a))),s-(r-n)))}}((function(){const e=n.length,a=n.bytesSeen,r=a-i;if(!r||t.destroyed)return;const o=s(r);i=a,process.nextTick((()=>{t.emit("progress",{loaded:a,total:e,progress:e?a/e:void 0,bytes:r,rate:o||void 0,estimated:o&&e&&a<=e?(e-a)/o:void 0})}))}),n.ticksRate);const a=()=>{n.updateProgress(!0)};this.once("end",a),this.once("error",a)}_read(e){const t=this[qn];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,n){const s=this,i=this[qn],a=i.maxRate,r=this.readableHighWaterMark,o=i.timeWindow,c=a/(1e3/o),l=!1!==i.minChunkSize?Math.max(i.minChunkSize,.01*c):0;const u=(e,t)=>{const n=Buffer.byteLength(e);let u,p=null,d=r,h=0;if(a){const e=Date.now();(!i.ts||(h=e-i.ts)>=o)&&(i.ts=e,u=c-i.bytes,i.bytes=u<0?-u:0,h=0),u=c-i.bytes}if(a){if(u<=0)return setTimeout((()=>{t(null,e)}),o-h);u<d&&(d=u)}d&&n>d&&n-d>l&&(p=e.subarray(d),e=e.subarray(0,d)),function(e,t){const n=Buffer.byteLength(e);i.bytesSeen+=n,i.bytes+=n,i.isCaptured&&i.updateProgress(),s.push(e)?process.nextTick(t):i.onReadCallback=()=>{i.onReadCallback=null,process.nextTick(t)}}(e,p?()=>{process.nextTick(t,null,p)}:t)};u(e,(function e(t,s){if(t)return n(t);s?u(s,e):n(null)}))}setLength(e){return this[qn].length=+e,this}};const{asyncIterator:zn}=Symbol,Vn=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[zn]?yield*e[zn]():yield e},Wn=le.ALPHABET.ALPHA_DIGIT+"-_",Qn=new i,Kn="\r\n",Zn=Qn.encode(Kn);let $n=class{constructor(e,t){const{escapeName:n}=this.constructor,s=le.isString(t);let i=`Content-Disposition: form-data; name="${n(e)}"${!s&&t.name?`; filename="${n(t.name)}"`:""}${Kn}`;s?t=Qn.encode(String(t).replace(/\r?\n|\r\n?/g,Kn)):i+=`Content-Type: ${t.type||"application/octet-stream"}${Kn}`,this.headers=Qn.encode(i+Kn),this.contentLength=s?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async*encode(){yield this.headers;const{value:e}=this;le.isTypedArray(e)?yield e:yield*Vn(e),yield Zn}static escapeName(e){return String(e).replace(/[\r\n"]/g,(e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e])))}};let Xn=class extends c.Transform{__transform(e,t,n){this.push(e),n()}_transform(e,t,n){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){const e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,n)}};const Jn=(e,t)=>le.isAsyncFn(e)?function(...n){const s=n.pop();e.apply(this,n).then((e=>{try{t?s(null,...t(e)):s(null,e)}catch(e){s(e)}}),s)}:e,es={flush:b.constants.Z_SYNC_FLUSH,finishFlush:b.constants.Z_SYNC_FLUSH},ts={flush:b.constants.BROTLI_OPERATION_FLUSH,finishFlush:b.constants.BROTLI_OPERATION_FLUSH},ns=le.isFunction(b.createBrotliDecompress),{http:ss,https:is}=Bn,as=/https:?/,rs=xt.protocols.map((e=>e+":"));function os(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}function cs(e,t,n){let s=t;if(!s&&!1!==s){const e=Wt(n);e&&(s=new URL(e))}if(s){if(s.username&&(s.auth=(s.username||"")+":"+(s.password||"")),s.auth){(s.auth.username||s.auth.password)&&(s.auth=(s.auth.username||"")+":"+(s.auth.password||""));const t=Buffer.from(s.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");const t=s.hostname||s.host;e.hostname=t,e.host=t,e.port=s.port,e.path=n,s.protocol&&(e.protocol=s.protocol.includes(":")?s.protocol:`${s.protocol}:`)}e.beforeRedirects.proxy=function(e){cs(e,t,e.href)}}const ls="undefined"!=typeof process&&"process"===le.kindOf(process),us=(e,t)=>(({address:e,family:t})=>{if(!le.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}})(le.isObject(e)?e:{address:e,family:t});var ps=ls&&function(e){return n=async function(n,i,a){let{data:r,lookup:o,family:u}=e;const{responseType:p,responseEncoding:d}=e,h=e.method.toUpperCase();let f,m,g=!1;if(o){const e=Jn(o,(e=>le.isArray(e)?e:[e]));o=(t,n,s)=>{e(t,n,((e,t,i)=>{if(e)return s(e);const a=le.isArray(t)?t.map((e=>us(e))):[us(t,i)];n.all?s(e,a):s(e,a[0].address,a[0].family)}))}}const E=new t,T=()=>{e.cancelToken&&e.cancelToken.unsubscribe(v),e.signal&&e.signal.removeEventListener("abort",v),E.removeAllListeners()};function v(t){E.emit("abort",!t||t.type?new Lt(null,e,m):t)}a(((e,t)=>{f=!0,t&&(g=!0,T())})),E.once("abort",i),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(v),e.signal&&(e.signal.aborted?v():e.signal.addEventListener("abort",v)));const x=Mt(e.baseURL,e.url),S=new URL(x,"http://localhost"),A=S.protocol||rs[0];if("data:"===A){let t;if("GET"!==h)return Pt(n,i,{status:405,statusText:"method not allowed",headers:{},config:e});try{t=function(e,t,n){const s=n&&n.Blob||xt.classes.Blob,i=Hn(e);if(void 0===t&&s&&(t=!0),"data"===i){e=i.length?e.slice(i.length+1):e;const n=jn.exec(e);if(!n)throw new ue("Invalid URL",ue.ERR_INVALID_URL);const a=n[1],r=n[2],o=n[3],c=Buffer.from(decodeURIComponent(o),r?"base64":"utf8");if(t){if(!s)throw new ue("Blob is not supported",ue.ERR_NOT_SUPPORT);return new s([c],{type:a})}return c}throw new ue("Unsupported protocol "+i,ue.ERR_NOT_SUPPORT)}(e.url,"blob"===p,{Blob:e.env&&e.env.Blob})}catch(t){throw ue.from(t,ue.ERR_BAD_REQUEST,e)}return"text"===p?(t=t.toString(d),d&&"utf8"!==d||(t=le.stripBOM(t))):"stream"===p&&(t=c.Readable.from(t)),Pt(n,i,{data:t,status:200,statusText:"OK",headers:new Ot,config:e})}if(-1===rs.indexOf(A))return i(new ue("Unsupported protocol "+A,ue.ERR_BAD_REQUEST,e));const w=Ot.from(e.headers).normalize();w.set("User-Agent","axios/"+Un,!1);const C=e.onDownloadProgress,N=e.onUploadProgress,I=e.maxRate;let k,O;if(le.isSpecCompliantForm(r)){const e=w.getContentType(/boundary=([-_\w\d]{10,70})/i);r=((e,t,n)=>{const{tag:s="form-data-boundary",size:i=25,boundary:a=s+"-"+le.generateString(i,Wn)}=n||{};if(!le.isFormData(e))throw TypeError("FormData instance required");if(a.length<1||a.length>70)throw Error("boundary must be 10-70 characters long");const r=Qn.encode("--"+a+Kn),o=Qn.encode("--"+a+"--"+Kn+Kn);let c=o.byteLength;const u=Array.from(e.entries()).map((([e,t])=>{const n=new $n(e,t);return c+=n.size,n}));c+=r.byteLength*u.length,c=le.toFiniteNumber(c);const p={"Content-Type":`multipart/form-data; boundary=${a}`};return Number.isFinite(c)&&(p["Content-Length"]=c),t&&t(p),l.from(async function*(){for(const e of u)yield r,yield*e.encode();yield o}())})(r,(e=>{w.set(e)}),{tag:`axios-${Un}-boundary`,boundary:e&&e[1]||void 0})}else if(le.isFormData(r)&&le.isFunction(r.getHeaders)){if(w.set(r.getHeaders()),!w.hasContentLength())try{const e=await s.promisify(r.getLength).call(r);Number.isFinite(e)&&e>=0&&w.setContentLength(e)}catch(e){}}else if(le.isBlob(r))r.size&&w.setContentType(r.type||"application/octet-stream"),w.setContentLength(r.size||0),r=c.Readable.from(Vn(r));else if(r&&!le.isStream(r)){if(Buffer.isBuffer(r));else if(le.isArrayBuffer(r))r=Buffer.from(new Uint8Array(r));else{if(!le.isString(r))return i(new ue("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",ue.ERR_BAD_REQUEST,e));r=Buffer.from(r,"utf-8")}if(w.setContentLength(r.length,!1),e.maxBodyLength>-1&&r.length>e.maxBodyLength)return i(new ue("Request body larger than maxBodyLength limit",ue.ERR_BAD_REQUEST,e))}const D=le.toFiniteNumber(w.getContentLength());let R,L;le.isArray(I)?(k=I[0],O=I[1]):k=O=I,r&&(N||k)&&(le.isStream(r)||(r=c.Readable.from(r,{objectMode:!1})),r=c.pipeline([r,new Yn({length:D,maxRate:le.toFiniteNumber(k)})],le.noop),N&&r.on("progress",(e=>{N(Object.assign(e,{upload:!0}))}))),e.auth&&(R=(e.auth.username||"")+":"+(e.auth.password||"")),!R&&S.username&&(R=S.username+":"+S.password),R&&w.delete("authorization");try{L=mt(S.pathname+S.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){const n=new Error(t.message);return n.config=e,n.url=e.url,n.exists=!0,i(n)}w.set("Accept-Encoding","gzip, compress, deflate"+(ns?", br":""),!1);const P={path:L,method:h,headers:w.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:R,protocol:A,family:u,beforeRedirect:os,beforeRedirects:{}};let M;!le.isUndefined(o)&&(P.lookup=o),e.socketPath?P.socketPath=e.socketPath:(P.hostname=S.hostname,P.port=S.port,cs(P,e.proxy,A+"//"+S.hostname+(S.port?":"+S.port:"")+P.path));const F=as.test(P.protocol);if(P.agent=F?e.httpsAgent:e.httpAgent,e.transport?M=e.transport:0===e.maxRedirects?M=F?_:y:(e.maxRedirects&&(P.maxRedirects=e.maxRedirects),e.beforeRedirect&&(P.beforeRedirects.config=e.beforeRedirect),M=F?is:ss),e.maxBodyLength>-1?P.maxBodyLength=e.maxBodyLength:P.maxBodyLength=1/0,e.insecureHTTPParser&&(P.insecureHTTPParser=e.insecureHTTPParser),m=M.request(P,(function(t){if(m.destroyed)return;const s=[t],a=+t.headers["content-length"];if(C){const e=new Yn({length:le.toFiniteNumber(a),maxRate:le.toFiniteNumber(O)});C&&e.on("progress",(e=>{C(Object.assign(e,{download:!0}))})),s.push(e)}let r=t;const o=t.req||m;if(!1!==e.decompress&&t.headers["content-encoding"])switch("HEAD"!==h&&204!==t.statusCode||delete t.headers["content-encoding"],(t.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":s.push(b.createUnzip(es)),delete t.headers["content-encoding"];break;case"deflate":s.push(new Xn),s.push(b.createUnzip(es)),delete t.headers["content-encoding"];break;case"br":ns&&(s.push(b.createBrotliDecompress(ts)),delete t.headers["content-encoding"])}r=s.length>1?c.pipeline(s,le.noop):s[0];const l=c.finished(r,(()=>{l(),T()})),u={status:t.statusCode,statusText:t.statusMessage,headers:new Ot(t.headers),config:e,request:o};if("stream"===p)u.data=r,Pt(n,i,u);else{const t=[];let s=0;r.on("data",(function(n){t.push(n),s+=n.length,e.maxContentLength>-1&&s>e.maxContentLength&&(g=!0,r.destroy(),i(new ue("maxContentLength size of "+e.maxContentLength+" exceeded",ue.ERR_BAD_RESPONSE,e,o)))})),r.on("aborted",(function(){if(g)return;const t=new ue("maxContentLength size of "+e.maxContentLength+" exceeded",ue.ERR_BAD_RESPONSE,e,o);r.destroy(t),i(t)})),r.on("error",(function(t){m.destroyed||i(ue.from(t,null,e,o))})),r.on("end",(function(){try{let e=1===t.length?t[0]:Buffer.concat(t);"arraybuffer"!==p&&(e=e.toString(d),d&&"utf8"!==d||(e=le.stripBOM(e))),u.data=e}catch(t){return i(ue.from(t,null,e,u.request,u))}Pt(n,i,u)}))}E.once("abort",(e=>{r.destroyed||(r.emit("error",e),r.destroy())}))})),E.once("abort",(e=>{i(e),m.destroy(e)})),m.on("error",(function(t){i(ue.from(t,null,e,m))})),m.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){const t=parseInt(e.timeout,10);if(Number.isNaN(t))return void i(new ue("error trying to parse `config.timeout` to int",ue.ERR_BAD_OPTION_VALUE,e,m));m.setTimeout(t,(function(){if(f)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||yt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new ue(t,n.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,e,m)),v()}))}if(le.isStream(r)){let t=!1,n=!1;r.on("end",(()=>{t=!0})),r.once("error",(e=>{n=!0,m.destroy(e)})),r.on("close",(()=>{t||n||v(new Lt("Request stream has been aborted",e,m))})),r.pipe(m)}else m.end(r)},new Promise(((e,t)=>{let s,i;const a=(e,t)=>{i||(i=!0,s&&s(e,t))},r=e=>{a(e,!0),t(e)};n((t=>{a(t),e(t)}),r,(e=>s=e)).catch(r)}));var n},ds=xt.hasStandardBrowserEnv?{write(e,t,n,s,i,a){const r=[e+"="+encodeURIComponent(t)];le.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),le.isString(s)&&r.push("path="+s),le.isString(i)&&r.push("domain="+i),!0===a&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}},hs=xt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function s(n){let s=n;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(e){const t=le.isString(e)?s(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function fs(e,t){let n=0;const s=Gn(50,250);return i=>{const a=i.loaded,r=i.lengthComputable?i.total:void 0,o=a-n,c=s(o);n=a;const l={loaded:a,total:r,progress:r?a/r:void 0,bytes:o,rate:c||void 0,estimated:c&&r&&a<=r?(r-a)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var ms="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let s=e.data;const i=Ot.from(e.headers).normalize();let a,r,{responseType:o,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}if(le.isFormData(s))if(xt.hasStandardBrowserEnv||xt.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(r=i.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const p=Mt(e.baseURL,e.url);function d(){if(!u)return;const s=Ot.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());Pt((function(e){t(e),l()}),(function(e){n(e),l()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:s,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),mt(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new ue("Request aborted",ue.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new ue("Network Error",ue.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const s=e.transitional||yt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ue(t,s.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,e,u)),u=null},xt.hasStandardBrowserEnv&&(c&&le.isFunction(c)&&(c=c(e)),c||!1!==c&&hs(p))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&ds.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===s&&i.setContentType(null),"setRequestHeader"in u&&le.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),le.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",fs(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",fs(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{u&&(n(!t||t.type?new Lt(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const h=Hn(p);h&&-1===xt.protocols.indexOf(h)?n(new ue("Unsupported protocol "+h+":",ue.ERR_BAD_REQUEST,e)):u.send(s||null)}))};const gs={http:ps,xhr:ms};le.forEach(gs,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const ys=e=>`- ${e}`,_s=e=>le.isFunction(e)||null===e||!1===e;var Es=e=>{e=le.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],s=n,!_s(n)&&(s=gs[(t=String(n)).toLowerCase()],void 0===s))throw new ue(`Unknown adapter '${t}'`);if(s)break;i[t||"#"+a]=s}if(!s){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new ue("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(ys).join("\n"):" "+ys(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function bs(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lt(null,e)}function Ts(e){bs(e),e.headers=Ot.from(e.headers),e.data=Dt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Es(e.adapter||At.adapter)(e).then((function(t){return bs(e),t.data=Dt.call(e,e.transformResponse,t),t.headers=Ot.from(t.headers),t}),(function(t){return Rt(t)||(bs(e),t&&t.response&&(t.response.data=Dt.call(e,e.transformResponse,t.response),t.response.headers=Ot.from(t.response.headers))),Promise.reject(t)}))}const vs=e=>e instanceof Ot?e.toJSON():e;function xs(e,t){t=t||{};const n={};function s(e,t,n){return le.isPlainObject(e)&&le.isPlainObject(t)?le.merge.call({caseless:n},e,t):le.isPlainObject(t)?le.merge({},t):le.isArray(t)?t.slice():t}function i(e,t,n){return le.isUndefined(t)?le.isUndefined(e)?void 0:s(void 0,e,n):s(e,t,n)}function a(e,t){if(!le.isUndefined(t))return s(void 0,t)}function r(e,t){return le.isUndefined(t)?le.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(n,i,a){return a in t?s(n,i):a in e?s(void 0,n):void 0}const c={url:a,method:a,data:a,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:o,headers:(e,t)=>i(vs(e),vs(t),!0)};return le.forEach(Object.keys(Object.assign({},e,t)),(function(s){const a=c[s]||i,r=a(e[s],t[s],s);le.isUndefined(r)&&a!==o||(n[s]=r)})),n}const Ss={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ss[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const As={};Ss.transitional=function(e,t,n){function s(e,t){return"[Axios v1.6.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new ue(s(i," has been removed"+(t?" in "+t:"")),ue.ERR_DEPRECATED);return t&&!As[i]&&(As[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var ws={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const a=s[i],r=t[a];if(r){const t=e[a],n=void 0===t||r(t,a,e);if(!0!==n)throw new ue("option "+a+" must be "+n,ue.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ue("Unknown option "+a,ue.ERR_BAD_OPTION)}},validators:Ss};const Cs=ws.validators;let Ns=class{constructor(e){this.defaults=e,this.interceptors={request:new gt,response:new gt}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=xs(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;void 0!==n&&ws.assertOptions(n,{silentJSONParsing:Cs.transitional(Cs.boolean),forcedJSONParsing:Cs.transitional(Cs.boolean),clarifyTimeoutError:Cs.transitional(Cs.boolean)},!1),null!=s&&(le.isFunction(s)?t.paramsSerializer={serialize:s}:ws.assertOptions(s,{encode:Cs.function,serialize:Cs.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&le.merge(i.common,i[t.method]);i&&le.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Ot.concat(a,i);const r=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,p=0;if(!o){const e=[Ts.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);p<u;)l=l.then(e[p++],e[p++]);return l}u=r.length;let d=t;for(p=0;p<u;){const e=r[p++],t=r[p++];try{d=e(d)}catch(e){t.call(this,e);break}}try{l=Ts.call(this,d)}catch(e){return Promise.reject(e)}for(p=0,u=c.length;p<u;)l=l.then(c[p++],c[p++]);return l}getUri(e){return mt(Mt((e=xs(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};le.forEach(["delete","get","head","options"],(function(e){Ns.prototype[e]=function(t,n){return this.request(xs(n||{},{method:e,url:t,data:(n||{}).data}))}})),le.forEach(["post","put","patch"],(function(e){function t(t){return function(n,s,i){return this.request(xs(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}Ns.prototype[e]=t(),Ns.prototype[e+"Form"]=t(!0)}));const Is={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Is).forEach((([e,t])=>{Is[t]=e}));const ks=function e(t){const n=new Ns(t),s=I(Ns.prototype.request,n);return le.extend(s,Ns.prototype,n,{allOwnKeys:!0}),le.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(xs(t,n))},s}(At);ks.Axios=Ns,ks.CanceledError=Lt,ks.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{n.subscribe(e),t=e})).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e((function(e,s,i){n.reason||(n.reason=new Lt(e,s,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},ks.isCancel=Rt,ks.VERSION=Un,ks.toFormData=ut,ks.AxiosError=ue,ks.Cancel=ks.CanceledError,ks.all=function(e){return Promise.all(e)},ks.spread=function(e){return function(t){return e.apply(null,t)}},ks.isAxiosError=function(e){return le.isObject(e)&&!0===e.isAxiosError},ks.mergeConfig=xs,ks.AxiosHeaders=Ot,ks.formToJSON=e=>St(le.isHTMLForm(e)?new FormData(e):e),ks.getAdapter=Es,ks.HttpStatusCode=Is,ks.default=ks;var Os,Ds,Rs=ks;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),s={};for(const e of n)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Os||(Os={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Ds||(Ds={}));const Ls=Os.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ps=e=>{switch(typeof e){case"undefined":return Ls.undefined;case"string":return Ls.string;case"number":return isNaN(e)?Ls.nan:Ls.number;case"boolean":return Ls.boolean;case"function":return Ls.function;case"bigint":return Ls.bigint;case"symbol":return Ls.symbol;case"object":return Array.isArray(e)?Ls.array:null===e?Ls.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Ls.promise:"undefined"!=typeof Map&&e instanceof Map?Ls.map:"undefined"!=typeof Set&&e instanceof Set?Ls.set:"undefined"!=typeof Date&&e instanceof Date?Ls.date:Ls.object;default:return Ls.unknown}},Ms=Os.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Fs extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},s=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(s);else if("invalid_return_type"===i.code)s(i.returnTypeError);else if("invalid_arguments"===i.code)s(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,s=0;for(;s<i.path.length;){const n=i.path[s];s===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],s++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Os.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Fs.create=e=>new Fs(e);const Bs=(e,t)=>{let n;switch(e.code){case Ms.invalid_type:n=e.received===Ls.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Ms.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Os.jsonStringifyReplacer)}`;break;case Ms.unrecognized_keys:n=`Unrecognized key(s) in object: ${Os.joinValues(e.keys,", ")}`;break;case Ms.invalid_union:n="Invalid input";break;case Ms.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Os.joinValues(e.options)}`;break;case Ms.invalid_enum_value:n=`Invalid enum value. Expected ${Os.joinValues(e.options)}, received '${e.received}'`;break;case Ms.invalid_arguments:n="Invalid function arguments";break;case Ms.invalid_return_type:n="Invalid function return type";break;case Ms.invalid_date:n="Invalid date";break;case Ms.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Os.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Ms.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Ms.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Ms.custom:n="Invalid input";break;case Ms.invalid_intersection_types:n="Intersection results could not be merged";break;case Ms.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ms.not_finite:n="Number must be finite";break;default:n=t.defaultError,Os.assertNever(e)}return{message:n}};let Us=Bs;function Hs(){return Us}const js=e=>{const{data:t,path:n,errorMaps:s,issueData:i}=e,a=[...n,...i.path||[]],r={...i,path:a};let o="";const c=s.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(r,{data:t,defaultError:o}).message;return{...i,path:a,message:i.message||o}};function Gs(e,t){const n=js({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Hs(),Bs].filter((e=>!!e))});e.common.issues.push(n)}class qs{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if("aborted"===s.status)return Ys;"dirty"===s.status&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t)n.push({key:await e.key,value:await e.value});return qs.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:t,value:i}=s;if("aborted"===t.status)return Ys;if("aborted"===i.status)return Ys;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!s.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const Ys=Object.freeze({status:"aborted"}),zs=e=>({status:"dirty",value:e}),Vs=e=>({status:"valid",value:e}),Ws=e=>"aborted"===e.status,Qs=e=>"dirty"===e.status,Ks=e=>"valid"===e.status,Zs=e=>"undefined"!=typeof Promise&&e instanceof Promise;var $s;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}($s||($s={}));class Xs{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Js=(e,t)=>{if(Ks(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Fs(e.common.issues);return this._error=t,this._error}}};function ei(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:i}=e;if(t&&(n||s))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=s?s:t.defaultError}:{message:null!=n?n:t.defaultError},description:i}}class ti{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ps(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ps(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qs,ctx:{common:e.parent.common,data:e.data,parsedType:Ps(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Zs(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ps(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Js(s,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ps(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Zs(s)?s:Promise.resolve(s));return Js(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,s)=>{const i=e(t),a=()=>s.addIssue({code:Ms.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(a(),!1))):!!i||(a(),!1)}))}refinement(e,t){return this._refinement(((n,s)=>!!e(n)||(s.addIssue("function"==typeof t?t(n,s):t),!1)))}_refinement(e){return new Gi({schema:this,typeName:ea.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return qi.create(this,this._def)}nullable(){return Yi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xi.create(this,this._def)}promise(){return ji.create(this,this._def)}or(e){return wi.create([this,e],this._def)}and(e){return ki.create(this,e,this._def)}transform(e){return new Gi({...ei(this._def),schema:this,typeName:ea.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new zi({...ei(this._def),innerType:this,defaultValue:t,typeName:ea.ZodDefault})}brand(){return new Ki({typeName:ea.ZodBranded,type:this,...ei(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Vi({...ei(this._def),innerType:this,catchValue:t,typeName:ea.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Zi.create(this,e)}readonly(){return $i.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ni=/^c[^\s-]{8,}$/i,si=/^[a-z][a-z0-9]*$/,ii=/^[0-9A-HJKMNP-TV-Z]{26}$/,ai=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ri=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let oi;const ci=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,li=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class ui extends ti{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Ls.string){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.string,received:t.parsedType}),Ys}const t=new qs;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),Gs(n,{code:Ms.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),Gs(n,{code:Ms.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const s=e.data.length>r.value,i=e.data.length<r.value;(s||i)&&(n=this._getOrReturnCtx(e,n),s?Gs(n,{code:Ms.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):i&&Gs(n,{code:Ms.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)ri.test(e.data)||(n=this._getOrReturnCtx(e,n),Gs(n,{validation:"email",code:Ms.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)oi||(oi=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),oi.test(e.data)||(n=this._getOrReturnCtx(e,n),Gs(n,{validation:"emoji",code:Ms.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)ai.test(e.data)||(n=this._getOrReturnCtx(e,n),Gs(n,{validation:"uuid",code:Ms.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)ni.test(e.data)||(n=this._getOrReturnCtx(e,n),Gs(n,{validation:"cuid",code:Ms.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)si.test(e.data)||(n=this._getOrReturnCtx(e,n),Gs(n,{validation:"cuid2",code:Ms.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)ii.test(e.data)||(n=this._getOrReturnCtx(e,n),Gs(n,{validation:"ulid",code:Ms.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch(s){n=this._getOrReturnCtx(e,n),Gs(n,{validation:"url",code:Ms.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Gs(n,{validation:"regex",code:Ms.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),Gs(n,{code:Ms.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),Gs(n,{code:Ms.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),Gs(n,{code:Ms.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){((a=r).precision?a.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${a.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${a.precision}}Z$`):0===a.precision?a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(n=this._getOrReturnCtx(e,n),Gs(n,{code:Ms.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else"ip"===r.kind?(s=e.data,("v4"!==(i=r.version)&&i||!ci.test(s))&&("v6"!==i&&i||!li.test(s))&&(n=this._getOrReturnCtx(e,n),Gs(n,{validation:"ip",code:Ms.invalid_string,message:r.message}),t.dirty())):Os.assertNever(r);var s,i,a;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:Ms.invalid_string,...$s.errToObj(n)})}_addCheck(e){return new ui({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...$s.errToObj(e)})}url(e){return this._addCheck({kind:"url",...$s.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...$s.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...$s.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...$s.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...$s.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...$s.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...$s.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...$s.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...$s.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...$s.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...$s.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...$s.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...$s.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...$s.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...$s.errToObj(t)})}nonempty(e){return this.min(1,$s.errToObj(e))}trim(){return new ui({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ui({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ui({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function pi(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,i=n>s?n:s;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}ui.create=e=>{var t;return new ui({checks:[],typeName:ea.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...ei(e)})};class di extends ti{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Ls.number){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.number,received:t.parsedType}),Ys}let t;const n=new qs;for(const s of this._def.checks)if("int"===s.kind)Os.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Gs(t,{code:Ms.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),Gs(t,{code:Ms.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),Gs(t,{code:Ms.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty())}else"multipleOf"===s.kind?0!==pi(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),Gs(t,{code:Ms.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Gs(t,{code:Ms.not_finite,message:s.message}),n.dirty()):Os.assertNever(s);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,$s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,$s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,$s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,$s.toString(t))}setLimit(e,t,n,s){return new di({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:$s.toString(s)}]})}_addCheck(e){return new di({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:$s.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:$s.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:$s.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$s.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$s.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Os.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}di.create=e=>new di({checks:[],typeName:ea.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...ei(e)});class hi extends ti{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==Ls.bigint){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.bigint,received:t.parsedType}),Ys}let t;const n=new qs;for(const s of this._def.checks)if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),Gs(t,{code:Ms.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),Gs(t,{code:Ms.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Gs(t,{code:Ms.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):Os.assertNever(s);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,$s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,$s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,$s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,$s.toString(t))}setLimit(e,t,n,s){return new hi({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:$s.toString(s)}]})}_addCheck(e){return new hi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:$s.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}hi.create=e=>{var t;return new hi({checks:[],typeName:ea.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...ei(e)})};class fi extends ti{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Ls.boolean){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.boolean,received:t.parsedType}),Ys}return Vs(e.data)}}fi.create=e=>new fi({typeName:ea.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...ei(e)});class mi extends ti{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Ls.date){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.date,received:t.parsedType}),Ys}if(isNaN(e.data.getTime())){return Gs(this._getOrReturnCtx(e),{code:Ms.invalid_date}),Ys}const t=new qs;let n;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(n=this._getOrReturnCtx(e,n),Gs(n,{code:Ms.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(n=this._getOrReturnCtx(e,n),Gs(n,{code:Ms.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):Os.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new mi({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:$s.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:$s.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}mi.create=e=>new mi({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:ea.ZodDate,...ei(e)});class gi extends ti{_parse(e){if(this._getType(e)!==Ls.symbol){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.symbol,received:t.parsedType}),Ys}return Vs(e.data)}}gi.create=e=>new gi({typeName:ea.ZodSymbol,...ei(e)});class yi extends ti{_parse(e){if(this._getType(e)!==Ls.undefined){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.undefined,received:t.parsedType}),Ys}return Vs(e.data)}}yi.create=e=>new yi({typeName:ea.ZodUndefined,...ei(e)});class _i extends ti{_parse(e){if(this._getType(e)!==Ls.null){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.null,received:t.parsedType}),Ys}return Vs(e.data)}}_i.create=e=>new _i({typeName:ea.ZodNull,...ei(e)});class Ei extends ti{constructor(){super(...arguments),this._any=!0}_parse(e){return Vs(e.data)}}Ei.create=e=>new Ei({typeName:ea.ZodAny,...ei(e)});class bi extends ti{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Vs(e.data)}}bi.create=e=>new bi({typeName:ea.ZodUnknown,...ei(e)});class Ti extends ti{_parse(e){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.never,received:t.parsedType}),Ys}}Ti.create=e=>new Ti({typeName:ea.ZodNever,...ei(e)});class vi extends ti{_parse(e){if(this._getType(e)!==Ls.undefined){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.void,received:t.parsedType}),Ys}return Vs(e.data)}}vi.create=e=>new vi({typeName:ea.ZodVoid,...ei(e)});class xi extends ti{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==Ls.array)return Gs(t,{code:Ms.invalid_type,expected:Ls.array,received:t.parsedType}),Ys;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,i=t.data.length<s.exactLength.value;(e||i)&&(Gs(t,{code:e?Ms.too_big:Ms.too_small,minimum:i?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(Gs(t,{code:Ms.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(Gs(t,{code:Ms.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>s.type._parseAsync(new Xs(t,e,t.path,n))))).then((e=>qs.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>s.type._parseSync(new Xs(t,e,t.path,n))));return qs.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new xi({...this._def,minLength:{value:e,message:$s.toString(t)}})}max(e,t){return new xi({...this._def,maxLength:{value:e,message:$s.toString(t)}})}length(e,t){return new xi({...this._def,exactLength:{value:e,message:$s.toString(t)}})}nonempty(e){return this.min(1,e)}}function Si(e){if(e instanceof Ai){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=qi.create(Si(s))}return new Ai({...e._def,shape:()=>t})}return e instanceof xi?new xi({...e._def,type:Si(e.element)}):e instanceof qi?qi.create(Si(e.unwrap())):e instanceof Yi?Yi.create(Si(e.unwrap())):e instanceof Oi?Oi.create(e.items.map((e=>Si(e)))):e}xi.create=(e,t)=>new xi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ea.ZodArray,...ei(t)});class Ai extends ti{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Os.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Ls.object){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.object,received:t.parsedType}),Ys}const{status:t,ctx:n}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ti&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||a.push(e);const r=[];for(const e of i){const t=s[e],i=n.data[e];r.push({key:{status:"valid",value:e},value:t._parse(new Xs(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Ti){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of a)r.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)a.length>0&&(Gs(n,{code:Ms.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const s=n.data[t];r.push({key:{status:"valid",value:t},value:e._parse(new Xs(n,s,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of r){const n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>qs.mergeObjectSync(t,e))):qs.mergeObjectSync(t,r)}get shape(){return this._def.shape()}strict(e){return $s.errToObj,new Ai({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var s,i,a,r;const o=null!==(a=null===(i=(s=this._def).errorMap)||void 0===i?void 0:i.call(s,t,n).message)&&void 0!==a?a:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(r=$s.errToObj(e).message)&&void 0!==r?r:o}:{message:o}}}:{}})}strip(){return new Ai({...this._def,unknownKeys:"strip"})}passthrough(){return new Ai({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ai({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ai({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ea.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ai({...this._def,catchall:e})}pick(e){const t={};return Os.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new Ai({...this._def,shape:()=>t})}omit(e){const t={};return Os.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new Ai({...this._def,shape:()=>t})}deepPartial(){return Si(this)}partial(e){const t={};return Os.objectKeys(this.shape).forEach((n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()})),new Ai({...this._def,shape:()=>t})}required(e){const t={};return Os.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof qi;)e=e._def.innerType;t[n]=e}})),new Ai({...this._def,shape:()=>t})}keyof(){return Bi(Os.objectKeys(this.shape))}}Ai.create=(e,t)=>new Ai({shape:()=>e,unknownKeys:"strip",catchall:Ti.create(),typeName:ea.ZodObject,...ei(t)}),Ai.strictCreate=(e,t)=>new Ai({shape:()=>e,unknownKeys:"strict",catchall:Ti.create(),typeName:ea.ZodObject,...ei(t)}),Ai.lazycreate=(e,t)=>new Ai({shape:e,unknownKeys:"strip",catchall:Ti.create(),typeName:ea.ZodObject,...ei(t)});class wi extends ti{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new Fs(e.ctx.common.issues)));return Gs(t,{code:Ms.invalid_union,unionErrors:n}),Ys}));{let e;const s=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&s.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=s.map((e=>new Fs(e)));return Gs(t,{code:Ms.invalid_union,unionErrors:i}),Ys}}get options(){return this._def.options}}wi.create=(e,t)=>new wi({options:e,typeName:ea.ZodUnion,...ei(t)});const Ci=e=>e instanceof Mi?Ci(e.schema):e instanceof Gi?Ci(e.innerType()):e instanceof Fi?[e.value]:e instanceof Ui?e.options:e instanceof Hi?Object.keys(e.enum):e instanceof zi?Ci(e._def.innerType):e instanceof yi?[void 0]:e instanceof _i?[null]:null;class Ni extends ti{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ls.object)return Gs(t,{code:Ms.invalid_type,expected:Ls.object,received:t.parsedType}),Ys;const n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Gs(t,{code:Ms.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Ys)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const n of t){const t=Ci(n.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(s.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);s.set(i,n)}}return new Ni({typeName:ea.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ei(n)})}}function Ii(e,t){const n=Ps(e),s=Ps(t);if(e===t)return{valid:!0,data:e};if(n===Ls.object&&s===Ls.object){const n=Os.objectKeys(t),s=Os.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const n of s){const s=Ii(e[n],t[n]);if(!s.valid)return{valid:!1};i[n]=s.data}return{valid:!0,data:i}}if(n===Ls.array&&s===Ls.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let s=0;s<e.length;s++){const i=Ii(e[s],t[s]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===Ls.date&&s===Ls.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ki extends ti{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(e,s)=>{if(Ws(e)||Ws(s))return Ys;const i=Ii(e.value,s.value);return i.valid?((Qs(e)||Qs(s))&&t.dirty(),{status:t.value,value:i.data}):(Gs(n,{code:Ms.invalid_intersection_types}),Ys)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>s(e,t))):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ki.create=(e,t,n)=>new ki({left:e,right:t,typeName:ea.ZodIntersection,...ei(n)});class Oi extends ti{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ls.array)return Gs(n,{code:Ms.invalid_type,expected:Ls.array,received:n.parsedType}),Ys;if(n.data.length<this._def.items.length)return Gs(n,{code:Ms.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ys;!this._def.rest&&n.data.length>this._def.items.length&&(Gs(n,{code:Ms.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map(((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new Xs(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(s).then((e=>qs.mergeArray(t,e))):qs.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Oi({...this._def,rest:e})}}Oi.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oi({items:e,typeName:ea.ZodTuple,rest:null,...ei(t)})};class Di extends ti{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ls.object)return Gs(n,{code:Ms.invalid_type,expected:Ls.object,received:n.parsedType}),Ys;const s=[],i=this._def.keyType,a=this._def.valueType;for(const e in n.data)s.push({key:i._parse(new Xs(n,e,n.path,e)),value:a._parse(new Xs(n,n.data[e],n.path,e))});return n.common.async?qs.mergeObjectAsync(t,s):qs.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return new Di(t instanceof ti?{keyType:e,valueType:t,typeName:ea.ZodRecord,...ei(n)}:{keyType:ui.create(),valueType:e,typeName:ea.ZodRecord,...ei(t)})}}class Ri extends ti{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ls.map)return Gs(n,{code:Ms.invalid_type,expected:Ls.map,received:n.parsedType}),Ys;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map((([e,t],a)=>({key:s._parse(new Xs(n,e,n.path,[a,"key"])),value:i._parse(new Xs(n,t,n.path,[a,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of a){const s=await n.key,i=await n.value;if("aborted"===s.status||"aborted"===i.status)return Ys;"dirty"!==s.status&&"dirty"!==i.status||t.dirty(),e.set(s.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of a){const s=n.key,i=n.value;if("aborted"===s.status||"aborted"===i.status)return Ys;"dirty"!==s.status&&"dirty"!==i.status||t.dirty(),e.set(s.value,i.value)}return{status:t.value,value:e}}}}Ri.create=(e,t,n)=>new Ri({valueType:t,keyType:e,typeName:ea.ZodMap,...ei(n)});class Li extends ti{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ls.set)return Gs(n,{code:Ms.invalid_type,expected:Ls.set,received:n.parsedType}),Ys;const s=this._def;null!==s.minSize&&n.data.size<s.minSize.value&&(Gs(n,{code:Ms.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&n.data.size>s.maxSize.value&&(Gs(n,{code:Ms.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function a(e){const n=new Set;for(const s of e){if("aborted"===s.status)return Ys;"dirty"===s.status&&t.dirty(),n.add(s.value)}return{status:t.value,value:n}}const r=[...n.data.values()].map(((e,t)=>i._parse(new Xs(n,e,n.path,t))));return n.common.async?Promise.all(r).then((e=>a(e))):a(r)}min(e,t){return new Li({...this._def,minSize:{value:e,message:$s.toString(t)}})}max(e,t){return new Li({...this._def,maxSize:{value:e,message:$s.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Li.create=(e,t)=>new Li({valueType:e,minSize:null,maxSize:null,typeName:ea.ZodSet,...ei(t)});class Pi extends ti{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ls.function)return Gs(t,{code:Ms.invalid_type,expected:Ls.function,received:t.parsedType}),Ys;function n(e,n){return js({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Hs(),Bs].filter((e=>!!e)),issueData:{code:Ms.invalid_arguments,argumentsError:n}})}function s(e,n){return js({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Hs(),Bs].filter((e=>!!e)),issueData:{code:Ms.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof ji){const e=this;return Vs((async function(...t){const r=new Fs([]),o=await e._def.args.parseAsync(t,i).catch((e=>{throw r.addIssue(n(t,e)),r})),c=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw r.addIssue(s(c,e)),r}))}))}{const e=this;return Vs((function(...t){const r=e._def.args.safeParse(t,i);if(!r.success)throw new Fs([n(t,r.error)]);const o=Reflect.apply(a,this,r.data),c=e._def.returns.safeParse(o,i);if(!c.success)throw new Fs([s(o,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Pi({...this._def,args:Oi.create(e).rest(bi.create())})}returns(e){return new Pi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Pi({args:e||Oi.create([]).rest(bi.create()),returns:t||bi.create(),typeName:ea.ZodFunction,...ei(n)})}}class Mi extends ti{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Mi.create=(e,t)=>new Mi({getter:e,typeName:ea.ZodLazy,...ei(t)});class Fi extends ti{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Gs(t,{received:t.data,code:Ms.invalid_literal,expected:this._def.value}),Ys}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Bi(e,t){return new Ui({values:e,typeName:ea.ZodEnum,...ei(t)})}Fi.create=(e,t)=>new Fi({value:e,typeName:ea.ZodLiteral,...ei(t)});class Ui extends ti{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return Gs(t,{expected:Os.joinValues(n),received:t.parsedType,code:Ms.invalid_type}),Ys}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Gs(t,{received:t.data,code:Ms.invalid_enum_value,options:n}),Ys}return Vs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Ui.create(e)}exclude(e){return Ui.create(this.options.filter((t=>!e.includes(t))))}}Ui.create=Bi;class Hi extends ti{_parse(e){const t=Os.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ls.string&&n.parsedType!==Ls.number){const e=Os.objectValues(t);return Gs(n,{expected:Os.joinValues(e),received:n.parsedType,code:Ms.invalid_type}),Ys}if(-1===t.indexOf(e.data)){const e=Os.objectValues(t);return Gs(n,{received:n.data,code:Ms.invalid_enum_value,options:e}),Ys}return Vs(e.data)}get enum(){return this._def.values}}Hi.create=(e,t)=>new Hi({values:e,typeName:ea.ZodNativeEnum,...ei(t)});class ji extends ti{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ls.promise&&!1===t.common.async)return Gs(t,{code:Ms.invalid_type,expected:Ls.promise,received:t.parsedType}),Ys;const n=t.parsedType===Ls.promise?t.data:Promise.resolve(t.data);return Vs(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ji.create=(e,t)=>new ji({type:e,typeName:ea.ZodPromise,...ei(t)});class Gi extends ti{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ea.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:e=>{Gs(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===s.type){const e=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n}))):this._def.schema._parseSync({data:e,path:n.path,parent:n})}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===s.status?Ys:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?Ys:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===s.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ks(e))return e;const a=s.transform(e.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>Ks(e)?Promise.resolve(s.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}Os.assertNever(s)}}Gi.create=(e,t,n)=>new Gi({schema:e,typeName:ea.ZodEffects,effect:t,...ei(n)}),Gi.createWithPreprocess=(e,t,n)=>new Gi({schema:t,effect:{type:"preprocess",transform:e},typeName:ea.ZodEffects,...ei(n)});class qi extends ti{_parse(e){return this._getType(e)===Ls.undefined?Vs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qi.create=(e,t)=>new qi({innerType:e,typeName:ea.ZodOptional,...ei(t)});class Yi extends ti{_parse(e){return this._getType(e)===Ls.null?Vs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yi.create=(e,t)=>new Yi({innerType:e,typeName:ea.ZodNullable,...ei(t)});class zi extends ti{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Ls.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}zi.create=(e,t)=>new zi({innerType:e,typeName:ea.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ei(t)});class Vi extends ti{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Zs(s)?s.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Fs(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new Fs(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Vi.create=(e,t)=>new Vi({innerType:e,typeName:ea.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ei(t)});class Wi extends ti{_parse(e){if(this._getType(e)!==Ls.nan){const t=this._getOrReturnCtx(e);return Gs(t,{code:Ms.invalid_type,expected:Ls.nan,received:t.parsedType}),Ys}return{status:"valid",value:e.data}}}Wi.create=e=>new Wi({typeName:ea.ZodNaN,...ei(e)});const Qi=Symbol("zod_brand");class Ki extends ti{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Zi extends ti{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Ys:"dirty"===e.status?(t.dirty(),zs(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Ys:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Zi({in:e,out:t,typeName:ea.ZodPipeline})}}class $i extends ti{_parse(e){const t=this._def.innerType._parse(e);return Ks(t)&&(t.value=Object.freeze(t.value)),t}}$i.create=(e,t)=>new $i({innerType:e,typeName:ea.ZodReadonly,...ei(t)});const Xi=(e,t={},n)=>e?Ei.create().superRefine(((s,i)=>{var a,r;if(!e(s)){const e="function"==typeof t?t(s):"string"==typeof t?{message:t}:t,o=null===(r=null!==(a=e.fatal)&&void 0!==a?a:n)||void 0===r||r,c="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:o})}})):Ei.create(),Ji={object:Ai.lazycreate};var ea;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(ea||(ea={}));const ta=ui.create,na=di.create,sa=Wi.create,ia=hi.create,aa=fi.create,ra=mi.create,oa=gi.create,ca=yi.create,la=_i.create,ua=Ei.create,pa=bi.create,da=Ti.create,ha=vi.create,fa=xi.create,ma=Ai.create,ga=Ai.strictCreate,ya=wi.create,_a=Ni.create,Ea=ki.create,ba=Oi.create,Ta=Di.create,va=Ri.create,xa=Li.create,Sa=Pi.create,Aa=Mi.create,wa=Fi.create,Ca=Ui.create,Na=Hi.create,Ia=ji.create,ka=Gi.create,Oa=qi.create,Da=Yi.create,Ra=Gi.createWithPreprocess,La=Zi.create,Pa={string:e=>ui.create({...e,coerce:!0}),number:e=>di.create({...e,coerce:!0}),boolean:e=>fi.create({...e,coerce:!0}),bigint:e=>hi.create({...e,coerce:!0}),date:e=>mi.create({...e,coerce:!0})},Ma=Ys;var Fa=Object.freeze({__proto__:null,defaultErrorMap:Bs,setErrorMap:function(e){Us=e},getErrorMap:Hs,makeIssue:js,EMPTY_PATH:[],addIssueToContext:Gs,ParseStatus:qs,INVALID:Ys,DIRTY:zs,OK:Vs,isAborted:Ws,isDirty:Qs,isValid:Ks,isAsync:Zs,get util(){return Os},get objectUtil(){return Ds},ZodParsedType:Ls,getParsedType:Ps,ZodType:ti,ZodString:ui,ZodNumber:di,ZodBigInt:hi,ZodBoolean:fi,ZodDate:mi,ZodSymbol:gi,ZodUndefined:yi,ZodNull:_i,ZodAny:Ei,ZodUnknown:bi,ZodNever:Ti,ZodVoid:vi,ZodArray:xi,ZodObject:Ai,ZodUnion:wi,ZodDiscriminatedUnion:Ni,ZodIntersection:ki,ZodTuple:Oi,ZodRecord:Di,ZodMap:Ri,ZodSet:Li,ZodFunction:Pi,ZodLazy:Mi,ZodLiteral:Fi,ZodEnum:Ui,ZodNativeEnum:Hi,ZodPromise:ji,ZodEffects:Gi,ZodTransformer:Gi,ZodOptional:qi,ZodNullable:Yi,ZodDefault:zi,ZodCatch:Vi,ZodNaN:Wi,BRAND:Qi,ZodBranded:Ki,ZodPipeline:Zi,ZodReadonly:$i,custom:Xi,Schema:ti,ZodSchema:ti,late:Ji,get ZodFirstPartyTypeKind(){return ea},coerce:Pa,any:ua,array:fa,bigint:ia,boolean:aa,date:ra,discriminatedUnion:_a,effect:ka,enum:Ca,function:Sa,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Xi((t=>t instanceof e),t),intersection:Ea,lazy:Aa,literal:wa,map:va,nan:sa,nativeEnum:Na,never:da,null:la,nullable:Da,number:na,object:ma,oboolean:()=>aa().optional(),onumber:()=>na().optional(),optional:Oa,ostring:()=>ta().optional(),pipeline:La,preprocess:Ra,promise:Ia,record:Ta,set:xa,strictObject:ga,string:ta,symbol:oa,transformer:ka,tuple:ba,undefined:ca,union:ya,unknown:pa,void:ha,NEVER:Ma,ZodIssueCode:Ms,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Fs}),Ba=["interface","display","layout","module","panel","theme"],Ua=["hook","endpoint"],Ha=["operation"],ja="directus:extension",Ga=Fa.object({app:Fa.string(),api:Fa.string()}),qa=Fa.object({request:Fa.optional(Fa.object({urls:Fa.array(Fa.string()),methods:Fa.array(Fa.union([Fa.literal("GET"),Fa.literal("POST"),Fa.literal("PATCH"),Fa.literal("PUT"),Fa.literal("DELETE")]))})),log:Fa.optional(Fa.object({})),sleep:Fa.optional(Fa.object({}))}),Ya=Fa.optional(Fa.object({enabled:Fa.boolean(),requestedScopes:qa})),za=Fa.union([Fa.object({type:Fa.enum(Ua),name:Fa.string(),source:Fa.string()}),Fa.object({type:Fa.enum(Ba),name:Fa.string(),source:Fa.string()}),Fa.object({type:Fa.enum(Ha),name:Fa.string(),source:Ga})]),Va=Fa.object({host:Fa.string(),hidden:Fa.boolean().optional()}),Wa=Fa.object({type:Fa.enum(Ba),path:Fa.string(),source:Fa.string()}),Qa=Fa.object({type:Fa.enum(Ua),path:Fa.string(),source:Fa.string(),sandbox:Ya}),Ka=Fa.object({type:Fa.enum(Ha),path:Ga,source:Ga,sandbox:Ya}),Za=Fa.object({type:Fa.literal("bundle"),partial:Fa.boolean().optional(),path:Ga,entries:Fa.array(za)});Fa.array(za);var $a=Va.and(Fa.union([Wa,Qa,Ka,Za]));Fa.object({name:Fa.string(),version:Fa.string(),type:Fa.union([Fa.literal("module"),Fa.literal("commonjs")]).optional(),description:Fa.string().optional(),icon:Fa.string().optional(),dependencies:Fa.record(Fa.string()).optional(),devDependencies:Fa.record(Fa.string()).optional(),[ja]:$a});class Xa{}Xa.APP_SETTINGS="app_settings",Xa.APP_FEEDBACKS="app_feedbacks",Xa.CASHREGISTERS="cashregisters",Xa.CASHREGISTERS_TRANSACTIONS="cashregisters_transactions",Xa.COLLECTIONS_DATES_LAST_UPDATE="collections_dates_last_update",Xa.BUILDINGS="buildings",Xa.FOODS="foods",Xa.FOODS_FEEDBACKS="foods_feedbacks",Xa.FOODS_FEEDBACKS_LABELS_ENTRIES="foods_feedbacks_labels_entries",Xa.FOODS_MARKINGS="foods_markings",Xa.MARKINGS="markings",Xa.MARKINGS_EXCLUSIONS="markings_exclusions",Xa.FOODOFFER_MARKINGS="foodoffers_markings",Xa.FOODS_FEEDBACK_LABELS="foods_feedbacks_labels",Xa.APARTMENTS="apartments",Xa.WASHINGMACHINES="washingmachines",Xa.NEWS="news",Xa.PROFILES="profiles",Xa.UTILIZATION_GROUPS="utilizations_groups",Xa.UTILIZATION_ENTRIES="utilizations_entries",Xa.BUSINESSHOURS="businesshours",Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES="canteen_food_feedback_report_schedules",Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_REPORT_RECIPIENTS="canteen_food_feedback_report_schedules_report_recipients",Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_CANTEENS="canteen_food_feedback_report_schedules_canteens",Xa.REPORT_RECIPIENTS="report_recipients",Xa.USERS="directus_users",Xa.CANTEENS="canteens",Xa.PUSH_NOTIFICATIONS="push_notifications",Xa.DEVICES="devices",Xa.FOODOFFERS="foodoffers";const Ja="directus-extension-rocket-meals-bundle";class er{static async checkAllTablesExistWithApiContext(e,t){return await er.checkTablesExist(e,t,[Xa.APP_SETTINGS,Xa.APP_FEEDBACKS,Xa.BUILDINGS,Xa.WASHINGMACHINES,Xa.FOODS_FEEDBACKS_LABELS_ENTRIES,Xa.CASHREGISTERS,Xa.CASHREGISTERS_TRANSACTIONS,Xa.COLLECTIONS_DATES_LAST_UPDATE,Xa.FOODS,Xa.FOODS_FEEDBACKS,Xa.FOODS_MARKINGS,Xa.MARKINGS,Xa.MARKINGS_EXCLUSIONS,Xa.FOODOFFER_MARKINGS,Xa.FOODS_FEEDBACK_LABELS,Xa.APARTMENTS,Xa.NEWS,Xa.PROFILES,Xa.UTILIZATION_GROUPS,Xa.UTILIZATION_ENTRIES,Xa.BUSINESSHOURS,Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES,Xa.USERS,Xa.CANTEENS,Xa.PUSH_NOTIFICATIONS,Xa.DEVICES,Xa.FOODOFFERS,Xa.REPORT_RECIPIENTS,Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_REPORT_RECIPIENTS,Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_CANTEENS])}static async getTableNamesFromApiContext(e){return await er.getTableNames(e.getSchema)}static async getTableNames(e){try{let t=await e(),n=Object.keys(t.collections),s={};for(let e of n){let n=t.collections[e];n&&(s[n.collection]=n.collection)}return Object.keys(s)}catch(e){return console.error("++ "+Ja+" - getTableNames: Error: ",e),[]}}static async checkTablesExist(e,t,n){let s=[],i=await er.getTableNamesFromApiContext(t);for(let e of n)i.includes(e)||s.push(e);let a=0===s.length;if(!a){let t="++ "+Ja+" - "+e+`: Database not initialized yet. Missing tables: ${s.join(", ")}`;console.log(t)}return a}}class tr{constructor(e){this.apiContext=e}}class nr extends tr{async getItemsService(e){const{ItemsService:t}=this.apiContext.services;let n=await this.apiContext.getSchema();return new t(e,{accountability:null,knex:this.apiContext.database,schema:n})}}class sr extends tr{async getFileService(){const{FilesService:e}=this.apiContext.services,t=await this.apiContext.getSchema();return new e({accountability:null,knex:this.apiContext.database,schema:t})}async importByUrl(e,t){const n=await this.getFileService();return await n.importOne(e,t)}async deleteOne(e){const t=await this.getFileService();return await t.deleteOne(e)}}class ir extends tr{async getActivityService(){const{ActivityService:e}=this.apiContext.services,t=await this.apiContext.getSchema();return new e({accountability:null,knex:this.apiContext.database,schema:t})}}class ar extends tr{async getServerService(){const{ServerService:e}=this.apiContext.services,t=await this.apiContext.getSchema();return new e({accountability:null,knex:this.apiContext.database,schema:t})}async getServerInfo(){const e=await this.getServerService();return await e.serverInfo()}}const rr="activity_auto_cleanup";var or=async({schedule:e},t)=>{if(!await er.checkAllTablesExistWithApiContext(rr,t))return;e("0 4 * * *",(async()=>{t.logger.info(rr+": start schedule run: "+(new Date).toISOString());const e=new ir(t),n=await e.getActivityService();{const e="timestamp";t.logger.info(rr+": Deleting old logs");let s=new Date,i=new Date;i.setMinutes(s.getMinutes()-43200);let a=i.toISOString();t.logger.info(rr+": nowMinusMaxDaysISO: "+a);const r={limit:-1,filter:{_and:[{[e]:{_lte:a}}]}};await n.deleteByQuery(r)}}))};class cr{}cr.INIT_APP_STARTED="app.after";var lr={exports:{}},ur={},pr={},dr={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}};!function(e){var t=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyIndexes=e.hasFlag=e.exists=e.list=void 0;const n=t(dr);e.list=Object.keys(n.default);const s={};function i(e){"string"!=typeof e&&(e=String(e));const t=e.indexOf("->");return-1===t?e.length:t}e.list.forEach((e=>{s[e]=n.default[e].flags.reduce((function(e,t){return e[t]=!0,e}),{})})),e.exists=function(e){return Boolean(n.default[e])},e.hasFlag=function(e,t){if(!s[e])throw new Error("Unknown command "+e);return Boolean(s[e][t])},e.getKeyIndexes=function(e,t,s){const a=n.default[e];if(!a)throw new Error("Unknown command "+e);if(!Array.isArray(t))throw new Error("Expect args to be an array");const r=[],o=Boolean(s&&s.parseExternalKey),c=(e,t)=>{const n=[],s=Number(e[t]);for(let e=0;e<s;e++)n.push(e+t+1);return n},l=(e,t,n)=>{for(let s=t;s<e.length-1;s+=1)if(String(e[s]).toLowerCase()===n.toLowerCase())return s+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":r.push(0,...c(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":r.push(...c(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":r.push(...c(t,0));break;case"georadius":{r.push(0);const e=l(t,5,"STORE");e&&r.push(e);const n=l(t,5,"STOREDIST");n&&r.push(n);break}case"georadiusbymember":{r.push(0);const e=l(t,4,"STORE");e&&r.push(e);const n=l(t,4,"STOREDIST");n&&r.push(n);break}case"sort":case"sort_ro":r.push(0);for(let e=1;e<t.length-1;e++){let n=t[e];if("string"!=typeof n)continue;const s=n.toUpperCase();"GET"===s?(e+=1,n=t[e],"#"!==n&&(o?r.push([e,i(n)]):r.push(e))):"BY"===s?(e+=1,o?r.push([e,i(t[e])]):r.push(e)):"STORE"===s&&(e+=1,r.push(e))}break;case"migrate":if(""===t[2])for(let e=5;e<t.length-1;e++){const n=t[e];if("string"==typeof n&&"KEYS"===n.toUpperCase()){for(let n=e+1;n<t.length;n++)r.push(n);break}}else r.push(2);break;case"xreadgroup":case"xread":for(let n="xread"===e?0:3;n<t.length-1;n++)if("STREAMS"===String(t[n]).toUpperCase()){for(let e=n+1;e<=n+(t.length-1-n)/2;e++)r.push(e);break}break;default:if(a.step>0){const e=a.keyStart-1,n=a.keyStop>0?a.keyStop:t.length+a.keyStop+1;for(let t=e;t<n;t+=a.step)r.push(t)}}return r}}(pr);var hr={},fr={};!function(e){let t;function n(n,s){try{const e=t;return t=null,e.apply(this,arguments)}catch(t){return e.errorObj.e=t,e.errorObj}}Object.defineProperty(e,"__esModule",{value:!0}),e.tryCatch=e.errorObj=void 0,e.errorObj={e:{}},e.tryCatch=function(e){return t=e,n}}(fr),Object.defineProperty(hr,"__esModule",{value:!0});const mr=fr;function gr(e){setTimeout((function(){throw e}),0)}hr.default=function(e,t,n){return"function"==typeof t&&e.then((e=>{let s;s=void 0!==n&&Object(n).spread&&Array.isArray(e)?mr.tryCatch(t).apply(void 0,[null].concat(e)):void 0===e?mr.tryCatch(t)(null):mr.tryCatch(t)(null,e),s===mr.errorObj&&gr(s.e)}),(e=>{if(!e){const t=new Error(e+"");Object.assign(t,{cause:e}),e=t}const n=mr.tryCatch(t)(e);n===mr.errorObj&&gr(n.e)})),e};var yr,_r,Er,br,Tr={};const vr=process.version.charCodeAt(1)<55&&46===process.version.charCodeAt(2)?function(){if(_r)return yr;_r=1;const e=n,t=s;function i(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function a(t,n,s){e(n),e.strictEqual(typeof s,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});const i=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=i,this.offset=s,this.buffer=n}function r(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});const t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}function o(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function c(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}return t.inherits(i,Error),Object.defineProperty(i.prototype,"name",{value:"RedisError",configurable:!0,writable:!0}),t.inherits(a,i),Object.defineProperty(a.prototype,"name",{value:"ParserError",configurable:!0,writable:!0}),t.inherits(r,i),Object.defineProperty(r.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0}),t.inherits(o,i),Object.defineProperty(o.prototype,"name",{value:"AbortError",configurable:!0,writable:!0}),t.inherits(c,o),Object.defineProperty(c.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0}),yr={RedisError:i,ParserError:a,ReplyError:r,AbortError:o,InterruptError:c}}():function(){if(br)return Er;br=1;const e=n;class t extends Error{get name(){return this.constructor.name}}class s extends t{get name(){return this.constructor.name}}return Er={RedisError:t,ParserError:class extends t{constructor(t,n,s){e(n),e.strictEqual(typeof s,"number");const i=Error.stackTraceLimit;Error.stackTraceLimit=2,super(t),Error.stackTraceLimit=i,this.offset=s,this.buffer=n}get name(){return this.constructor.name}},ReplyError:class extends t{constructor(e){const t=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=t}get name(){return this.constructor.name}},AbortError:s,InterruptError:class extends s{get name(){return this.constructor.name}}}}();var xr=vr,Sr={},Ar={exports:{}},wr=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],Cr=Ar.exports=function(e){for(var t,n=0,s=-1,i=0,a=0,r="string"==typeof e?function(e){for(var t,n=0,s=0,i=[],a=e.length;n<a;n++)(t=e.charCodeAt(n))<128?i[s++]=t:t<2048?(i[s++]=t>>6|192,i[s++]=63&t|128):55296==(64512&t)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)),i[s++]=t>>18|240,i[s++]=t>>12&63|128,i[s++]=t>>6&63|128,i[s++]=63&t|128):(i[s++]=t>>12|224,i[s++]=t>>6&63|128,i[s++]=63&t|128);return i}(e):e,o=r.length;n<o;){if(t=r[n++],-1===s)123===t&&(s=n);else if(125!==t)a=wr[255&(t^a>>8)]^a<<8;else if(n-1!==s)return 16383&a;i=wr[255&(t^i>>8)]^i<<8}return 16383&i};Ar.exports.generateMulti=function(e){for(var t=1,n=e.length,s=Cr(e[0]);t<n;)if(Cr(e[t++])!==s)return-1;return s};var Nr=Ar.exports,Ir={},kr={},Or=9007199254740991,Dr="[object Arguments]",Rr="[object Function]",Lr="[object GeneratorFunction]",Pr=/^(?:0|[1-9]\d*)$/;function Mr(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Fr=Object.prototype,Br=Fr.hasOwnProperty,Ur=Fr.toString,Hr=Fr.propertyIsEnumerable,jr=Math.max;function Gr(e,t){var n=Kr(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Zr(e)}(e)&&Br.call(e,"callee")&&(!Hr.call(e,"callee")||Ur.call(e)==Dr)}(e)?function(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}(e.length,String):[],s=n.length,i=!!s;for(var a in e)!t&&!Br.call(e,a)||i&&("length"==a||Wr(a,s))||n.push(a);return n}function qr(e,t,n,s){return void 0===e||Qr(e,Fr[n])&&!Br.call(s,n)?t:e}function Yr(e,t,n){var s=e[t];Br.call(e,t)&&Qr(s,n)&&(void 0!==n||t in e)||(e[t]=n)}function zr(e){if(!$r(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n,s,i=(n=(t=e)&&t.constructor,s="function"==typeof n&&n.prototype||Fr,t===s),a=[];for(var r in e)("constructor"!=r||!i&&Br.call(e,r))&&a.push(r);return a}function Vr(e,t){return t=jr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=jr(n.length-t,0),a=Array(i);++s<i;)a[s]=n[t+s];s=-1;for(var r=Array(t+1);++s<t;)r[s]=n[s];return r[t]=a,Mr(e,this,r)}}function Wr(e,t){return!!(t=null==t?Or:t)&&("number"==typeof e||Pr.test(e))&&e>-1&&e%1==0&&e<t}function Qr(e,t){return e===t||e!=e&&t!=t}var Kr=Array.isArray;function Zr(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Or}(e.length)&&!function(e){var t=$r(e)?Ur.call(e):"";return t==Rr||t==Lr}(e)}function $r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var Xr,Jr=(Xr=function(e,t,n,s){!function(e,t,n,s){n||(n={});for(var i=-1,a=t.length;++i<a;){var r=t[i],o=s?s(n[r],e[r],r,n,e):void 0;Yr(n,r,void 0===o?e[r]:o)}}(t,function(e){return Zr(e)?Gr(e,!0):zr(e)}(t),e,s)},Vr((function(e,t){var n=-1,s=t.length,i=s>1?t[s-1]:void 0,a=s>2?t[2]:void 0;for(i=Xr.length>3&&"function"==typeof i?(s--,i):void 0,a&&function(e,t,n){if(!$r(n))return!1;var s=typeof t;return!!("number"==s?Zr(n)&&Wr(t,n.length):"string"==s&&t in n)&&Qr(n[t],e)}(t[0],t[1],a)&&(i=s<3?void 0:i,s=1),e=Object(e);++n<s;){var r=t[n];r&&Xr(e,r,n,i)}return e})));var eo=Vr((function(e){return e.push(void 0,qr),Mr(Jr,void 0,e)})),to=9007199254740991,no="[object Function]",so="[object GeneratorFunction]",io=Object.prototype,ao=io.hasOwnProperty,ro=io.toString,oo=io.propertyIsEnumerable;var co=function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=to}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?ro.call(e):"";return t==no||t==so}(e)}(e)}(e)&&ao.call(e,"callee")&&(!oo.call(e,"callee")||"[object Arguments]"==ro.call(e))};Object.defineProperty(kr,"__esModule",{value:!0}),kr.isArguments=kr.defaults=kr.noop=void 0;const lo=eo;kr.defaults=lo;const uo=co;kr.isArguments=uo,kr.noop=function(){};var po={};Object.defineProperty(po,"__esModule",{value:!0}),po.genRedactedString=po.getStringValue=po.MAX_ARGUMENT_LENGTH=void 0;const ho=cn;po.MAX_ARGUMENT_LENGTH=200;function fo(e){if(null!==e)switch(typeof e){case"boolean":case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch(e){return}case"string":return e}}function mo(e,t){const{length:n}=e;return n<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+n+'">'}po.getStringValue=fo,po.genRedactedString=mo,po.default=function(e){const t=(0,ho.default)(`ioredis:${e}`);function n(...e){if(t.enabled){for(let t=1;t<e.length;t++){const n=fo(e[t]);"string"==typeof n&&n.length>200&&(e[t]=mo(n,200))}return t.apply(null,e)}}return Object.defineProperties(n,{namespace:{get:()=>t.namespace},enabled:{get:()=>t.enabled},destroy:{get:()=>t.destroy},log:{get:()=>t.log,set(e){t.log=e}}}),n};var go={};Object.defineProperty(go,"__esModule",{value:!0});const yo="-----BEGIN CERTIFICATE-----\nMIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV\nBAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1\ndGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV\nBAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1\ndGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP\nJnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz\nrmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E\nQwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2\nBDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3\nTMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp\n4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w\nMB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w\nDQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta\nlbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6\nSu8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ\nuFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k\nBpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp\nZ4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx\nCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w\nKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN\nMTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG\nA1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy\nbWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA\nA4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv\nTq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4\nVuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym\nhjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W\nP0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN\nr0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw\nhhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s\nUzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u\nP1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9\nMjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT\nt5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID\nAQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy\nLnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw\nAYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G\nA1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4\nL2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB\nhjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr\nAP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW\nvcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw\n7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+\nXoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc\nAUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1\njQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh\n/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z\nzDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli\niF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43\niqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo\n616pxqo=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV\nBAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz\nTGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y\naXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC\nVVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz\nMS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw\nggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1\nG5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY\nDm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl\npp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT\nULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag\n54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ\nxeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC\nJpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K\n2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3\nStsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI\nSIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B\ncS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL\nyzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T\nAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg\nz5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu\nrYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3\n3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+\nhSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ\nD0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj\nTY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l\nFXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj\nmcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf\nybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji\nn8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F\nUhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM\nMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv\nYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y\nNTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu\nIG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy\nMDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf\n8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD\nBVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg\nofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK\ndZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh\ncounQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu\njE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG\nCCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW\nBBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj\nmove4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw\nMi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1\ncmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w\nK6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD\nVR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC\nAQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/\n3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY\n0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX\ny+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3\n15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5\nZgKnO/Fx2hBgTxhOTMYaD312kg==\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G\nA1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp\nZ24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4\nMTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG\nA1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI\nhvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8\nRgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT\ngHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm\nKPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd\nQQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ\nXriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw\nDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o\nLkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU\nRUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp\njjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK\n6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX\nmcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs\nMx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH\nWD9f\n-----END CERTIFICATE-----",_o={RedisCloudFixed:{ca:yo},RedisCloudFlexible:{ca:yo}};go.default=_o,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.noop=e.defaults=e.Debug=e.zipMap=e.CONNECTION_CLOSED_ERROR_MSG=e.shuffle=e.sample=e.resolveTLSProfile=e.parseURL=e.optimizeErrorStack=e.toArg=e.convertMapToArray=e.convertObjectToArray=e.timeout=e.packObject=e.isInt=e.wrapMultiResult=e.convertBufferToString=void 0;const t=a,n=kr;Object.defineProperty(e,"defaults",{enumerable:!0,get:function(){return n.defaults}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return n.noop}});const s=po;e.Debug=s.default;const i=go;function r(e){const t=parseFloat(e);return!isNaN(e)&&(0|t)===t}e.convertBufferToString=function e(t,n){if(t instanceof Buffer)return t.toString(n);if(Array.isArray(t)){const s=t.length,i=Array(s);for(let a=0;a<s;++a)i[a]=t[a]instanceof Buffer&&"utf8"===n?t[a].toString():e(t[a],n);return i}return t},e.wrapMultiResult=function(e){if(!e)return null;const t=[],n=e.length;for(let s=0;s<n;++s){const n=e[s];n instanceof Error?t.push([n]):t.push([null,n])}return t},e.isInt=r,e.packObject=function(e){const t={},n=e.length;for(let s=1;s<n;s+=2)t[e[s-1]]=e[s];return t},e.timeout=function(e,t){let n=null;const s=function(){n&&(clearTimeout(n),n=null,e.apply(this,arguments))};return n=setTimeout(s,t,new Error("timeout")),s},e.convertObjectToArray=function(e){const t=[],n=Object.keys(e);for(let s=0,i=n.length;s<i;s++)t.push(n[s],e[n[s]]);return t},e.convertMapToArray=function(e){const t=[];let n=0;return e.forEach((function(e,s){t[n]=s,t[n+1]=e,n+=2})),t},e.toArg=function(e){return null==e?"":String(e)},e.optimizeErrorStack=function(e,t,n){const s=t.split("\n");let i,a="";for(i=1;i<s.length&&-1!==s[i].indexOf(n);++i);for(let e=i;e<s.length;++e)a+="\n"+s[e];if(e.stack){const t=e.stack.indexOf("\n");e.stack=e.stack.slice(0,t)+a}return e},e.parseURL=function(e){if(r(e))return{port:e};let s=(0,t.parse)(e,!0,!0);s.slashes||"/"===e[0]||(e="//"+e,s=(0,t.parse)(e,!0,!0));const i=s.query||{},a={};if(s.auth){const e=s.auth.indexOf(":");a.username=-1===e?s.auth:s.auth.slice(0,e),a.password=-1===e?"":s.auth.slice(e+1)}if(s.pathname&&("redis:"===s.protocol||"rediss:"===s.protocol?s.pathname.length>1&&(a.db=s.pathname.slice(1)):a.path=s.pathname),s.host&&(a.host=s.hostname),s.port&&(a.port=s.port),"string"==typeof i.family){const e=Number.parseInt(i.family,10);Number.isNaN(e)||(a.family=e)}return(0,n.defaults)(a,i),a},e.resolveTLSProfile=function(e){let t=null==e?void 0:e.tls;"string"==typeof t&&(t={profile:t});const n=i.default[null==t?void 0:t.profile];return n&&(t=Object.assign({},n,t),delete t.profile,e=Object.assign({},e,{tls:t})),e},e.sample=function(e,t=0){const n=e.length;return t>=n?null:e[t+Math.floor(Math.random()*(n-t))]},e.shuffle=function(e){let t=e.length;for(;t>0;){const n=Math.floor(Math.random()*t);t--,[e[t],e[n]]=[e[n],e[t]]}return e},e.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.",e.zipMap=function(e,t){const n=new Map;return e.forEach(((e,s)=>{n.set(e,t[s])})),n}}(Ir),Object.defineProperty(Sr,"__esModule",{value:!0});const Eo=pr,bo=Nr,To=hr,vo=Ir;class xo{constructor(e,t=[],n={},s){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=t.flat(),this.callback=s,this.initPromise(),n.keyPrefix){const e=n.keyPrefix instanceof Buffer;let t=e?n.keyPrefix:null;this._iterateKeys((s=>s instanceof Buffer?(null===t&&(t=Buffer.from(n.keyPrefix)),Buffer.concat([t,s])):e?Buffer.concat([n.keyPrefix,Buffer.from(String(s))]):n.keyPrefix+s))}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(xo.FLAGS).reduce(((e,t)=>(e[t]={},xo.FLAGS[t].forEach((n=>{e[t][n]=!0})),e)),{})),this.flagMap}getSlot(){if(void 0===this.slot){const e=this.getKeys()[0];this.slot=null==e?null:bo(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let t;const n="*"+(this.args.length+1)+"\r\n$"+Buffer.byteLength(this.name)+"\r\n"+this.name+"\r\n";if(this.bufferMode){const e=new wo;e.push(n);for(let t=0;t<this.args.length;++t){const n=this.args[t];n instanceof Buffer?0===n.length?e.push("$0\r\n\r\n"):(e.push("$"+n.length+"\r\n"),e.push(n),e.push("\r\n")):e.push("$"+Buffer.byteLength(n)+"\r\n"+n+"\r\n")}t=e.toBuffer()}else{t=n;for(let e=0;e<this.args.length;++e){const n=this.args[e];t+="$"+Buffer.byteLength(n)+"\r\n"+n+"\r\n"}}return t}stringifyArguments(){for(let e=0;e<this.args.length;++e){const t=this.args[e];"string"==typeof t||(t instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,vo.toArg)(t))}}transformReply(e){this.replyEncoding&&(e=(0,vo.convertBufferToString)(e,this.replyEncoding));const t=xo._transformer.reply[this.name];return t&&(e=t(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout((()=>{this.isResolved||this.reject(new Error("Command timed out"))}),e))}initPromise(){const e=new Promise(((e,t)=>{if(!this.transformed){this.transformed=!0;const e=xo._transformer.argument[this.name];e&&(this.args=e(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(e),this.errorStack?this.reject=e=>{t((0,vo.optimizeErrorStack)(e,this.errorStack.stack,__dirname))}:this.reject=t}));this.promise=(0,To.default)(e,this.callback)}_iterateKeys(e=(e=>e)){if(void 0===this.keys&&(this.keys=[],(0,Eo.exists)(this.name))){const t=(0,Eo.getKeyIndexes)(this.name,this.args);for(const n of t)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return t=>{try{const n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(t)),this.isResolved=!0}catch(e){this.reject(e)}return this.promise}}}Sr.default=xo,xo.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"]},xo._transformer={argument:{},reply:{}};const So=function(e){if(1===e.length){if(e[0]instanceof Map)return(0,vo.convertMapToArray)(e[0]);if("object"==typeof e[0]&&null!==e[0])return(0,vo.convertObjectToArray)(e[0])}return e},Ao=function(e){if(2===e.length){if(e[1]instanceof Map)return[e[0]].concat((0,vo.convertMapToArray)(e[1]));if("object"==typeof e[1]&&null!==e[1])return[e[0]].concat((0,vo.convertObjectToArray)(e[1]))}return e};xo.setArgumentTransformer("mset",So),xo.setArgumentTransformer("msetnx",So),xo.setArgumentTransformer("hset",Ao),xo.setArgumentTransformer("hmset",Ao),xo.setReplyTransformer("hgetall",(function(e){if(Array.isArray(e)){const t={};for(let n=0;n<e.length;n+=2){const s=e[n],i=e[n+1];s in t?Object.defineProperty(t,s,{value:i,configurable:!0,enumerable:!0,writable:!0}):t[s]=i}return t}return e}));class wo{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){const e=Buffer.allocUnsafe(this.length);let t=0;for(const n of this.items){const s=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,t):e.write(n,t,s),t+=s}return e}}var Co={};Object.defineProperty(Co,"__esModule",{value:!0});const No=xr;class Io extends No.RedisError{constructor(e,t){super(e),this.lastNodeError=t,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}Co.default=Io,Io.defaultMessage="Failed to refresh slots cache.";var ko={};Object.defineProperty(ko,"__esModule",{value:!0});const Oo=c;class Do extends Oo.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained)return void this.push(null);const e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.redis[this.opt.command](e,((e,t)=>{e?this.emit("error",e):(this._redisCursor=t[0]instanceof Buffer?t[0].toString():t[0],"0"===this._redisCursor&&(this._redisDrained=!0),this.push(t[1]))}))}close(){this._redisDrained=!0}}ko.default=Do;var Ro={},Lo={},Po={},Mo={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.executeWithAutoPipelining=e.getFirstValueInFlattenedArray=e.shouldUseAutoPipelining=e.notAllowedAutoPipelineCommands=e.kCallbacks=e.kExec=void 0;const t=kr,n=Nr,s=hr;function i(t,n){if(t._runningAutoPipelines.has(n))return;if(!t._autoPipelines.has(n))return;t._runningAutoPipelines.add(n);const s=t._autoPipelines.get(n);t._autoPipelines.delete(n);const a=s[e.kCallbacks];s[e.kCallbacks]=null,s.exec((function(e,s){if(t._runningAutoPipelines.delete(n),e)for(let t=0;t<a.length;t++)process.nextTick(a[t],e);else for(let e=0;e<a.length;e++)process.nextTick(a[e],...s[e]);t._autoPipelines.has(n)&&i(t,n)}))}function a(e){for(let n=0;n<e.length;n++){const s=e[n];if("string"==typeof s)return s;if(Array.isArray(s)||(0,t.isArguments)(s)){if(0===s.length)continue;return s[0]}const i=[s].flat();if(i.length>0)return i[0]}}e.kExec=Symbol("exec"),e.kCallbacks=Symbol("callbacks"),e.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select"],e.shouldUseAutoPipelining=function(t,n,s){return n&&t.options.enableAutoPipelining&&!t.isPipeline&&!e.notAllowedAutoPipelineCommands.includes(s)&&!t.options.autoPipeliningIgnoredCommands.includes(s)},e.getFirstValueInFlattenedArray=a,e.executeWithAutoPipelining=function r(o,c,l,u,p){if(o.isCluster&&!o.slots.length)return"wait"===o.status&&o.connect().catch(t.noop),(0,s.default)(new Promise((function(e,t){o.delayUntilReady((n=>{n?t(n):r(o,c,l,u,null).then(e,t)}))})),p);const d=o.options.keyPrefix||"",h=o.isCluster?o.slots[n(`${d}${a(u)}`)].join(","):"main";if(!o._autoPipelines.has(h)){const t=o.pipeline();t[e.kExec]=!1,t[e.kCallbacks]=[],o._autoPipelines.set(h,t)}const f=o._autoPipelines.get(h);f[e.kExec]||(f[e.kExec]=!0,setImmediate(i,o,h));const m=new Promise((function(t,n){f[e.kCallbacks].push((function(e,s){e?n(e):t(s)})),"call"===c&&u.unshift(l),f[c](...u)}));return(0,s.default)(m,p)}}(Mo);var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});const Bo=u,Uo=Sr,Ho=hr;Fo.default=class{constructor(e,t=null,n="",s=!1){this.lua=e,this.numberOfKeys=t,this.keyPrefix=n,this.readOnly=s,this.sha=(0,Bo.createHash)("sha1").update(e).digest("hex");const i=this.sha,a=new WeakSet;this.Command=class extends Uo.default{toWritable(t){const n=this.reject;return this.reject=e=>{-1!==e.message.indexOf("NOSCRIPT")&&a.delete(t),n.call(this,e)},a.has(t)?"eval"===this.name&&(this.name="evalsha",this.args[0]=i):(a.add(t),this.name="eval",this.args[0]=e),super.toWritable(t)}}}execute(e,t,n,s){"number"==typeof this.numberOfKeys&&t.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);const i=new this.Command("evalsha",[this.sha,...t],n);return i.promise=i.promise.catch((s=>{if(-1===s.message.indexOf("NOSCRIPT"))throw s;const i=new this.Command("evalsha",[this.sha,...t],n);return(e.isPipeline?e.redis:e).sendCommand(i)})),(0,Ho.default)(i.promise,s),e.sendCommand(i)}},Object.defineProperty(Po,"__esModule",{value:!0});const jo=pr,Go=Mo,qo=Sr,Yo=Fo;class zo{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return Vo.slice(0)}createBuiltinCommand(e){return{string:Wo(null,e,"utf8"),buffer:Wo(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=Wo(e,e,"utf8"),this[e+"Buffer"]=Wo(e+"Buffer",e,null)}defineCommand(e,t){const n=new Yo.default(t.lua,t.numberOfKeys,this.options.keyPrefix,t.readOnly);this.scriptsSet[e]=n,this[e]=Qo(e,e,n,"utf8"),this[e+"Buffer"]=Qo(e+"Buffer",e,n,null)}sendCommand(e,t,n){throw new Error('"sendCommand" is not implemented')}}const Vo=jo.list.filter((e=>"monitor"!==e));function Wo(e,t,n){return void 0===n&&(n=t,t=null),function(...s){const i=t||s.shift();let a=s[s.length-1];"function"==typeof a?s.pop():a=void 0;const r={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:n};return(0,Go.shouldUseAutoPipelining)(this,e,i)?(0,Go.executeWithAutoPipelining)(this,e,i,s,a):this.sendCommand(new qo.default(i,s,r,a))}}function Qo(e,t,n,s){return function(...i){const a="function"==typeof i[i.length-1]?i.pop():void 0,r={replyEncoding:s};return this.options.showFriendlyErrorStack&&(r.errorStack=new Error),(0,Go.shouldUseAutoPipelining)(this,e,t)?(0,Go.executeWithAutoPipelining)(this,e,t,i,a):n.execute(this,i,r,a)}}Vo.push("sentinel"),Vo.forEach((function(e){zo.prototype[e]=Wo(e,e,"utf8"),zo.prototype[e+"Buffer"]=Wo(e+"Buffer",e,null)})),zo.prototype.call=Wo("call","utf8"),zo.prototype.callBuffer=Wo("callBuffer",null),zo.prototype.send_command=zo.prototype.call,Po.default=zo,Object.defineProperty(Lo,"__esModule",{value:!0});const Ko=Nr,Zo=pr,$o=hr,Xo=s,Jo=Sr,ec=Ir,tc=Po;class nc extends tc.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster="Cluster"===this.redis.constructor.name||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach((t=>{const n=e.scriptsSet[t];this._shaToScript[n.sha]=n,this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]})),e.addedBuiltinSet.forEach((t=>{this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]})),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}));const t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}fillResult(e,t){if("exec"===this._queue[t].name&&Array.isArray(e[1])){const n=e[1].length;for(let s=0;s<n;s++){if(e[1][s]instanceof Error)continue;const i=this._queue[t-(n-s)];try{e[1][s]=i.transformReply(e[1][s])}catch(t){e[1][s]=t}}}if(this._result[t]=e,--this.replyPending)return;if(this.isCluster){let e,t=!0;for(let n=0;n<this._result.length;++n){const s=this._result[n][0],i=this._queue[n];if(s){if("exec"===i.name&&"EXECABORT Transaction discarded because of previous errors."===s.message)continue;if(e){if(e.name!==s.name||e.message!==s.message){t=!1;break}}else e={name:s.name,message:s.message}}else if(!i.inTransaction){if(!((0,Zo.exists)(i.name)&&(0,Zo.hasFlag)(i.name,"readonly"))){t=!1;break}}}if(e&&t){const t=this,n=e.message.split(" "),s=this._queue;let i=!1;this._queue=[];for(let e=0;e<s.length;++e){if(!("ASK"!==n[0]||i||"asking"===s[e].name||s[e-1]&&"asking"===s[e-1].name)){const e=new Jo.default("asking");e.ignore=!0,this.sendCommand(e)}s[e].initPromise(),this.sendCommand(s[e]),i=s[e].inTransaction}let a=!0;void 0===this.leftRedirections&&(this.leftRedirections={});const r=function(){t.exec()},o=this.redis;if(o.handleError(e,this.leftRedirections,{moved:function(e,s){t.preferKey=s,o.slots[n[1]]=[s],o._groupsBySlot[n[1]]=o._groupsIds[o.slots[n[1]].join(";")],o.refreshSlotsCache(),t.exec()},ask:function(e,n){t.preferKey=n,t.exec()},tryagain:r,clusterDown:r,connectionClosed:r,maxRedirections:()=>{a=!1},defaults:()=>{a=!1}}),a)return}}let n=0;for(let e=0;e<this._queue.length-n;++e)this._queue[e+n].ignore&&(n+=1),this._result[e]=this._result[e+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);const t=this._queue.length;return e.pipelineIndex=t,e.promise.then((e=>{this.fillResult([null,e],t)})).catch((e=>{this.fillResult([e],t)})),this._queue.push(e),this}addBatch(e){let t,n,s;for(let i=0;i<e.length;++i)t=e[i],n=t[0],s=t.slice(1),this[n].apply(this,s);return this}}Lo.default=nc;const sc=nc.prototype.multi;nc.prototype.multi=function(){return this._transactions+=1,sc.apply(this,arguments)};const ic=nc.prototype.execBuffer;nc.prototype.execBuffer=(0,Xo.deprecate)((function(){return this._transactions>0&&(this._transactions-=1),ic.apply(this,arguments)}),"Pipeline#execBuffer: Use Pipeline#exec instead"),nc.prototype.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(ec.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,$o.default)(this.promise,e)),this.redis.delayUntilReady((t=>{t?this.reject(t):this.exec(e)})),this.promise;if(this._transactions>0)return this._transactions-=1,ic.apply(this,arguments);let t;if(this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,$o.default)(this.promise,e)),this._queue.length||this.resolve([]),this.isCluster){const e=[];for(let t=0;t<this._queue.length;t++){const n=this._queue[t].getKeys();if(n.length&&e.push(n[0]),n.length&&Ko.generateMulti(n)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(e.length){if(t=function(e,t){const n=Ko(t[0]),s=e._groupsBySlot[n];for(let n=1;n<t.length;n++)if(e._groupsBySlot[Ko(t[n])]!==s)return-1;return n}(this.redis,e),t<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=16384*Math.random()|0}const n=this;return function(){let e,s=n.replyPending=n._queue.length;n.isCluster&&(e={slot:t,redis:n.redis.connectionPool.nodes.all[n.preferKey]});let i,a="";const r={isPipeline:!0,destination:n.isCluster?e:{redis:n.redis},write(e){"string"!=typeof e?(i||(i=[]),a&&(i.push(Buffer.from(a,"utf8")),a=""),i.push(e)):a+=e,--s||(i?(a&&i.push(Buffer.from(a,"utf8")),r.destination.redis.stream.write(Buffer.concat(i))):r.destination.redis.stream.write(a),s=n._queue.length,a="",i=void 0)}};for(let t=0;t<n._queue.length;++t)n.redis.sendCommand(n._queue[t],r,e);n.promise}(),this.promise},Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.addTransactionSupport=void 0;const ac=Ir,rc=hr,oc=Lo;Ro.addTransactionSupport=function(e){e.pipeline=function(e){const t=new oc.default(this);return Array.isArray(e)&&t.addBatch(e),t};const{multi:t}=e;e.multi=function(e,n){if(void 0!==n||Array.isArray(e)||(n=e,e=null),n&&!1===n.pipeline)return t.call(this);const s=new oc.default(this);s.multi(),Array.isArray(e)&&s.addBatch(e);const i=s.exec;s.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(ac.noop),(0,rc.default)(new Promise(((e,t)=>{this.redis.delayUntilReady((n=>{n?t(n):this.exec(s).then(e,t)}))})),e);if(this._transactions>0&&i.call(s),this.nodeifiedPromise)return i.call(s);const t=i.call(s);return(0,rc.default)(t.then((function(e){const t=e[e.length-1];if(void 0===t)throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(t[0]){t[0].previousErrors=[];for(let n=0;n<e.length-1;++n)e[n][0]&&t[0].previousErrors.push(e[n][0]);throw t[0]}return(0,ac.wrapMultiResult)(t[1])})),e)};const{execBuffer:a}=s;return s.execBuffer=function(e){return this._transactions>0&&a.call(s),s.exec(e)},s};const{exec:n}=e;e.exec=function(e){return(0,rc.default)(n.call(this).then((function(e){return Array.isArray(e)&&(e=(0,ac.wrapMultiResult)(e)),e})),e)}};var cc={};Object.defineProperty(cc,"__esModule",{value:!0}),cc.default=function(e,t){Object.getOwnPropertyNames(t.prototype).forEach((n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))}))};var lc={};Object.defineProperty(lc,"__esModule",{value:!0}),lc.DEFAULT_CLUSTER_OPTIONS=void 0;const uc=p;lc.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+2*e,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:uc.resolveSrv,dnsLookup:uc.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[]};var pc={},dc={};Object.defineProperty(dc,"__esModule",{value:!0}),dc.getConnectionName=dc.weightSrvRecords=dc.groupSrvRecords=dc.getUniqueHostnamesFromOptions=dc.normalizeNodeOptions=dc.nodeKeyToRedisOptions=dc.getNodeKey=void 0;const hc=Ir,fc=d;var mc;dc.getNodeKey=function(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port},dc.nodeKeyToRedisOptions=function(e){const t=e.lastIndexOf(":");if(-1===t)throw new Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}},dc.normalizeNodeOptions=function(e){return e.map((e=>{const t={};if("object"==typeof e)Object.assign(t,e);else if("string"==typeof e)Object.assign(t,(0,hc.parseURL)(e));else{if("number"!=typeof e)throw new Error("Invalid argument "+e);t.port=e}return"string"==typeof t.port&&(t.port=parseInt(t.port,10)),delete t.db,t.port||(t.port=6379),t.host||(t.host="127.0.0.1"),(0,hc.resolveTLSProfile)(t)}))},dc.getUniqueHostnamesFromOptions=function(e){const t={};return e.forEach((e=>{t[e.host]=!0})),Object.keys(t).filter((e=>!(0,fc.isIP)(e)))},dc.groupSrvRecords=function(e){const t={};for(const n of e)t.hasOwnProperty(n.priority)?(t[n.priority].totalWeight+=n.weight,t[n.priority].records.push(n)):t[n.priority]={totalWeight:n.weight,records:[n]};return t},dc.weightSrvRecords=function(e){if(1===e.records.length)return e.totalWeight=0,e.records.shift();const t=Math.floor(Math.random()*(e.totalWeight+e.records.length));let n=0;for(const[s,i]of e.records.entries())if(n+=1+i.weight,n>t)return e.totalWeight-=i.weight,e.records.splice(s,1),i},dc.getConnectionName=function(e,t){const n=`ioredis-cluster(${e})`;return t?`${n}:${t}`:n};var gc,yc={};var _c={};function Ec(e,t){t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}Ec.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),t=this._head+t&this._capacityMask,this._list[t]}},Ec.prototype.get=function(e){return this.peekAt(e)},Ec.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},Ec.prototype.peekFront=function(){return this.peek()},Ec.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(Ec.prototype,"length",{get:function(){return this.size()}}),Ec.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},Ec.prototype.unshift=function(e){if(0===arguments.length)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},Ec.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},Ec.prototype.push=function(e){if(0===arguments.length)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},Ec.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}},Ec.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var n=this.size(),s=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n),t=this._head+t&this._capacityMask;var i,a=this._list[t];if(e<n/2){for(i=e;i>0;i--)this._list[t]=this._list[t=t-1+s&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+s&this._capacityMask}else{for(i=n-1-e;i>0;i--)this._list[t]=this._list[t=t+1+s&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+s&this._capacityMask}return a}}},Ec.prototype.remove=function(e,t){var n,s=e,i=t;if(s===(0|s)&&this._head!==this._tail){var a=this.size(),r=this._list.length;if(!(s>=a||s<-a||t<1)){if(s<0&&(s+=a),1===t||!t)return(n=new Array(1))[0]=this.removeOne(s),n;if(0===s&&s+t>=a)return n=this.toArray(),this.clear(),n;var o;for(s+t>a&&(t=a-s),n=new Array(t),o=0;o<t;o++)n[o]=this._list[this._head+s+o&this._capacityMask];if(s=this._head+s&this._capacityMask,e+t===a){for(this._tail=this._tail-t+r&this._capacityMask,o=t;o>0;o--)this._list[s=s+1+r&this._capacityMask]=void 0;return n}if(0===e){for(this._head=this._head+t+r&this._capacityMask,o=t-1;o>0;o--)this._list[s=s+1+r&this._capacityMask]=void 0;return n}if(s<a/2){for(this._head=this._head+e+t+r&this._capacityMask,o=e;o>0;o--)this.unshift(this._list[s=s-1+r&this._capacityMask]);for(s=this._head-1+r&this._capacityMask;i>0;)this._list[s=s-1+r&this._capacityMask]=void 0,i--;e<0&&(this._tail=s)}else{for(this._tail=s,s=s+t+r&this._capacityMask,o=a-(t+e);o>0;o--)this.push(this._list[s++]);for(s=this._tail;i>0;)this._list[s=s+1+r&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=r>>>2&&this._shrinkArray(),n}}},Ec.prototype.splice=function(e,t){var n=e;if(n===(0|n)){var s=this.size();if(n<0&&(n+=s),!(n>s)){if(arguments.length>2){var i,a,r,o=arguments.length,c=this._list.length,l=2;if(!s||n<s/2){for(a=new Array(n),i=0;i<n;i++)a[i]=this._list[this._head+i&this._capacityMask];for(0===t?(r=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(r=this.remove(n,t),this._head=this._head+n+c&this._capacityMask);o>l;)this.unshift(arguments[--o]);for(i=n;i>0;i--)this.unshift(a[i-1])}else{var u=(a=new Array(s-(n+t))).length;for(i=0;i<u;i++)a[i]=this._list[this._head+n+t+i&this._capacityMask];for(0===t?(r=[],n!=s&&(this._tail=this._head+n+c&this._capacityMask)):(r=this.remove(n,t),this._tail=this._tail-u+c&this._capacityMask);l<o;)this.push(arguments[l++]);for(i=0;i<u;i++)this.push(a[i])}return r}return this.remove(n,t)}}},Ec.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},Ec.prototype.isEmpty=function(){return this._head===this._tail},Ec.prototype.toArray=function(){return this._copyArray(!1)},Ec.prototype._fromArray=function(e){var t=e.length,n=this._nextPowerOf2(t);this._list=new Array(n),this._capacityMask=n-1,this._tail=t;for(var s=0;s<t;s++)this._list[s]=e[s]},Ec.prototype._copyArray=function(e,t){var n=this._list,s=n.length,i=this.length;if((t|=i)==i&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a,r=new Array(t),o=0;if(e||this._head>this._tail){for(a=this._head;a<s;a++)r[o++]=n[a];for(a=0;a<this._tail;a++)r[o++]=n[a]}else for(a=this._head;a<this._tail;a++)r[o++]=n[a];return r},Ec.prototype._growArray=function(){if(0!=this._head){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},Ec.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},Ec.prototype._nextPowerOf2=function(e){var t=1<<Math.log(e)/Math.log(2)+1;return Math.max(t,4)};var bc=Ec;Object.defineProperty(_c,"__esModule",{value:!0});const Tc=bc,vc=(0,Ir.Debug)("delayqueue");var xc;function Sc(){if(xc)return Tr;xc=1,Object.defineProperty(Tr,"__esModule",{value:!0});const e=pr,n=t,s=xr,i=hr,a=Sr,r=Co,o=wl(),c=ko,l=Ro,u=Ir,p=cc,d=Po,h=lc,f=function(){if(mc)return pc;mc=1,Object.defineProperty(pc,"__esModule",{value:!0});const e=dc,t=Ir,n=wl(),s=(0,t.Debug)("cluster:subscriber");return pc.default=class{constructor(t,n){this.connectionPool=t,this.emitter=n,this.started=!1,this.subscriber=null,this.onSubscriberEnd=()=>{this.started?(s("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()):s("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.")},this.connectionPool.on("-node",((t,n)=>{this.started&&this.subscriber&&(0,e.getNodeKey)(this.subscriber.options)===n&&(s("subscriber has left, selecting a new one..."),this.selectSubscriber())})),this.connectionPool.on("+node",(()=>{this.started&&!this.subscriber&&(s("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())}))}getInstance(){return this.subscriber}start(){this.started=!0,this.selectSubscriber(),s("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null),s("stopped")}selectSubscriber(){const i=this.lastActiveSubscriber;i&&(i.off("end",this.onSubscriberEnd),i.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());const a=(0,t.sample)(this.connectionPool.getNodes());if(!a)return s("selecting subscriber failed since there is no node discovered in the cluster yet"),void(this.subscriber=null);const{options:r}=a;s("selected a subscriber %s:%s",r.host,r.port),this.subscriber=new n.default({port:r.port,host:r.host,username:r.username,password:r.password,enableReadyCheck:!0,connectionName:(0,e.getConnectionName)("subscriber",r.connectionName),lazyConnect:!0,tls:r.tls,retryStrategy:null}),this.subscriber.on("error",t.noop),this.subscriber.once("end",this.onSubscriberEnd);const o={subscribe:[],psubscribe:[],ssubscribe:[]};if(i){const e=i.condition||i.prevCondition;e&&e.subscriber&&(o.subscribe=e.subscriber.channels("subscribe"),o.psubscribe=e.subscriber.channels("psubscribe"),o.ssubscribe=e.subscriber.channels("ssubscribe"))}if(o.subscribe.length||o.psubscribe.length||o.ssubscribe.length){let e=0;for(const t of["subscribe","psubscribe","ssubscribe"]){const n=o[t];n.length&&(e+=1,s("%s %d channels",t,n.length),this.subscriber[t](n).then((()=>{--e||(this.lastActiveSubscriber=this.subscriber)})).catch((()=>{s("failed to %s %d channels",t,n.length)})))}}else this.lastActiveSubscriber=this.subscriber;for(const e of["message","messageBuffer","smessage","smessageBuffer"])this.subscriber.on(e,((t,n)=>{this.emitter.emit(e,t,n)}));for(const e of["pmessage","pmessageBuffer"])this.subscriber.on(e,((t,n,s)=>{this.emitter.emit(e,t,n,s)}))}},pc}(),m=function(){if(gc)return yc;gc=1,Object.defineProperty(yc,"__esModule",{value:!0});const e=t,n=Ir,s=dc,i=wl(),a=(0,n.Debug)("cluster:connectionPool");let r=class extends e.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){const t=this.nodes[e];return Object.keys(t).map((e=>t[e]))}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){const t=Object.keys(this.nodes[e]),s=(0,n.sample)(t);return this.nodes[e][s]}findOrCreate(e,t=!1){const r=(0,s.getNodeKey)(e);let o;return t=Boolean(t),this.specifiedOptions[r]?Object.assign(e,this.specifiedOptions[r]):this.specifiedOptions[r]=e,this.nodes.all[r]?(o=this.nodes.all[r],o.options.readOnly!==t&&(o.options.readOnly=t,a("Change role of %s to %s",r,t?"slave":"master"),o[t?"readonly":"readwrite"]().catch(n.noop),t?(delete this.nodes.master[r],this.nodes.slave[r]=o):(delete this.nodes.slave[r],this.nodes.master[r]=o))):(a("Connecting to %s as %s",r,t?"slave":"master"),o=new i.default((0,n.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:t},e,this.redisOptions,{lazyConnect:!0})),this.nodes.all[r]=o,this.nodes[t?"slave":"master"][r]=o,o.once("end",(()=>{this.removeNode(r),this.emit("-node",o,r),Object.keys(this.nodes.all).length||this.emit("drain")})),this.emit("+node",o,r),o.on("error",(function(e){this.emit("nodeError",e,r)}))),o}reset(e){a("Reset with %O",e);const t={};e.forEach((e=>{const n=(0,s.getNodeKey)(e);e.readOnly&&t[n]||(t[n]=e)})),Object.keys(this.nodes.all).forEach((e=>{t[e]||(a("Disconnect %s because the node does not hold any slot",e),this.nodes.all[e].disconnect(),this.removeNode(e))})),Object.keys(t).forEach((e=>{const n=t[e];this.findOrCreate(n,n.readOnly)}))}removeNode(e){const{nodes:t}=this;t.all[e]&&(a("Remove %s from the pool",e),delete t.all[e]),delete t.master[e],delete t.slave[e]}};return yc.default=r,yc}(),g=_c,y=dc,_=bc,E=(0,u.Debug)("cluster"),b=new WeakSet;class T extends d.default{constructor(e,t={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new g.default,this.offlineQueue=new _,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,n.EventEmitter.call(this),this.startupNodes=e,this.options=(0,u.defaults)({},t,h.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),"function"!=typeof this.options.scaleReads&&-1===["all","master","slave"].indexOf(this.options.scaleReads))throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new m.default(this.options.redisOptions),this.connectionPool.on("-node",((e,t)=>{this.emit("-node",e)})),this.connectionPool.on("+node",(e=>{this.emit("+node",e)})),this.connectionPool.on("drain",(()=>{this.setStatus("close")})),this.connectionPool.on("nodeError",((e,t)=>{this.emit("node error",e,t)})),this.subscriber=new f.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach((([e,t])=>{this.defineCommand(e,t)})),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch((e=>{E("connecting failed: %s",e)}))}connect(){return new Promise(((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(new Error("Redis is already connecting/connected"));const n=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then((i=>{if(this.connectionEpoch!==n)return E("discard connecting after resolving startup nodes because epoch not match: %d != %d",n,this.connectionEpoch),void t(new s.RedisError("Connection is discarded because a new connection is made"));if("connecting"!==this.status)return E("discard connecting after resolving startup nodes because the status changed to %s",this.status),void t(new s.RedisError("Connection is aborted"));this.connectionPool.reset(i);const a=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()};let c;const l=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",c),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck(((e,t)=>{e||t?(E("Ready check failed (%s). Reconnecting...",e||t),"connect"===this.status&&this.disconnect(!0)):a()})):a()};c=()=>{const e=new Error("None of startup nodes is available");this.removeListener("refresh",l),this.invokeReadyDelayedCallbacks(e),t(e)},this.once("refresh",l),this.once("close",c),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache((e=>{e&&e.message===r.default.defaultMessage&&(o.default.prototype.silentEmit.call(this,"error",e),this.connectionPool.reset([]))})),this.subscriber.start()})).catch((e=>{this.setStatus("close"),this.handleCloseEvent(e),this.invokeReadyDelayedCallbacks(e),t(e)}))}))}disconnect(e=!1){const t=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,E("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),"wait"===t?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){const t=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),"wait"===t){const t=(0,i.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),t}return(0,i.default)(Promise.all(this.nodes().map((e=>e.quit().catch((e=>{if(e.message===u.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw e}))))).then((()=>"OK")),e)}duplicate(e=[],t={}){const n=e.length>0?e:this.startupNodes.slice(0),s=Object.assign({},this.options,t);return new T(n,s)}nodes(e="all"){if("all"!==e&&"master"!==e&&"slave"!==e)throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values())e+=t.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;const t=this,n=e=>{this.isRefreshing=!1;for(const t of this._refreshSlotsCacheCallbacks)t(e);this._refreshSlotsCacheCallbacks=[]},s=(0,u.shuffle)(this.connectionPool.getNodes());let i=null;!function e(a){if(a===s.length){const e=new r.default(r.default.defaultMessage,i);return n(e)}const o=s[a],c=`${o.options.host}:${o.options.port}`;E("getting slot cache from %s",c),t.getInfoFromNode(o,(function(s){switch(t.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}s?(t.emit("node error",s,c),i=s,e(a+1)):(t.emit("refresh"),n())}))}(0)}sendCommand(t,n,i){if("wait"===this.status&&this.connect().catch(u.noop),"end"===this.status)return t.reject(new Error(u.CONNECTION_CLOSED_ERROR_MSG)),t.promise;let r=this.options.scaleReads;if("master"!==r){t.isReadOnly||(0,e.exists)(t.name)&&(0,e.hasFlag)(t.name,"readonly")||(r="master")}let o=i?i.slot:t.getSlot();const c={},l=this;if(!i&&!b.has(t)){b.add(t);const e=t.reject;t.reject=function(n){const s=p.bind(null,!0);l.handleError(n,c,{moved:function(e,n){E("command %s is moved to %s",t.name,n),o=Number(e),l.slots[e]?l.slots[e][0]=n:l.slots[e]=[n],l._groupsBySlot[e]=l._groupsIds[l.slots[e].join(";")],l.connectionPool.findOrCreate(l.natMapper(n)),p(),E("refreshing slot caches... (triggered by MOVED error)"),l.refreshSlotsCache()},ask:function(e,n){E("command %s is required to ask %s:%s",t.name,n);const s=l.natMapper(n);l.connectionPool.findOrCreate(s),p(!1,`${s.host}:${s.port}`)},tryagain:s,clusterDown:s,connectionClosed:s,maxRedirections:function(n){e.call(t,n)},defaults:function(){e.call(t,n)}})}}function p(e,c){if("end"===l.status)return void t.reject(new s.AbortError("Cluster is ended."));let p;if("ready"===l.status||"cluster"===t.name){if(i&&i.redis)p=i.redis;else if(a.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.name)||a.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.name)){if(p=l.subscriber.getInstance(),!p)return void t.reject(new s.AbortError("No subscriber for the cluster"))}else{if(!e){if("number"==typeof o&&l.slots[o]){const e=l.slots[o];if("function"==typeof r){const n=e.map((function(e){return l.connectionPool.getInstanceByKey(e)}));p=r(n,t),Array.isArray(p)&&(p=(0,u.sample)(p)),p||(p=n[0])}else{let t;t="all"===r?(0,u.sample)(e):"slave"===r&&e.length>1?(0,u.sample)(e,1):e[0],p=l.connectionPool.getInstanceByKey(t)}}c&&(p=l.connectionPool.getInstanceByKey(c),p.asking())}p||(p=("function"==typeof r?null:l.connectionPool.getSampleInstance(r))||l.connectionPool.getSampleInstance("all"))}i&&!i.redis&&(i.redis=p)}p?p.sendCommand(t,n):l.options.enableOfflineQueue?l.offlineQueue.push({command:t,stream:n,node:i}):t.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return p(),t.promise}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}handleError(e,t,n){if(void 0===t.value?t.value=this.options.maxRedirections:t.value-=1,t.value<=0)return void n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));const s=e.message.split(" ");if("MOVED"===s[0]){const e=this.options.retryDelayOnMoved;e&&"number"==typeof e?this.delayQueue.push("moved",n.moved.bind(null,s[1],s[2]),{timeout:e}):n.moved(s[1],s[2])}else"ASK"===s[0]?n.ask(s[1],s[2]):"TRYAGAIN"===s[0]?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):"CLUSTERDOWN"===s[0]&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===u.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&"ready"===this.status?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new _}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;const e=()=>{this.slotsTimer=setTimeout((()=>{E('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache((()=>{e()}))}),this.options.slotsRefreshInterval)};e()}setStatus(e){E("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick((()=>{this.emit(e)}))}handleCloseEvent(e){let t;e&&E("closed because %s",e),this.manuallyClosing||"function"!=typeof this.options.clusterRetryStrategy||(t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),"number"==typeof t?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout((()=>{this.reconnectTimeout=null,E("Cluster is disconnected. Retrying after %dms",t),this.connect().catch((function(e){E("Got error %s when reconnecting. Ignoring...",e)}))}),t)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let t;for(;t=this.offlineQueue.shift();)t.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){E("send %d commands in offline queue",this.offlineQueue.length);const e=this.offlineQueue;let t;for(this.resetOfflineQueue();t=e.shift();)this.sendCommand(t.command,t.stream,t.node)}}natMapper(e){if(this.options.natMap&&"object"==typeof this.options.natMap){const t="string"==typeof e?e:`${e.host}:${e.port}`,n=this.options.natMap[t];if(n)return E("NAT mapping %s -> %O",t,n),Object.assign({},n)}return"string"==typeof e?(0,y.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,t){if(!e)return t(new Error("Node is disconnected"));const n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,y.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",u.noop),n.cluster("SLOTS",(0,u.timeout)(((e,s)=>{if(n.disconnect(),e)return t(e);if("disconnecting"===this.status||"close"===this.status||"end"===this.status)return E("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),void t();const i=[];E("cluster slots result count: %d",s.length);for(let e=0;e<s.length;++e){const t=s[e],n=t[0],a=t[1],r=[];for(let e=2;e<t.length;e++){if(!t[e][0])continue;const n=this.natMapper({host:t[e][0],port:t[e][1]});n.readOnly=2!==e,i.push(n),r.push(n.host+":"+n.port)}E("cluster slots result [%d]: slots %d~%d served by %s",e,n,a,r);for(let e=n;e<=a;e++)this.slots[e]=r}this._groupsIds=Object.create(null);let a=0;for(let e=0;e<16384;e++){const t=(this.slots[e]||[]).join(";");t.length?(this._groupsIds[t]||(this._groupsIds[t]=++a),this._groupsBySlot[e]=this._groupsIds[t]):this._groupsBySlot[e]=void 0}this.connectionPool.reset(i),t()}),this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(const t of this._readyDelayedCallbacks)process.nextTick(t,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",((t,n)=>{if(t)return e(t);if("string"!=typeof n)return e();let s;const i=n.split("\r\n");for(let e=0;e<i.length;++e){const t=i[e].split(":");if("cluster_state"===t[0]){s=t[1];break}}"fail"===s?(E("cluster state not ok (%s)",s),e(null,s)):e()}))}resolveSrv(e){return new Promise(((t,n)=>{this.options.resolveSrv(e,((e,s)=>{if(e)return n(e);const i=this,a=(0,y.groupSrvRecords)(s),r=Object.keys(a).sort(((e,t)=>parseInt(e)-parseInt(t)));!function e(s){if(!r.length)return n(s);const o=r[0],c=a[o],l=(0,y.weightSrvRecords)(c);c.records.length||r.shift(),i.dnsLookup(l.name).then((e=>t({host:e,port:l.port})),e)}()}))}))}dnsLookup(e){return new Promise(((t,n)=>{this.options.dnsLookup(e,((s,i)=>{s?(E("failed to resolve hostname %s to IP: %s",e,s.message),n(s)):(E("resolved hostname %s to IP %s",e,i),t(i))}))}))}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||0===this.startupNodes.length)throw new Error("`startupNodes` should contain at least one node.");const e=(0,y.normalizeNodeOptions)(this.startupNodes),t=(0,y.getUniqueHostnamesFromOptions)(e);if(0===t.length)return e;const n=await Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),s=(0,u.zipMap)(t,n);return e.map((e=>{const t=s.get(e.host);return t?this.options.useSRVRecords?Object.assign({},e,t):Object.assign({},e,{host:t}):e}))}createScanStream(e,{key:t,options:n={}}){return new c.default({objectMode:!0,key:t,redis:this,command:e,...n})}}return(0,p.default)(T,n.EventEmitter),(0,l.addTransactionSupport)(T.prototype),Tr.default=T,Tr}_c.default=class{constructor(){this.queues={},this.timeouts={}}push(e,t,n){const s=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new Tc);this.queues[e].push(t),this.timeouts[e]||(this.timeouts[e]=setTimeout((()=>{s((()=>{this.timeouts[e]=null,this.execute(e)}))}),n.timeout))}execute(e){const t=this.queues[e];if(!t)return;const{length:n}=t;if(n)for(vc("send %d commands in %s queue",n,e),this.queues[e]=null;t.length>0;)t.shift()()}};var Ac={},wc={},Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});const Nc=(0,Ir.Debug)("AbstractConnector");Cc.default=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){const e=this.stream,t=setTimeout((()=>{Nc("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()}),this.disconnectTimeout);e.on("close",(()=>clearTimeout(t))),e.end()}}},Object.defineProperty(wc,"__esModule",{value:!0});const Ic=d,kc=h,Oc=Ir,Dc=Cc;class Rc extends Dc.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){const{options:t}=this;let n;return this.connecting=!0,"path"in t&&t.path?n={path:t.path}:(n={},"port"in t&&null!=t.port&&(n.port=t.port),"host"in t&&null!=t.host&&(n.host=t.host),"family"in t&&null!=t.family&&(n.family=t.family)),t.tls&&Object.assign(n,t.tls),new Promise(((e,s)=>{process.nextTick((()=>{if(this.connecting){try{t.tls?this.stream=(0,kc.connect)(n):this.stream=(0,Ic.createConnection)(n)}catch(e){return void s(e)}this.stream.once("error",(e=>{this.firstError=e})),e(this.stream)}else s(new Error(Oc.CONNECTION_CLOSED_ERROR_MSG))}))}))}}wc.default=Rc;var Lc={},Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.default=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){const e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&1!==this.cursor&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let s=0;s<this.sentinels.length;s++)if(t=e,n=this.sentinels[s],(t.host||"127.0.0.1")===(n.host||"127.0.0.1")&&(t.port||26379)===(n.port||26379))return!1;var t,n;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.FailoverDetector=void 0;const Fc=(0,Ir.Debug)("FailoverDetector"),Bc="+switch-master";var Uc,Hc;function jc(){if(Uc)return Lc;Uc=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.SentinelIterator=void 0;const e=d,t=Ir,n=h,s=Pc;Lc.SentinelIterator=s.default;const i=Cc,a=wl(),r=Mc,o=(0,t.Debug)("SentinelConnector");let c=class extends i.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new s.default(this.options.sentinels)}check(e){const t=!e.role||this.options.role===e.role;return t||(o("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),t}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(s){let i;this.connecting=!0,this.retryAttempts=0;const a=async()=>{const r=this.sentinelIterator.next();if(r.done){this.sentinelIterator.reset(!1);const e="function"==typeof this.options.sentinelRetryStrategy?this.options.sentinelRetryStrategy(++this.retryAttempts):null;let t="number"!=typeof e?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${e}ms.`;i&&(t+=` Last error: ${i.message}`),o(t);const n=new Error(t);if("number"==typeof e)return s("error",n),await new Promise((t=>setTimeout(t,e))),a();throw n}let c=null,l=null;try{c=await this.resolve(r.value)}catch(e){l=e}if(!this.connecting)throw new Error(t.CONNECTION_CLOSED_ERROR_MSG);const u=r.value.host+":"+r.value.port;if(c)return o("resolved: %s:%s from sentinel %s",c.host,c.port,u),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(c,this.options.tls),this.stream=(0,n.connect)(c),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,e.createConnection)(c),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",(e=>{this.firstError=e})),this.stream;{const e=l?"failed to connect to sentinel "+u+" because "+l.message:"connected to sentinel "+u+" successfully, but got an invalid reply: "+c;return o(e),s("sentinelError",new Error(e)),l&&(i=l),a()}};return a()}async updateSentinels(e){if(!this.options.updateSentinels)return;const n=await e.sentinel("sentinels",this.options.name);Array.isArray(n)&&(n.map(t.packObject).forEach((e=>{if(-1===(e.flags?e.flags.split(","):[]).indexOf("disconnected")&&e.ip&&e.port){const t=this.sentinelNatResolve(l(e));this.sentinelIterator.add(t)&&o("adding sentinel %s:%s",t.host,t.port)}})),o("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){const t=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:Number(t[1])}:null)}async resolveSlave(e){const n=await e.sentinel("slaves",this.options.name);if(!Array.isArray(n))return null;const s=n.map(t.packObject).filter((e=>e.flags&&!e.flags.match(/(disconnected|s_down|o_down)/)));return this.sentinelNatResolve(function(e,n){if(0===e.length)return null;let s;if("function"==typeof n)s=n(e);else if(null!==n&&"object"==typeof n){const t=Array.isArray(n)?n:[n];t.sort(((e,t)=>(e.prio||(e.prio=1),t.prio||(t.prio=1),e.prio<t.prio?-1:e.prio>t.prio?1:0)));for(let n=0;n<t.length;n++){for(let i=0;i<e.length;i++){const a=e[i];if(a.ip===t[n].ip&&a.port===t[n].port){s=a;break}}if(s)break}}s||(s=(0,t.sample)(e));return l(s)}(s,this.options.preferredSlaves))}sentinelNatResolve(e){return e&&this.options.natMap&&this.options.natMap[`${e.host}:${e.port}`]||e}connectToSentinel(e,t){return new a.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...t})}async resolve(e){const t=this.connectToSentinel(e);t.on("error",u);try{return"slave"===this.options.role?await this.resolveSlave(t):await this.resolveMaster(t)}finally{t.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);const t=[];for(;t.length<this.options.sentinelMaxConnections;){const{done:e,value:n}=this.sentinelIterator.next();if(e)break;const s=this.connectToSentinel(n,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",(()=>{var e;null===(e=this.emitter)||void 0===e||e.emit("sentinelReconnecting")})),t.push({address:n,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new r.FailoverDetector(this,t),await this.failoverDetector.subscribe(),null===(e=this.emitter)||void 0===e||e.emit("failoverSubscribed")}};function l(e){return{host:e.ip,port:Number(e.port)}}function u(){}return Lc.default=c,Lc}Mc.FailoverDetector=class{constructor(e,t){this.isDisconnected=!1,this.connector=e,this.sentinels=t}cleanup(){this.isDisconnected=!0;for(const e of this.sentinels)e.client.disconnect()}async subscribe(){Fc("Starting FailoverDetector");const e=[];for(const t of this.sentinels){const n=t.client.subscribe(Bc).catch((e=>{Fc("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,e.message)}));e.push(n),t.client.on("message",(e=>{this.isDisconnected||e!==Bc||this.disconnect()}))}await Promise.all(e)}disconnect(){this.isDisconnected=!0,Fc("Failover detected, disconnecting"),this.connector.disconnect()}};var Gc={},qc={},Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});const zc=xr;class Vc extends zc.AbortError{constructor(e){super(`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}Yc.default=Vc,Object.defineProperty(qc,"__esModule",{value:!0}),qc.MaxRetriesPerRequestError=void 0;const Wc=Yc;qc.MaxRetriesPerRequestError=Wc.default;var Qc={};const Kc=f.Buffer,Zc=new(0,m.StringDecoder),$c=xr,Xc=$c.ReplyError,Jc=$c.ParserError;var el=Kc.allocUnsafe(32768),tl=0,nl=null,sl=0,il=0;function al(e){const t=e.offset,n=e.buffer,s=n.length-1;for(var i=t;i<s;)if(13===n[i++])return e.offset=i+1,!0===e.optionReturnBuffers?e.buffer.slice(t,i-1):e.buffer.toString("utf8",t,i-1)}function rl(e){const t=e.buffer.length-1;for(var n=e.offset,s=0;n<t;){const t=e.buffer[n++];if(13===t)return e.offset=n+1,s;s=10*s+(t-48)}}function ol(e,t,n){e.arrayCache.push(t),e.arrayPos.push(n)}function cl(e){const t=e.arrayCache.pop();var n=e.arrayPos.pop();if(e.arrayCache.length){const s=cl(e);if(void 0===s)return void ol(e,t,n);t[n++]=s}return ll(e,t,n)}function ll(e,t,n){const s=e.buffer.length;for(;n<t.length;){const i=e.offset;if(e.offset>=s)return void ol(e,t,n);const a=ul(e,e.buffer[e.offset++]);if(void 0===a)return e.arrayCache.length||e.bufferCache.length||(e.offset=i),void ol(e,t,n);t[n]=a,n++}return t}function ul(e,t){switch(t){case 36:return function(e){const t=rl(e);if(void 0===t)return;if(t<0)return null;const n=e.offset+t;if(n+2>e.buffer.length)return e.bigStrSize=n+2,e.totalChunkSize=e.buffer.length,void e.bufferCache.push(e.buffer);const s=e.offset;return e.offset=n+2,!0===e.optionReturnBuffers?e.buffer.slice(s,n):e.buffer.toString("utf8",s,n)}(e);case 43:return al(e);case 42:return function(e){const t=rl(e);if(void 0===t)return;return t<0?null:ll(e,new Array(t),0)}(e);case 58:return function(e){return!0===e.optionStringNumbers?function(e){const t=e.buffer.length-1;var n=e.offset,s=0,i="";for(45===e.buffer[n]&&(i+="-",n++);n<t;){var a=e.buffer[n++];if(13===a)return e.offset=n+1,0!==s&&(i+=s),i;s>429496728?(i+=10*s+(a-48),s=0):48===a&&0===s?i+=0:s=10*s+(a-48)}}(e):function(e){const t=e.buffer.length-1;var n=e.offset,s=0,i=1;for(45===e.buffer[n]&&(i=-1,n++);n<t;){const t=e.buffer[n++];if(13===t)return e.offset=n+1,i*s;s=10*s+(t-48)}}(e)}(e);case 45:return function(e){var t=al(e);if(void 0!==t)return!0===e.optionReturnBuffers&&(t=t.toString()),new Xc(t)}(e);default:return function(e,t){const n=new Jc("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(n)}(e,t)}}function pl(){if(el.length>51200)if(1===sl||il>2*sl){const e=Math.floor(el.length/10),t=e<tl?tl:e;tl=0,el=el.slice(t,el.length)}else il++,sl--;else clearInterval(nl),sl=0,il=0,nl=null}function dl(e){const t=e.bufferCache,n=e.offset,s=e.bigStrSize-n-2;var i=t.length,a=e.bigStrSize-e.totalChunkSize;if(e.offset=a,a<=2){if(2===i)return t[0].slice(n,t[0].length+a-2);i--,a=t[t.length-2].length+a}!function(e){if(el.length<e+tl){const t=e>78643200?2:3;tl>116391936&&(tl=52428800),el=Kc.allocUnsafe(e*t+tl),tl=0,sl++,null===nl&&(nl=setInterval(pl,50))}}(s);const r=tl;t[0].copy(el,r,n,t[0].length),tl+=t[0].length-n;for(var o=1;o<i-1;o++)t[o].copy(el,tl),tl+=t[o].length;return t[o].copy(el,tl,0,a-2),tl+=a-2,el.slice(r,tl)}var hl=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if("function"!=typeof e.returnError||"function"!=typeof e.returnReply)throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if("boolean"!=typeof e)throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if("boolean"!=typeof e)throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(null===this.buffer)this.buffer=e,this.offset=0;else if(0===this.bigStrSize){const t=this.buffer.length,n=t-this.offset,s=Kc.allocUnsafe(n+e.length);if(this.buffer.copy(s,0,this.offset,t),e.copy(s,n,0,e.length),this.buffer=s,this.offset=0,this.arrayCache.length){const e=cl(this);if(void 0===e)return;this.returnReply(e)}}else{if(!(this.totalChunkSize+e.length>=this.bigStrSize))return this.bufferCache.push(e),void(this.totalChunkSize+=e.length);this.bufferCache.push(e);var t=this.optionReturnBuffers?dl(this):function(e){const t=e.bufferCache,n=e.offset;var s=t.length,i=e.bigStrSize-e.totalChunkSize;if(e.offset=i,i<=2){if(2===s)return t[0].toString("utf8",n,t[0].length+i-2);s--,i=t[t.length-2].length+i}for(var a=Zc.write(t[0].slice(n)),r=1;r<s-1;r++)a+=Zc.write(t[r]);return a+Zc.end(t[r].slice(0,i-2))}(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=t,void 0===(t=cl(this))))return;this.returnReply(t)}for(;this.offset<this.buffer.length;){const e=this.offset,t=this.buffer[this.offset++],n=ul(this,t);if(void 0===n)return void(this.arrayCache.length||this.bufferCache.length||(this.offset=e));45===t?this.returnError(n):this.returnReply(n)}this.buffer=null}},fl=hl,ml={};Object.defineProperty(ml,"__esModule",{value:!0});function gl(e){return"unsubscribe"===e?"subscribe":"punsubscribe"===e?"psubscribe":"sunsubscribe"===e?"ssubscribe":e}ml.default=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,t){this.set[gl(e)][t]=!0}del(e,t){delete this.set[gl(e)][t]}channels(e){return Object.keys(this.set[gl(e)])}isEmpty(){return 0===this.channels("subscribe").length&&0===this.channels("psubscribe").length&&0===this.channels("ssubscribe").length}},Object.defineProperty(Qc,"__esModule",{value:!0});const yl=Sr,_l=fl,El=ml,bl=(0,Ir.Debug)("dataHandler");Qc.default=class{constructor(e,t){this.redis=e;const n=new _l({stringNumbers:t.stringNumbers,returnBuffers:!0,returnError:e=>{this.returnError(e)},returnFatalError:e=>{this.returnFatalError(e)},returnReply:e=>{this.returnReply(e)}});e.stream.on("data",(e=>{n.execute(e)}))}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){const t=this.shiftCommand(e);t&&(e.command={name:t.command.name,args:t.command.args},this.redis.handleReconnection(e,t))}returnReply(e){if(this.handleMonitorReply(e))return;if(this.handleSubscriberReply(e))return;const t=this.shiftCommand(e);t&&(yl.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)?(this.redis.condition.subscriber=new El.default,this.redis.condition.subscriber.add(t.command.name,e[1].toString()),vl(t.command,e[2])||this.redis.commandQueue.unshift(t)):yl.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)?xl(t.command,e[2])||this.redis.commandQueue.unshift(t):t.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;const t=Array.isArray(e)?e[0].toString():null;switch(bl('receive reply "%s" in subscriber mode',t),t){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{const t=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",t,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",t,e[2],e[3]);break}case"smessage":this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break;case"ssubscribe":case"subscribe":case"psubscribe":{const n=e[1].toString();this.redis.condition.subscriber.add(t,n);const s=this.shiftCommand(e);if(!s)return;vl(s.command,e[2])||this.redis.commandQueue.unshift(s);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{const n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(t,n);const s=e[2];0===Number(s)&&(this.redis.condition.subscriber=!1);const i=this.shiftCommand(e);if(!i)return;xl(i.command,s)||this.redis.commandQueue.unshift(i);break}default:{const t=this.shiftCommand(e);if(!t)return;t.command.resolve(e)}}return!0}handleMonitorReply(e){if("monitoring"!==this.redis.status)return!1;const t=e.toString();if("OK"===t)return!1;const n=t.indexOf(" "),s=t.slice(0,n),i=t.indexOf('"'),a=t.slice(i+1,-1).split('" "').map((e=>e.replace(/\\"/g,'"'))),r=t.slice(n+2,i-2).split(" ");return this.redis.emit("monitor",s,a,r[1],r[0]),!0}shiftCommand(e){const t=this.redis.commandQueue.shift();if(!t){const t=new Error("Command queue state error. If you can reproduce this, please report it."+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",t),null}return t}};const Tl=new WeakMap;function vl(e,t){let n=Tl.has(e)?Tl.get(e):e.args.length;return n-=1,n<=0?(e.resolve(t),Tl.delete(e),!0):(Tl.set(e,n),!1)}function xl(e,t){let n=Tl.has(e)?Tl.get(e):e.args.length;return 0===n?0===Number(t)&&(Tl.delete(e),e.resolve(t),!0):(n-=1,n<=0?(e.resolve(t),!0):(Tl.set(e,n),!1))}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readyHandler=e.errorHandler=e.closeHandler=e.connectHandler=void 0;const t=xr,n=Sr,s=qc,i=Ir,a=Qc,r=(0,i.Debug)("connection");function o(e){const n=new t.AbortError("Command aborted due to connection close");return n.command={name:e.name,args:e.args},n}e.connectHandler=function(t){return function(){t.setStatus("connect"),t.resetCommandQueue();let n=!1;const{connectionEpoch:s}=t;t.condition.auth&&t.auth(t.condition.auth,(function(e){s===t.connectionEpoch&&e&&(-1!==e.message.indexOf("no password is set")?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):-1!==e.message.indexOf("without any password configured for the default user")?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):-1!==e.message.indexOf("wrong number of arguments for 'auth' command")?console.warn("[ERROR] The server returned \"wrong number of arguments for 'auth' command\". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under."):(n=!0,t.recoverFromFatalError(e,e)))})),t.condition.select&&t.select(t.condition.select).catch((e=>{t.silentEmit("error",e)})),t.options.enableReadyCheck||e.readyHandler(t)(),new a.default(t,{stringNumbers:t.options.stringNumbers}),t.options.enableReadyCheck&&t._readyCheck((function(i,a){s===t.connectionEpoch&&(i?n||t.recoverFromFatalError(new Error("Ready check failed: "+i.message),i):t.connector.check(a)?e.readyHandler(t)():t.disconnect(!0))}))}},e.closeHandler=function(e){return function(){const n=e.status;if(e.setStatus("close"),e.commandQueue.length&&function(e){var t;let n=0;for(let s=0;s<e.length;){const i=null===(t=e.peekAt(s))||void 0===t?void 0:t.command,a=i.pipelineIndex;void 0!==a&&0!==a||(n=0),void 0===a||a===n++?s++:(e.remove(s,1),i.reject(o(i)))}}(e.commandQueue),e.offlineQueue.length&&function(e){var t;for(let n=0;n<e.length;){const s=null===(t=e.peekAt(n))||void 0===t?void 0:t.command;if("multi"===s.name)break;if("exec"===s.name){e.remove(n,1),s.reject(o(s));break}s.inTransaction?(e.remove(n,1),s.reject(o(s))):n++}}(e.offlineQueue),"ready"===n&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,r("skip reconnecting since the connection is manually closed."),t();if("function"!=typeof e.options.retryStrategy)return r("skip reconnecting because `retryStrategy` is not a function"),t();const a=e.options.retryStrategy(++e.retryAttempts);if("number"!=typeof a)return r("skip reconnecting because `retryStrategy` doesn't return a number"),t();r("reconnect in %sms",a),e.setStatus("reconnecting",a),e.reconnectTimeout=setTimeout((function(){e.reconnectTimeout=null,e.connect().catch(i.noop)}),a);const{maxRetriesPerRequest:c}=e.options;if("number"==typeof c)if(c<0)r("maxRetriesPerRequest is negative, ignoring...");else{0===e.retryAttempts%(c+1)&&(r("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new s.MaxRetriesPerRequestError(c)))}};function t(){e.setStatus("end"),e.flushQueue(new Error(i.CONNECTION_CLOSED_ERROR_MSG))}},e.errorHandler=function(e){return function(t){r("error: %s",t),e.silentEmit("error",t)}},e.readyHandler=function(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then((()=>e.setStatus("monitoring")),(t=>e.emit("error",t)));const{sendCommand:t}=e;return e.sendCommand=function(s){return n.default.checkFlag("VALID_IN_MONITOR_MODE",s.name)?t.call(e,s):(s.reject(new Error("Connection is in monitoring mode, can't process commands.")),s.promise)},void e.once("close",(function(){delete e.sendCommand}))}const t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.connectionName&&(r("set the connection name [%s]",e.options.connectionName),e.client("setname",e.options.connectionName).catch(i.noop)),e.options.readOnly&&(r("set the connection to readonly mode"),e.readonly().catch(i.noop)),e.prevCondition){const n=e.prevCondition;if(e.prevCondition=null,n.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(r("connect to db [%d]",t),e.select(t));const s=n.subscriber.channels("subscribe");s.length&&(r("subscribe %d channels",s.length),e.subscribe(s));const i=n.subscriber.channels("psubscribe");i.length&&(r("psubscribe %d channels",i.length),e.psubscribe(i));const a=n.subscriber.channels("ssubscribe");a.length&&(r("ssubscribe %d channels",a.length),e.ssubscribe(a))}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(r("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){const t=e.prevCommandQueue.shift();t.select!==e.condition.select&&"select"!==t.command.name&&e.select(t.select),e.sendCommand(t.command,t.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){r("send %d commands in offline queue",e.offlineQueue.length);const t=e.offlineQueue;for(e.resetOfflineQueue();t.length>0;){const n=t.shift();n.select!==e.condition.select&&"select"!==n.command.name&&e.select(n.select),e.sendCommand(n.command,n.stream)}}e.condition.select!==t&&(r("connect to db [%d]",t),e.select(t))}}}(Gc);var Sl,Al={};function wl(){if(Sl)return ur;Sl=1,Object.defineProperty(ur,"__esModule",{value:!0});const e=pr,n=t,s=hr,i=Sc(),a=Sr,r=function(){if(Hc)return Ac;Hc=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.SentinelConnector=Ac.StandaloneConnector=void 0;const e=wc;Ac.StandaloneConnector=e.default;const t=jc();return Ac.SentinelConnector=t.default,Ac}(),o=jc(),c=Gc,l=Al,u=ko,p=Ro,d=Ir,h=cc,f=Po,m=kr,g=bc,y=(0,d.Debug)("redis");class _ extends f.default{constructor(e,t,s){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,t,s),n.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){const e=new o.default(this.options);e.emitter=this,this.connector=e}else this.connector=new r.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach((([e,t])=>{this.defineCommand(e,t)})),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(m.noop)}static createClient(...e){return new _(...e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values())e+=t.length;return e}connect(e){const t=new Promise(((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(new Error("Redis is already connecting/connected"));this.connectionEpoch+=1,this.setStatus("connecting");const{options:n}=this;this.condition={select:n.db,auth:n.username?[n.username,n.password]:n.password,subscriber:!1};const i=this;(0,s.default)(this.connector.connect((function(e,t){i.silentEmit(e,t)})),(function(s,a){if(s)return i.flushQueue(s),i.silentEmit("error",s),t(s),void i.setStatus("end");let r=n.tls?"secureConnect":"connect";if("sentinels"in n&&n.sentinels&&!n.enableTLSForSentinelMode&&(r="connect"),i.stream=a,n.noDelay&&a.setNoDelay(!0),"number"==typeof n.keepAlive&&(a.connecting?a.once(r,(()=>{a.setKeepAlive(!0,n.keepAlive)})):a.setKeepAlive(!0,n.keepAlive)),a.connecting){if(a.once(r,c.connectHandler(i)),n.connectTimeout){let e=!1;a.setTimeout(n.connectTimeout,(function(){if(e)return;a.setTimeout(0),a.destroy();const t=new Error("connect ETIMEDOUT");t.errorno="ETIMEDOUT",t.code="ETIMEDOUT",t.syscall="connect",c.errorHandler(i)(t)})),a.once(r,(function(){e=!0,a.setTimeout(0)}))}}else if(a.destroyed){const e=i.connector.firstError;e&&process.nextTick((()=>{c.errorHandler(i)(e)})),process.nextTick(c.closeHandler(i))}else process.nextTick(c.connectHandler(i));a.destroyed||(a.once("error",c.errorHandler(i)),a.once("close",c.closeHandler(i)));const o=function(){i.removeListener("close",l),e()};var l=function(){i.removeListener("ready",o),t(new Error(d.CONNECTION_CLOSED_ERROR_MSG))};i.once("ready",o),i.once("close",l)}))}));return(0,s.default)(t,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),"wait"===this.status?c.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new _({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":(null===(e=this.condition)||void 0===e?void 0:e.subscriber)?"subscriber":"normal"}monitor(e){const t=this.duplicate({monitor:!0,lazyConnect:!1});return(0,s.default)(new Promise((function(e,n){t.once("error",n),t.once("monitoring",(function(){e(t)}))})),e)}sendCommand(t,n){var s,i;if("wait"===this.status&&this.connect().catch(m.noop),"end"===this.status)return t.reject(new Error(d.CONNECTION_CLOSED_ERROR_MSG)),t.promise;if((null===(s=this.condition)||void 0===s?void 0:s.subscriber)&&!a.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",t.name))return t.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),t.promise;"number"==typeof this.options.commandTimeout&&t.setTimeout(this.options.commandTimeout);let r="ready"===this.status||!n&&"connect"===this.status&&(0,e.exists)(t.name)&&(0,e.hasFlag)(t.name,"loading");if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(r=!1):r=!1,r)y.enabled&&y("write command[%s]: %d -> %s(%o)",this._getDescription(),null===(i=this.condition)||void 0===i?void 0:i.select,t.name,t.args),n?"isPipeline"in n&&n.isPipeline?n.write(t.toWritable(n.destination.redis.stream)):n.write(t.toWritable(n)):this.stream.write(t.toWritable(this.stream)),this.commandQueue.push({command:t,stream:n,select:this.condition.select}),a.default.checkFlag("WILL_DISCONNECT",t.name)&&(this.manuallyClosing=!0),void 0!==this.options.socketTimeout&&void 0===this.socketTimeoutTimer&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return t.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),t.promise;if("quit"===t.name&&0===this.offlineQueue.length)return this.disconnect(),t.resolve(Buffer.from("OK")),t.promise;y.enabled&&y("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,t.name,t.args),this.offlineQueue.push({command:t,stream:n,select:this.condition.select})}if("select"===t.name&&(0,d.isInt)(t.args[0])){const e=parseInt(t.args[0],10);this.condition.select!==e&&(this.condition.select=e,this.emit("select",e),y("switch to db [%d]",this.condition.select))}return t.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout((()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0}),this.options.socketTimeout),this.stream.once("data",(()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,0!==this.commandQueue.length&&this.setSocketTimeout()}))}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}silentEmit(e,t){let n;if("error"===e){if(n=t,"end"===this.status)return;if(this.manuallyClosing&&n instanceof Error&&(n.message===d.CONNECTION_CLOSED_ERROR_MSG||"connect"===n.syscall||"read"===n.syscall))return}return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,t,n){this.flushQueue(t,n),this.silentEmit("error",t),this.disconnect(!0)}handleReconnection(e,t){var n;let s=!1;switch(this.options.reconnectOnError&&(s=this.options.reconnectOnError(e)),s){case 1:case!0:"reconnecting"!==this.status&&this.disconnect(!0),t.command.reject(e);break;case 2:"reconnecting"!==this.status&&this.disconnect(!0),(null===(n=this.condition)||void 0===n?void 0:n.select)!==t.select&&"select"!==t.command.name&&this.select(t.select),this.sendCommand(t.command);break;default:t.command.reject(e)}}_getDescription(){let e;return e="path"in this.options&&this.options.path?this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?this.options.host+":"+this.options.port:"",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new g}resetOfflineQueue(){this.offlineQueue=new g}parseOptions(...e){const t={};let n=!1;for(let s=0;s<e.length;++s){const i=e[s];if(null!=i)if("object"==typeof i)(0,m.defaults)(t,i);else if("string"==typeof i)(0,m.defaults)(t,(0,d.parseURL)(i)),i.startsWith("rediss://")&&(n=!0);else{if("number"!=typeof i)throw new Error("Invalid argument "+i);t.port=i}}n&&(0,m.defaults)(t,{tls:!0}),(0,m.defaults)(t,_.defaultOptions),"string"==typeof t.port&&(t.port=parseInt(t.port,10)),"string"==typeof t.db&&(t.db=parseInt(t.db,10)),this.options=(0,d.resolveTLSProfile)(t)}setStatus(e,t){y.enabled&&y("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,t))}createScanStream(e,{key:t,options:n={}}){return new u.default({objectMode:!0,key:t,redis:this,command:e,...n})}flushQueue(e,t){let n;if((t=(0,m.defaults)({},t,{offlineQueue:!0,commandQueue:!0})).offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(t.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){const t=this;this.info((function(n,s){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if("string"!=typeof s)return e(null,s);const i={},a=s.split("\r\n");for(let e=0;e<a.length;++e){const[t,...n]=a[e].split(":"),s=n.join(":");s&&(i[t]=s)}if(i.loading&&"0"!==i.loading){const n=1e3*(i.loading_eta_seconds||1),s=t.options.maxLoadingRetryTime&&t.options.maxLoadingRetryTime<n?t.options.maxLoadingRetryTime:n;y("Redis server still loading, trying again in "+s+"ms"),setTimeout((function(){t._readyCheck(e)}),s)}else e(null,i)})).catch(m.noop)}}return _.Cluster=i.default,_.Command=a.default,_.defaultOptions=l.DEFAULT_REDIS_OPTIONS,(0,h.default)(_,n.EventEmitter),(0,p.addTransactionSupport)(_.prototype),ur.default=_,ur}Object.defineProperty(Al,"__esModule",{value:!0}),Al.DEFAULT_REDIS_OPTIONS=void 0,Al.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(50*e,2e3)},keepAlive:0,noDelay:!0,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(10*e,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.print=t.ReplyError=t.SentinelIterator=t.SentinelConnector=t.AbstractConnector=t.Pipeline=t.ScanStream=t.Command=t.Cluster=t.Redis=t.default=void 0,t=e.exports=wl().default;var n=wl();Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.default}});var s=wl();Object.defineProperty(t,"Redis",{enumerable:!0,get:function(){return s.default}});var i=Sc();Object.defineProperty(t,"Cluster",{enumerable:!0,get:function(){return i.default}});var a=Sr;Object.defineProperty(t,"Command",{enumerable:!0,get:function(){return a.default}});var r=ko;Object.defineProperty(t,"ScanStream",{enumerable:!0,get:function(){return r.default}});var o=Lo;Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return o.default}});var c=Cc;Object.defineProperty(t,"AbstractConnector",{enumerable:!0,get:function(){return c.default}});var l=jc();Object.defineProperty(t,"SentinelConnector",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"SentinelIterator",{enumerable:!0,get:function(){return l.SentinelIterator}}),t.ReplyError=xr.ReplyError,Object.defineProperty(t,"Promise",{get:()=>(console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise),set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}}),t.print=function(e,t){e?console.log("Error: "+e):console.log("Reply: "+t)}}(lr,lr.exports);var Cl=N(lr.exports);class Nl{constructor(){this.cache={}}async get(e){return this.cache[e]}async set(e,t){this.cache[e]=t}async delete(e){delete this.cache[e]}}class Il{constructor(e,t){this.durationInSeconds=t,this.redis=new Cl(e)}del(...e){return this.redis.del(e)}get(e){return this.redis.get(e)}set(e,t){return this.redis.set(e,t,"EX",this.durationInSeconds)}async acquireLock(e,t,n=100,s=10){for(let i=0;i<s;i++){if("OK"===await this.redis.set(e,t,"EX",this.durationInSeconds,"NX"))return!0;await new Promise((e=>setTimeout(e,n)))}return!1}async releaseLock(e){return this.redis.del(e)}}class kl{constructor(e){this.durationInSeconds=e,this.cache=new Nl}async del(...e){let t=0;for(let n of e)await this.cache.delete(n),t++;return t}async get(e){const t=await this.cache.get(e);if(!t)return null;const{value:n,expiration:s}=t;return Date.now()>s?(await this.cache.delete(e),null):n}async set(e,t){const n={value:t,expiration:Date.now()+1e3*this.durationInSeconds};return await this.cache.set(e,n),"OK"}async acquireLock(e,t,n=100,s=10){for(let i=0;i<s;i++){const s=await this.cache.get(e);if(!s||Date.now()>s.expiration){const n=Date.now()+1e3*this.durationInSeconds;return await this.cache.set(e,{value:t,expiration:n}),!0}await new Promise((e=>setTimeout(e,n)))}return!1}async releaseLock(e){return this.del(e)}}class Ol{constructor(e,t,n,s=100,i=10){this.storage_key_prefix=n||"sync_shared_kv:",this.retryDelayMs=s,this.maxRetries=i;const a=e||process.env,r=null==a?void 0:a.REDIS;r&&r.length;const o=t||300;this.kvStorage=r?new Il(r,o):new kl(o)}async del(...e){let t=e.map((e=>this.storage_key_prefix+e));return this.kvStorage.del(...t)}async get(e){return this.kvStorage.get(this.storage_key_prefix+e)}async set(e,t){return this.kvStorage.set(this.storage_key_prefix+e,t)}async acquireLock(e,t){return this.kvStorage.acquireLock(this.storage_key_prefix+e,t,this.retryDelayMs,this.maxRetries)}async releaseLock(e){return this.kvStorage.releaseLock(this.storage_key_prefix+e)}}const Dl=class{constructor(e,t){this.apiContext=e,this.tablename=t}async updateOne(e,t){return await Dl.updateItemWithApiContext(this.apiContext,this.tablename,e,t)}static async updateItemWithApiContext(e,t,n,s){const i=new nr(e);let a=await i.getItemsService(t);return await a.updateOne(n,s)}async findOrCreateItem(e,t){return await Dl.findOrCreateItemWithApiContext(this.apiContext,this.tablename,e,t)}static async findOrCreateItemWithApiContext(e,t,n,s){const i=new nr(e),a=await i.getItemsService(t);let r=[],o=Object.keys(n);for(let e of o){let t={},s=n[e];t[e]={_eq:s},r.push(t)}const c={filter:{_and:r}},l=new Ol(process.env,2e3,"itemsServiceHelper_",100,20),u=`${t}:${JSON.stringify(n)}`;if(!await l.set(u,"locked"))throw new Error(`Failed to acquire lock for ${u}`);try{let e=await a.readByQuery(c),t=e[0],n=JSON.parse(JSON.stringify(s));return t||(n=Dl.setStatusPublished(n),await a.createOne(n)),e=await a.readByQuery(c),t=e[0],t}finally{await l.del(u)}}async createOne(e){return await Dl.createItemWithApiContext(this.apiContext,this.tablename,e)}static async createItemWithApiContext(e,t,n){const s=new nr(e);let i=await s.getItemsService(t);return n=Dl.setStatusPublished(n),i.createOne(n)}async createManyItems(e){return await Dl.createManyItemsWithApiContext(this.apiContext,this.tablename,e)}static async createManyItemsWithApiContext(e,t,n){const s=new nr(e);let i=await s.getItemsService(t);return n=n.map(Dl.setStatusPublished),i.createMany(n)}async readOne(e,t,n){return await Dl.readOneItemWithApiContext(this.apiContext,this.tablename,e,t,n)}static async readOneItemWithApiContext(e,t,n,s,i){const a=new nr(e);return(await a.getItemsService(t)).readOne(n,s,i)}async readAllItems(){return await Dl.readAllItemsWithApiContext(this.apiContext,this.tablename)}static async readAllItemsWithApiContext(e,t){const n=new nr(e);return(await n.getItemsService(t)).readByQuery({limit:-1})}async deleteOne(e){return await Dl.deleteOneItemWithApiContext(this.apiContext,this.tablename,e)}static async deleteOneItemWithApiContext(e,t,n){const s=new nr(e);return(await s.getItemsService(t)).deleteOne(n)}async deleteMany(e){return await Dl.deleteMany(this.apiContext,this.tablename,e)}static async deleteMany(e,t,n){const s=new nr(e);return(await s.getItemsService(t)).deleteMany(n)}static setStatusPublished(e){return e[Dl.FIELD_STATUS]=Dl.FIELD_STATUS_PUBLISHED,e}static isStatusPublished(e){return e[Dl.FIELD_STATUS]===Dl.FIELD_STATUS_PUBLISHED}async readByQuery(e,t){return await Dl.readByQuery(this.apiContext,this.tablename,e,t)}static async readByQuery(e,t,n,s){const i=new nr(e);return(await i.getItemsService(t)).readByQuery(n,s)}};let Rl=Dl;Rl.FIELD_STATUS="status",Rl.FIELD_STATUS_PUBLISHED="published";class Ll{static getHumanReadableDate(e,t){const n=e.toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"}),s=e.toLocaleDateString("de-DE",{weekday:"long"});let i=n;return t&&(i+=` (${s})`),i}static getHumanReadableTime(e){return e.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}static getHumanReadableDateAndTime(e){return`${Ll.getHumanReadableDate(e,!1)} ${Ll.getHumanReadableTime(e)}`}static getFoodofferDateTypeFromDate(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}static foodofferDateTypeToString(e){return`${e.year}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}static formatDateToIso8601WithoutTimezone(e,t=!0){const n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0");let o=String(e.getSeconds()).padStart(2,"0");return t&&(o="00"),`${n}-${s}-${i}T${a}:${r}:${o}`}}class Pl{constructor(e){this.cashregisterServiceHelper=new Rl(e,Xa.CASHREGISTERS),this.cashregisterTransactionsServiceHelper=new Rl(e,Xa.CASHREGISTERS_TRANSACTIONS)}async getCashregistersForCanteen(e){return await this.cashregisterServiceHelper.readByQuery({filter:{canteen:{_eq:e}},limit:-1})}async getTransactionIdsForCashregister(e,t,n,s){return(await this.cashregisterTransactionsServiceHelper.readByQuery({filter:{_and:[{cashregister:{_eq:e}},{date:{_gte:Ll.formatDateToIso8601WithoutTimezone(t)}},{date:{_lt:Ll.formatDateToIso8601WithoutTimezone(n)}}]},fields:["id"],limit:s})).map((e=>e.id))}async findOrCreateCashregisterTransaction(e,t){let n=e.baseData;n.id=e.baseData.id;const s={id:e.baseData.id},i={...n,cashregister:t};return await this.cashregisterTransactionsServiceHelper.findOrCreateItem(s,i)}async findOrCreateCashregister(e){let t={external_identifier:e};return await this.cashregisterServiceHelper.findOrCreateItem(t,t)}async deleteAllTransactions(){let e=!0;console.log("deleteAllTransactions");let t=0;for(;e;){let n=await this.cashregisterTransactionsServiceHelper.readByQuery({filter:{},limit:1e4});if(n.length>0){let e=n.map((e=>e.id));await this.cashregisterTransactionsServiceHelper.deleteMany(e)}else e=!1;t++,console.log("-- "+t)}console.log("FINISHED DELETION")}}const Ml=class{};let Fl=Ml;Fl._statuses={start:"start",finished:"finished",running:"running",failed:"failed"},Fl.START=Ml._statuses.start,Fl.FINISHED=Ml._statuses.finished,Fl.RUNNING=Ml._statuses.running,Fl.FAILED=Ml._statuses.failed;const Bl=class{constructor(e){this.apiExtensionContext=e}getDatabase(){return this.apiExtensionContext.database}async setAppSettings(e){const t=new nr(this.apiExtensionContext),n=await t.getItemsService(Xa.APP_SETTINGS);await n.upsertSingleton(e)}async getAppSettings(){const e=new nr(this.apiExtensionContext),t=await e.getItemsService(Xa.APP_SETTINGS);return await t.readSingleton({})}async getRedirectWhitelist(){let e=await this.getAppSettings(),t=null==e?void 0:e.redirect_whitelist;if(t)return t}async getFoodNotificationStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.notifications_foods_status)return e.notifications_foods_status}async setFoodNotificationStatus(e){let t=this.getDatabase();await t(Xa.APP_SETTINGS).update({notifications_foods_status:e})}async isNewsParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.news_parsing_enabled)&&e.news_parsing_enabled}async setNewsParsingStatus(e){let t=this.getDatabase();await t(Xa.APP_SETTINGS).update({news_parsing_status:e})}async getNewsParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.news_parsing_status)return e.news_parsing_status}async getApartmentParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.housing_parsing_status)return e.housing_parsing_status}async isApartmentParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.housing_parsing_enabled)&&e.housing_parsing_enabled}async setApartmentParsingStatus(e,t){let n=this.getDatabase();await n(Xa.APP_SETTINGS).update({housing_parsing_status:e,housing_parsing_last_date:t})}async setWashingmachineParsingStatus(e,t){let n=this.getDatabase();await n(Xa.APP_SETTINGS).update({washingmachine_parsing_status:e,washingmachine_parsing_last_date:t})}async getWashingmachineParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.washingmachine_parsing_status)return e.washingmachine_parsing_status}async isWashingmachineParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.washingmachine_parsing_enabled)&&e.washingmachine_parsing_enabled}async getCashregisterParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.cashregisters_parsing_status)return e.cashregisters_parsing_status}async setCashregisterParsingStatus(e,t){let n=this.getDatabase();await n(Xa.APP_SETTINGS).update({cashregisters_parsing_status:e,cashregisters_parsing_last_date:t})}async isCashregisterParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.cashregisters_parsing_enabled)&&e.cashregisters_parsing_enabled}async isCanteenReportEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.canteen_reports_enabled)&&e.canteen_reports_enabled}async setUtilizationForecastCalculationStatus(e,t){let n=this.getDatabase();await n(Xa.APP_SETTINGS).update({utilization_forecast_calculation_status:e,utilization_forecast_calculation_last_date:t})}async getUtilizationForecastCalculationStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.utilization_forecast_calculation_status)return e.utilization_forecast_calculation_status}async isUtilizationForecastCalculationEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.utilization_forecast_calculation_enabled)&&e.utilization_forecast_calculation_enabled}async getFoodParsingStatus(){const e=await this.getAppSettings();if(null==e?void 0:e.foods_parsing_status)return e.foods_parsing_status}async setFoodParsingStatus(e,t){let n=this.getDatabase();await n(Xa.APP_SETTINGS).update({foods_parsing_status:e,foods_parsing_last_date:t})}async isFoodParsingEnabled(){const e=await this.getAppSettings();return!!(null==e?void 0:e.foods_parsing_enabled)&&e.foods_parsing_enabled}async getFoodParsingHash(){const e=await this.getAppSettings();if(null==e?void 0:e.foods_parsing_hash)return e.foods_parsing_hash}async setFoodParsingHash(e){await this.setAppSettings({[Bl.FIELD_APP_SETTINGS_FOODS_PARSING_HASH]:e})}};let Ul=Bl;Ul.FIELD_APP_SETTINGS_FOODS_PARSING_STATUS="foods_parsing_status",Ul.FIELD_APP_SETTINGS_FOODS_PARSING_HASH="foods_parsing_hash",Ul.FIELD_APP_SETTINGS_FOODS_PARSING_LAST_RUN="foods_parsing_last_date";const Hl=class{constructor(e){this.apiExtensionContext=e}async setAutoTranslationSettings(e){const t=new nr(this.apiExtensionContext),n=await t.getItemsService(Hl.TABLENAME);await n.upsertSingleton(e)}async getAppSettings(){const e=new nr(this.apiExtensionContext),t=await e.getItemsService(Hl.TABLENAME);return await t.readSingleton({})}};let jl=Hl;jl.TABLENAME="auto_translation_settings";class Gl{constructor(e){this.apiContext=e}async getServerInfo(){const e=new ar(this.apiContext);return await e.getServerInfo()}async sendMail(e){let{MailService:t}=this.apiContext.services;const n=this.apiContext.getSchema;let s=new t({accountability:null,knex:this.apiContext.database,schema:await n()});return await s.send(e)}getAppSettingsHelper(){return new Ul(this.apiContext)}getAutoTranslationSettingsHelper(){return new jl(this.apiContext)}getAppFeedbacksHelper(){return new Rl(this.apiContext,Xa.APP_FEEDBACKS)}getCashregisterHelper(){return new Pl(this.apiContext)}getCollectionDatesLastUpdateHelper(){return new Rl(this.apiContext,Xa.COLLECTIONS_DATES_LAST_UPDATE)}getFoodFeedbacksHelper(){return new Rl(this.apiContext,Xa.FOODS_FEEDBACKS)}getFoodsHelper(){return new Rl(this.apiContext,Xa.FOODS)}getFoodFeedbackLabelsHelper(){return new Rl(this.apiContext,Xa.FOODS_FEEDBACK_LABELS)}getFoodFeedbackLabelEntriesHelper(){return new Rl(this.apiContext,Xa.FOODS_FEEDBACKS_LABELS_ENTRIES)}getFoodoffersHelper(){return new Rl(this.apiContext,Xa.FOODOFFERS)}getDevicesHelper(){return new Rl(this.apiContext,Xa.DEVICES)}getPushNotificationsHelper(){return new Rl(this.apiContext,Xa.PUSH_NOTIFICATIONS)}getProfilesHelper(){return new Rl(this.apiContext,Xa.PROFILES)}getMarkingsHelper(){return new Rl(this.apiContext,Xa.MARKINGS)}getMarkingsExclusionsHelper(){return new Rl(this.apiContext,Xa.MARKINGS_EXCLUSIONS)}getCanteensHelper(){return new Rl(this.apiContext,Xa.CANTEENS)}getApartmentsHelper(){return new Rl(this.apiContext,Xa.APARTMENTS)}getBuildingsHelper(){return new Rl(this.apiContext,Xa.BUILDINGS)}getNewsHelper(){return new Rl(this.apiContext,Xa.NEWS)}getUsersHelper(){return new Rl(this.apiContext,Xa.USERS)}getUtilizationEntriesHelper(){return new Rl(this.apiContext,Xa.UTILIZATION_ENTRIES)}getUtilizationGroupsHelper(){return new Rl(this.apiContext,Xa.UTILIZATION_GROUPS)}getWashingmachinesHelper(){return new Rl(this.apiContext,Xa.WASHINGMACHINES)}}var ql=(e=>(e.TEST="Test",e.OSNABRUECK="Osnabrck",e.HANNOVER="Hannover",e))(ql||{});class Yl{static getEnvVariable(e){let t=process.env[e];if(null==t)throw new Error("Environment Variable "+e+" not set.");return t}static getEnvFieldNameForAutoTranslateApiKey(){return"AUTO_TRANSLATE_API_KEY"}static getAutoTranslateApiKey(){return this.getEnvVariable(Yl.getEnvFieldNameForAutoTranslateApiKey())}static getPublicUrl(){return this.getEnvVariable("PUBLIC_URL")}static getAdminEmail(){return this.getEnvVariable("ADMIN_EMAIL")}static getAdminPassword(){return this.getEnvVariable("ADMIN_PASSWORD")}static getSyncForCustomer(){let e=this.getEnvVariable("SYNC_FOR_CUSTOMER");return Object.values(ql).includes(e)?e:null}}const zl="activity_auto_cleanup";var Vl=async({init:e},t)=>{const n=new Gl(t);let s=Yl.getAdminEmail(),i=Yl.getAdminPassword();s&&i||console.log(zl+": Admin email or password not set in environment variables. Skipping reset of admin password.");const a=n.getUsersHelper();e(cr.INIT_APP_STARTED,(async()=>{console.log(zl+": App started, resetting food parsing status and parsing hash");const e=await a.readByQuery({filter:{_and:[{email:{_eq:s}},{provider:{_eq:"default"}}]}});if(0==e.length)return void console.log(zl+": Admin user with email "+s+" not found. Skipping reset of admin password.");if(e.length>1)return void console.log(zl+": Found multiple users with email "+s+". Skipping reset of admin password.");let t=e[0];t?await a.updateOne(t.id,{password:i}):console.log(zl+": Admin user with email "+s+" not found. Skipping reset of admin password.")}))};var Wl=async({schedule:e,action:t},n)=>{if(!await er.checkAllTablesExistWithApiContext("activity_auto_cleanup",n))return;const s=new Gl(n),i=s.getAppFeedbacksHelper(),a=Yl.getPublicUrl();t(Xa.APP_FEEDBACKS+".items.create",(async e=>{let t=e.key,n=await i.readOne(t);if(!n)return;const r=(await s.getServerInfo()).project.project_name||"Rocket Meals",o=new Date,c=r+" - App Feedbacks - "+Ll.getHumanReadableDateAndTime(o),l=new Date(n.date_created||new Date),u=Ll.getHumanReadableDateAndTime(l),p=a+"/admin/content/app_feedbacks/"+t,d={device_platform:n.device_platform,device_brand:n.device_brand,device_system_version:n.device_system_version,display_height:n.display_height,display_width:n.display_width,display_fontscale:n.display_fontscale,display_pixelratio:n.display_pixelratio,display_scale:n.display_scale},h={subject:c,feedbacks:[{id:n.id,positive:n.positive,title:n.title||"Kein Titel",content:n.content||"Kein Inhalt",contract_email:n.contact_email,profile_id:n.profile,answer_to_feedback_url:p,date_created:u,device:d}]};await s.sendMail({to:"info@baumgartner-software.de",subject:c,template:{name:"app-feedbacks",data:h}})}))},Ql={},Kl={},Zl={};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.DocumentNotReadyError=Zl.GlossaryNotFoundError=Zl.DocumentTranslationError=Zl.ConnectionError=Zl.TooManyRequestsError=Zl.QuotaExceededError=Zl.AuthorizationError=Zl.DeepLError=void 0;class $l extends Error{constructor(e,t){super(e),this.message=e,this.error=t}}Zl.DeepLError=$l;Zl.AuthorizationError=class extends $l{};Zl.QuotaExceededError=class extends $l{};Zl.TooManyRequestsError=class extends $l{};Zl.ConnectionError=class extends $l{constructor(e,t,n){super(e,n),this.shouldRetry=t||!1}};Zl.DocumentTranslationError=class extends $l{constructor(e,t,n){super(e,n),this.documentHandle=t}};Zl.GlossaryNotFoundError=class extends $l{};Zl.DocumentNotReadyError=class extends $l{};var Xl={},Jl={exports:{}};!function(e){!function(t,n){e.exports?e.exports=n():t.log=n()}(C,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],i={},a=null;function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),i=0;i<s.length;i++){var a=s[i];this[a]=i<n?e:this.methodFactory(a,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(s,i,a){return function(s){return"debug"===s&&(s="log"),typeof console!==t&&("trace"===s&&n?o:void 0!==console[s]?r(console,s):void 0!==console.log?r(console,"log"):e)}(s)||l.apply(this,arguments)}function p(e,n){var r,o,l,p=this,d="loglevel";function h(){var e;if(typeof window!==t&&d){try{e=window.localStorage[d]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,s=encodeURIComponent(d),i=n.indexOf(s+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i+s.length+1))[1])}catch(e){}return void 0===p.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"==typeof t&&void 0!==p.levels[t.toUpperCase()]&&(t=p.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=p.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?d+=":"+e:"symbol"==typeof e&&(d=void 0),p.name=e,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=n||u,p.getLevel=function(){return null!=l?l:null!=o?o:r},p.setLevel=function(e,n){return l=f(e),!1!==n&&function(e){var n=(s[e]||"silent").toUpperCase();if(typeof window!==t&&d){try{return void(window.localStorage[d]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+n+";"}catch(e){}}}(l),c.call(p)},p.setDefaultLevel=function(e){o=f(e),h()||p.setLevel(e,!1)},p.resetLevel=function(){l=null,function(){if(typeof window!==t&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),c.call(p)},p.enableAll=function(e){p.setLevel(p.levels.TRACE,e)},p.disableAll=function(e){p.setLevel(p.levels.SILENT,e)},p.rebuild=function(){if(a!==p&&(r=f(a.getLevel())),c.call(p),a===p)for(var e in i)i[e].rebuild()},r=f(a?a.getLevel():"WARN");var m=h();null!=m&&(l=f(m)),c.call(p)}(a=new p).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new p(e,a.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return a.noConflict=function(){return typeof window!==t&&window.log===a&&(window.log=d),a},a.getLoggers=function(){return i},a.default=a,a}))}(Jl);var eu=Jl.exports,tu=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.toBoolString=Xl.isString=Xl.timeout=Xl.streamToString=Xl.streamToBuffer=Xl.logInfo=Xl.logDebug=void 0;const nu=tu(eu).default.getLogger("deepl");function su(e){let t="";if(e)for(const[n,s]of Object.entries(e))t+=`, ${n} = ${s}`;return t}async function iu(e){const t=[];return new Promise(((n,s)=>{e.on("data",(e=>t.push(e))),e.on("error",(e=>s(e))),e.on("end",(()=>n(Buffer.concat(t))))}))}Xl.logDebug=function(e,t){nu.debug(e+su(t))},Xl.logInfo=function(e,t){nu.info(e+su(t))},Xl.streamToBuffer=iu,Xl.streamToString=async function(e){return(await iu(e)).toString("utf8")};Xl.timeout=e=>new Promise((t=>setTimeout(t,e))),Xl.isString=function(e){return"string"==typeof e},Xl.toBoolString=function(e){return e?"1":"0"};var au=Ee,ru=s,ou=g,cu=y,lu=_,uu=a.parse,pu=E,du=c.Stream,hu=Te,fu=ze,mu=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e},gu=yu;function yu(e){if(!(this instanceof yu))return new yu(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],au.call(this),e=e||{})this[t]=e[t]}ru.inherits(yu,au),yu.LINE_BREAK="\r\n",yu.DEFAULT_CONTENT_TYPE="application/octet-stream",yu.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var s=au.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),ru.isArray(t))this._error(new Error("Arrays are not supported."));else{var i=this._multiPartHeader(e,t,n),a=this._multiPartFooter();s(i),s(t),s(a),this._trackLength(i,t,n)}},yu.prototype._trackLength=function(e,t,n){var s=0;null!=n.knownLength?s+=+n.knownLength:Buffer.isBuffer(t)?s=t.length:"string"==typeof t&&(s=Buffer.byteLength(t)),this._valueLength+=s,this._overheadLength+=Buffer.byteLength(e)+yu.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof du)&&(n.knownLength||this._valuesToMeasure.push(t))},yu.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):pu.stat(e.path,(function(n,s){var i;n?t(n):(i=s.size-(e.start?e.start:0),t(null,i))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},yu.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var s,i=this._getContentDisposition(t,n),a=this._getContentType(t,n),r="",o={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(a||[])};for(var c in"object"==typeof n.header&&mu(o,n.header),o)o.hasOwnProperty(c)&&null!=(s=o[c])&&(Array.isArray(s)||(s=[s]),s.length&&(r+=c+": "+s.join("; ")+yu.LINE_BREAK));return"--"+this.getBoundary()+yu.LINE_BREAK+r+yu.LINE_BREAK},yu.prototype._getContentDisposition=function(e,t){var n,s;return"string"==typeof t.filepath?n=ou.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=ou.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=ou.basename(e.client._httpMessage.path||"")),n&&(s='filename="'+n+'"'),s},yu.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=hu.lookup(e.name)),!n&&e.path&&(n=hu.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=hu.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=yu.DEFAULT_CONTENT_TYPE),n},yu.prototype._multiPartFooter=function(){return function(e){var t=yu.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},yu.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+yu.LINE_BREAK},yu.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},yu.prototype.setBoundary=function(e){this._boundary=e},yu.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},yu.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,s=this._streams.length;n<s;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(yu.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},yu.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},yu.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},yu.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},yu.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?fu.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,s){n?e(n):(s.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},yu.prototype.submit=function(e,t){var n,s,i={method:"post"};return"string"==typeof e?(e=uu(e),s=mu({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(s=mu(e,i)).port||(s.port="https:"==s.protocol?443:80),s.headers=this.getHeaders(e.headers),n="https:"==s.protocol?lu.request(s):cu.request(s),this.getLength(function(e,s){if(e&&"Unknown stream"!==e)this._error(e);else if(s&&n.setHeader("Content-Length",s),this.pipe(n),t){var i,a=function(e,s){return n.removeListener("error",a),n.removeListener("response",i),t.call(this,e,s)};i=a.bind(this,null),n.on("error",a),n.on("response",i)}}.bind(this)),n},yu.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},yu.prototype.toString=function(){return"[object FormData]"};const _u=a,Eu=Ft,bu=y,Tu=_,vu=s,xu=Fn,Su=b,Au=c,wu=t;function Cu(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}const Nu=Cu(gu),Iu=Cu(_u),ku=Cu(bu),Ou=Cu(Tu),Du=Cu(vu),Ru=Cu(xu),Lu=Cu(Su),Pu=Cu(Au);function Mu(e,t){return function(){return e.apply(t,arguments)}}const{toString:Fu}=Object.prototype,{getPrototypeOf:Bu}=Object,Uu=(e=>t=>{const n=Fu.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Hu=e=>(e=e.toLowerCase(),t=>Uu(t)===e),ju=e=>t=>typeof t===e,{isArray:Gu}=Array,qu=ju("undefined");const Yu=Hu("ArrayBuffer");const zu=ju("string"),Vu=ju("function"),Wu=ju("number"),Qu=e=>null!==e&&"object"==typeof e,Ku=e=>{if("object"!==Uu(e))return!1;const t=Bu(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Zu=Hu("Date"),$u=Hu("File"),Xu=Hu("Blob"),Ju=Hu("FileList"),ep=Hu("URLSearchParams"),[tp,np,sp,ip]=["ReadableStream","Request","Response","Headers"].map(Hu);function ap(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,i;if("object"!=typeof e&&(e=[e]),Gu(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let r;for(s=0;s<a;s++)r=i[s],t.call(null,e[r],r,e)}}function rp(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,i=n.length;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const op="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:C,cp=e=>!qu(e)&&e!==op;const lp=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Bu(Uint8Array)),up=Hu("HTMLFormElement"),pp=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),dp=Hu("RegExp"),hp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};ap(n,((n,i)=>{let a;!1!==(a=t(n,i,e))&&(s[i]=a||n)})),Object.defineProperties(e,s)},fp="abcdefghijklmnopqrstuvwxyz",mp="0123456789",gp={DIGIT:mp,ALPHA:fp,ALPHA_DIGIT:fp+fp.toUpperCase()+mp};const yp=Hu("AsyncFunction"),_p=(Ep="function"==typeof setImmediate,bp=Vu(op.postMessage),Ep?setImmediate:bp?(Tp=`axios@${Math.random()}`,vp=[],op.addEventListener("message",(({source:e,data:t})=>{e===op&&t===Tp&&vp.length&&vp.shift()()}),!1),e=>{vp.push(e),op.postMessage(Tp,"*")}):e=>setTimeout(e));var Ep,bp,Tp,vp;const xp="undefined"!=typeof queueMicrotask?queueMicrotask.bind(op):"undefined"!=typeof process&&process.nextTick||_p,Sp={isArray:Gu,isArrayBuffer:Yu,isBuffer:function(e){return null!==e&&!qu(e)&&null!==e.constructor&&!qu(e.constructor)&&Vu(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Vu(e.append)&&("formdata"===(t=Uu(e))||"object"===t&&Vu(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Yu(e.buffer),t},isString:zu,isNumber:Wu,isBoolean:e=>!0===e||!1===e,isObject:Qu,isPlainObject:Ku,isReadableStream:tp,isRequest:np,isResponse:sp,isHeaders:ip,isUndefined:qu,isDate:Zu,isFile:$u,isBlob:Xu,isRegExp:dp,isFunction:Vu,isStream:e=>Qu(e)&&Vu(e.pipe),isURLSearchParams:ep,isTypedArray:lp,isFileList:Ju,forEach:ap,merge:function e(){const{caseless:t}=cp(this)&&this||{},n={},s=(s,i)=>{const a=t&&rp(n,i)||i;Ku(n[a])&&Ku(s)?n[a]=e(n[a],s):Ku(s)?n[a]=e({},s):Gu(s)?n[a]=s.slice():n[a]=s};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&ap(arguments[e],s);return n},extend:(e,t,n,{allOwnKeys:s}={})=>(ap(t,((t,s)=>{n&&Vu(t)?e[s]=Mu(t,n):e[s]=t}),{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let i,a,r;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)r=i[a],s&&!s(r,e,t)||o[r]||(t[r]=e[r],o[r]=!0);e=!1!==n&&Bu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Uu,kindOfTest:Hu,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(Gu(e))return e;let t=e.length;if(!Wu(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:up,hasOwnProperty:pp,hasOwnProp:pp,reduceDescriptors:hp,freezeMethods:e=>{hp(e,((t,n)=>{if(Vu(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];Vu(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach((e=>{n[e]=!0}))};return Gu(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:rp,global:op,isContextDefined:cp,ALPHABET:gp,generateString:(e=16,t=gp.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n},isSpecCompliantForm:function(e){return!!(e&&Vu(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(Qu(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const i=Gu(e)?[]:{};return ap(e,((e,t)=>{const a=n(e,s+1);!qu(a)&&(i[t]=a)})),t[s]=void 0,i}}return e};return n(e,0)},isAsyncFn:yp,isThenable:e=>e&&(Qu(e)||Vu(e))&&Vu(e.then)&&Vu(e.catch),setImmediate:_p,asap:xp};function Ap(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Sp.inherits(Ap,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Sp.toJSONObject(this.config),code:this.code,status:this.status}}});const wp=Ap.prototype,Cp={};function Np(e){return Sp.isPlainObject(e)||Sp.isArray(e)}function Ip(e){return Sp.endsWith(e,"[]")?e.slice(0,-2):e}function kp(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ip(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Cp[e]={value:e}})),Object.defineProperties(Ap,Cp),Object.defineProperty(wp,"isAxiosError",{value:!0}),Ap.from=(e,t,n,s,i,a)=>{const r=Object.create(wp);return Sp.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ap.call(r,e.message,t,n,s,i),r.cause=e,r.name=e.name,a&&Object.assign(r,a),r};const Op=Sp.toFlatObject(Sp,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Dp(e,t,n){if(!Sp.isObject(e))throw new TypeError("target must be an object");t=t||new(Nu.default||FormData);const s=(n=Sp.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Sp.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,a=n.dots,r=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Sp.isSpecCompliantForm(t);if(!Sp.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Sp.isDate(e))return e.toISOString();if(!o&&Sp.isBlob(e))throw new Ap("Blob is not supported. Use a Buffer instead.");return Sp.isArrayBuffer(e)||Sp.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let o=e;if(e&&!i&&"object"==typeof e)if(Sp.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(Sp.isArray(e)&&function(e){return Sp.isArray(e)&&!e.some(Np)}(e)||(Sp.isFileList(e)||Sp.endsWith(n,"[]"))&&(o=Sp.toArray(e)))return n=Ip(n),o.forEach((function(e,s){!Sp.isUndefined(e)&&null!==e&&t.append(!0===r?kp([n],s,a):null===r?n:n+"[]",c(e))})),!1;return!!Np(e)||(t.append(kp(i,n,a),c(e)),!1)}const u=[],p=Object.assign(Op,{defaultVisitor:l,convertValue:c,isVisitable:Np});if(!Sp.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!Sp.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+s.join("."));u.push(n),Sp.forEach(n,(function(n,a){!0===(!(Sp.isUndefined(n)||null===n)&&i.call(t,n,Sp.isString(a)?a.trim():a,s,p))&&e(n,s?s.concat(a):[a])})),u.pop()}}(e),t}function Rp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Lp(e,t){this._pairs=[],e&&Dp(e,this,t)}const Pp=Lp.prototype;function Mp(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fp(e,t,n){if(!t)return e;const s=n&&n.encode||Mp,i=n&&n.serialize;let a;if(a=i?i(t,n):Sp.isURLSearchParams(t)?t.toString():new Lp(t,n).toString(s),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}Pp.append=function(e,t){this._pairs.push([e,t])},Pp.toString=function(e){const t=e?function(t){return e.call(this,t,Rp)}:Rp;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Bp=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Sp.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Up={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hp={isNode:!0,classes:{URLSearchParams:Iu.default.URLSearchParams,FormData:Nu.default,Blob:"undefined"!=typeof Blob&&Blob||null},protocols:["http","https","file","data"]},jp="undefined"!=typeof window&&"undefined"!=typeof document,Gp="object"==typeof navigator&&navigator||void 0,qp=jp&&(!Gp||["ReactNative","NativeScript","NS"].indexOf(Gp.product)<0),Yp="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,zp=jp&&window.location.href||"http://localhost",Vp={...Object.freeze({__proto__:null,hasBrowserEnv:jp,hasStandardBrowserWebWorkerEnv:Yp,hasStandardBrowserEnv:qp,navigator:Gp,origin:zp}),...Hp};function Wp(e){function t(e,n,s,i){let a=e[i++];if("__proto__"===a)return!0;const r=Number.isFinite(+a),o=i>=e.length;if(a=!a&&Sp.isArray(s)?s.length:a,o)return Sp.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!r;s[a]&&Sp.isObject(s[a])||(s[a]=[]);return t(e,n,s[a],i)&&Sp.isArray(s[a])&&(s[a]=function(e){const t={},n=Object.keys(e);let s;const i=n.length;let a;for(s=0;s<i;s++)a=n[s],t[a]=e[a];return t}(s[a])),!r}if(Sp.isFormData(e)&&Sp.isFunction(e.entries)){const n={};return Sp.forEachEntry(e,((e,s)=>{t(function(e){return Sp.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,n,0)})),n}return null}const Qp={transitional:Up,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=Sp.isObject(e);i&&Sp.isHTMLForm(e)&&(e=new FormData(e));if(Sp.isFormData(e))return s?JSON.stringify(Wp(e)):e;if(Sp.isArrayBuffer(e)||Sp.isBuffer(e)||Sp.isStream(e)||Sp.isFile(e)||Sp.isBlob(e)||Sp.isReadableStream(e))return e;if(Sp.isArrayBufferView(e))return e.buffer;if(Sp.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Dp(e,new Vp.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return Vp.isNode&&Sp.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Sp.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Dp(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),function(e,t,n){if(Sp.isString(e))try{return(t||JSON.parse)(e),Sp.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Qp.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(Sp.isResponse(e)||Sp.isReadableStream(e))return e;if(e&&Sp.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Ap.from(e,Ap.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vp.classes.FormData,Blob:Vp.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Sp.forEach(["delete","get","head","post","put","patch"],(e=>{Qp.headers[e]={}}));const Kp=Qp,Zp=Sp.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$p=Symbol("internals");function Xp(e){return e&&String(e).trim().toLowerCase()}function Jp(e){return!1===e||null==e?e:Sp.isArray(e)?e.map(Jp):String(e)}function ed(e,t,n,s,i){return Sp.isFunction(s)?s.call(this,t,n):(i&&(t=n),Sp.isString(t)?Sp.isString(s)?-1!==t.indexOf(s):Sp.isRegExp(s)?s.test(t):void 0:void 0)}class td{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(e,t,n){const i=Xp(t);if(!i)throw new Error("header name must be a non-empty string");const a=Sp.findKey(s,i);(!a||void 0===s[a]||!0===n||void 0===n&&!1!==s[a])&&(s[a||t]=Jp(e))}const a=(e,t)=>Sp.forEach(e,((e,n)=>i(e,n,t)));if(Sp.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Sp.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,s,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),s=e.substring(i+1).trim(),!n||t[n]&&Zp[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)})),t})(e),t);else if(Sp.isHeaders(e))for(const[t,s]of e.entries())i(s,t,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=Xp(e)){const n=Sp.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(Sp.isFunction(t))return t.call(this,e,n);if(Sp.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Xp(e)){const n=Sp.findKey(this,e);return!(!n||void 0===this[n]||t&&!ed(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function i(e){if(e=Xp(e)){const i=Sp.findKey(n,e);!i||t&&!ed(0,n[i],i,t)||(delete n[i],s=!0)}}return Sp.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];e&&!ed(0,this[i],i,e,!0)||(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return Sp.forEach(this,((s,i)=>{const a=Sp.findKey(n,i);if(a)return t[a]=Jp(s),void delete t[i];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();r!==i&&delete t[i],t[r]=Jp(s),n[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Sp.forEach(this,((n,s)=>{null!=n&&!1!==n&&(t[s]=e&&Sp.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[$p]=this[$p]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=Xp(e);t[s]||(!function(e,t){const n=Sp.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+n,{value:function(e,n,i){return this[s].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[s]=!0)}return Sp.isArray(e)?e.forEach(s):s(e),this}}td.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Sp.reduceDescriptors(td.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Sp.freezeMethods(td);const nd=td;function sd(e,t){const n=this||Kp,s=t||n,i=nd.from(s.headers);let a=s.data;return Sp.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function id(e){return!(!e||!e.__CANCEL__)}function ad(e,t,n){Ap.call(this,null==e?"canceled":e,Ap.ERR_CANCELED,t,n),this.name="CanceledError"}function rd(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new Ap("Request failed with status code "+n.status,[Ap.ERR_BAD_REQUEST,Ap.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function od(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}Sp.inherits(ad,Ap,{__CANCEL__:!0});const cd="1.7.7";function ld(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const ud=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;const pd=Symbol("internals");class dd extends Pu.default.Transform{constructor(e){e=Sp.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,((e,t)=>!Sp.isUndefined(t[e]))),super({readableHighWaterMark:e.chunkSize});const t=this[pd]={timeWindow:e.timeWindow,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null};this.on("newListener",(e=>{"progress"===e&&(t.isCaptured||(t.isCaptured=!0))}))}_read(e){const t=this[pd];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,n){const s=this[pd],i=s.maxRate,a=this.readableHighWaterMark,r=s.timeWindow,o=i/(1e3/r),c=!1!==s.minChunkSize?Math.max(s.minChunkSize,.01*o):0,l=(e,t)=>{const n=Buffer.byteLength(e);s.bytesSeen+=n,s.bytes+=n,s.isCaptured&&this.emit("progress",s.bytesSeen),this.push(e)?process.nextTick(t):s.onReadCallback=()=>{s.onReadCallback=null,process.nextTick(t)}},u=(e,t)=>{const n=Buffer.byteLength(e);let u,p=null,d=a,h=0;if(i){const e=Date.now();(!s.ts||(h=e-s.ts)>=r)&&(s.ts=e,u=o-s.bytes,s.bytes=u<0?-u:0,h=0),u=o-s.bytes}if(i){if(u<=0)return setTimeout((()=>{t(null,e)}),r-h);u<d&&(d=u)}d&&n>d&&n-d>c&&(p=e.subarray(d),e=e.subarray(0,d)),l(e,p?()=>{process.nextTick(t,null,p)}:t)};u(e,(function e(t,s){if(t)return n(t);s?u(s,e):n(null)}))}}const hd=dd,{asyncIterator:fd}=Symbol,md=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[fd]?yield*e[fd]():yield e},gd=Sp.ALPHABET.ALPHA_DIGIT+"-_",yd=new vu.TextEncoder,_d="\r\n",Ed=yd.encode(_d);class bd{constructor(e,t){const{escapeName:n}=this.constructor,s=Sp.isString(t);let i=`Content-Disposition: form-data; name="${n(e)}"${!s&&t.name?`; filename="${n(t.name)}"`:""}${_d}`;s?t=yd.encode(String(t).replace(/\r?\n|\r\n?/g,_d)):i+=`Content-Type: ${t.type||"application/octet-stream"}${_d}`,this.headers=yd.encode(i+_d),this.contentLength=s?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async*encode(){yield this.headers;const{value:e}=this;Sp.isTypedArray(e)?yield e:yield*md(e),yield Ed}static escapeName(e){return String(e).replace(/[\r\n"]/g,(e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e])))}}const Td=(e,t,n)=>{const{tag:s="form-data-boundary",size:i=25,boundary:a=s+"-"+Sp.generateString(i,gd)}=n||{};if(!Sp.isFormData(e))throw TypeError("FormData instance required");if(a.length<1||a.length>70)throw Error("boundary must be 10-70 characters long");const r=yd.encode("--"+a+_d),o=yd.encode("--"+a+"--"+_d+_d);let c=o.byteLength;const l=Array.from(e.entries()).map((([e,t])=>{const n=new bd(e,t);return c+=n.size,n}));c+=r.byteLength*l.length,c=Sp.toFiniteNumber(c);const u={"Content-Type":`multipart/form-data; boundary=${a}`};return Number.isFinite(c)&&(u["Content-Length"]=c),t&&t(u),Au.Readable.from(async function*(){for(const e of l)yield r,yield*e.encode();yield o}())};class vd extends Pu.default.Transform{__transform(e,t,n){this.push(e),n()}_transform(e,t,n){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){const e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,n)}}const xd=vd,Sd=(e,t)=>Sp.isAsyncFn(e)?function(...n){const s=n.pop();e.apply(this,n).then((e=>{try{t?s(null,...t(e)):s(null,e)}catch(e){s(e)}}),s)}:e;const Ad=(e,t,n=3)=>{let s=0;const i=function(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i,a=0,r=0;return t=void 0!==t?t:1e3,function(o){const c=Date.now(),l=s[r];i||(i=c),n[a]=o,s[a]=c;let u=r,p=0;for(;u!==a;)p+=n[u++],u%=e;if(a=(a+1)%e,a===r&&(r=(r+1)%e),c-i<t)return;const d=l&&c-l;return d?Math.round(1e3*p/d):void 0}}(50,250);return function(e,t){let n,s,i=0,a=1e3/t;const r=(t,a=Date.now())=>{i=a,n=null,s&&(clearTimeout(s),s=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-i;o>=a?r(e,t):(n=e,s||(s=setTimeout((()=>{s=null,r(n)}),a-o)))},()=>n&&r(n)]}((n=>{const a=n.loaded,r=n.lengthComputable?n.total:void 0,o=a-s,c=i(o);s=a;e({loaded:a,total:r,progress:r?a/r:void 0,bytes:o,rate:c||void 0,estimated:c&&r&&a<=r?(r-a)/c:void 0,event:n,lengthComputable:null!=r,[t?"download":"upload"]:!0})}),n)},wd=(e,t)=>{const n=null!=e;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Cd=e=>(...t)=>Sp.asap((()=>e(...t))),Nd={flush:Lu.default.constants.Z_SYNC_FLUSH,finishFlush:Lu.default.constants.Z_SYNC_FLUSH},Id={flush:Lu.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:Lu.default.constants.BROTLI_OPERATION_FLUSH},kd=Sp.isFunction(Lu.default.createBrotliDecompress),{http:Od,https:Dd}=Ru.default,Rd=/https:?/,Ld=Vp.protocols.map((e=>e+":")),Pd=(e,[t,n])=>(e.on("end",n).on("error",n),t);function Md(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}function Fd(e,t,n){let s=t;if(!s&&!1!==s){const e=Eu.getProxyForUrl(n);e&&(s=new URL(e))}if(s){if(s.username&&(s.auth=(s.username||"")+":"+(s.password||"")),s.auth){(s.auth.username||s.auth.password)&&(s.auth=(s.auth.username||"")+":"+(s.auth.password||""));const t=Buffer.from(s.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");const t=s.hostname||s.host;e.hostname=t,e.host=t,e.port=s.port,e.path=n,s.protocol&&(e.protocol=s.protocol.includes(":")?s.protocol:`${s.protocol}:`)}e.beforeRedirects.proxy=function(e){Fd(e,t,e.href)}}const Bd="undefined"!=typeof process&&"process"===Sp.kindOf(process),Ud=(e,t)=>(({address:e,family:t})=>{if(!Sp.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}})(Sp.isObject(e)?e:{address:e,family:t}),Hd=Bd&&function(e){return t=async function(t,n,s){let{data:i,lookup:a,family:r}=e;const{responseType:o,responseEncoding:c}=e,l=e.method.toUpperCase();let u,p,d=!1;if(a){const e=Sd(a,(e=>Sp.isArray(e)?e:[e]));a=(t,n,s)=>{e(t,n,((e,t,i)=>{if(e)return s(e);const a=Sp.isArray(t)?t.map((e=>Ud(e))):[Ud(t,i)];n.all?s(e,a):s(e,a[0].address,a[0].family)}))}}const h=new wu.EventEmitter,f=()=>{e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m),h.removeAllListeners()};function m(t){h.emit("abort",!t||t.type?new ad(null,e,p):t)}s(((e,t)=>{u=!0,t&&(d=!0,f())})),h.once("abort",n),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m)));const g=od(e.baseURL,e.url),y=new URL(g,Vp.hasBrowserEnv?Vp.origin:void 0),_=y.protocol||Ld[0];if("data:"===_){let s;if("GET"!==l)return rd(t,n,{status:405,statusText:"method not allowed",headers:{},config:e});try{s=function(e,t,n){const s=n&&n.Blob||Vp.classes.Blob,i=ld(e);if(void 0===t&&s&&(t=!0),"data"===i){e=i.length?e.slice(i.length+1):e;const n=ud.exec(e);if(!n)throw new Ap("Invalid URL",Ap.ERR_INVALID_URL);const a=n[1],r=n[2],o=n[3],c=Buffer.from(decodeURIComponent(o),r?"base64":"utf8");if(t){if(!s)throw new Ap("Blob is not supported",Ap.ERR_NOT_SUPPORT);return new s([c],{type:a})}return c}throw new Ap("Unsupported protocol "+i,Ap.ERR_NOT_SUPPORT)}(e.url,"blob"===o,{Blob:e.env&&e.env.Blob})}catch(t){throw Ap.from(t,Ap.ERR_BAD_REQUEST,e)}return"text"===o?(s=s.toString(c),c&&"utf8"!==c||(s=Sp.stripBOM(s))):"stream"===o&&(s=Pu.default.Readable.from(s)),rd(t,n,{data:s,status:200,statusText:"OK",headers:new nd,config:e})}if(-1===Ld.indexOf(_))return n(new Ap("Unsupported protocol "+_,Ap.ERR_BAD_REQUEST,e));const E=nd.from(e.headers).normalize();E.set("User-Agent","axios/"+cd,!1);const{onUploadProgress:b,onDownloadProgress:T}=e,v=e.maxRate;let x,S;if(Sp.isSpecCompliantForm(i)){const e=E.getContentType(/boundary=([-_\w\d]{10,70})/i);i=Td(i,(e=>{E.set(e)}),{tag:`axios-${cd}-boundary`,boundary:e&&e[1]||void 0})}else if(Sp.isFormData(i)&&Sp.isFunction(i.getHeaders)){if(E.set(i.getHeaders()),!E.hasContentLength())try{const e=await Du.default.promisify(i.getLength).call(i);Number.isFinite(e)&&e>=0&&E.setContentLength(e)}catch(e){}}else if(Sp.isBlob(i))i.size&&E.setContentType(i.type||"application/octet-stream"),E.setContentLength(i.size||0),i=Pu.default.Readable.from(md(i));else if(i&&!Sp.isStream(i)){if(Buffer.isBuffer(i));else if(Sp.isArrayBuffer(i))i=Buffer.from(new Uint8Array(i));else{if(!Sp.isString(i))return n(new Ap("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",Ap.ERR_BAD_REQUEST,e));i=Buffer.from(i,"utf-8")}if(E.setContentLength(i.length,!1),e.maxBodyLength>-1&&i.length>e.maxBodyLength)return n(new Ap("Request body larger than maxBodyLength limit",Ap.ERR_BAD_REQUEST,e))}const A=Sp.toFiniteNumber(E.getContentLength());let w,C;Sp.isArray(v)?(x=v[0],S=v[1]):x=S=v,i&&(b||x)&&(Sp.isStream(i)||(i=Pu.default.Readable.from(i,{objectMode:!1})),i=Pu.default.pipeline([i,new hd({maxRate:Sp.toFiniteNumber(x)})],Sp.noop),b&&i.on("progress",Pd(i,wd(A,Ad(Cd(b),!1,3))))),e.auth&&(w=(e.auth.username||"")+":"+(e.auth.password||"")),!w&&y.username&&(w=y.username+":"+y.password),w&&E.delete("authorization");try{C=Fp(y.pathname+y.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){const s=new Error(t.message);return s.config=e,s.url=e.url,s.exists=!0,n(s)}E.set("Accept-Encoding","gzip, compress, deflate"+(kd?", br":""),!1);const N={path:C,method:l,headers:E.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:w,protocol:_,family:r,beforeRedirect:Md,beforeRedirects:{}};let I;!Sp.isUndefined(a)&&(N.lookup=a),e.socketPath?N.socketPath=e.socketPath:(N.hostname=y.hostname.startsWith("[")?y.hostname.slice(1,-1):y.hostname,N.port=y.port,Fd(N,e.proxy,_+"//"+y.hostname+(y.port?":"+y.port:"")+N.path));const k=Rd.test(N.protocol);if(N.agent=k?e.httpsAgent:e.httpAgent,e.transport?I=e.transport:0===e.maxRedirects?I=k?Ou.default:ku.default:(e.maxRedirects&&(N.maxRedirects=e.maxRedirects),e.beforeRedirect&&(N.beforeRedirects.config=e.beforeRedirect),I=k?Dd:Od),e.maxBodyLength>-1?N.maxBodyLength=e.maxBodyLength:N.maxBodyLength=1/0,e.insecureHTTPParser&&(N.insecureHTTPParser=e.insecureHTTPParser),p=I.request(N,(function(s){if(p.destroyed)return;const i=[s],a=+s.headers["content-length"];if(T||S){const e=new hd({maxRate:Sp.toFiniteNumber(S)});T&&e.on("progress",Pd(e,wd(a,Ad(Cd(T),!0,3)))),i.push(e)}let r=s;const u=s.req||p;if(!1!==e.decompress&&s.headers["content-encoding"])switch("HEAD"!==l&&204!==s.statusCode||delete s.headers["content-encoding"],(s.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":i.push(Lu.default.createUnzip(Nd)),delete s.headers["content-encoding"];break;case"deflate":i.push(new xd),i.push(Lu.default.createUnzip(Nd)),delete s.headers["content-encoding"];break;case"br":kd&&(i.push(Lu.default.createBrotliDecompress(Id)),delete s.headers["content-encoding"])}r=i.length>1?Pu.default.pipeline(i,Sp.noop):i[0];const m=Pu.default.finished(r,(()=>{m(),f()})),g={status:s.statusCode,statusText:s.statusMessage,headers:new nd(s.headers),config:e,request:u};if("stream"===o)g.data=r,rd(t,n,g);else{const s=[];let i=0;r.on("data",(function(t){s.push(t),i+=t.length,e.maxContentLength>-1&&i>e.maxContentLength&&(d=!0,r.destroy(),n(new Ap("maxContentLength size of "+e.maxContentLength+" exceeded",Ap.ERR_BAD_RESPONSE,e,u)))})),r.on("aborted",(function(){if(d)return;const t=new Ap("maxContentLength size of "+e.maxContentLength+" exceeded",Ap.ERR_BAD_RESPONSE,e,u);r.destroy(t),n(t)})),r.on("error",(function(t){p.destroyed||n(Ap.from(t,null,e,u))})),r.on("end",(function(){try{let e=1===s.length?s[0]:Buffer.concat(s);"arraybuffer"!==o&&(e=e.toString(c),c&&"utf8"!==c||(e=Sp.stripBOM(e))),g.data=e}catch(t){return n(Ap.from(t,null,e,g.request,g))}rd(t,n,g)}))}h.once("abort",(e=>{r.destroyed||(r.emit("error",e),r.destroy())}))})),h.once("abort",(e=>{n(e),p.destroy(e)})),p.on("error",(function(t){n(Ap.from(t,null,e,p))})),p.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){const t=parseInt(e.timeout,10);if(Number.isNaN(t))return void n(new Ap("error trying to parse `config.timeout` to int",Ap.ERR_BAD_OPTION_VALUE,e,p));p.setTimeout(t,(function(){if(u)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const s=e.transitional||Up;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Ap(t,s.clarifyTimeoutError?Ap.ETIMEDOUT:Ap.ECONNABORTED,e,p)),m()}))}if(Sp.isStream(i)){let t=!1,n=!1;i.on("end",(()=>{t=!0})),i.once("error",(e=>{n=!0,p.destroy(e)})),i.on("close",(()=>{t||n||m(new ad("Request stream has been aborted",e,p))})),i.pipe(p)}else p.end(i)},new Promise(((e,n)=>{let s,i;const a=(e,t)=>{i||(i=!0,s&&s(e,t))},r=e=>{a(e,!0),n(e)};t((t=>{a(t),e(t)}),r,(e=>s=e)).catch(r)}));var t},jd=Vp.hasStandardBrowserEnv?function(){const e=Vp.navigator&&/(msie|trident)/i.test(Vp.navigator.userAgent),t=document.createElement("a");let n;function s(n){let s=n;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(e){const t=Sp.isString(e)?s(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},Gd=Vp.hasStandardBrowserEnv?{write(e,t,n,s,i,a){const r=[e+"="+encodeURIComponent(t)];Sp.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),Sp.isString(s)&&r.push("path="+s),Sp.isString(i)&&r.push("domain="+i),!0===a&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}},qd=e=>e instanceof nd?{...e}:e;function Yd(e,t){t=t||{};const n={};function s(e,t,n){return Sp.isPlainObject(e)&&Sp.isPlainObject(t)?Sp.merge.call({caseless:n},e,t):Sp.isPlainObject(t)?Sp.merge({},t):Sp.isArray(t)?t.slice():t}function i(e,t,n){return Sp.isUndefined(t)?Sp.isUndefined(e)?void 0:s(void 0,e,n):s(e,t,n)}function a(e,t){if(!Sp.isUndefined(t))return s(void 0,t)}function r(e,t){return Sp.isUndefined(t)?Sp.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(n,i,a){return a in t?s(n,i):a in e?s(void 0,n):void 0}const c={url:a,method:a,data:a,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:o,headers:(e,t)=>i(qd(e),qd(t),!0)};return Sp.forEach(Object.keys(Object.assign({},e,t)),(function(s){const a=c[s]||i,r=a(e[s],t[s],s);Sp.isUndefined(r)&&a!==o||(n[s]=r)})),n}const zd=e=>{const t=Yd({},e);let n,{data:s,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:r,headers:o,auth:c}=t;if(t.headers=o=nd.from(o),t.url=Fp(od(t.baseURL,t.url),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Sp.isFormData(s))if(Vp.hasStandardBrowserEnv||Vp.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Vp.hasStandardBrowserEnv&&(i&&Sp.isFunction(i)&&(i=i(t)),i||!1!==i&&jd(t.url))){const e=a&&r&&Gd.read(r);e&&o.set(a,e)}return t},Vd="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const s=zd(e);let i=s.data;const a=nd.from(s.headers).normalize();let r,o,c,l,u,{responseType:p,onUploadProgress:d,onDownloadProgress:h}=s;function f(){l&&l(),u&&u(),s.cancelToken&&s.cancelToken.unsubscribe(r),s.signal&&s.signal.removeEventListener("abort",r)}let m=new XMLHttpRequest;function g(){if(!m)return;const s=nd.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());rd((function(e){t(e),f()}),(function(e){n(e),f()}),{data:p&&"text"!==p&&"json"!==p?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:s,config:e,request:m}),m=null}m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Ap("Request aborted",Ap.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Ap("Network Error",Ap.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const i=s.transitional||Up;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),n(new Ap(t,i.clarifyTimeoutError?Ap.ETIMEDOUT:Ap.ECONNABORTED,e,m)),m=null},void 0===i&&a.setContentType(null),"setRequestHeader"in m&&Sp.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Sp.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),p&&"json"!==p&&(m.responseType=s.responseType),h&&([c,u]=Ad(h,!0),m.addEventListener("progress",c)),d&&m.upload&&([o,l]=Ad(d),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",l)),(s.cancelToken||s.signal)&&(r=t=>{m&&(n(!t||t.type?new ad(null,e,m):t),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(r),s.signal&&(s.signal.aborted?r():s.signal.addEventListener("abort",r)));const y=ld(s.url);y&&-1===Vp.protocols.indexOf(y)?n(new Ap("Unsupported protocol "+y+":",Ap.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Wd=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,s=new AbortController;const i=function(e){if(!n){n=!0,r();const t=e instanceof Error?e:this.reason;s.abort(t instanceof Ap?t:new ad(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,i(new Ap(`timeout ${t} of ms exceeded`,Ap.ETIMEDOUT))}),t);const r=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:o}=s;return o.unsubscribe=()=>Sp.asap(r),o}},Qd=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let s,i=0;for(;i<n;)s=i+t,yield e.slice(i,s),i=s},Kd=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Zd=(e,t,n,s)=>{const i=async function*(e,t){for await(const n of Kd(e))yield*Qd(n,t)}(e,t);let a,r=0,o=e=>{a||(a=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await i.next();if(t)return o(),void e.close();let a=s.byteLength;if(n){let e=r+=a;n(e)}e.enqueue(new Uint8Array(s))}catch(e){throw o(e),e}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},$d="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Xd=$d&&"function"==typeof ReadableStream,Jd=$d&&("function"==typeof TextEncoder?(eh=new TextEncoder,e=>eh.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var eh;const th=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},nh=Xd&&th((()=>{let e=!1;const t=new Request(Vp.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),sh=Xd&&th((()=>Sp.isReadableStream(new Response("").body))),ih={stream:sh&&(e=>e.body)};var ah;$d&&(ah=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ih[e]&&(ih[e]=Sp.isFunction(ah[e])?t=>t[e]():(t,n)=>{throw new Ap(`Response type '${e}' is not supported`,Ap.ERR_NOT_SUPPORT,n)})})));const rh=async(e,t)=>{const n=Sp.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Sp.isBlob(e))return e.size;if(Sp.isSpecCompliantForm(e)){const t=new Request(Vp.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Sp.isArrayBufferView(e)||Sp.isArrayBuffer(e)?e.byteLength:(Sp.isURLSearchParams(e)&&(e+=""),Sp.isString(e)?(await Jd(e)).byteLength:void 0)})(t):n},oh=$d&&(async e=>{let{url:t,method:n,data:s,signal:i,cancelToken:a,timeout:r,onDownloadProgress:o,onUploadProgress:c,responseType:l,headers:u,withCredentials:p="same-origin",fetchOptions:d}=zd(e);l=l?(l+"").toLowerCase():"text";let h,f=Wd([i,a&&a.toAbortSignal()],r);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&nh&&"get"!==n&&"head"!==n&&0!==(g=await rh(u,s))){let e,n=new Request(t,{method:"POST",body:s,duplex:"half"});if(Sp.isFormData(s)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=wd(g,Ad(Cd(c)));s=Zd(n.body,65536,e,t)}}Sp.isString(p)||(p=p?"include":"omit");const i="credentials"in Request.prototype;h=new Request(t,{...d,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:i?p:void 0});let a=await fetch(h);const r=sh&&("stream"===l||"response"===l);if(sh&&(o||r&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=Sp.toFiniteNumber(a.headers.get("content-length")),[n,s]=o&&wd(t,Ad(Cd(o),!0))||[];a=new Response(Zd(a.body,65536,n,(()=>{s&&s(),m&&m()})),e)}l=l||"text";let y=await ih[Sp.findKey(ih,l)||"text"](a,e);return!r&&m&&m(),await new Promise(((t,n)=>{rd(t,n,{data:y,headers:nd.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:h})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new Ap("Network Error",Ap.ERR_NETWORK,e,h),{cause:t.cause||t});throw Ap.from(t,t&&t.code,e,h)}}),ch={http:Hd,xhr:Vd,fetch:oh};Sp.forEach(ch,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const lh=e=>`- ${e}`,uh=e=>Sp.isFunction(e)||null===e||!1===e,ph=e=>{e=Sp.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],s=n,!uh(n)&&(s=ch[(t=String(n)).toLowerCase()],void 0===s))throw new Ap(`Unknown adapter '${t}'`);if(s)break;i[t||"#"+a]=s}if(!s){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new Ap("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(lh).join("\n"):" "+lh(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function dh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ad(null,e)}function hh(e){dh(e),e.headers=nd.from(e.headers),e.data=sd.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ph(e.adapter||Kp.adapter)(e).then((function(t){return dh(e),t.data=sd.call(e,e.transformResponse,t),t.headers=nd.from(t.headers),t}),(function(t){return id(t)||(dh(e),t&&t.response&&(t.response.data=sd.call(e,e.transformResponse,t.response),t.response.headers=nd.from(t.response.headers))),Promise.reject(t)}))}const fh={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{fh[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const mh={};fh.transitional=function(e,t,n){function s(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new Ap(s(i," has been removed"+(t?" in "+t:"")),Ap.ERR_DEPRECATED);return t&&!mh[i]&&(mh[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};const gh={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Ap("options must be an object",Ap.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const a=s[i],r=t[a];if(r){const t=e[a],n=void 0===t||r(t,a,e);if(!0!==n)throw new Ap("option "+a+" must be "+n,Ap.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ap("Unknown option "+a,Ap.ERR_BAD_OPTION)}},validators:fh},yh=gh.validators;class _h{constructor(e){this.defaults=e,this.interceptors={request:new Bp,response:new Bp}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Yd(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;void 0!==n&&gh.assertOptions(n,{silentJSONParsing:yh.transitional(yh.boolean),forcedJSONParsing:yh.transitional(yh.boolean),clarifyTimeoutError:yh.transitional(yh.boolean)},!1),null!=s&&(Sp.isFunction(s)?t.paramsSerializer={serialize:s}:gh.assertOptions(s,{encode:yh.function,serialize:yh.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&Sp.merge(i.common,i[t.method]);i&&Sp.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=nd.concat(a,i);const r=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,p=0;if(!o){const e=[hh.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);p<u;)l=l.then(e[p++],e[p++]);return l}u=r.length;let d=t;for(p=0;p<u;){const e=r[p++],t=r[p++];try{d=e(d)}catch(e){t.call(this,e);break}}try{l=hh.call(this,d)}catch(e){return Promise.reject(e)}for(p=0,u=c.length;p<u;)l=l.then(c[p++],c[p++]);return l}getUri(e){return Fp(od((e=Yd(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Sp.forEach(["delete","get","head","options"],(function(e){_h.prototype[e]=function(t,n){return this.request(Yd(n||{},{method:e,url:t,data:(n||{}).data}))}})),Sp.forEach(["post","put","patch"],(function(e){function t(t){return function(n,s,i){return this.request(Yd(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}_h.prototype[e]=t(),_h.prototype[e+"Form"]=t(!0)}));const Eh=_h;class bh{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{n.subscribe(e),t=e})).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e((function(e,s,i){n.reason||(n.reason=new ad(e,s,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new bh((function(t){e=t})),cancel:e}}}const Th=bh;const vh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vh).forEach((([e,t])=>{vh[t]=e}));const xh=vh;const Sh=function e(t){const n=new Eh(t),s=Mu(Eh.prototype.request,n);return Sp.extend(s,Eh.prototype,n,{allOwnKeys:!0}),Sp.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(Yd(t,n))},s}(Kp);Sh.Axios=Eh,Sh.CanceledError=ad,Sh.CancelToken=Th,Sh.isCancel=id,Sh.VERSION=cd,Sh.toFormData=Dp,Sh.AxiosError=Ap,Sh.Cancel=Sh.CanceledError,Sh.all=function(e){return Promise.all(e)},Sh.spread=function(e){return function(t){return e.apply(null,t)}},Sh.isAxiosError=function(e){return Sp.isObject(e)&&!0===e.isAxiosError},Sh.mergeConfig=Yd,Sh.AxiosHeaders=nd,Sh.formToJSON=e=>Wp(Sp.isHTMLForm(e)?new FormData(e):e),Sh.getAdapter=ph,Sh.HttpStatusCode=xh,Sh.default=Sh;var Ah=Sh,wh=Ee,Ch=s,Nh=g,Ih=y,kh=_,Oh=a.parse,Dh=E,Rh=Te,Lh=ze,Ph=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e},Mh=Fh;function Fh(e){if(!(this instanceof Fh))return new Fh(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],wh.call(this),e=e||{})this[t]=e[t]}Ch.inherits(Fh,wh),Fh.LINE_BREAK="\r\n",Fh.DEFAULT_CONTENT_TYPE="application/octet-stream",Fh.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var s=wh.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),Ch.isArray(t))this._error(new Error("Arrays are not supported."));else{var i=this._multiPartHeader(e,t,n),a=this._multiPartFooter();s(i),s(t),s(a),this._trackLength(i,t,n)}},Fh.prototype._trackLength=function(e,t,n){var s=0;null!=n.knownLength?s+=+n.knownLength:Buffer.isBuffer(t)?s=t.length:"string"==typeof t&&(s=Buffer.byteLength(t)),this._valueLength+=s,this._overheadLength+=Buffer.byteLength(e)+Fh.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion"))&&(n.knownLength||this._valuesToMeasure.push(t))},Fh.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):Dh.stat(e.path,(function(n,s){var i;n?t(n):(i=s.size-(e.start?e.start:0),t(null,i))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},Fh.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var s,i=this._getContentDisposition(t,n),a=this._getContentType(t,n),r="",o={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(a||[])};for(var c in"object"==typeof n.header&&Ph(o,n.header),o)o.hasOwnProperty(c)&&null!=(s=o[c])&&(Array.isArray(s)||(s=[s]),s.length&&(r+=c+": "+s.join("; ")+Fh.LINE_BREAK));return"--"+this.getBoundary()+Fh.LINE_BREAK+r+Fh.LINE_BREAK},Fh.prototype._getContentDisposition=function(e,t){var n,s;return"string"==typeof t.filepath?n=Nh.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=Nh.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=Nh.basename(e.client._httpMessage.path||"")),n&&(s='filename="'+n+'"'),s},Fh.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=Rh.lookup(e.name)),!n&&e.path&&(n=Rh.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=Rh.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=Fh.DEFAULT_CONTENT_TYPE),n},Fh.prototype._multiPartFooter=function(){return function(e){var t=Fh.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},Fh.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+Fh.LINE_BREAK},Fh.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},Fh.prototype.setBoundary=function(e){this._boundary=e},Fh.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},Fh.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,s=this._streams.length;n<s;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(Fh.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},Fh.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},Fh.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},Fh.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},Fh.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?Lh.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,s){n?e(n):(s.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},Fh.prototype.submit=function(e,t){var n,s,i={method:"post"};return"string"==typeof e?(e=Oh(e),s=Ph({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(s=Ph(e,i)).port||(s.port="https:"==s.protocol?443:80),s.headers=this.getHeaders(e.headers),n="https:"==s.protocol?kh.request(s):Ih.request(s),this.getLength(function(e,s){if(e)this._error(e);else if(n.setHeader("Content-Length",s),this.pipe(n),t){var i,a=function(e,s){return n.removeListener("error",a),n.removeListener("response",i),t.call(this,e,s)};i=a.bind(this,null),n.on("error",a),n.on("response",i)}}.bind(this)),n},Fh.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},Fh.prototype.toString=function(){return"[object FormData]"};var Bh=C&&C.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),Uh=C&&C.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Hh=C&&C.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Bh(t,e,n);return Uh(t,e),t},jh=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.HttpClient=void 0;const Gh=Zl,qh=Xl,Yh=jh(Ah),zh=jh(Mh),Vh=Hh(_),Wh=Hh(y),Qh=Yh.default.create({httpAgent:new Wh.Agent({keepAlive:!0}),httpsAgent:new Vh.Agent({keepAlive:!0})});class Kh{constructor(){this.backoffInitial=1,this.backoffMax=120,this.backoffJitter=.23,this.backoffMultiplier=1.6,this.numRetries=0,this.backoff=1e3*this.backoffInitial,this.deadline=Date.now()+this.backoff}getNumRetries(){return this.numRetries}getTimeout(){return this.getTimeUntilDeadline()}getTimeUntilDeadline(){return Math.max(this.deadline-Date.now(),0)}async sleepUntilDeadline(){await(0,qh.timeout)(this.getTimeUntilDeadline()),this.backoff=Math.min(this.backoff*this.backoffMultiplier,1e3*this.backoffMax),this.deadline=Date.now()+this.backoff*(1+this.backoffJitter*(2*Math.random()-1)),this.numRetries++}}class Zh{constructor(e,t,n,s,i){this.serverUrl=e,this.headers=t,this.maxRetries=n,this.minTimeout=s,this.proxy=i}prepareRequest(e,t,n,s,i){const a=Object.assign({},this.headers,i.headers),r={url:t,method:e,baseURL:this.serverUrl,headers:a,responseType:s?"stream":"text",timeout:n,validateStatus:null};if(i.fileBuffer){const e=new zh.default;if(e.append("file",i.fileBuffer,{filename:i.filename}),i.data)for(const[t,n]of i.data.entries())e.append(t,n);r.data=e,void 0===r.headers&&(r.headers={}),Object.assign(r.headers,e.getHeaders())}else i.data&&("GET"===e?r.params=i.data:r.data=i.data);return r.proxy=this.proxy,r}async sendRequestWithBackoff(e,t,n,s=!1){n=void 0===n?{}:n,(0,qh.logInfo)(`Request to DeepL API ${e} ${t}`),(0,qh.logDebug)(`Request details: ${n.data}`);const i=new Kh;let a,r;for(;i.getNumRetries()<=this.maxRetries;){const o=Math.max(this.minTimeout,i.getTimeout()),c=this.prepareRequest(e,t,o,s,n);try{a=await Zh.sendAxiosRequest(c),r=void 0}catch(e){a=void 0,r=e}if(!Zh.shouldRetry(null==a?void 0:a.statusCode,r)||i.getNumRetries()+1>=this.maxRetries)break;void 0!==r&&(0,qh.logDebug)(`Encountered a retryable-error: ${r.message}`),(0,qh.logInfo)(`Starting retry ${i.getNumRetries()+1} for request ${e} ${t} after sleeping for ${i.getTimeUntilDeadline()} seconds.`),await i.sleepUntilDeadline()}if(void 0!==a){const{statusCode:n,content:i}=a;return(0,qh.logInfo)(`DeepL API response ${e} ${t} ${n}`),s||(0,qh.logDebug)("Response details:",{content:i}),a}throw r}static async sendAxiosRequest(e){try{const t=await Qh.request(e);return"text"===e.responseType&&"object"==typeof t.data&&(t.data=JSON.stringify(t.data)),{statusCode:t.status,content:t.data}}catch(e){const t=e,n=t.message||"",s=new Gh.ConnectionError(`Connection failure: ${n}`);throw s.error=t,"ETIMEDOUT"===t.code||"ECONNABORTED"===t.code?s.shouldRetry=!0:((0,qh.logDebug)("Unrecognized axios error",t),s.shouldRetry=!1),s}}static shouldRetry(e,t){return void 0===e?t.shouldRetry:429===e||e>=500}}Kl.HttpClient=Zh;var $h={};Object.defineProperty($h,"__esModule",{value:!0}),$h.GlossaryEntries=void 0;const Xh=Zl,Jh=Xl;class ef{constructor(e){if(this.implEntries={},void 0!==(null==e?void 0:e.entries)){if(void 0!==(null==e?void 0:e.tsv))throw new Xh.DeepLError("options.entries and options.tsv are mutually exclusive");Object.assign(this.implEntries,e.entries)}else if(void 0!==(null==e?void 0:e.tsv)){const t=e.tsv;for(const e of t.split(/\r\n|\n|\r/)){if(0===e.length)continue;const[t,n,s]=e.split("\t",3);if(void 0===n)throw new Xh.DeepLError(`Missing tab character in entry '${e}'`);if(void 0!==s)throw new Xh.DeepLError(`Duplicate tab character in entry '${e}'`);this.add(t,n,!1)}}}add(e,t,n=!1){if(!n&&e in this.implEntries)throw new Xh.DeepLError(`Duplicate source term '${e}'`);this.implEntries[e]=t}entries(){return this.implEntries}toTsv(){return Object.entries(this.implEntries).map((([e,t])=>(ef.validateGlossaryTerm(e),ef.validateGlossaryTerm(t),`${e}\t${t}`))).join("\n")}static validateGlossaryTerm(e){if(!(0,Jh.isString)(e)||0===e.length)throw new Xh.DeepLError(`'${e}' is not a valid term.`);for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(0<=n&&n<=31||128<=n&&n<=159||8232===n||8233===n)throw new Xh.DeepLError(`Term '${e}' contains invalid character: '${e[t]}' (${n})`)}}}$h.GlossaryEntries=ef;var tf,nf={};function sf(){if(tf)return nf;tf=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.parseDocumentHandle=nf.parseGlossaryLanguagePairArray=nf.parseLanguageArray=nf.parseTextResultArray=nf.parseUsage=nf.parseDocumentStatus=nf.parseGlossaryInfoList=nf.parseGlossaryInfo=void 0;const e=Zl,t=of();class n{constructor(e,t){this.count=e,this.limit=t}limitReached(){return this.count>=this.limit}}class s{constructor(e,t,n){this.character=e,this.document=t,this.teamDocument=n}anyLimitReached(){var e,t,n;return(null===(e=this.character)||void 0===e?void 0:e.limitReached())||(null===(t=this.document)||void 0===t?void 0:t.limitReached())||(null===(n=this.teamDocument)||void 0===n?void 0:n.limitReached())||!1}toString(){return"Usage this billing period:\n"+[["Characters",this.character],["Documents",this.document],["Team documents",this.teamDocument]].filter((([,e])=>e)).map((([e,t])=>`${e}: ${t.count} of ${t.limit}`)).join("\n")}}class i{constructor(e,t,n,s){this.status=e,this.secondsRemaining=t,this.billedCharacters=n,this.errorMessage=s}ok(){return"queued"===this.status||"translating"===this.status||"done"===this.status}done(){return"done"===this.status}}function a(e){return{glossaryId:e.glossary_id,name:e.name,ready:e.ready,sourceLang:e.source_lang,targetLang:e.target_lang,creationTime:new Date(e.creation_time),entryCount:e.entry_count}}function r(e,t){const s=e[`${t}_count`],i=e[`${t}_limit`];if(void 0!==s&&void 0!==i)return new n(s,i)}return nf.parseGlossaryInfo=function(t){try{return a(JSON.parse(t))}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},nf.parseGlossaryInfoList=function(t){try{return JSON.parse(t).glossaries.map((e=>a(e)))}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},nf.parseDocumentStatus=function(t){try{const e=JSON.parse(t);return new i(e.status,e.seconds_remaining,e.billed_characters,e.error_message)}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},nf.parseUsage=function(t){try{const e=JSON.parse(t);return new s(r(e,"character"),r(e,"document"),r(e,"team_document"))}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},nf.parseTextResultArray=function(n){try{return JSON.parse(n).translations.map((e=>({text:e.text,detectedSourceLang:(0,t.standardizeLanguageCode)(e.detected_source_language)})))}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},nf.parseLanguageArray=function(n){return JSON.parse(n).map((n=>function(n){try{const e={name:n.name,code:(0,t.standardizeLanguageCode)(n.language),supportsFormality:n.supports_formality};return void 0===e.supportsFormality&&delete e.supportsFormality,e}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}}(n)))},nf.parseGlossaryLanguagePairArray=function(t){return JSON.parse(t).supported_languages.map((t=>function(t){try{return{sourceLang:t.source_lang,targetLang:t.target_lang}}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}}(t)))},nf.parseDocumentHandle=function(t){try{const e=JSON.parse(t);return{documentId:e.document_id,documentKey:e.document_key}}catch(t){throw new e.DeepLError(`Error parsing response JSON: ${t}`)}},nf}var af,rf={};function of(){return af||(af=1,function(e){var t=C&&C.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),n=C&&C.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=C&&C.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(s,e,i);return n(s,e),s},r=C&&C.__exportStar||function(e,n){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(n,s)||t(n,e,s)},c=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Translator=e.isFreeAccountAuthKey=e.nonRegionalLanguageCode=e.standardizeLanguageCode=void 0;const l=Kl,u=Zl,p=$h,d=sf(),h=Xl,f=i(E),m=y,_=c(g),b=i(o),T=a,v=i(s);function x(e){if(!(0,h.isString)(e)||0===e.length)throw new u.DeepLError("langCode must be a non-empty string");const[t,n]=e.split("-",2);return void 0===n?t.toLowerCase():`${t.toLowerCase()}-${n.toUpperCase()}`}function S(e){if(!(0,h.isString)(e)||0===e.length)throw new u.DeepLError("langCode must be a non-empty string");return e.split("-",2)[0].toLowerCase()}function A(e){return e.endsWith(":fx")}function w(e){return(0,h.isString)(e)?e:e.join(",")}function N(e,t,n,s,i){if(t=x(t),null!==e&&(e=x(e)),void 0!==s&&null===e)throw new u.DeepLError("sourceLang is required if using a glossary");if(void 0!==s&&!(0,h.isString)(s)&&(S(t)!==s.targetLang||e!==s.sourceLang))throw new u.DeepLError("sourceLang and targetLang must match glossary");if("en"===t)throw new u.DeepLError("targetLang='en' is deprecated, please use 'en-GB' or 'en-US' instead.");if("pt"===t)throw new u.DeepLError("targetLang='pt' is deprecated, please use 'pt-PT' or 'pt-BR' instead.");const a=new T.URLSearchParams({target_lang:t});if(null!==e&&a.append("source_lang",e),void 0!==n){const e=String(n).toLowerCase();a.append("formality",e)}if(void 0!==s){if(!(0,h.isString)(s)){if(void 0===s.glossaryId)throw new u.DeepLError("glossary option should be a string containing the Glossary ID or a GlossaryInfo object.");s=s.glossaryId}a.append("glossary_id",s)}if(void 0!==i)for(const e in i)a.append(e,i[e]);return a}async function I(e,t,n=!1,s=!1){if(200<=e&&e<400)return;if(t instanceof m.IncomingMessage)try{t=await(0,h.streamToString)(t)}catch(e){t=`Error occurred while reading response: ${e}`}let i="";try{const e=JSON.parse(t);void 0!==e.message&&(i+=`, message: ${e.message}`),void 0!==e.detail&&(i+=`, detail: ${e.detail}`)}catch(e){i=", "+t}switch(e){case 403:throw new u.AuthorizationError(`Authorization failure, check auth_key${i}`);case 456:throw new u.QuotaExceededError(`Quota for this billing period has been exceeded${i}`);case 404:if(n)throw new u.GlossaryNotFoundError(`Glossary not found${i}`);throw new u.DeepLError(`Not found, check server_url${i}`);case 400:throw new u.DeepLError(`Bad request${i}`);case 429:throw new u.TooManyRequestsError(`Too many requests, DeepL servers are currently experiencing high load${i}`);case 503:throw s?new u.DocumentNotReadyError(`Document not ready${i}`):new u.DeepLError(`Service unavailable${i}`);default:{const n=m.STATUS_CODES[e]||"Unknown";throw new u.DeepLError(`Unexpected status code: ${e} ${n}${i}, content: ${t}`)}}}r(Zl,e),r($h,e),r(rf,e),e.standardizeLanguageCode=x,e.nonRegionalLanguageCode=S,e.isFreeAccountAuthKey=A;e.Translator=class{constructor(e,t){var n;if(!(0,h.isString)(e)||0===e.length)throw new u.DeepLError("authKey must be a non-empty string");let s;s=void 0!==(null==t?void 0:t.serverUrl)?t.serverUrl:A(e)?"https://api-free.deepl.com":"https://api.deepl.com";const i={Authorization:`DeepL-Auth-Key ${e}`,"User-Agent":this.constructUserAgentString(!1!==(null==t?void 0:t.sendPlatformInfo),null==t?void 0:t.appInfo),...null!==(n=null==t?void 0:t.headers)&&void 0!==n?n:{}},a=void 0!==(null==t?void 0:t.maxRetries)?t.maxRetries:5,r=void 0!==(null==t?void 0:t.minTimeout)?t.minTimeout:5e3;this.httpClient=new l.HttpClient(s,i,a,r,null==t?void 0:t.proxy)}async getUsage(){const{statusCode:e,content:t}=await this.httpClient.sendRequestWithBackoff("GET","/v2/usage");return await I(e,t),(0,d.parseUsage)(t)}async getSourceLanguages(){const{statusCode:e,content:t}=await this.httpClient.sendRequestWithBackoff("GET","/v2/languages");return await I(e,t),(0,d.parseLanguageArray)(t)}async getTargetLanguages(){const e=new T.URLSearchParams({type:"target"}),{statusCode:t,content:n}=await this.httpClient.sendRequestWithBackoff("GET","/v2/languages",{data:e});return await I(t,n),(0,d.parseLanguageArray)(n)}async getGlossaryLanguagePairs(){const{statusCode:e,content:t}=await this.httpClient.sendRequestWithBackoff("GET","/v2/glossary-language-pairs");return await I(e,t),(0,d.parseGlossaryLanguagePairArray)(t)}async translateText(e,t,n,s){const i=N(t,n,null==s?void 0:s.formality,null==s?void 0:s.glossary,null==s?void 0:s.extraRequestParameters),a=function(e,t){const n=!Array.isArray(t);if(n){if(!(0,h.isString)(t)||0===t.length)throw new u.DeepLError("texts parameter must be a non-empty string or array of non-empty strings");e.append("text",t)}else for(const n of t){if(!(0,h.isString)(n)||0===n.length)throw new u.DeepLError("texts parameter must be a non-empty string or array of non-empty strings");e.append("text",n)}return n}(i,e);!function(e,t){t&&(void 0!==t.splitSentences&&(t.splitSentences=t.splitSentences.toLowerCase(),"on"===t.splitSentences||"default"===t.splitSentences?e.append("split_sentences","1"):"off"===t.splitSentences?e.append("split_sentences","0"):e.append("split_sentences",t.splitSentences)),void 0!==t.preserveFormatting&&e.append("preserve_formatting",(0,h.toBoolString)(t.preserveFormatting)),void 0!==t.tagHandling&&e.append("tag_handling",t.tagHandling),void 0!==t.outlineDetection&&e.append("outline_detection",(0,h.toBoolString)(t.outlineDetection)),void 0!==t.context&&e.append("context",t.context),void 0!==t.nonSplittingTags&&e.append("non_splitting_tags",w(t.nonSplittingTags)),void 0!==t.splittingTags&&e.append("splitting_tags",w(t.splittingTags)),void 0!==t.ignoreTags&&e.append("ignore_tags",w(t.ignoreTags)))}(i,s);const{statusCode:r,content:o}=await this.httpClient.sendRequestWithBackoff("POST","/v2/translate",{data:i});await I(r,o);const c=(0,d.parseTextResultArray)(o);return a?c[0]:c}async translateDocument(e,t,n,s,i){const{outputHandle:a,onError:r}=await async function(){if((0,h.isString)(t)){const e=await f.promises.open(t,"wx"),n=async()=>{try{await e.close(),await v.promisify(f.unlink)(t)}catch{}};return{outputHandle:e,onError:n}}return{outputHandle:t}}();let o;try{o=await this.uploadDocument(e,n,s,i);const{status:t}=await this.isDocumentTranslationComplete(o);return await this.downloadDocument(o,a),t}catch(e){r&&await r();const t=e instanceof Error?e:void 0,n="Error occurred while translating document: "+((null==t?void 0:t.message)?null==t?void 0:t.message:e);throw new u.DocumentTranslationError(n,o,t)}}async uploadDocument(e,t,n,s){if((0,h.isString)(e)){const i=await f.promises.readFile(e);return this.internalUploadDocument(i,t,n,_.default.basename(e),s)}if(void 0===(null==s?void 0:s.filename))throw new u.DeepLError("options.filename must be specified unless using input file path");if(e instanceof f.ReadStream){const i=await(0,h.streamToBuffer)(e);return this.internalUploadDocument(i,t,n,s.filename,s)}if(e instanceof Buffer)return this.internalUploadDocument(e,t,n,s.filename,s);{const i=await e.readFile(),a=await this.internalUploadDocument(i,t,n,s.filename,s);return await e.close(),a}}async getDocumentStatus(e){const t=new T.URLSearchParams({document_key:e.documentKey}),{statusCode:n,content:s}=await this.httpClient.sendRequestWithBackoff("POST",`/v2/document/${e.documentId}`,{data:t});return await I(n,s,!1,!0),(0,d.parseDocumentStatus)(s)}async downloadDocument(e,t){if((0,h.isString)(t)){const n=await f.createWriteStream(t,{flags:"wx"});try{await this.internalDownloadDocument(e,n)}catch(e){throw await new Promise((e=>n.close(e))),await f.promises.unlink(t),e}}else{if(t instanceof f.WriteStream)return this.internalDownloadDocument(e,t);{const n="",s=f.createWriteStream(n,{fd:t.fd});await this.internalDownloadDocument(e,s);try{await t.close()}catch{}}}}async isDocumentTranslationComplete(e){let t=await this.getDocumentStatus(e);for(;!t.done()&&t.ok();){const n=5;await(0,h.timeout)(1e3*n),(0,h.logInfo)(`Rechecking document translation status after sleeping for ${n} seconds.`),t=await this.getDocumentStatus(e)}if(!t.ok()){const e=t.errorMessage||"unknown error";throw new u.DeepLError(e)}return{handle:e,status:t}}async createGlossary(e,t,n,s){if(0===Object.keys(s.entries()).length)throw new u.DeepLError("glossary entries must not be empty");const i=s.toTsv();return this.internalCreateGlossary(e,t,n,"tsv",i)}async createGlossaryWithCsv(e,t,n,s){let i;return(0,h.isString)(s)?i=(await f.promises.readFile(s)).toString():s instanceof f.ReadStream?i=(await(0,h.streamToBuffer)(s)).toString():s instanceof Buffer?i=s.toString():(i=(await s.readFile()).toString(),await s.close()),this.internalCreateGlossary(e,t,n,"csv",i)}async getGlossary(e){const{statusCode:t,content:n}=await this.httpClient.sendRequestWithBackoff("GET",`/v2/glossaries/${e}`);return await I(t,n,!0),(0,d.parseGlossaryInfo)(n)}async listGlossaries(){const{statusCode:e,content:t}=await this.httpClient.sendRequestWithBackoff("GET","/v2/glossaries");return await I(e,t,!0),(0,d.parseGlossaryInfoList)(t)}async getGlossaryEntries(e){e=(0,h.isString)(e)?e:e.glossaryId;const{statusCode:t,content:n}=await this.httpClient.sendRequestWithBackoff("GET",`/v2/glossaries/${e}/entries`);return await I(t,n,!0),new p.GlossaryEntries({tsv:n})}async deleteGlossary(e){e=(0,h.isString)(e)?e:e.glossaryId;const{statusCode:t,content:n}=await this.httpClient.sendRequestWithBackoff("DELETE",`/v2/glossaries/${e}`);await I(t,n,!0)}async internalUploadDocument(e,t,n,s,i){const a=N(t,n,null==i?void 0:i.formality,null==i?void 0:i.glossary,null==i?void 0:i.extraRequestParameters),{statusCode:r,content:o}=await this.httpClient.sendRequestWithBackoff("POST","/v2/document",{data:a,fileBuffer:e,filename:s});return await I(r,o),(0,d.parseDocumentHandle)(o)}async internalDownloadDocument(e,t){const n=new T.URLSearchParams({document_key:e.documentKey}),{statusCode:s,content:i}=await this.httpClient.sendRequestWithBackoff("POST",`/v2/document/${e.documentId}/result`,{data:n},!0);return await I(s,i,!1,!0),i.pipe(t),new Promise(((e,n)=>{t.on("finish",e),t.on("error",n)}))}async internalCreateGlossary(e,t,n,s,i){if(t=S(t),n=S(n),!(0,h.isString)(e)||0===e.length)throw new u.DeepLError("glossary name must be a non-empty string");const a=new T.URLSearchParams({name:e,source_lang:t,target_lang:n,entries_format:s,entries:i}),{statusCode:r,content:o}=await this.httpClient.sendRequestWithBackoff("POST","/v2/glossaries",{data:a});return await I(r,o,!0),(0,d.parseGlossaryInfo)(o)}constructUserAgentString(e,t){let n="deepl-node/1.13.1";if(e){n+=` (${b.type()} ${b.version()}) node/${process.version.substring(1)}`}return t&&(n+=` ${t.appName}/${t.appVersion}`),n}}}(Ql)),Ql}Object.defineProperty(rf,"__esModule",{value:!0});var cf=N(of());class lf{constructor(e){this.translator=new cf.Translator(e)}async init(){}async translate(e,t,n){let s=null,i=this.getDeepLLanguageCodeSource(t),a=this.getDeepLLanguageCodeTarget(n);try{s=await this.translateRaw(e,i,a)}catch(t){let a=t.toString();if(a.includes("targetLang")&&a.includes("deprecated"))try{let t=n;s=await this.translateRaw(e,i,t)}catch(e){console.log(e)}else console.log(t)}return s}replaceAll(e,t,n){return e.replace(new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}async translateRaw(e,t,n){let s=e;const i={"*":"<*>"};for(const[e,t]of Object.entries(i))s=this.replaceAll(s,e,t);let a=await this.translator.translateText(s,t,n),r=null==a?void 0:a.text;for(const[e,t]of Object.entries(i))r=this.replaceAll(r,t,e);return r}async getExtra(){let e={sourceLanguages:await this.translator.getSourceLanguages(),targetLanguages:await this.translator.getTargetLanguages()};return{extra:JSON.stringify(e,null,2)||""}}async getUsage(){const e=await this.translator.getUsage();e.anyLimitReached();const t=null==e?void 0:e.character;return{used:(null==t?void 0:t.count)||0,limit:(null==t?void 0:t.limit)||0}}getDeepLLanguageCodeSource(e){return this.getDeepLLanguageCode(e)}getDeepLLanguageCodeTarget(e){return this.getDeepLLanguageCode(e)}getDeepLLanguageCode(e){if(e){return e.split("-")[0]}return e}}class uf{constructor(e,t){this.logger=t.logger,this.translatorSettings=e}async init(){let e=await this.getAuthKey();if(e)try{await this.reloadAuthKey(e);let t=await this.getSettingsAuthKeyCorrectObject();await this.setSettings(t)}catch(e){console.log("Error Initializing Translatior"),console.log(e.toString()),await this.setSettings(this.getSettingsAuthKeyErrorObject(e))}else{const e="Auth Key not set! Please set the key in .env file: "+Yl.getEnvFieldNameForAutoTranslateApiKey();await this.setSettings(this.getSettingsAuthKeyErrorObject(e))}}async translate(e,t,n){if(!this.translatorImplementation)return null;const s=await this.translatorImplementation.translate(e,t,n);return await this.reloadUsage(),s}async getSettingsAuthKeyCorrectObject(){return{valid_auth_key:!0,informations:"Auth Key is valid!",...await this.getUsage(),...await this.getExtra()}}getSettingsAuthKeyErrorObject(e){return{auth_key:null,valid_auth_key:!1,informations:"Auth Key not valid!\n"+e.toString()}}async reloadAuthKey(e){this.translatorImplementation=new lf(e),await this.translatorImplementation.init(),await this.reloadUsage()}async reloadUsage(){const e=await this.getUsage(),t=e.used||0,n=e.limit||0;let s=0;n>0&&(s=Math.round(t/n*100)),await this.setSettings({percentage:s,...e})}async getUsage(){return this.translatorImplementation?await this.translatorImplementation.getUsage():{used:0,limit:0}}async getExtra(){return this.translatorImplementation?await this.translatorImplementation.getExtra():{extra:""}}async setSettings(e){await this.translatorSettings.setSettings(e)}async getAuthKey(){return await this.translatorSettings.getAuthKey()}}class pf{constructor(e){this.apiContext=e,this.apiKey=null,this.apiKey=Yl.getAutoTranslateApiKey();const t=new Gl(this.apiContext);this.translationSettingsService=t.getAutoTranslationSettingsHelper()}async getSettings(){return await this.translationSettingsService.getAppSettings()}async isAutoTranslationEnabled(){let e=await this.getSettings();return null==e?void 0:e.active}async setSettings(e){await this.translationSettingsService.setAutoTranslationSettings(e)}async getAuthKey(){return this.apiKey}}const df=class{static areTranslationsToTranslate(e,t){if(e&&e[t]){let n=(null==e?void 0:e[t])||{},s=(null==n?void 0:n.create)||[],i=(null==n?void 0:n.update)||[];return s.length>0||i.length>0}return!1}static getSourceTranslationFromTranslations(e,t,n,s){if(e&&e.length>0)for(let i of e){if(df.getValueFromPayloadOrDefaultValue(i,df.FIELD_BE_SOURCE_FOR_TRANSLATION,t,n,s))return i}}static getSourceTranslationFromListsOfTranslations(e,t,n,s){if(e&&e.length>0)for(let i=0;i<e.length;i++){let a=e[i],r=df.getSourceTranslationFromTranslations(a,t,n,s);if(r)return r}return null}static setFIELD_LANGUAGES_ID_OR_CODE(e){(null==e?void 0:e[df.FIELD_LANGUAGES_CODE_OLD])&&(df.FIELD_LANGUAGES_ID_OR_CODE=df.FIELD_LANGUAGES_CODE_OLD);(null==e?void 0:e[df.FIELD_LANGUAGES_IDS_NEW])&&(df.FIELD_LANGUAGES_ID_OR_CODE=df.FIELD_LANGUAGES_IDS_NEW)}static parseTranslationListToLanguagesCodeDict(e){var t;let n={};for(let s of e)df.setFIELD_LANGUAGES_ID_OR_CODE(s),n[null==(t=null==s?void 0:s[df.FIELD_LANGUAGES_ID_OR_CODE])?void 0:t.code]=s;return n}static async modifyPayloadForTranslation(e,t,n,s,i,a,r){var o;if(df.areTranslationsToTranslate(t,r)){let c=JSON.parse(JSON.stringify(t));const l=await i.getSchema();let u=(null==e?void 0:e[r])||[],p={};for(let e of u)df.setFIELD_LANGUAGES_ID_OR_CODE(e),p[null==e?void 0:e[df.FIELD_LANGUAGES_ID_OR_CODE]]=e;let d=(null==c?void 0:c[r])||{},h=(null==d?void 0:d.create)||[],f=(null==d?void 0:d.update)||[],m=df.parseTranslationListToLanguagesCodeDict(h),g=df.parseTranslationListToLanguagesCodeDict(f),y=df.getSourceTranslationFromListsOfTranslations([u],l,a,r),_=df.getSourceTranslationFromListsOfTranslations([h,f],l,a,r)||y;if(_){let e=null==(o=null==_?void 0:_[df.FIELD_LANGUAGES_ID_OR_CODE])?void 0:o.code,c=new Rl(i,df.COLLECTION_LANGUAGES),u=await c.readByQuery({});if(u.length>0){let i=[],o=[],c=[],d=df.getFieldsToTranslate(l,a,r);for(let t of u){let c=null==t?void 0:t.code,u=p[c],h=c===e;if(u)if(h)o.push({..._});else{let e=g[c],t=null==u?void 0:u[df.FIELD_LET_BE_TRANSLATED],i=df.getValueFromPayloadOrDefaultValue(e,df.FIELD_LET_BE_TRANSLATED,l,a,r);if(df.isValueDefined(i)&&(t=i),t){let e=await df.translateTranslationItem(_,c,n,s,d);o.push({...u,...e})}else e&&o.push({...e,[df.FIELD_BE_SOURCE_FOR_TRANSLATION]:!1})}else if(h)i.push({..._,[df.FIELD_LET_BE_TRANSLATED]:df.getValueFromPayloadOrDefaultValue(_,df.FIELD_LET_BE_TRANSLATED,l,a,r),[df.FIELD_BE_SOURCE_FOR_TRANSLATION]:!0});else{let e=m[c],o=df.getValueFromPayloadOrDefaultValue(e,df.FIELD_LET_BE_TRANSLATED,l,a,r),u=!0;if(df.isValueDefined(o)&&(u=o),u){let e=await df.translateTranslationItem(_,null==t?void 0:t.code,n,s,d);i.push({...e})}else e&&i.push({...e,[df.FIELD_BE_SOURCE_FOR_TRANSLATION]:!1})}}return t[r]={create:i,update:o,delete:c},t}}}return t}static isValueDefined(e){return null!=e}static getValueFromPayloadOrDefaultValue(e,t,n,s,i){var a,r;let o=df.getTranslationCollectionSchema(n,s,i),c=null==e?void 0:e[t];if(df.isValueDefined(c))return c;return null==(r=null==(a=null==o?void 0:o.fields)?void 0:a[t])?void 0:r.defaultValue}static async translateTranslationItem(e,t,n,s,i){var a;let r={};if(i&&i.length>0)for(let s of i){let i=e[s];if(i)try{let o=await n.translate(i,null==(a=null==e?void 0:e[df.FIELD_LANGUAGES_ID_OR_CODE])?void 0:a.code,t);o&&(r[s]=o)}catch(e){console.log(e)}}return r[df.FIELD_LANGUAGES_ID_OR_CODE]={code:t},r[df.FIELD_LET_BE_TRANSLATED]=!0,r[df.FIELD_BE_SOURCE_FOR_TRANSLATION]=!1,r}static getTranslationCollectionName(e,t,n){let s=(null==e?void 0:e.relations)||[];for(let e of s)if((null==e?void 0:e.related_collection)===t){const s=null==e?void 0:e.meta,i=null==s?void 0:s.one_collection,a=null==s?void 0:s.one_field,r=null==e?void 0:e.collection;if(i===t&&a===n)return r}return null}static getSchemaForCollection(e,t){var n;return null==(n=null==e?void 0:e.collections)?void 0:n[t]}static getTranslationCollectionSchema(e,t,n){let s=df.getTranslationCollectionName(e,t,n);return s?df.getSchemaForCollection(e,s):null}static getFieldsToTranslate(e,t,n){let s=df.getTranslationCollectionSchema(e,t,n),i=(null==s?void 0:s.fields)||{},a=Object.keys(i),r=(null==s?void 0:s.primary)||"id",o={};for(let e of a)if(e!==r){let t=i[e];"text"!==(null==t?void 0:t.type)&&"string"!==(null==t?void 0:t.type)||(o[e]=!0)}let c=(null==e?void 0:e.relations)||[];for(let e of c)delete o[null==e?void 0:e.field];return Object.keys(o)}};let hf=df;hf.FIELD_BE_SOURCE_FOR_TRANSLATION="be_source_for_translations",hf.FIELD_LET_BE_TRANSLATED="let_be_translated",hf.FIELD_LANGUAGES_IDS_NEW="languages_id",hf.FIELD_LANGUAGES_CODE_OLD="languages_code",hf.FIELD_LANGUAGES_ID_OR_CODE=void 0,hf.COLLECTION_LANGUAGES="languages";class ff{}ff.USERS_DELETE_EVENT="users.delete",ff.USERS_CREATE_EVENT="users.create",ff.USERS_LOGIN_EVENT="auth.login",ff.SERVER_START_EVENT="server.start";const mf=!1;async function gf(e,t,n,s){let i={},a=(null==t?void 0:t.keys)||[];const r=await new Rl(s,e);for(let e of a){i=await r.readOne(e,{fields:[n+".*"]});break}return i}async function yf(e,t,n,s,i){if(e===jl.TABLENAME)return t;s.database;let a=await i.getSchema(),r=a.collections[e];if(void 0===r)return console.log("Table schema not found for "+e),t;const o=r.fields;if(void 0===o)return console.log("Table schema fields not found for "+e),t;let c=Object.keys(o).filter((e=>{var t,n;return null==(n=null==(t=null==o?void 0:o[e])?void 0:t.special)?void 0:n.includes("translations")})),l=!1;for(let e of c)if(void 0!==t[e]){l=!0;break}if(l){let{translatorSettings:s,translator:a}=await async function(e){let t=new pf(e),n=new uf(t,e);return await n.init(),{translatorSettings:t,translator:n}}(i);if(await s.isAutoTranslationEnabled()||mf){let r=t;for(let t of c){let o=await gf(e,n,t,i);r=await hf.modifyPayloadForTranslation(o,r,a,s,i,e,t)}return r}}return t}var _f=({filter:e,action:t,init:n,schedule:s},i)=>{er.checkTablesExist("auto-translation",i,[jl.TABLENAME])?t(ff.SERVER_START_EVENT,(async(t,n)=>{try{let t=new pf(i),n=new uf(t,i);await n.init(),function(e,t){let n=["create","update"];for(let s of n)e("items."+s,(async(e,n,s)=>{let i=null==n?void 0:n.collection;return await yf(i,e,n,s,t)}))}(e,i)}catch(e){console.log(e)}})):console.log("Collection "+jl.TABLENAME+" not found. Skipping auto-translation initialization.")};class Ef{constructor(e,t,n){this.name=e,this.total_count=t,this.startTime=void 0,this.lastTime=void 0,this.print_every_x_count=n||100}start(){this.startTime=this.private_getNow(),this.lastTime=this.startTime}private_getNow(){return(new Date).getTime()}calcEstimatedFinishedDate(e){let t=(this.private_getNow()-this.startTime)/1e3,n=t/e*this.total_count;return new Date(this.private_getNow()+1e3*(n-t))}formatSecondsIntoHHMMSS(e){let t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}printEstimatedTime(e){if(void 0===this.startTime)return void console.log("Timer not started.");if(0===e)return;if(e%this.print_every_x_count!=0)return;let t=this.private_getNow(),n=(this.calcEstimatedFinishedDate(e)-t)/1e3,s=this.formatSecondsIntoHHMMSS(n),i=this.calcEstimatedFinishedDate(e).toLocaleTimeString();console.log(`Estimated remaining time for ${this.name}: ${s}, probably finished at: ${i} - `+e+" / "+this.total_count);let a=(t-this.lastTime)/1e3/this.print_every_x_count;console.log("Average time per action: "+this.formatSecondsIntoHHMMSS(a)),this.lastTime=t}}const bf="Cashregister";let Tf=class{constructor(e,t){this.apiContext=t,this.myDatabaseHelper=new Gl(t),this.parser=e}async setStatus(e){await this.myDatabaseHelper.getAppSettingsHelper().setCashregisterParsingStatus(e,new Date)}async isEnabled(){return await this.myDatabaseHelper.getAppSettingsHelper().isCashregisterParsingEnabled()}async getStatus(){return await this.myDatabaseHelper.getAppSettingsHelper().getCashregisterParsingStatus()}async parse(){let e=await this.isEnabled(),t=await this.getStatus();if(e&&t===Fl.START){await this.setStatus(Fl.RUNNING);try{let e=await this.parser.getTransactionsList(),t=e.length,n=new Ef(bf+" parsing",t,100),s={};n.start();for(let i=0;i<t;i++){let t=e[i];if(!t)continue;let a,r=null==t?void 0:t.cashregister_external_idenfifier,o=s[r];if(void 0===o){let e=await this.myDatabaseHelper.getCashregisterHelper().findOrCreateCashregister(r);e&&(o=null==e?void 0:e.id,s[r]=o,a=o)}else a=o;void 0!==a?await this.findOrCreateCashregisterTransaction(t,a):console.log("Houston we got a problem? Seems like somebody deleted a cashregister mid transaction"),n.printEstimatedTime(i)}await this.setStatus(Fl.FINISHED)}catch(e){console.log("[CashregisterParseSchedule] Failed"),console.log(e),await this.setStatus(Fl.FAILED)}}}async findOrCreateCashregisterTransaction(e,t){return await this.myDatabaseHelper.getCashregisterHelper().findOrCreateCashregisterTransaction(e,t)}};Tf.SCHEDULE_NAME=bf;class vf{constructor(e,t){this.password="",this.api_url="",this.api_url=e,this.password=t}async getTransactionsList(){const e=await this.getAsJSON(this.api_url,this.password),t=[];if(e){const n=Object.keys(e);for(let s=0;s<n.length;s++){const i=n[s];if(i){const n=e[i];n&&t.push({baseData:{quantity:n.Menge,name:n.Name,id:n.BUCHUNGSNUMMER,date:n.Datum},cashregister_external_idenfifier:n.Kasse_ID})}}}return t}async loadFromRemote(e,t){const n=Buffer.from(t).toString("base64"),s=(await Rs.request({method:"GET",url:e,headers:{Authorization:"Basic "+n},responseType:"arraybuffer"})).data.toString("latin1");return Buffer.from(s,"utf-8").toString()}async getAsJSON(e,t){const n=await this.loadFromRemote(e,t),s=n.includes("\r")?"\r":"\n",i=n.split(s);if(!i)return{};const a=[],r={};for(let e=0;e<i.length;e++){let t=i[e];if(void 0===t)continue;const n=t.trim();if(0===e){const e=n.split("\t");for(const t of e)a.push(t)}else{if(""===n)continue;const e={},t=n.split("\t");for(let n=0;n<a.length;n++){let s=t[n]||"";switch(a[n]){case"BUCHUNGSNUMMER":e.BUCHUNGSNUMMER=vf.transformBuchungsnummer(s);break;case"Datum":let t=vf.transformDate(s);t&&(e.Datum=t);break;case"Name":e.Name=s;break;case"Menge":e.Menge=parseFloat(s);break;case"Verbrauchergruppe_ID":e.Verbrauchergruppe_ID=s;break;case"Kasse_ID":e.Kasse_ID=s}}e.Datum&&e.Kasse_ID&&e.Menge&&e.Name&&e.Verbrauchergruppe_ID&&e.BUCHUNGSNUMMER&&(r[e.BUCHUNGSNUMMER]={BUCHUNGSNUMMER:e.BUCHUNGSNUMMER,Datum:e.Datum,Kasse_ID:e.Kasse_ID,Menge:e.Menge,Name:e.Name,Verbrauchergruppe_ID:e.Verbrauchergruppe_ID})}}return r}static transformDate(e){const[t,n]=e.split(" ");if(void 0===t||void 0===n)return null;const[s,i,a]=t.split(".").map((e=>parseInt(e)));if(void 0===s||void 0===i||void 0===a)return null;const[r,o,c]=n.split(":").map((e=>parseInt(e)));if(void 0===r||void 0===o||void 0===c)return null;function l(e,t){const n=new Date(e,t+1,0),s=n.getDay();return new Date(e,t,n.getDate()-s)}l(a,2),l(a,9);let u=r;return`${a}-${i.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}T${u.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`}static transformBuchungsnummer(e){if(e){let t="",n=!1;for(const s of e)" "!==s?(n=!0,t+=s):n&&(n=!1,t+="-");return t}}}var xf=async({action:e,init:t,filter:n},s)=>{if(!await er.checkAllTablesExistWithApiContext(bf,s))return;let i=Xa.APP_SETTINGS,a=null;switch(Yl.getSyncForCustomer()){case ql.TEST:case ql.HANNOVER:a=null;break;case ql.OSNABRUECK:a=new vf("https://share.sw-os.de/swosy-kassendaten-2h","Nils:qYoTHeyPyRljfEGRWW52")}if(!a)return void console.log("No Parser set for Cashregister Sync");const r=new Gl(s);t(cr.INIT_APP_STARTED,(async()=>{console.log(bf+": App started, resetting food parsing status and parsing hash"),await r.getAppSettingsHelper().setCashregisterParsingStatus(Fl.FINISHED,null)}));const o=new Tf(a,s);e(i+".items.update",(async(e,t)=>{try{await o.parse()}catch(e){console.log(e)}}))};var Sf=async({action:e,init:t},n)=>{if(!await er.checkAllTablesExistWithApiContext("collections_dates_last_update",n))return;const s=new Gl(n),i=[Xa.COLLECTIONS_DATES_LAST_UPDATE];let a=s.getCollectionDatesLastUpdateHelper();async function r(){let e=(await er.getTableNamesFromApiContext(n)).filter((e=>!i.includes(e))),t=(await a.readAllItems()).map((e=>e.id)),s=e.filter((e=>!t.includes(e))),r=t.filter((t=>!e.includes(t)));for(let e of r)await a.deleteOne(e);for(let e of s)await a.createOne({id:e,date_updated:(new Date).toISOString()})}async function o(e){if(!i.includes(e)){let t=(new Date).toISOString(),n=await a.readByQuery({filter:{id:{_eq:e}}});try{n.length>0?await a.updateOne(e,{date_updated:t}):await a.createOne({id:e,date_updated:t})}catch(e){}await r()}}t("app.after",(async()=>{await r()})),e("*.items.update",(async e=>{let t=e.collection;await o(t)})),e("*.items.create",(async e=>{let t=e.collection;await o(t)})),e("*.items.delete",(async e=>{let t=e.collection;await o(t)}))},Af=async({action:e,filter:t},n)=>{const s=new sr(n),i=await s.getFileService();t(ff.USERS_DELETE_EVENT,(async(e,t,n)=>{var s;const a=e,r=null==(s=n.accountability)?void 0:s.user,o=[],c=[];for(let e of a)o.push({uploaded_by:{_eq:e}}),c.push({modified_by:{_eq:e}});const l={filter:{_or:o}},u={filter:{_or:c}},p={uploaded_by:r},d={modified_by:r};return await i.updateByQuery(l,p),await i.updateByQuery(u,d),e}))};const wf=class{constructor(e){this.myDatabaseHelper=new Gl(e)}async getFoodIdsFromFoodFeedbackIds(e){let t=this.myDatabaseHelper.getFoodFeedbacksHelper(),n={};for(let s of e){let e=await t.readOne(s),i=null==e?void 0:e.food;i&&"string"==typeof i&&(n[i]=!0)}return Object.keys(n)}recalculateFoodIdsRatingsNonBlocking(e,t){for(let n of e)this.recalculateFoodRating(n,t).then((e=>{}))}async getFoodFromId(e){let t=this.myDatabaseHelper.getFoodsHelper();return await t.readOne(e)}static getNumberIfValueInRatingRange(e){return null==e?null:wf.MIN_RATING_VALUE<=e&&e<=wf.MAX_RATING_VALUE?e:null}static calculateFoodRating(e,t){let n=0,s=0;for(let e of t){let t=null==e?void 0:e.rating;const i=wf.getNumberIfValueInRatingRange(t);null!==i&&(n+=i,s++)}let i=e.rating_average_legacy||0,a=e.rating_amount_legacy||0,r=s+a;if(r>0){return{rating_average:(n+i*a)/r,rating_amount:r}}return{rating_average:null,rating_amount:0}}async getFoodFeedbacksForFood(e){let t=this.myDatabaseHelper.getFoodFeedbacksHelper(),n=[];try{n=await t.readByQuery({filter:{food:{_eq:e}},limit:-1})}catch(e){}return n}async recalculateFoodRating(e,t){const n=await this.getFoodFromId(e);if(!n)return void console.error("recalculateFoodRating: food_id: "+e+" | food not found");let s={};if(t)for(let e of t)s[e]=!0;let i=(await this.getFoodFeedbacksForFood(e)).filter((e=>!s[e.id])),{rating_average:a,rating_amount:r}=wf.calculateFoodRating(n,i);await this.updateFoodRating(n,a,r)}async updateFoodRating(e,t,n){let s=this.myDatabaseHelper.getFoodsHelper();await s.updateOne(e.id,{rating_average:t,rating_amount:n})}};let Cf=wf;Cf.MAX_RATING_VALUE=5,Cf.MIN_RATING_VALUE=1;var Nf=async({action:e,filter:t},n)=>{if(!await er.checkAllTablesExistWithApiContext("food_feedback_rating_calculate",n))return;const s=new Cf(n),i=Xa.FOODS_FEEDBACKS;e(i+".items.update",(async e=>{let t=e.keys,n=await s.getFoodIdsFromFoodFeedbackIds(t);s.recalculateFoodIdsRatingsNonBlocking(n,[])})),e(i+".items.create",(async e=>{let t=[e.key],n=await s.getFoodIdsFromFoodFeedbackIds(t);s.recalculateFoodIdsRatingsNonBlocking(n,[])})),t(i+".items.delete",(async(e,t,n)=>{let i=e;if(i&&Array.isArray(i)&&0!==i.length){let e=await s.getFoodIdsFromFoodFeedbackIds(i),t=i;s.recalculateFoodIdsRatingsNonBlocking(e,t)}else;return e}))};function If(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kf={exports:{}};!function(e,t){e.exports=function(){var t,n;function s(){return t.apply(null,arguments)}function i(e){t=e}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function l(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function p(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,s=[],i=e.length;for(n=0;n<i;++n)s.push(t(e[n],n));return s}function h(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,s){return Qn(e,t,n,s,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(e){return null==e._pf&&(e._pf=m()),e._pf}function y(e){var t=null,s=!1,i=e._d&&!isNaN(e._d.getTime());return i&&(t=g(e),s=n.call(t.parsedDateParts,(function(e){return null!=e})),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?i:(e._isValid=i,e._isValid)}function _(e){var t=f(NaN);return null!=e?h(g(t),e):g(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),s=n.length>>>0;for(t=0;t<s;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var E=s.momentProperties=[],b=!1;function T(e,t){var n,s,i,a=E.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)l(i=t[s=E[n]])||(e[s]=i);return e}function v(e){T(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,s.updateOffset(this),b=!1)}function x(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function S(e){!1===s.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function A(e,t){var n=!0;return h((function(){if(null!=s.deprecationHandler&&s.deprecationHandler(null,e),n){var i,a,r,c=[],l=arguments.length;for(a=0;a<l;a++){if(i="","object"==typeof arguments[a]){for(r in i+="\n["+a+"] ",arguments[0])o(arguments[0],r)&&(i+=r+": "+arguments[0][r]+", ");i=i.slice(0,-2)}else i=arguments[a];c.push(i)}S(e+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var w,C={};function N(e,t){null!=s.deprecationHandler&&s.deprecationHandler(e,t),C[e]||(S(t),C[e]=!0)}function I(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function k(e){var t,n;for(n in e)o(e,n)&&(I(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(e,t){var n,s=h({},e);for(n in t)o(t,n)&&(r(e[n])&&r(t[n])?(s[n]={},h(s[n],e[n]),h(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)o(e,n)&&!o(t,n)&&r(e[n])&&(s[n]=h({},s[n]));return s}function D(e){null!=e&&this.set(e)}s.suppressDeprecationWarnings=!1,s.deprecationHandler=null,w=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};var R={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return I(s)?s.call(t,n):s}function P(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,B={},U={};function H(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(U[e]=i),t&&(U[t[0]]=function(){return P(i.apply(this,arguments),t[1],t[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,s=e.match(M);for(t=0,n=s.length;t<n;t++)U[s[t]]?s[t]=U[s[t]]:s[t]=j(s[t]);return function(t){var i,a="";for(i=0;i<n;i++)a+=I(s[i])?s[i].call(t,e):s[i];return a}}function q(e,t){return e.isValid()?(t=Y(t,e.localeData()),B[t]=B[t]||G(t),B[t](e)):e.localeData().invalidDate()}function Y(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(F.lastIndex=0;n>=0&&F.test(e);)e=e.replace(F,s),F.lastIndex=0,n-=1;return e}var z={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function V(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(M).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var W="Invalid date";function Q(){return this._invalidDate}var K="%d",Z=/\d{1,2}/;function $(e){return this._ordinal.replace("%d",e)}var X={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function J(e,t,n,s){var i=this._relativeTime[n];return I(i)?i(e,t,n,s):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return I(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"==typeof e?te[e]||te[e.toLowerCase()]:void 0}function se(e){var t,n,s={};for(n in e)o(e,n)&&(t=ne(n))&&(s[t]=e[n]);return s}var ie={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function ae(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:ie[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var re,oe=/\d/,ce=/\d\d/,le=/\d{3}/,ue=/\d{4}/,pe=/[+-]?\d{6}/,de=/\d\d?/,he=/\d\d\d\d?/,fe=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ge=/\d{1,4}/,ye=/[+-]?\d{1,6}/,_e=/\d+/,Ee=/[+-]?\d+/,be=/Z|[+-]\d\d:?\d\d/gi,Te=/Z|[+-]\d\d(?::?\d\d)?/gi,ve=/[+-]?\d+(\.\d{1,3})?/,xe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Se=/^[1-9]\d?/,Ae=/^([1-9]\d|\d)/;function we(e,t,n){re[e]=I(t)?t:function(e,s){return e&&n?n:t}}function Ce(e,t){return o(re,e)?re[e](t._strict,t._locale):new RegExp(Ne(e))}function Ne(e){return Ie(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,s,i){return t||n||s||i})))}function Ie(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ke(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Oe(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ke(t)),n}re={};var De={};function Re(e,t){var n,s,i=t;for("string"==typeof e&&(e=[e]),u(t)&&(i=function(e,n){n[t]=Oe(e)}),s=e.length,n=0;n<s;n++)De[e[n]]=i}function Le(e,t){Re(e,(function(e,n,s,i){s._w=s._w||{},t(e,s._w,s,i)}))}function Pe(e,t,n){null!=t&&o(De,e)&&De[e](t,n._a,n,e)}function Me(e){return e%4==0&&e%100!=0||e%400==0}var Fe=0,Be=1,Ue=2,He=3,je=4,Ge=5,qe=6,Ye=7,ze=8;function Ve(e){return Me(e)?366:365}H("Y",0,0,(function(){var e=this.year();return e<=9999?P(e,4):"+"+e})),H(0,["YY",2],0,(function(){return this.year()%100})),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),we("Y",Ee),we("YY",de,ce),we("YYYY",ge,ue),we("YYYYY",ye,pe),we("YYYYYY",ye,pe),Re(["YYYYY","YYYYYY"],Fe),Re("YYYY",(function(e,t){t[Fe]=2===e.length?s.parseTwoDigitYear(e):Oe(e)})),Re("YY",(function(e,t){t[Fe]=s.parseTwoDigitYear(e)})),Re("Y",(function(e,t){t[Fe]=parseInt(e,10)})),s.parseTwoDigitYear=function(e){return Oe(e)+(Oe(e)>68?1900:2e3)};var We,Qe=Ze("FullYear",!0);function Ke(){return Me(this.year())}function Ze(e,t){return function(n){return null!=n?(Xe(this,e,n),s.updateOffset(this,t),this):$e(this,e)}}function $e(e,t){if(!e.isValid())return NaN;var n=e._d,s=e._isUTC;switch(t){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Xe(e,t,n){var s,i,a,r,o;if(e.isValid()&&!isNaN(n)){switch(s=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(i?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(i?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(i?s.setUTCHours(n):s.setHours(n));case"Date":return void(i?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}a=n,r=e.month(),o=29!==(o=e.date())||1!==r||Me(a)?o:28,i?s.setUTCFullYear(a,r,o):s.setFullYear(a,r,o)}}function Je(e){return I(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"==typeof e){var n,s=ae(e=se(e)),i=s.length;for(n=0;n<i;n++)this[s[n].unit](e[s[n].unit])}else if(I(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?Me(e)?29:28:31-n%7%2}We=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},H("M",["MM",2],"Mo",(function(){return this.month()+1})),H("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),H("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),we("M",de,Se),we("MM",de,ce),we("MMM",(function(e,t){return t.monthsShortRegex(e)})),we("MMMM",(function(e,t){return t.monthsRegex(e)})),Re(["M","MM"],(function(e,t){t[Be]=Oe(e)-1})),Re(["MMM","MMMM"],(function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[Be]=i:g(n).invalidMonth=e}));var st="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),it="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),at=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=xe,ot=xe;function ct(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||at).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone}function lt(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[at.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ut(e,t,n){var s,i,a,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)a=f([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=We.call(this._shortMonthsParse,r))?i:null:-1!==(i=We.call(this._longMonthsParse,r))?i:null:"MMM"===t?-1!==(i=We.call(this._shortMonthsParse,r))||-1!==(i=We.call(this._longMonthsParse,r))?i:null:-1!==(i=We.call(this._longMonthsParse,r))||-1!==(i=We.call(this._shortMonthsParse,r))?i:null}function pt(e,t,n){var s,i,a;if(this._monthsParseExact)return ut.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=f([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}}function dt(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Oe(t);else if(!u(t=e.localeData().monthsParse(t)))return e;var n=t,s=e.date();return s=s<29?s:Math.min(s,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,s):e._d.setMonth(n,s),e}function ht(e){return null!=e?(dt(this,e),s.updateOffset(this,!0),this):$e(this,"Month")}function ft(){return nt(this.year(),this.month())}function mt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||yt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function gt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||yt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=ot),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function yt(){function e(e,t){return t.length-e.length}var t,n,s,i,a=[],r=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),s=Ie(this.monthsShort(n,"")),i=Ie(this.months(n,"")),a.push(s),r.push(i),o.push(i),o.push(s);a.sort(e),r.sort(e),o.sort(e),this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function _t(e,t,n,s,i,a,r){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,s,i,a,r),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,a,r),o}function Et(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function bt(e,t,n){var s=7+t-n;return-(7+Et(e,0,s).getUTCDay()-t)%7+s-1}function Tt(e,t,n,s,i){var a,r,o=1+7*(t-1)+(7+n-s)%7+bt(e,s,i);return o<=0?r=Ve(a=e-1)+o:o>Ve(e)?(a=e+1,r=o-Ve(e)):(a=e,r=o),{year:a,dayOfYear:r}}function vt(e,t,n){var s,i,a=bt(e.year(),t,n),r=Math.floor((e.dayOfYear()-a-1)/7)+1;return r<1?s=r+xt(i=e.year()-1,t,n):r>xt(e.year(),t,n)?(s=r-xt(e.year(),t,n),i=e.year()+1):(i=e.year(),s=r),{week:s,year:i}}function xt(e,t,n){var s=bt(e,t,n),i=bt(e+1,t,n);return(Ve(e)-s+i)/7}function St(e){return vt(e,this._week.dow,this._week.doy).week}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),we("w",de,Se),we("ww",de,ce),we("W",de,Se),we("WW",de,ce),Le(["w","ww","W","WW"],(function(e,t,n,s){t[s.substr(0,1)]=Oe(e)}));var At={dow:0,doy:6};function wt(){return this._week.dow}function Ct(){return this._week.doy}function Nt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function It(e){var t=vt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function kt(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Ot(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Dt(e,t){return e.slice(t,7).concat(e.slice(0,t))}H("d",0,"do","day"),H("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),H("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),H("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),we("d",de),we("e",de),we("E",de),we("dd",(function(e,t){return t.weekdaysMinRegex(e)})),we("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),we("dddd",(function(e,t){return t.weekdaysRegex(e)})),Le(["dd","ddd","dddd"],(function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e})),Le(["d","e","E"],(function(e,t,n,s){t[s]=Oe(e)}));var Rt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Lt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mt=xe,Ft=xe,Bt=xe;function Ut(e,t){var n=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Dt(n,this._week.dow):e?n[e.day()]:n}function Ht(e){return!0===e?Dt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function jt(e){return!0===e?Dt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Gt(e,t,n){var s,i,a,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)a=f([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=We.call(this._weekdaysParse,r))?i:null:"ddd"===t?-1!==(i=We.call(this._shortWeekdaysParse,r))?i:null:-1!==(i=We.call(this._minWeekdaysParse,r))?i:null:"dddd"===t?-1!==(i=We.call(this._weekdaysParse,r))||-1!==(i=We.call(this._shortWeekdaysParse,r))||-1!==(i=We.call(this._minWeekdaysParse,r))?i:null:"ddd"===t?-1!==(i=We.call(this._shortWeekdaysParse,r))||-1!==(i=We.call(this._weekdaysParse,r))||-1!==(i=We.call(this._minWeekdaysParse,r))?i:null:-1!==(i=We.call(this._minWeekdaysParse,r))||-1!==(i=We.call(this._weekdaysParse,r))||-1!==(i=We.call(this._shortWeekdaysParse,r))?i:null}function qt(e,t,n){var s,i,a;if(this._weekdaysParseExact)return Gt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=f([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}}function Yt(e){if(!this.isValid())return null!=e?this:NaN;var t=$e(this,"Day");return null!=e?(e=kt(e,this.localeData()),this.add(e-t,"d")):t}function zt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Vt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ot(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Wt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Mt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Qt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ft),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Kt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Bt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Zt(){function e(e,t){return t.length-e.length}var t,n,s,i,a,r=[],o=[],c=[],l=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),s=Ie(this.weekdaysMin(n,"")),i=Ie(this.weekdaysShort(n,"")),a=Ie(this.weekdays(n,"")),r.push(s),o.push(i),c.push(a),l.push(s),l.push(i),l.push(a);r.sort(e),o.sort(e),c.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function $t(){return this.hours()%12||12}function Xt(){return this.hours()||24}function Jt(e,t){H(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,$t),H("k",["kk",2],0,Xt),H("hmm",0,0,(function(){return""+$t.apply(this)+P(this.minutes(),2)})),H("hmmss",0,0,(function(){return""+$t.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)})),H("Hmm",0,0,(function(){return""+this.hours()+P(this.minutes(),2)})),H("Hmmss",0,0,(function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)})),Jt("a",!0),Jt("A",!1),we("a",en),we("A",en),we("H",de,Ae),we("h",de,Se),we("k",de,Se),we("HH",de,ce),we("hh",de,ce),we("kk",de,ce),we("hmm",he),we("hmmss",fe),we("Hmm",he),we("Hmmss",fe),Re(["H","HH"],He),Re(["k","kk"],(function(e,t,n){var s=Oe(e);t[He]=24===s?0:s})),Re(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Re(["h","hh"],(function(e,t,n){t[He]=Oe(e),g(n).bigHour=!0})),Re("hmm",(function(e,t,n){var s=e.length-2;t[He]=Oe(e.substr(0,s)),t[je]=Oe(e.substr(s)),g(n).bigHour=!0})),Re("hmmss",(function(e,t,n){var s=e.length-4,i=e.length-2;t[He]=Oe(e.substr(0,s)),t[je]=Oe(e.substr(s,2)),t[Ge]=Oe(e.substr(i)),g(n).bigHour=!0})),Re("Hmm",(function(e,t,n){var s=e.length-2;t[He]=Oe(e.substr(0,s)),t[je]=Oe(e.substr(s))})),Re("Hmmss",(function(e,t,n){var s=e.length-4,i=e.length-2;t[He]=Oe(e.substr(0,s)),t[je]=Oe(e.substr(s,2)),t[Ge]=Oe(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,sn=Ze("Hours",!0);function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var rn,on={calendar:R,longDateFormat:z,invalidDate:W,ordinal:K,dayOfMonthOrdinalParse:Z,relativeTime:X,months:st,monthsShort:it,week:At,weekdays:Rt,weekdaysMin:Pt,weekdaysShort:Lt,meridiemParse:nn},cn={},ln={};function un(e,t){var n,s=Math.min(e.length,t.length);for(n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}function pn(e){return e?e.toLowerCase().replace("_","-"):e}function dn(e){for(var t,n,s,i,a=0;a<e.length;){for(t=(i=pn(e[a]).split("-")).length,n=(n=pn(e[a+1]))?n.split("-"):null;t>0;){if(s=fn(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&un(i,n)>=t-1)break;t--}a++}return rn}function hn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function fn(t){var n=null;if(void 0===cn[t]&&e&&e.exports&&hn(t))try{n=rn._abbr,If("./locale/"+t),mn(n)}catch(e){cn[t]=null}return cn[t]}function mn(e,t){var n;return e&&((n=l(t)?_n(e):gn(e,t))?rn=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),rn._abbr}function gn(e,t){if(null!==t){var n,s=on;if(t.abbr=e,null!=cn[e])N("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=cn[e]._config;else if(null!=t.parentLocale)if(null!=cn[t.parentLocale])s=cn[t.parentLocale]._config;else{if(null==(n=fn(t.parentLocale)))return ln[t.parentLocale]||(ln[t.parentLocale]=[]),ln[t.parentLocale].push({name:e,config:t}),null;s=n._config}return cn[e]=new D(O(s,t)),ln[e]&&ln[e].forEach((function(e){gn(e.name,e.config)})),mn(e),cn[e]}return delete cn[e],null}function yn(e,t){if(null!=t){var n,s,i=on;null!=cn[e]&&null!=cn[e].parentLocale?cn[e].set(O(cn[e]._config,t)):(null!=(s=fn(e))&&(i=s._config),t=O(i,t),null==s&&(t.abbr=e),(n=new D(t)).parentLocale=cn[e],cn[e]=n),mn(e)}else null!=cn[e]&&(null!=cn[e].parentLocale?(cn[e]=cn[e].parentLocale,e===mn()&&mn(e)):null!=cn[e]&&delete cn[e]);return cn[e]}function _n(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return rn;if(!a(e)){if(t=fn(e))return t;e=[e]}return dn(e)}function En(){return w(cn)}function bn(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[Be]<0||n[Be]>11?Be:n[Ue]<1||n[Ue]>nt(n[Fe],n[Be])?Ue:n[He]<0||n[He]>24||24===n[He]&&(0!==n[je]||0!==n[Ge]||0!==n[qe])?He:n[je]<0||n[je]>59?je:n[Ge]<0||n[Ge]>59?Ge:n[qe]<0||n[qe]>999?qe:-1,g(e)._overflowDayOfYear&&(t<Fe||t>Ue)&&(t=Ue),g(e)._overflowWeeks&&-1===t&&(t=Ye),g(e)._overflowWeekday&&-1===t&&(t=ze),g(e).overflow=t),e}var Tn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/Z|[+-]\d\d(?::?\d\d)?/,Sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],An=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wn=/^\/?Date\((-?\d+)/i,Cn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Nn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function In(e){var t,n,s,i,a,r,o=e._i,c=Tn.exec(o)||vn.exec(o),l=Sn.length,u=An.length;if(c){for(g(e).iso=!0,t=0,n=l;t<n;t++)if(Sn[t][1].exec(c[1])){i=Sn[t][0],s=!1!==Sn[t][2];break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,n=u;t<n;t++)if(An[t][1].exec(c[3])){a=(c[2]||" ")+An[t][0];break}if(null==a)return void(e._isValid=!1)}if(!s&&null!=a)return void(e._isValid=!1);if(c[4]){if(!xn.exec(c[4]))return void(e._isValid=!1);r="Z"}e._f=i+(a||"")+(r||""),jn(e)}else e._isValid=!1}function kn(e,t,n,s,i,a){var r=[On(e),it.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return a&&r.push(parseInt(a,10)),r}function On(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Dn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Rn(e,t,n){return!e||Lt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Ln(e,t,n){if(e)return Nn[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}function Pn(e){var t,n=Cn.exec(Dn(e._i));if(n){if(t=kn(n[4],n[3],n[2],n[5],n[6],n[7]),!Rn(n[1],t,e))return;e._a=t,e._tzm=Ln(n[8],n[9],n[10]),e._d=Et.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Mn(e){var t=wn.exec(e._i);null===t?(In(e),!1===e._isValid&&(delete e._isValid,Pn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:s.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Fn(e,t,n){return null!=e?e:null!=t?t:n}function Bn(e){var t=new Date(s.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Un(e){var t,n,s,i,a,r=[];if(!e._d){for(s=Bn(e),e._w&&null==e._a[Ue]&&null==e._a[Be]&&Hn(e),null!=e._dayOfYear&&(a=Fn(e._a[Fe],s[Fe]),(e._dayOfYear>Ve(a)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=Et(a,0,e._dayOfYear),e._a[Be]=n.getUTCMonth(),e._a[Ue]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=s[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[He]&&0===e._a[je]&&0===e._a[Ge]&&0===e._a[qe]&&(e._nextDay=!0,e._a[He]=0),e._d=(e._useUTC?Et:_t).apply(null,r),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[He]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}function Hn(e){var t,n,s,i,a,r,o,c,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,r=4,n=Fn(t.GG,e._a[Fe],vt(Kn(),1,4).year),s=Fn(t.W,1),((i=Fn(t.E,1))<1||i>7)&&(c=!0)):(a=e._locale._week.dow,r=e._locale._week.doy,l=vt(Kn(),a,r),n=Fn(t.gg,e._a[Fe],l.year),s=Fn(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(c=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(c=!0)):i=a),s<1||s>xt(n,a,r)?g(e)._overflowWeeks=!0:null!=c?g(e)._overflowWeekday=!0:(o=Tt(n,s,i,a,r),e._a[Fe]=o.year,e._dayOfYear=o.dayOfYear)}function jn(e){if(e._f!==s.ISO_8601)if(e._f!==s.RFC_2822){e._a=[],g(e).empty=!0;var t,n,i,a,r,o,c,l=""+e._i,u=l.length,p=0;for(c=(i=Y(e._f,e._locale).match(M)||[]).length,t=0;t<c;t++)a=i[t],(n=(l.match(Ce(a,e))||[])[0])&&((r=l.substr(0,l.indexOf(n))).length>0&&g(e).unusedInput.push(r),l=l.slice(l.indexOf(n)+n.length),p+=n.length),U[a]?(n?g(e).empty=!1:g(e).unusedTokens.push(a),Pe(a,n,e)):e._strict&&!n&&g(e).unusedTokens.push(a);g(e).charsLeftOver=u-p,l.length>0&&g(e).unusedInput.push(l),e._a[He]<=12&&!0===g(e).bigHour&&e._a[He]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[He]=Gn(e._locale,e._a[He],e._meridiem),null!==(o=g(e).era)&&(e._a[Fe]=e._locale.erasConvertYear(o,e._a[Fe])),Un(e),bn(e)}else Pn(e);else In(e)}function Gn(e,t,n){var s;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0),t):t}function qn(e){var t,n,s,i,a,r,o=!1,c=e._f.length;if(0===c)return g(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<c;i++)a=0,r=!1,t=T({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],jn(t),y(t)&&(r=!0),a+=g(t).charsLeftOver,a+=10*g(t).unusedTokens.length,g(t).score=a,o?a<s&&(s=a,n=t):(null==s||a<s||r)&&(s=a,n=t,r&&(o=!0));h(e,n||t)}function Yn(e){if(!e._d){var t=se(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Un(e)}}function zn(e){var t=new v(bn(Vn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Vn(e){var t=e._i,n=e._f;return e._locale=e._locale||_n(e._l),null===t||void 0===n&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),x(t)?new v(bn(t)):(p(t)?e._d=t:a(n)?qn(e):n?jn(e):Wn(e),y(e)||(e._d=null),e))}function Wn(e){var t=e._i;l(t)?e._d=new Date(s.now()):p(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Mn(e):a(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),Un(e)):r(t)?Yn(e):u(t)?e._d=new Date(t):s.createFromInputFallback(e)}function Qn(e,t,n,s,i){var o={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(r(e)&&c(e)||a(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=s,zn(o)}function Kn(e,t,n,s){return Qn(e,t,n,s,!1)}s.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),s.ISO_8601=function(){},s.RFC_2822=function(){};var Zn=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()})),$n=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()}));function Xn(e,t){var n,s;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return Kn();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}function Jn(){return Xn("isBefore",[].slice.call(arguments,0))}function es(){return Xn("isAfter",[].slice.call(arguments,0))}var ts=function(){return Date.now?Date.now():+new Date},ns=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ss(e){var t,n,s=!1,i=ns.length;for(t in e)if(o(e,t)&&(-1===We.call(ns,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[ns[n]]){if(s)return!1;parseFloat(e[ns[n]])!==Oe(e[ns[n]])&&(s=!0)}return!0}function is(){return this._isValid}function as(){return Ns(NaN)}function rs(e){var t=se(e),n=t.year||0,s=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,r=t.day||0,o=t.hour||0,c=t.minute||0,l=t.second||0,u=t.millisecond||0;this._isValid=ss(t),this._milliseconds=+u+1e3*l+6e4*c+1e3*o*60*60,this._days=+r+7*a,this._months=+i+3*s+12*n,this._data={},this._locale=_n(),this._bubble()}function os(e){return e instanceof rs}function cs(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function ls(e,t,n){var s,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),r=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&Oe(e[s])!==Oe(t[s]))&&r++;return r+a}function us(e,t){H(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+P(~~(e/60),2)+t+P(~~e%60,2)}))}us("Z",":"),us("ZZ",""),we("Z",Te),we("ZZ",Te),Re(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=ds(Te,e)}));var ps=/([\+\-]|\d\d)/gi;function ds(e,t){var n,s,i=(t||"").match(e);return null===i?null:0===(s=60*(n=((i[i.length-1]||[])+"").match(ps)||["-",0,0])[1]+Oe(n[2]))?0:"+"===n[0]?s:-s}function hs(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(x(e)||p(e)?e.valueOf():Kn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),s.updateOffset(n,!1),n):Kn(e).local()}function fs(e){return-Math.round(e._d.getTimezoneOffset())}function ms(e,t,n){var i,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=ds(Te,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=fs(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==e&&(!t||this._changeInProgress?Rs(this,Ns(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,s.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:fs(this)}function gs(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function ys(e){return this.utcOffset(0,e)}function _s(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(fs(this),"m")),this}function Es(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=ds(be,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function bs(e){return!!this.isValid()&&(e=e?Kn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Ts(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function vs(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return T(t,this),(t=Vn(t))._a?(e=t._isUTC?f(t._a):Kn(t._a),this._isDSTShifted=this.isValid()&&ls(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function xs(){return!!this.isValid()&&!this._isUTC}function Ss(){return!!this.isValid()&&this._isUTC}function As(){return!!this.isValid()&&this._isUTC&&0===this._offset}s.updateOffset=function(){};var ws=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Cs=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ns(e,t){var n,s,i,a=e,r=null;return os(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(r=ws.exec(e))?(n="-"===r[1]?-1:1,a={y:0,d:Oe(r[Ue])*n,h:Oe(r[He])*n,m:Oe(r[je])*n,s:Oe(r[Ge])*n,ms:Oe(cs(1e3*r[qe]))*n}):(r=Cs.exec(e))?(n="-"===r[1]?-1:1,a={y:Is(r[2],n),M:Is(r[3],n),w:Is(r[4],n),d:Is(r[5],n),h:Is(r[6],n),m:Is(r[7],n),s:Is(r[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=Os(Kn(a.from),Kn(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),s=new rs(a),os(e)&&o(e,"_locale")&&(s._locale=e._locale),os(e)&&o(e,"_isValid")&&(s._isValid=e._isValid),s}function Is(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function ks(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Os(e,t){var n;return e.isValid()&&t.isValid()?(t=hs(t,e),e.isBefore(t)?n=ks(e,t):((n=ks(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ds(e,t){return function(n,s){var i;return null===s||isNaN(+s)||(N(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=s,s=i),Rs(this,Ns(n,s),e),this}}function Rs(e,t,n,i){var a=t._milliseconds,r=cs(t._days),o=cs(t._months);e.isValid()&&(i=null==i||i,o&&dt(e,$e(e,"Month")+o*n),r&&Xe(e,"Date",$e(e,"Date")+r*n),a&&e._d.setTime(e._d.valueOf()+a*n),i&&s.updateOffset(e,r||o))}Ns.fn=rs.prototype,Ns.invalid=as;var Ls=Ds(1,"add"),Ps=Ds(-1,"subtract");function Ms(e){return"string"==typeof e||e instanceof String}function Fs(e){return x(e)||p(e)||Ms(e)||u(e)||Us(e)||Bs(e)||null==e}function Bs(e){var t,n,s=r(e)&&!c(e),i=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l=a.length;for(t=0;t<l;t+=1)n=a[t],i=i||o(e,n);return s&&i}function Us(e){var t=a(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&Ms(e)})).length),t&&n}function Hs(e){var t,n,s=r(e)&&!c(e),i=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=a[t],i=i||o(e,n);return s&&i}function js(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Gs(e,t){1===arguments.length&&(arguments[0]?Fs(arguments[0])?(e=arguments[0],t=void 0):Hs(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Kn(),i=hs(n,this).startOf("day"),a=s.calendarFormat(this,i)||"sameElse",r=t&&(I(t[a])?t[a].call(this,n):t[a]);return this.format(r||this.localeData().calendar(a,this,Kn(n)))}function qs(){return new v(this)}function Ys(e,t){var n=x(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function zs(e,t){var n=x(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Vs(e,t,n,s){var i=x(e)?e:Kn(e),a=x(t)?t:Kn(t);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(a,n):!this.isAfter(a,n))}function Ws(e,t){var n,s=x(e)?e:Kn(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Qs(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Ks(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Zs(e,t,n){var s,i,a;if(!this.isValid())return NaN;if(!(s=hs(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=ne(t)){case"year":a=$s(this,s)/12;break;case"month":a=$s(this,s);break;case"quarter":a=$s(this,s)/3;break;case"second":a=(this-s)/1e3;break;case"minute":a=(this-s)/6e4;break;case"hour":a=(this-s)/36e5;break;case"day":a=(this-s-i)/864e5;break;case"week":a=(this-s-i)/6048e5;break;default:a=this-s}return n?a:ke(a)}function $s(e,t){if(e.date()<t.date())return-$s(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function Xs(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Js(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?q(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(n,"Z")):q(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,s,i="moment",a="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",s=a+'[")]',this.format(e+t+n+s)}function ti(e){e||(e=this.isUtc()?s.defaultFormatUtc:s.defaultFormat);var t=q(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(x(e)&&e.isValid()||Kn(e).isValid())?Ns({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function si(e){return this.from(Kn(),e)}function ii(e,t){return this.isValid()&&(x(e)&&e.isValid()||Kn(e).isValid())?Ns({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ai(e){return this.to(Kn(),e)}function ri(e){var t;return void 0===e?this._locale._abbr:(null!=(t=_n(e))&&(this._locale=t),this)}s.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",s.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var oi=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ci(){return this._locale}var li=1e3,ui=60*li,pi=60*ui,di=3506328*pi;function hi(e,t){return(e%t+t)%t}function fi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-di:new Date(e,t,n).valueOf()}function mi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-di:Date.UTC(e,t,n)}function gi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:fi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=hi(t+(this._isUTC?0:this.utcOffset()*ui),pi);break;case"minute":t=this._d.valueOf(),t-=hi(t,ui);break;case"second":t=this._d.valueOf(),t-=hi(t,li)}return this._d.setTime(t),s.updateOffset(this,!0),this}function yi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:fi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=pi-hi(t+(this._isUTC?0:this.utcOffset()*ui),pi)-1;break;case"minute":t=this._d.valueOf(),t+=ui-hi(t,ui)-1;break;case"second":t=this._d.valueOf(),t+=li-hi(t,li)-1}return this._d.setTime(t),s.updateOffset(this,!0),this}function _i(){return this._d.valueOf()-6e4*(this._offset||0)}function Ei(){return Math.floor(this.valueOf()/1e3)}function bi(){return new Date(this.valueOf())}function Ti(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function vi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function xi(){return this.isValid()?this.toISOString():null}function Si(){return y(this)}function Ai(){return h({},g(this))}function wi(){return g(this).overflow}function Ci(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ni(e,t){var n,i,a,r=this._eras||_n("en")._eras;for(n=0,i=r.length;n<i;++n)switch("string"==typeof r[n].since&&(a=s(r[n].since).startOf("day"),r[n].since=a.valueOf()),typeof r[n].until){case"undefined":r[n].until=1/0;break;case"string":a=s(r[n].until).startOf("day").valueOf(),r[n].until=a.valueOf()}return r}function Ii(e,t,n){var s,i,a,r,o,c=this.eras();for(e=e.toUpperCase(),s=0,i=c.length;s<i;++s)if(a=c[s].name.toUpperCase(),r=c[s].abbr.toUpperCase(),o=c[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(r===e)return c[s];break;case"NNNN":if(a===e)return c[s];break;case"NNNNN":if(o===e)return c[s]}else if([a,r,o].indexOf(e)>=0)return c[s]}function ki(e,t){var n=e.since<=e.until?1:-1;return void 0===t?s(e.since).year():s(e.since).year()+(t-e.offset)*n}function Oi(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].name;if(s[e].until<=n&&n<=s[e].since)return s[e].name}return""}function Di(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].narrow;if(s[e].until<=n&&n<=s[e].since)return s[e].narrow}return""}function Ri(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].abbr;if(s[e].until<=n&&n<=s[e].since)return s[e].abbr}return""}function Li(){var e,t,n,i,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until||a[e].until<=i&&i<=a[e].since)return(this.year()-s(a[e].since).year())*n+a[e].offset;return this.year()}function Pi(e){return o(this,"_erasNameRegex")||Gi.call(this),e?this._erasNameRegex:this._erasRegex}function Mi(e){return o(this,"_erasAbbrRegex")||Gi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Fi(e){return o(this,"_erasNarrowRegex")||Gi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Bi(e,t){return t.erasAbbrRegex(e)}function Ui(e,t){return t.erasNameRegex(e)}function Hi(e,t){return t.erasNarrowRegex(e)}function ji(e,t){return t._eraYearOrdinalRegex||_e}function Gi(){var e,t,n,s,i,a=[],r=[],o=[],c=[],l=this.eras();for(e=0,t=l.length;e<t;++e)n=Ie(l[e].name),s=Ie(l[e].abbr),i=Ie(l[e].narrow),r.push(n),a.push(s),o.push(i),c.push(n),c.push(s),c.push(i);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function qi(e,t){H(0,[e,e.length],0,t)}function Yi(e){return Zi.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function zi(e){return Zi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Vi(){return xt(this.year(),1,4)}function Wi(){return xt(this.isoWeekYear(),1,4)}function Qi(){var e=this.localeData()._week;return xt(this.year(),e.dow,e.doy)}function Ki(){var e=this.localeData()._week;return xt(this.weekYear(),e.dow,e.doy)}function Zi(e,t,n,s,i){var a;return null==e?vt(this,s,i).year:(t>(a=xt(e,s,i))&&(t=a),$i.call(this,e,t,n,s,i))}function $i(e,t,n,s,i){var a=Tt(e,t,n,s,i),r=Et(a.year,0,a.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function Xi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}H("N",0,0,"eraAbbr"),H("NN",0,0,"eraAbbr"),H("NNN",0,0,"eraAbbr"),H("NNNN",0,0,"eraName"),H("NNNNN",0,0,"eraNarrow"),H("y",["y",1],"yo","eraYear"),H("y",["yy",2],0,"eraYear"),H("y",["yyy",3],0,"eraYear"),H("y",["yyyy",4],0,"eraYear"),we("N",Bi),we("NN",Bi),we("NNN",Bi),we("NNNN",Ui),we("NNNNN",Hi),Re(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?g(n).era=i:g(n).invalidEra=e})),we("y",_e),we("yy",_e),we("yyy",_e),we("yyyy",_e),we("yo",ji),Re(["y","yy","yyy","yyyy"],Fe),Re(["yo"],(function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Fe]=n._locale.eraYearOrdinalParse(e,i):t[Fe]=parseInt(e,10)})),H(0,["gg",2],0,(function(){return this.weekYear()%100})),H(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),qi("gggg","weekYear"),qi("ggggg","weekYear"),qi("GGGG","isoWeekYear"),qi("GGGGG","isoWeekYear"),we("G",Ee),we("g",Ee),we("GG",de,ce),we("gg",de,ce),we("GGGG",ge,ue),we("gggg",ge,ue),we("GGGGG",ye,pe),we("ggggg",ye,pe),Le(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,s){t[s.substr(0,2)]=Oe(e)})),Le(["gg","GG"],(function(e,t,n,i){t[i]=s.parseTwoDigitYear(e)})),H("Q",0,"Qo","quarter"),we("Q",oe),Re("Q",(function(e,t){t[Be]=3*(Oe(e)-1)})),H("D",["DD",2],"Do","date"),we("D",de,Se),we("DD",de,ce),we("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Re(["D","DD"],Ue),Re("Do",(function(e,t){t[Ue]=Oe(e.match(de)[0])}));var Ji=Ze("Date",!0);function ea(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}H("DDD",["DDDD",3],"DDDo","dayOfYear"),we("DDD",me),we("DDDD",le),Re(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=Oe(e)})),H("m",["mm",2],0,"minute"),we("m",de,Ae),we("mm",de,ce),Re(["m","mm"],je);var ta=Ze("Minutes",!1);H("s",["ss",2],0,"second"),we("s",de,Ae),we("ss",de,ce),Re(["s","ss"],Ge);var na,sa,ia=Ze("Seconds",!1);for(H("S",0,0,(function(){return~~(this.millisecond()/100)})),H(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),H(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),H(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),H(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),H(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),H(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),we("S",me,oe),we("SS",me,ce),we("SSS",me,le),na="SSSS";na.length<=9;na+="S")we(na,_e);function aa(e,t){t[qe]=Oe(1e3*("0."+e))}for(na="S";na.length<=9;na+="S")Re(na,aa);function ra(){return this._isUTC?"UTC":""}function oa(){return this._isUTC?"Coordinated Universal Time":""}sa=Ze("Milliseconds",!1),H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var ca=v.prototype;function la(e){return Kn(1e3*e)}function ua(){return Kn.apply(null,arguments).parseZone()}function pa(e){return e}ca.add=Ls,ca.calendar=Gs,ca.clone=qs,ca.diff=Zs,ca.endOf=yi,ca.format=ti,ca.from=ni,ca.fromNow=si,ca.to=ii,ca.toNow=ai,ca.get=Je,ca.invalidAt=wi,ca.isAfter=Ys,ca.isBefore=zs,ca.isBetween=Vs,ca.isSame=Ws,ca.isSameOrAfter=Qs,ca.isSameOrBefore=Ks,ca.isValid=Si,ca.lang=oi,ca.locale=ri,ca.localeData=ci,ca.max=$n,ca.min=Zn,ca.parsingFlags=Ai,ca.set=et,ca.startOf=gi,ca.subtract=Ps,ca.toArray=Ti,ca.toObject=vi,ca.toDate=bi,ca.toISOString=Js,ca.inspect=ei,"undefined"!=typeof Symbol&&null!=Symbol.for&&(ca[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ca.toJSON=xi,ca.toString=Xs,ca.unix=Ei,ca.valueOf=_i,ca.creationData=Ci,ca.eraName=Oi,ca.eraNarrow=Di,ca.eraAbbr=Ri,ca.eraYear=Li,ca.year=Qe,ca.isLeapYear=Ke,ca.weekYear=Yi,ca.isoWeekYear=zi,ca.quarter=ca.quarters=Xi,ca.month=ht,ca.daysInMonth=ft,ca.week=ca.weeks=Nt,ca.isoWeek=ca.isoWeeks=It,ca.weeksInYear=Qi,ca.weeksInWeekYear=Ki,ca.isoWeeksInYear=Vi,ca.isoWeeksInISOWeekYear=Wi,ca.date=Ji,ca.day=ca.days=Yt,ca.weekday=zt,ca.isoWeekday=Vt,ca.dayOfYear=ea,ca.hour=ca.hours=sn,ca.minute=ca.minutes=ta,ca.second=ca.seconds=ia,ca.millisecond=ca.milliseconds=sa,ca.utcOffset=ms,ca.utc=ys,ca.local=_s,ca.parseZone=Es,ca.hasAlignedHourOffset=bs,ca.isDST=Ts,ca.isLocal=xs,ca.isUtcOffset=Ss,ca.isUtc=As,ca.isUTC=As,ca.zoneAbbr=ra,ca.zoneName=oa,ca.dates=A("dates accessor is deprecated. Use date instead.",Ji),ca.months=A("months accessor is deprecated. Use month instead",ht),ca.years=A("years accessor is deprecated. Use year instead",Qe),ca.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gs),ca.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",vs);var da=D.prototype;function ha(e,t,n,s){var i=_n(),a=f().set(s,t);return i[n](a,e)}function fa(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return ha(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=ha(e,s,n,"month");return i}function ma(e,t,n,s){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var i,a=_n(),r=e?a._week.dow:0,o=[];if(null!=n)return ha(t,(n+r)%7,s,"day");for(i=0;i<7;i++)o[i]=ha(t,(i+r)%7,s,"day");return o}function ga(e,t){return fa(e,t,"months")}function ya(e,t){return fa(e,t,"monthsShort")}function _a(e,t,n){return ma(e,t,n,"weekdays")}function Ea(e,t,n){return ma(e,t,n,"weekdaysShort")}function ba(e,t,n){return ma(e,t,n,"weekdaysMin")}da.calendar=L,da.longDateFormat=V,da.invalidDate=Q,da.ordinal=$,da.preparse=pa,da.postformat=pa,da.relativeTime=J,da.pastFuture=ee,da.set=k,da.eras=Ni,da.erasParse=Ii,da.erasConvertYear=ki,da.erasAbbrRegex=Mi,da.erasNameRegex=Pi,da.erasNarrowRegex=Fi,da.months=ct,da.monthsShort=lt,da.monthsParse=pt,da.monthsRegex=gt,da.monthsShortRegex=mt,da.week=St,da.firstDayOfYear=Ct,da.firstDayOfWeek=wt,da.weekdays=Ut,da.weekdaysMin=jt,da.weekdaysShort=Ht,da.weekdaysParse=qt,da.weekdaysRegex=Wt,da.weekdaysShortRegex=Qt,da.weekdaysMinRegex=Kt,da.isPM=tn,da.meridiem=an,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Oe(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),s.lang=A("moment.lang is deprecated. Use moment.locale instead.",mn),s.langData=A("moment.langData is deprecated. Use moment.localeData instead.",_n);var Ta=Math.abs;function va(){var e=this._data;return this._milliseconds=Ta(this._milliseconds),this._days=Ta(this._days),this._months=Ta(this._months),e.milliseconds=Ta(e.milliseconds),e.seconds=Ta(e.seconds),e.minutes=Ta(e.minutes),e.hours=Ta(e.hours),e.months=Ta(e.months),e.years=Ta(e.years),this}function xa(e,t,n,s){var i=Ns(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function Sa(e,t){return xa(this,e,t,1)}function Aa(e,t){return xa(this,e,t,-1)}function wa(e){return e<0?Math.floor(e):Math.ceil(e)}function Ca(){var e,t,n,s,i,a=this._milliseconds,r=this._days,o=this._months,c=this._data;return a>=0&&r>=0&&o>=0||a<=0&&r<=0&&o<=0||(a+=864e5*wa(Ia(o)+r),r=0,o=0),c.milliseconds=a%1e3,e=ke(a/1e3),c.seconds=e%60,t=ke(e/60),c.minutes=t%60,n=ke(t/60),c.hours=n%24,r+=ke(n/24),o+=i=ke(Na(r)),r-=wa(Ia(i)),s=ke(o/12),o%=12,c.days=r,c.months=o,c.years=s,this}function Na(e){return 4800*e/146097}function Ia(e){return 146097*e/4800}function ka(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+Na(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ia(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}}function Oa(e){return function(){return this.as(e)}}var Da=Oa("ms"),Ra=Oa("s"),La=Oa("m"),Pa=Oa("h"),Ma=Oa("d"),Fa=Oa("w"),Ba=Oa("M"),Ua=Oa("Q"),Ha=Oa("y"),ja=Da;function Ga(){return Ns(this)}function qa(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Ya(e){return function(){return this.isValid()?this._data[e]:NaN}}var za=Ya("milliseconds"),Va=Ya("seconds"),Wa=Ya("minutes"),Qa=Ya("hours"),Ka=Ya("days"),Za=Ya("months"),$a=Ya("years");function Xa(){return ke(this.days()/7)}var Ja=Math.round,er={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function tr(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}function nr(e,t,n,s){var i=Ns(e).abs(),a=Ja(i.as("s")),r=Ja(i.as("m")),o=Ja(i.as("h")),c=Ja(i.as("d")),l=Ja(i.as("M")),u=Ja(i.as("w")),p=Ja(i.as("y")),d=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||r<=1&&["m"]||r<n.m&&["mm",r]||o<=1&&["h"]||o<n.h&&["hh",o]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||l<=1&&["M"]||l<n.M&&["MM",l]||p<=1&&["y"]||["yy",p])[2]=t,d[3]=+e>0,d[4]=s,tr.apply(null,d)}function sr(e){return void 0===e?Ja:"function"==typeof e&&(Ja=e,!0)}function ir(e,t){return void 0!==er[e]&&(void 0===t?er[e]:(er[e]=t,"s"===e&&(er.ss=t-1),!0))}function ar(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,a=er;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(a=Object.assign({},er,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),s=nr(this,!i,a,n=this.localeData()),i&&(s=n.pastFuture(+this,s)),n.postformat(s)}var rr=Math.abs;function or(e){return(e>0)-(e<0)||+e}function cr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,a,r,o,c=rr(this._milliseconds)/1e3,l=rr(this._days),u=rr(this._months),p=this.asSeconds();return p?(e=ke(c/60),t=ke(e/60),c%=60,e%=60,n=ke(u/12),u%=12,s=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=p<0?"-":"",a=or(this._months)!==or(p)?"-":"",r=or(this._days)!==or(p)?"-":"",o=or(this._milliseconds)!==or(p)?"-":"",i+"P"+(n?a+n+"Y":"")+(u?a+u+"M":"")+(l?r+l+"D":"")+(t||e||c?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(c?o+s+"S":"")):"P0D"}var lr=rs.prototype;return lr.isValid=is,lr.abs=va,lr.add=Sa,lr.subtract=Aa,lr.as=ka,lr.asMilliseconds=Da,lr.asSeconds=Ra,lr.asMinutes=La,lr.asHours=Pa,lr.asDays=Ma,lr.asWeeks=Fa,lr.asMonths=Ba,lr.asQuarters=Ua,lr.asYears=Ha,lr.valueOf=ja,lr._bubble=Ca,lr.clone=Ga,lr.get=qa,lr.milliseconds=za,lr.seconds=Va,lr.minutes=Wa,lr.hours=Qa,lr.days=Ka,lr.weeks=Xa,lr.months=Za,lr.years=$a,lr.humanize=ar,lr.toISOString=cr,lr.toString=cr,lr.toJSON=cr,lr.locale=ri,lr.localeData=ci,lr.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cr),lr.lang=oi,H("X",0,0,"unix"),H("x",0,0,"valueOf"),we("x",Ee),we("X",ve),Re("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Re("x",(function(e,t,n){n._d=new Date(Oe(e))})),
//! moment.js
s.version="2.30.1",i(Kn),s.fn=ca,s.min=Jn,s.max=es,s.now=ts,s.utc=f,s.unix=la,s.months=ga,s.isDate=p,s.locale=mn,s.invalid=_,s.duration=Ns,s.isMoment=x,s.weekdays=_a,s.parseZone=ua,s.localeData=_n,s.isDuration=os,s.monthsShort=ya,s.weekdaysMin=ba,s.defineLocale=gn,s.updateLocale=yn,s.locales=En,s.weekdaysShort=Ea,s.normalizeUnits=ne,s.relativeTimeRounding=sr,s.relativeTimeThreshold=ir,s.calendarFormat=js,s.prototype=ca,s.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},s}()}(kf);var Of=N(kf.exports);class Df{}Df.DEFAULT_IMAGE_TRANSFORM={fit:"cover",width:512,height:512,quality:100},Df.SMALL_IMAGE_TRANSFORM={fit:"cover",width:128,height:128,quality:90},Df.ORIGINAL_IMAGE_TRANSFORM={fit:void 0,width:void 0,height:void 0,quality:void 0};class Rf{static getServerUrl(){return process.env.PUBLIC_URL}}class Lf{static getAssetImageURL(e,t=Df.DEFAULT_IMAGE_TRANSFORM){let n;if("string"==typeof e&&e.startsWith("http"))return e;n="object"==typeof e&&null!==e&&"id"in e?e.id:e;let s=Lf.getAssetURL(n);if(s){const e=t.fit,n=t.width,i=t.height,a=t.quality;let r,o=e?"fit="+e:null,c=n?"width="+n:null,l=i?"height="+i:null,u=a?"quality="+a:null;if(o||c||l||u){r="?",r+=[o,c,l,u].filter((e=>null!==e)).join("&")}let p=s;return r&&(p+=r),p}return null}static getAssetURL(e){return e?Rf.getServerUrl()+"/assets/"+e:null}}class Pf{static getValueListFromDict(e){let t=Object.keys(e),n=[];for(let s of t){let t=e[s];t&&n.push(t)}return n}static transformListToDict(e,t){let n={};for(let s of e){n[t(s)]=s}return n}}class Mf{constructor(e){this.apiContext=e,this.myDatabaseHelper=new Gl(e)}static getCanteenAliasList(e){let t=[];for(let n of e)n.alias&&t.push(n.alias);return t}async generateReportJSON(e,t,n,s){let i=t,a=Ll.getHumanReadableDate(i,!0);const r=Mf.getCanteenAliasList(s).join(", ");let o=e.show_images;null==o&&(o=!0);let c={canteen_alias:r,report_feedback_period_days:n,dateHumanReadable:a,show_images:o,foods:[]},l=[],u={};for(let e of s){let n=await this.getFoodOffersWithFoodAtDateInCanteen(t,null==e?void 0:e.id);for(let e of n){let t=null==e?void 0:e.food;t&&"string"!=typeof t&&(u[t.id]=t)}}let p=await this.myDatabaseHelper.getFoodFeedbackLabelsHelper().readByQuery({limit:-1,filter:{_and:[{visible:{_eq:!0}}]},fields:["*","translations.*"]});const d=Pf.transformListToDict(p,(e=>e.id));for(let e of Object.values(u)){const t=null==e?void 0:e.id;let s=await this.getAllFoodFeedbacksWithCommentsForFood(t,n),i=await this.getReportFeedbackLabelsList(t,d,n),a=this.getFoodFeedbackComments(s),r=null;if(null==e?void 0:e.image){let t=null==e?void 0:e.image;process.env.PUBLIC_URL&&(r=Lf.getAssetImageURL(t,Df.SMALL_IMAGE_TRANSFORM))}(null==e?void 0:e.image_remote_url)&&(r=null==e?void 0:e.image_remote_url);let o="N/A";(null==e?void 0:e.rating_average)&&(o=null==e?void 0:e.rating_average.toFixed(2));let c="0";(null==e?void 0:e.rating_amount)&&(c=(null==e?void 0:e.rating_amount)+"");let u={id:e.id,alias:e.alias,image_url:r,rating_average:o,rating_amount:c,comments:a,labels:i};l.push(u)}return c.foods=l,c}getFoodFeedbackComments(e){let t=[];for(let n of e){let e=null==n?void 0:n.comment;if(e){let n=e.replace(/<[^>]*>?/gm,"");t.push(n)}}return t}getTranslationOfFeedbackLabel(e){return(null==e?void 0:e.alias)||e.id}async getReportFeedbackLabelsList(e,t,n){const s=this.myDatabaseHelper.getFoodFeedbackLabelEntriesHelper(),i=[{food:{_eq:e}}];let a=this.getFilterDateUpdatedForReportFeedbackPeriodDays(n);a&&i.push(a);const r=await s.readByQuery({filter:{_and:i},limit:-1});let o={};for(let e of r){let n=null==e?void 0:e.label;if(n&&"string"==typeof n){let s=t[n];if(s){let t=this.getTranslationOfFeedbackLabel(s),i=o[n];i||(i={id:n,alias:t,amount_negative:0,amount_positive:0,amount_total:0}),i&&((null==e?void 0:e.dislike)?i.amount_negative+=1:i.amount_positive+=1,i.amount_total+=1,o[n]=i)}}}let c=[];for(let e in o){let t=o[e];t&&c.push(t)}return c}getFilterDateUpdatedForReportFeedbackPeriodDays(e){let t;if(null!=e){let n=new Date,s=new Date(n);s.setDate(s.getDate()-e),t={date_updated:{_between:[s.toISOString(),n.toISOString()]}}}return t}async getAllFoodFeedbacksWithCommentsForFood(e,t){let n=this.myDatabaseHelper.getFoodFeedbacksHelper();const s=[{food:{_eq:e}},{comment:{_null:!1}}];let i=this.getFilterDateUpdatedForReportFeedbackPeriodDays(t);return i&&s.push(i),await n.readByQuery({filter:{_and:s},fields:["*"],limit:-1})}async getFoodOffersWithFoodAtDateInCanteen(e,t){let n=new Date(e);const s=Ll.getFoodofferDateTypeFromDate(n),i=Ll.foodofferDateTypeToString(s);let a=this.myDatabaseHelper.getFoodoffersHelper();return await a.readByQuery({filter:{_and:[{date:{_eq:i}},{canteen:{_eq:t}}]},fields:["*","food.*"],limit:-1})}}const Ff=Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES,Bf="CanteenFoodFeedbackReportSchedule";class Uf{constructor(e){this.apiContext=e,this.myDatabaseHelper=new Gl(e)}async isEnabled(){return await this.myDatabaseHelper.getAppSettingsHelper().isCanteenReportEnabled()}async run(){if(await this.isEnabled()){let e=new Mf(this.apiContext);try{let t=await this.getAllReportSchedules();for(let n of t){let t=await this.getDateForWhichTheReportShouldBeSend(n);if(t){let s=await this.getRecipientEmailList(n);if(s.length>0){let i=await this.getCanteenEntries(n);if(i.length>0)try{let a=null==n?void 0:n.report_feedback_period_days,r=await e.generateReportJSON(n,t,a,i);if(r){for(let e of s)await this.sendReport(t,r,n,i,e);await this.setNextReportDate(t,n),await this.updateReportLogSuccess(t,n)}else await this.logReportSendError(n,"No report could be generated. Please contact admin and tell him: await reportGenerator.generateReportForMail(generateReportForDate)")}catch(e){await this.logReportSendError(n,e)}else await this.logReportSendError(n,"No canteen set.")}else await this.logReportSendError(n,"No emails given.")}}}catch(e){console.log("Error in "+Bf),console.log(e)}}}async getRecipientEmailList(e){const t=new nr(this.apiContext);let n=await t.getItemsService(Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_REPORT_RECIPIENTS),s=await n.readByQuery({filter:{canteen_food_feedback_report_schedules_id:{_eq:e.id}},limit:-1}),i=[];for(let e of s){let t=e.report_recipients_id;t&&"string"==typeof t&&i.push(t)}let a=await t.getItemsService(Xa.REPORT_RECIPIENTS),r=await a.readMany(i),o=[];for(let e of r){let t=e.mail;t&&o.push(t)}return o}async getCanteenEntries(e){const t=new nr(this.apiContext);let n=await t.getItemsService(Xa.CANTEEN_FOOD_FEEDBACK_REPORT_SCHEDULES_CANTEENS),s=await n.readByQuery({filter:{canteen_food_feedback_report_schedules_id:{_eq:e.id}},limit:-1}),i=[];for(let e of s){let t=e.canteens_id;t&&"string"==typeof t&&i.push(t)}if(0===i.length)return[];let a=await t.getItemsService(Xa.CANTEENS);return await a.readMany(i)}getCanteenAliasForMail(e){let t=Mf.getCanteenAliasList(e);let n="";return t.length>3?(t=t.slice(0,3),n+=": "+t.join(", ")+" ..."):n+=": "+t.join(", "),e.length+" Mensen ("+n+")"}async sendReport(e,t,n,s,i){let a=this.getCanteenAliasForMail(s),r="Mensa Report - fr: "+Ll.getHumanReadableDate(e,!0)+" - "+a;await this.myDatabaseHelper.sendMail({to:i,subject:r,template:{name:"canteen-food-feedback-report",data:t}})}async setNextReportDate(e,t){const n=new nr(this.apiContext);let s=Ff,i=await n.getItemsService(s),a=Of(e).add(1,"days").toDate(),r=t.send_amount_days_before_offer_date,o=Of(a).subtract(r,"days").toISOString();await i.updateOne(t.id,{date_next_report_is_due:o})}async updateReportLogSuccess(e,t){(new Date).toISOString(),await this.updateReportLog(t,"Report was sent successfully for the date: "+e)}async logReportSendError(e,t){await this.updateReportLog(e,"Report sending failed: "+t.toString())}async updateReportLog(e,t){const n=new nr(this.apiContext);try{let s=Ff,i=await n.getItemsService(s),a={report_status_log:t};await i.updateOne(e.id,a)}catch(e){console.log(Bf+" updateReportLog failed:"),console.log(e)}}async getDateForWhichTheReportShouldBeSend(e){const t=new nr(this.apiContext);let n=Ff,s=await t.getItemsService(n);if(!e.enabled)return await this.updateReportLog(e,"Recipient is disabled."),null;let i=Of(new Date),a=null==e?void 0:e.send_once_now_for_date;if(a)return await s.updateOne(e.id,{send_once_now_for_date:null}),new Date(a);let r=e.send_report_at_hh_mm,o=e.send_amount_days_before_offer_date;if(!!!r||!(null!=o))return await this.updateReportLog(e,"Recipient settings are not configured. (send_report_at_hh_mm_configured or send_amount_days_before_offer_date_configured is undefined)"),null;let c=Of(i).add(o,"days").format("YYYY-MM-DD")+" "+r,l=e.date_next_report_is_due,u=e.last_saved_send_report_at_hh_mm,p=e.last_saved_send_amount_days_before_offer_date;u||(u=r,await s.updateOne(e.id,{last_saved_send_report_at_hh_mm:r})),p||(p=o,await s.updateOne(e.id,{last_saved_send_amount_days_before_offer_date:o}));let d=u!==r||p!==o;if(d){u=r,p=o;let t={last_saved_send_report_at_hh_mm:u,last_saved_send_amount_days_before_offer_date:p};await s.updateOne(e.id,t),await this.updateReportLog(e,"Recipient settings have changed. (send_report_at_hh_mm_changed or send_amount_days_before_offer_date_changed)")}if(!l||d){let t=Of(i).add(0,"days").format("YYYY-MM-DD")+" "+r;i.isAfter(t)&&(t=Of(t).add(1,"days").format("YYYY-MM-DD")+" "+r);let n=Of(t).toISOString();return await s.updateOne(e.id,{date_next_report_is_due:n}),await this.updateReportLog(e,"Next report date was not set. Set next report due date to: "+n),null}if(i.isAfter(l)){let e=Of(c).toISOString();return new Date(e)}return null}async getAllReportSchedules(){const e=new nr(this.apiContext);let t=Ff,n=await e.getItemsService(t);return await n.readByQuery({limit:-1})}}var Hf=async({schedule:e},t)=>{if(!await er.checkAllTablesExistWithApiContext("food_feedback_report",t))return;const n=new Uf(t);console.log("Canteen Food Feedback Report Schedule schedule register"),e("*/20 * * * * *",(async()=>{await n.run()}))};const jf="languages_code",Gf="code",qf=class{};let Yf=qf;Yf._codes={de:"de-DE",en:"en-US"},Yf.DE=qf._codes.de,Yf.EN=qf._codes.en;const zf=["id","be_source_for_translations","let_be_translated","languages_code","translation_settings"],Vf=class{static getTranslation(e,t,n){let s=(e=e||[]).find((e=>e.languages_code===t)),i=e.find((e=>e.languages_code===Vf.DefaultLanguage)),a=e.find((e=>e.languages_code===Vf.FallBackLanguage));return(null==s?void 0:s[n])||(null==i?void 0:i[n])||(null==a?void 0:a[n])}static hasSignificantTranslationChange(e,t){for(const n in e)if(e.hasOwnProperty(n)&&!zf.includes(n)&&n in t&&e[n]!==t[n])return!0;return!1}static async updateItemTranslations(e,t,n,s,i){const a=new nr(i),r=await a.getItemsService(s);let o=await r.readOne(null==e?void 0:e.id,{fields:["*","translations.*"]});if(o){const{updateObject:s,updateNeeded:i}=await Vf._getUpdateInformationForTranslations(o,e,t,n);i&&await r.updateOne(null==e?void 0:e.id,{id:null==e?void 0:e.id,...s})}}static async _getUpdateInformationForTranslations(e,t,n,s){let i=JSON.parse(JSON.stringify(n)),a=[],r=[],o=(null==e?void 0:e.translations)||[],c=!1,l=!1,u=Vf.LANGUAGE_CODE_DE;for(let e of o)(null==e?void 0:e.be_source_for_translations)&&(null==e?void 0:e.languages_code)&&"string"==typeof(null==e?void 0:e.languages_code)&&(u=null==e?void 0:e.languages_code);for(let e of o){let t=null==e?void 0:e[jf];if(!t||"string"!=typeof t)continue;const s=n[t];if(s){const n=JSON.parse(JSON.stringify(s));if(delete i[t],Vf.hasSignificantTranslationChange(e,n)){c=!0;let s=!1;t===u&&(s=!0),r.push({id:null==e?void 0:e.id,let_be_translated:!1,be_source_for_translations:s,...n,[jf]:{[Gf]:t}})}}else delete i[t]}let p=Object.keys(i);for(let e=0;e<(null==p?void 0:p.length);e++){let i=p[e];if(i){let e=n[i];if(e){l=!0;let n=!1;i===Vf.LANGUAGE_CODE_DE&&(n=!0),a.push({[s]:null==t?void 0:t.id,be_source_for_translations:n,let_be_translated:!1,...e,[jf]:{[Gf]:i}})}}}return{updateObject:{translations:{create:a,update:r,delete:[]}},updateNeeded:c||l}}};let Wf=Vf;Wf.LANGUAGE_CODE_DE=Yf.DE,Wf.LANGUAGE_CODE_EN=Yf.EN,Wf.DefaultLanguage=Vf.LANGUAGE_CODE_DE,Wf.FallBackLanguage=Vf.LANGUAGE_CODE_EN;const Qf="FoodNotifySchedule";class Kf{constructor(e){this.myDatabaseHelper=new Gl(e)}async setStatus(e){await this.myDatabaseHelper.getAppSettingsHelper().setFoodNotificationStatus(e)}async notify(e=1,t=!1){let n=await this.myDatabaseHelper.getAppSettingsHelper().getFoodNotificationStatus(),s=this.myDatabaseHelper.getDevicesHelper();if(n===Fl.START||t){console.log("[Start] "+Qf+" Schedule"),console.log("Notify about meals in "+e+" days - force: "+t),await this.myDatabaseHelper.getAppSettingsHelper().setFoodNotificationStatus(Fl.RUNNING);try{let t=new Date;t.setDate(t.getDate()+e);let n=await this.getFoodOffersForDate(t);for(let i of n){let n=i.food,a=await this.getFoodWithTranslations(n),r=i.canteen,o=await this.getFoodFeedbacksForFood(n);for(let n of o){let o=n.profile,c=await this.getProfileAndDevicesForProfile(o),l=c.language;if(c.canteen!==r)continue;const u=c.devices;let p=this.getExpoPushTokensToDevicesDict(u),d=Object.keys(p);for(let n of d){let r=p[n];try{await this.notifyExpoPushTokenAboutFoodOffer(n,i,a,l,e,t)}catch(e){if((null==e?void 0:e.message).includes("Failed to send notification"))for(let e of r)await s.updateOne(e.id,{pushTokenObj:null})}if(r.length>1){console.log("Notify multiple devices with the same push token"),console.log("Devices: "+r.length),console.log(r);let e=null,t=null;for(let n of r)if(n.date_updated){let s=new Date(n.date_updated);(!e||s>e)&&(e=s,t=n)}for(let e of r)e.id!==(null==t?void 0:t.id)&&(console.log("Remove pushTokenObj from device as it is not the recent updated device: "+e.id),await s.updateOne(e.id,{pushTokenObj:null}))}}for(let e of u)e.pushTokenObj}}await this.setStatus(Fl.FINISHED)}catch(e){console.log("["+Qf+"] Failed"),console.log(e),await this.setStatus(Fl.FAILED)}}}getExpoPushTokenFromDevice(e){var t;let n=e.pushTokenObj;return null==(t=null==n?void 0:n.pushtokenObj)?void 0:t.data}getExpoPushTokensToDevicesDict(e){let t={};for(let n of e){let e=this.getExpoPushTokenFromDevice(n);if(e){let s=t[e]||[];s.push(n),t[e]=s}}return t}async notifyExpoPushTokenAboutFoodOffer(e,t,n,s,i,a){let r=this.myDatabaseHelper.getPushNotificationsHelper(),o=await this.getProjectName(),c=this.getFoodNameTranslation(n,s),l=await this.getTranslationDate(s,i,a)+": "+c;l=" "+l;let u={expo_push_tokens:[e],message_title:o,message_body:l};await r.createOne(u)}async getTranslationDate(e,t,n){return 0===t?"Heute":1===t?"Morgen":Ll.getHumanReadableDate(n,!1)}getFoodNameTranslation(e,t){return Wf.getTranslation(null==e?void 0:e.translations,t,"name")||"ein Gericht"}async getProjectName(){let e=await this.myDatabaseHelper.getServerInfo(),t=null==e?void 0:e.project;return(null==t?void 0:t.project_name)||"Rocket Meals"}async getFoodWithTranslations(e){const t=this.myDatabaseHelper.getFoodsHelper();return await t.readOne(e,{fields:["*","translations.*"]})}async getProfileAndDevicesForProfile(e){let t=this.myDatabaseHelper.getProfilesHelper();return await t.readOne(e,{fields:["*","devices.*"]})}async getFoodFeedbacksForFood(e){const t=this.myDatabaseHelper.getFoodFeedbacksHelper();return await t.readByQuery({filter:{_and:[{food:{_eq:e}},{notify:{_eq:!0}}]},limit:-1})}async getFoodOffersForDate(e){const t=Ll.foodofferDateTypeToString(Ll.getFoodofferDateTypeFromDate(e)),n=this.myDatabaseHelper.getFoodoffersHelper();return await n.readByQuery({filter:{date:{_eq:t}},limit:-1})}}var Zf=async({action:e},t)=>{let n=Xa.APP_SETTINGS;if(!await er.checkAllTablesExistWithApiContext("food_notify",t))return;const s=new Kf(t);e(n+".items.update",(async()=>{try{await s.notify(1,!1)}catch(e){console.log(e)}}))},$f={exports:{}};!function(e,t){var n=u;function s(e,t){return function(e,t){var s;s="passthrough"!==t.algorithm?n.createHash(t.algorithm):new l;void 0===s.write&&(s.write=s.update,s.end=s.update);var i=c(t,s);i.dispatch(e),s.update||s.end("");if(s.digest)return s.digest("buffer"===t.encoding?void 0:t.encoding);var a=s.read();if("buffer"===t.encoding)return a;return a.toString(t.encoding)}(e,t=r(e,t))}(t=e.exports=s).sha1=function(e){return s(e)},t.keys=function(e){return s(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},t.MD5=function(e){return s(e,{algorithm:"md5",encoding:"hex"})},t.keysMD5=function(e){return s(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var i=n.getHashes?n.getHashes().slice():["sha1","md5"];i.push("passthrough");var a=["buffer","hex","binary","base64"];function r(e,t){t=t||{};var n={};if(n.algorithm=t.algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var s=0;s<i.length;++s)i[s].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=i[s]);if(-1===i.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+i.join(", "));if(-1===a.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+a.join(", "));return n}function o(e){if("function"!=typeof e)return!1;return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function c(e,t,n){n=n||[];var s=function(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")};return{dispatch:function(t){e.replacer&&(t=e.replacer(t));var n=typeof t;return null===t&&(n="null"),this["_"+n](t)},_object:function(t){var i=Object.prototype.toString.call(t),a=/\[object (.*)\]/i.exec(i);a=(a=a?a[1]:"unknown:["+i+"]").toLowerCase();var r;if((r=n.indexOf(t))>=0)return this.dispatch("[CIRCULAR:"+r+"]");if(n.push(t),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t))return s("buffer:"),s(t);if("object"===a||"function"===a||"asyncfunction"===a){var c=Object.keys(t);e.unorderedObjects&&(c=c.sort()),!1===e.respectType||o(t)||c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter((function(t){return!e.excludeKeys(t)}))),s("object:"+c.length+":");var l=this;return c.forEach((function(n){l.dispatch(n),s(":"),e.excludeValues||l.dispatch(t[n]),s(",")}))}if(!this["_"+a]){if(e.ignoreUnknown)return s("["+a+"]");throw new Error('Unknown object type "'+a+'"')}this["_"+a](t)},_array:function(t,i){i=void 0!==i?i:!1!==e.unorderedArrays;var a=this;if(s("array:"+t.length+":"),!i||t.length<=1)return t.forEach((function(e){return a.dispatch(e)}));var r=[],o=t.map((function(t){var s=new l,i=n.slice();return c(e,s,i).dispatch(t),r=r.concat(i.slice(n.length)),s.read().toString()}));return n=n.concat(r),o.sort(),this._array(o,!1)},_date:function(e){return s("date:"+e.toJSON())},_symbol:function(e){return s("symbol:"+e.toString())},_error:function(e){return s("error:"+e.toString())},_boolean:function(e){return s("bool:"+e.toString())},_string:function(e){s("string:"+e.length+":"),s(e.toString())},_function:function(t){s("fn:"),o(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return s("number:"+e.toString())},_xml:function(e){return s("xml:"+e.toString())},_null:function(){return s("Null")},_undefined:function(){return s("Undefined")},_regexp:function(e){return s("regex:"+e.toString())},_uint8array:function(e){return s("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return s("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return s("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return s("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return s("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return s("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return s("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return s("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return s("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return s("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return s("url:"+e.toString())},_map:function(t){s("map:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_set:function(t){s("set:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_file:function(e){return s("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return s("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return s("domwindow")},_bigint:function(e){return s("bigint:"+e.toString())},_process:function(){return s("process")},_timer:function(){return s("timer")},_pipe:function(){return s("pipe")},_tcp:function(){return s("tcp")},_udp:function(){return s("udp")},_tty:function(){return s("tty")},_statwatcher:function(){return s("statwatcher")},_securecontext:function(){return s("securecontext")},_connection:function(){return s("connection")},_zlib:function(){return s("zlib")},_context:function(){return s("context")},_nodescript:function(){return s("nodescript")},_httpparser:function(){return s("httpparser")},_dataview:function(){return s("dataview")},_signal:function(){return s("signal")},_fsevent:function(){return s("fsevent")},_tlswrap:function(){return s("tlswrap")}}}function l(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}t.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),c(t=r(e,t),n).dispatch(e)}}($f,$f.exports);var Xf=N($f.exports);class Jf{static removeDuplicatesFromJsonListWithSelector(e,t){let n=[],s={};for(let i of e){let e=t(i);s[e]||(s[e]=i,n.push(i))}return n}static removeDuplicatesFromJsonList(e,t){return Jf.removeDuplicatesFromJsonListWithSelector(e,(e=>e[t]))}}class em{static getDictMarkingsExclusions(e){let t={};for(let n of e)t[n.id]=n;return t}static filterMarkingByRestrictionRules(e,t){let n=[],s={};for(let t of e)s[t.id]=t;for(let i of e){let e=!0,a=em.getMarkingExclusionRuleIdsFromMarking(i);if(a.length>0)for(let n of a){let i=t[n];if(i){let t=i.restricted_by_markings_id;if(t){if(!!s[t]){e=!1;break}}}}e&&n.push(i)}return n}static getMarkingExclusionRuleIdsFromMarking(e){let t=e.excluded_by_markings;return t.every((e=>"string"==typeof e||"number"==typeof e))?t:t.map((e=>e.id))}}let tm=class{value;next;constructor(e){this.value=e}};class nm{#e;#t;#n;constructor(){this.clear()}enqueue(e){const t=new tm(e);this.#e?(this.#t.next=t,this.#t=t):(this.#e=t,this.#t=t),this.#n++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#n--,e.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#n=0}get size(){return this.#n}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}}function sm(e){im(e);const t=new nm;let n=0;const s=()=>{n<e&&t.size>0&&(t.dequeue()(),n++)},i=async(e,t,i)=>{const a=(async()=>e(...i))();t(a);try{await a}catch{}n--,s()},a=(a,...r)=>new Promise((o=>{((a,r,o)=>{new Promise((e=>{t.enqueue(e)})).then(i.bind(void 0,a,r,o)),(async()=>{await Promise.resolve(),n<e&&s()})()})(a,o,r)}));return Object.defineProperties(a,{activeCount:{get:()=>n},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}},concurrency:{get:()=>e,set(i){im(i),e=i,queueMicrotask((()=>{for(;n<e&&t.size>0;)s()}))}}}),a}function im(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}const am="FoodParseSchedule";let rm=class{constructor(e,t,n){this.apiContext=e,this.myDatabaseHelper=new Gl(e),this.myAppSettingsHelper=this.myDatabaseHelper.getAppSettingsHelper(),this.foodParser=t,this.markingParser=n}async setStatus(e){await this.myAppSettingsHelper.setAppSettings({[Ul.FIELD_APP_SETTINGS_FOODS_PARSING_STATUS]:e,[Ul.FIELD_APP_SETTINGS_FOODS_PARSING_LAST_RUN]:new Date})}async isEnabled(){return await this.myAppSettingsHelper.isFoodParsingEnabled()}async getStatus(){return await this.myAppSettingsHelper.getFoodParsingStatus()}async getHashOfJsonObject(e){return Xf(e,{algorithm:"md5",excludeValues:!1,ignoreUnknown:!1})}async parse(e=!1){let t=await this.isEnabled(),n=await this.getStatus();if(t&&n===Fl.START||e){console.log("[Start] "+am+" Parse Schedule"),await this.setStatus(Fl.RUNNING);try{if(this.markingParser){console.log("["+am+"] - Create Needed Data for MarkingParser"),await this.markingParser.createNeededData(),console.log("["+am+"] - Update Markings");let e=await this.markingParser.getMarkingsJSONList();await this.updateMarkings(e)}if(this.foodParser){console.log("["+am+"] - Create Needed Data for FoodParser"),await this.foodParser.createNeededData();let e=await this.foodParser.getCanteensList(),t=await this.foodParser.getFoodsListForParser(),n=await this.foodParser.getFoodoffersForParser(),s=await this.getHashOfJsonObject(n),i=await this.myAppSettingsHelper.getFoodParsingHash();const a=this.myDatabaseHelper.getMarkingsExclusionsHelper();console.log("["+am+"] - Current meal offers hash: "+s),console.log("["+am+"] - Check if meal offers changed");if(!i||i!==s){console.log("["+am+"] - Set previous meal offers hash"),await this.myAppSettingsHelper.setFoodParsingHash(s),console.log("["+am+"] - Update Canteens"),await this.updateCanteens(e),console.log("["+am+"] - Get all markings exlusions");let i=await a.readAllItems();const r=em.getDictMarkingsExclusions(i);console.log("["+am+"] - Update Foods"),await this.updateFoods(t,r),console.log("["+am+"] - Delete specific food offers"),await this.deleteRequiredFoodOffersForTheirCanteens(n),console.log("["+am+"] - Create food offers"),await this.createFoodOffers(n,r)}}console.log("["+am+"] - Finished"),await this.setStatus(Fl.FINISHED)}catch(e){console.log("["+am+"] - Failed"),console.log(e),await this.setStatus(Fl.FAILED)}}}async getFoodsService(){return await this.myDatabaseHelper.getFoodsHelper()}getFoodofferDatesFromRawFoodofferJSONList(e){let t={};for(let n of e){t[Ll.foodofferDateTypeToString(n.date)]=n.date}return Object.values(t)}async deleteRequiredFoodOffersForTheirCanteens(e){let t={};for(let n of e){let e=n.canteen_external_identifier;t[e]||(t[e]=[]),t[e].push(n)}let n=Object.keys(t);for(let e of n){console.log("["+am+"] - Delete required foodoffers for canteen: "+e);let n=await this.findOrCreateCanteenByExternalIdentifier(e);if(n){n.foodoffers_import_delete_all_without_dates&&await this.deleteAllFoodoffersForCanteenWithoutDates(n);let s=t[e]||[],i=this.getFoodofferDatesFromRawFoodofferJSONList(s);await this.deleteFoodOffersNewerOrEqualThanDate(i,n)}}}async deleteAllFoodoffersForCanteenWithoutDates(e){let t=await this.myDatabaseHelper.getFoodoffersHelper(),n=await t.readByQuery({filter:{canteen:{_eq:e.id},date:{_null:!0}},fields:["id"],limit:-1});await this.deleteFoodOffers(n,`Delete all food offers for canteen without dates: ${e.id} - amount: ${n.length}`)}async deleteFoodOffersNewerOrEqualThanDate(e,t){let n=null;for(let t of e){let e=new Date(Ll.foodofferDateTypeToString(t));if(n){e<new Date(Ll.foodofferDateTypeToString(n))&&(n=t)}else n=t}n&&(console.log("["+am+"] - Delete specific food offers"),console.log("oldestFoodofferDate: "),console.log(n),await this.deleteAllFoodOffersNewerOrEqualThanDateForCanteen(n,t))}async deleteFoodOffers(e,t){let n=await this.myDatabaseHelper.getFoodoffersHelper(),s=e.map((e=>e.id));s.length>0?await n.deleteMany(s).then((()=>{console.log(`Foodoffers deleted: ${s.length} - ${t}`)})).catch((e=>{console.error(`Foodoffers delete error: ${t}:`,e)})):console.log(`No foodoffers given to delete - ${t}`)}async deleteAllFoodOffersNewerOrEqualThanDateForCanteen(e,t){const n=Ll.foodofferDateTypeToString(e);console.log("["+am+"] - Delete food offers newer or equal than date: "+n);let s=await this.myDatabaseHelper.getFoodoffersHelper(),i=await s.readByQuery({filter:{_and:[{date:{_gte:n}},{canteen:{_eq:t.id}}]},fields:["id"],limit:-1});await this.deleteFoodOffers(i,`Delete all food offers newer or equal than date: ${n} for canteen: ${t.id}`)}async findOrCreateMarkingByExternalIdentifier(e){let t={external_identifier:e},n={alias:e,external_identifier:e};return this.myDatabaseHelper.getMarkingsHelper().findOrCreateItem(t,n)}async findOrCreateMarkingsByExternalIdentifierList(e){let t=[];for(let n of e){let e=await this.findOrCreateMarkingByExternalIdentifier(n);e&&t.push(e)}return t}async updateCanteens(e){let t=e.length,n=0;for(let s of e){n++,console.log("["+am+"] - Update Canteen "+n+" / "+t);let e=await this.findOrCreateCanteen(s);if(e){let t=this.myDatabaseHelper.getCanteensHelper();await t.updateOne(e.id,s)}}}async assignMarkingsToFood(e,t,n){let s=Xa.FOODS_MARKINGS;const i=em.filterMarkingByRestrictionRules(e,n);for(let e of i){let n={foods_id:t.id,markings_id:e.id};const i=n,a=n;await Rl.findOrCreateItemWithApiContext(this.apiContext,s,i,a)}}async assignMarkingsToFoodoffer(e,t,n){let s=Xa.FOODOFFER_MARKINGS;const i=em.filterMarkingByRestrictionRules(e,n);for(let e of i){let n={foodoffers_id:t.id,markings_id:e.id};await Rl.createItemWithApiContext(this.apiContext,s,n)}}async updateFoodBasicFields(e){return this.myDatabaseHelper.getFoodsHelper().updateOne(e.id,e)}async updateFoodTranslations(e,t){await Wf.updateItemTranslations(e,t.translations,"foods_id",Xa.FOODS,this.apiContext)}async updateFoods(e,t){(e=Jf.removeDuplicatesFromJsonListWithSelector(e,(e=>e.basicFoodData.id))).length;for(let n of e){const e=n.basicFoodData;let s={id:e.id},i=await this.myDatabaseHelper.getFoodsHelper().findOrCreateItem(s,s);if(i&&i.id&&this.foodParser){let s=n.marking_external_identifiers,a=await this.findOrCreateMarkingsByExternalIdentifierList(s);await this.assignMarkingsToFood(a,i,t),await this.updateFoodBasicFields(e),await this.updateFoodTranslations(i,n)}}}async findOrCreateCanteen(e){let t={external_identifier:e.external_identifier},n=e;return await this.myDatabaseHelper.getCanteensHelper().findOrCreateItem(t,n)}async findOrCreateCanteenByExternalIdentifier(e){let t={external_identifier:e};return await this.findOrCreateCanteen(t)}async createFoodOffer(e,t){const n=this.myDatabaseHelper.getFoodoffersHelper();let s=e.canteen_external_identifier,i=await this.findOrCreateCanteenByExternalIdentifier(s);if(i){let s=e.food_id;const a=await this.getFoodsService();let r=await a.readOne(s);if(r){const a=e.basicFoodofferData;a.alias||(a.alias=r.alias);const o=!!i.foodoffers_import_without_date?null:Ll.foodofferDateTypeToString(e.date);let c={...e.basicFoodofferData,canteen:i.id,food:s,date:o,date_created:(new Date).toISOString(),date_updated:(new Date).toISOString()},l=await n.createOne(c),u=await n.readOne(l);if(u){let n=e.marking_external_identifiers,s=await this.findOrCreateMarkingsByExternalIdentifierList(n);await this.assignMarkingsToFoodoffer(s,u,t)}}}}async createFoodOffers(e,t){const n=e.length;console.log("["+am+"] - Create Food Offers");const s=sm(20),i=e.map(((e,i)=>s((async()=>{console.log("["+am+"] - Create Food Offer "+(i+1)+" / "+n),await this.createFoodOffer(e,t)}))));await Promise.all(i)}async updateMarkings(e){let t=await this.myDatabaseHelper.getMarkingsHelper(),n=(e=Jf.removeDuplicatesFromJsonList(e,"external_identifier")).length,s=0;for(let i of e){s++,console.log("["+am+"] - Update Marking "+s+" / "+n),console.log(i);let e=JSON.parse(JSON.stringify(i));delete e.translations;let a=await t.readByQuery({filter:{external_identifier:e.external_identifier},limit:1}),r=a.length>0?a[0]:null;if(!r){let n={...e,short_code:e.external_identifier},s=await t.createOne(n);r=await t.readOne(s)}r&&r.id&&await this.updateMarkingTranslations(r,i)}}async updateMarkingTranslations(e,t){await Wf.updateItemTranslations(e,t.translations,"markings_id",Xa.MARKINGS,this.apiContext)}};const om=class{static getListOfLineObjects(e,t,n,s=!0){let i=om.splitTextIntoLines(e,t);return om.parseFileLinesToJSONList(i,n,s)}static splitTextIntoLines(e,t=om.NEW_LINE_DELIMITER){return e?(e=e.toString()).split(t):[]}static splitLineByDelimiter(e,t=om.INLINE_DELIMITER_TAB,n){let s=e.split(t);if(n)for(let e=0;e<s.length;e++){let t=s[e];t&&(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),t.startsWith('"')&&(t=t.substring(1)),t.endsWith('"')&&(t=t.substring(0,t.length-1)),t.startsWith('\\"')&&(t=t.substring(2)),t.endsWith('\\"')&&(t=t.substring(0,t.length-2)),s[e]=t)}return s}static parseFileLinesToJSONList(e,t,n){let s=[],i=e[0];if(i){let a=i.trim(),r=om.splitLineByDelimiter(a,t,n);for(let i=1;i<e.length;i++){let a=e[i];if(a&&""!==a){let e=om.splitLineByDelimiter(a,t,n),i=om.parseLineToJSON(e,r);s.push(i)}}}return s}static parseLineToJSON(e,t){let n={};for(let s=0;s<t.length;s++){const i=t[s];if(i){const t=e[s];null!=t&&(n[i]=t)}}return n}};let cm=om;cm.NEW_LINE_DELIMITER="\n",cm.INLINE_DELIMITER_TAB="\t",cm.INLINE_DELIMITER_SEMICOLON=";";var lm=(e=>(e.PRICE_GROUP_STUDENT="student",e.PRICE_GROUP_EMPLOYEE="employee",e.PRICE_GROUP_GUEST="guest",e))(lm||{});const um=class{constructor(e){this.rawFoodoffersJSONList=[],this.rawFoodofferReader=e,this.resetData()}resetData(){this.rawFoodoffersJSONList=[]}async createNeededData(){this.resetData();let e=await this.rawFoodofferReader.getRawReport();this.rawFoodoffersJSONList=await um.getRawFoodofferJSONListFromRawReport(e)}async getFoodsListForParser(){let e=um.getFoodIdToRawFoodofferDict(this.rawFoodoffersJSONList),t=Object.keys(e),n=[];for(let s of t){let t=e[s];if(t){let e=um.getFoodInformationFromRawFoodoffer(t);e&&n.push(e)}}return n}async getCanteensList(){let e=this.rawFoodoffersJSONList,t={};for(let n of e){let e=um.getParsedReportItemFromrawFoodoffer(n),s=um.getCanteenLabelFunction(e);s&&(t[s]={external_identifier:s,alias:s})}return Pf.getValueListFromDict(t)}async getFoodoffersForParser(){const e=[];let t=this.rawFoodoffersJSONList;for(let n of t){let t=um.getParsedReportItemFromrawFoodoffer(n);const s=um.getFoodNutritionValuesFromRawTL1Foodoffer(t),i=um.getFoodEnvironmentImpactValuesFromRawTL1Foodoffer(t),a={price_employee:um.getPriceForGroup(t,lm.PRICE_GROUP_EMPLOYEE),price_guest:um.getPriceForGroup(t,lm.PRICE_GROUP_GUEST),price_student:um.getPriceForGroup(t,lm.PRICE_GROUP_STUDENT),...s,...i},r={date:n.date,basicFoodofferData:a,marking_external_identifiers:um.getMarkingsExternalIdentifiersFromRawFoodoffer(n),canteen_external_identifier:n.canteen_external_identifier,food_id:n.food_id};e.push(r)}return e}static async getRawFoodofferJSONListFromRawReport(e){let t=cm.getListOfLineObjects(e,cm.NEW_LINE_DELIMITER,cm.INLINE_DELIMITER_TAB,!0),n=um._groupParsedReportItemsToFoodofferListsItems(t);return um.getRawFoodofferJSONListFromGroupedList(n)}static _groupParsedReportItemsToFoodofferListsItems(e){let t={};for(let n of e){let e=um.getFoodofferIdentifier(n);if(e){let s=t[e]||[];s.push(n),t[e]=s}}return t}static getRawFoodofferJSONListFromGroupedList(e){let t=[],n=Object.keys(e);for(let s of n){let n=e[s],i=um.getRawFoodofferInformationFromGroupedItems(n);i&&t.push(i)}return t}static getRawFoodofferInformationFromGroupedItems(e){if(!e||0===e.length)return null;let t=e[0];if(!t)return null;let n=[];for(let t of e){let e=um.getRecipeIdFunction(t);e&&n.push(e)}let s=um.getSortedFoodId(n);if(!s)return null;let i=um.getDirectusDateFunction(t);if(!i)return null;let a=um.getCanteenLabelFunction(t);return a?{food_id:s,raw_tl1_foodoffer_json:t,date:i,canteen_external_identifier:a}:null}static getSortedFoodId(e){if(e.length<=0)return null;let t=e.map(Number);return[...new Set(t)].map(Number).sort((function(e,t){return e-t})).map(String).join("-")}static getFoodIdToRawFoodofferDict(e){let t={};if(e)for(let n of e){let e=um.getFoodIdFromRawFoodoffer(n);e&&(t[e]=n)}return t}static getFoodInformationFromRawFoodoffer(e){const t=um.getFoodIdFromRawFoodoffer(e);if(!t)return null;let n=um.getParsedReportItemFromrawFoodoffer(e);const s={[Yf.DE]:{name:um._getFoodNameDe(n)},[Yf.EN]:{name:um._getFoodNameEn(n)}},i=um.getFoodNutritionValuesFromRawTL1Foodoffer(n),a=um.getFoodEnvironmentImpactValuesFromRawTL1Foodoffer(n);return{basicFoodData:{id:t,alias:um._getFoodNameDe(n),category:null==n?void 0:n[um.DEFAULT_CATEGORY_FIELD],...i,...a},translations:s,marking_external_identifiers:um.getMarkingsExternalIdentifiersFromRawFoodoffer(e)}}static getParsedReportItemFromrawFoodoffer(e){return e.raw_tl1_foodoffer_json}static getFoodIdFromRawFoodoffer(e){return e.food_id}static _hasValidName(e){let t=um._getRawNamesList(e);if(t&&t.length>0){return t.join("").length>0}return!1}static getFoodofferIdentifier(e){if(um._hasValidName(e)){let t="";return t+=um._getCanteenName(e),t+=um._getRawDatum(e),t+=um._getFoodIdentifierByName(e),t}return null}static getRecipeIdFunction(e){return e[um.DEFAULT_RECIPE_ID_FIELD]}static getDirectusDateFunction(e){let t=um._getRawDatum(e);if(!t)return null;if(10!==t.length)return null;let n=t.split(".");if(3!==n.length)return null;const s=n[0],i=n[1],a=n[2];if(!s||!i||!a)return null;const r=parseInt(s),o=parseInt(i),c=parseInt(a);return isNaN(r)||isNaN(o)||isNaN(c)?null:{day:r,month:o,year:c}}static getCanteenLabelFunction(e){return e[um.DEFAULT_CANTEEN_FIELD]}static findFirstPriceValueForFields(e,t){for(let n of t){let t=e[n];if(t)return t}return null}static getPriceForGroup(e,t){let n=null;switch(t){case lm.PRICE_GROUP_STUDENT:n=um.findFirstPriceValueForFields(e,[um.FIELD_PRICE_STUDENT_OSNABRUECK,um.FIELD_PRICE_STUDENT_HANNOVER]);break;case lm.PRICE_GROUP_EMPLOYEE:n=um.findFirstPriceValueForFields(e,[um.FIELD_PRICE_EMPLOYEE_OSNABRUECK,um.FIELD_PRICE_EMPLOYEE_HANNOVER]);break;case lm.PRICE_GROUP_GUEST:n=um.findFirstPriceValueForFields(e,[um.FIELD_PRICE_GUEST_OSNABRUECK,um.FIELD_PRICE_GUEST_HANNOVER]);break;default:return null}return n?(n=n.replace(",","."),parseFloat(n)):null}static getFoodEnvironmentImpactValuesFromRawTL1Foodoffer(e){let t={},n=e[um.DEFAULT_CO2_GRAMM_FIELD];n&&(t.co2_g=parseFloat(n));let s=e[um.DEFAULT_CO2_SAVING_PERCENTAGE_FIELD];s&&(t.co2_saving_percentage=parseFloat(s));let i=e[um.DEFAULT_CO2_RATING_FIELD];return i&&(t.co2_rating=i),t}static getFoodNutritionValuesFromRawTL1Foodoffer(e){let t={},n=e[um.DEFAULT_NUTRITIONS_FIELD];if(n){let e=" kcal)",s=n.match(/\(.* kcal/gm);if(s){let n=s[0].slice(1,e.length);t.calories_kcal=parseInt(n)}t.fat_g=um.parseNutritionValue(n,"Fett"),t.saturated_fat_g=um.parseNutritionValue(n,"Fettsuren"),t.carbohydrate_g=um.parseNutritionValue(n,"Kohlenhydrate"),t.sugar_g=um.parseNutritionValue(n,"Zucker"),t.fiber_g=um.parseNutritionValue(n,"Ballaststoffe"),t.protein_g=um.parseNutritionValue(n,"Eiwei"),t.salt_g=um.parseNutritionValue(n,"Salz")}return t}static parseFloatWithOneDecimal(e){let t=parseFloat(e);return isNaN(t)?NaN:Math.round(10*t)/10}static parseNutritionValue(e,t){try{let n=t+"=",s=new RegExp(n+"\\d*,\\d*","gm"),i=e.match(s);if(i&&1===i.length){let e=i[0].slice(n.length);return e=e.replace(",","."),um.parseFloatWithOneDecimal(e)}}catch(e){return null}return null}static getMarkingsExternalIdentifiersFromRawFoodoffer(e){let t=um.getParsedReportItemFromrawFoodoffer(e),n=um._getRawNamesList(t).join(""),s=um.getMarkingLabelsDictFromFoodName(n),i=Object.keys(s),a=um.getMarkingExternalIdentifiersForMenuLinesFromParsedReportItem(t);return i.concat(a)}static getMarkingExternalIdentifiersForMenuLinesFromParsedReportItem(e){let t=e[um.DEFAULT_MENU_LINE_FIELD];return um.getMarkingExternalIdentifierForMenuLineText(t)}static getMarkingExternalIdentifierForMenuLineText(e){let t=[];if(e&&e.length>0){const n=e.split(",");for(let e of n){let n=e.trim();n&&n.length>0&&t.push(um.MARKING_EXTERNAL_IDENTIFIER_PREFIX_FOR_MENU_LINE+n)}}return t}static getMarkingLabelsDictFromFoodName(e){let t={},n=e.match(/\([^\)]+\)/gm);if(n)for(let e of n){let n=um.removeValuesAndWhitespacesAndSeperators(e,["(",")"],",");for(let e of n)t[e]=e}return t}static removeValuesAndWhitespacesAndSeperators(e,t,n){let s=[],i=new String(e);for(let e of t)i=i.replace(e,"");let a=i.split(n);for(let e of a)s.push(e.trim());return s}static _getCanteenName(e){return e[um.DEFAULT_CANTEEN_FIELD]}static _getRawDatum(e){return e[um.DEFAULT_DATE_FIELD]}static _getFoodIdentifierByName(e){return um._getRawNamesList(e).join("")}static _getRawNamesList(e,t=""){t||(t="");let n=[];for(let s=1;s<=6;s++){let i=e[um.DEFAULT_TEXT_FIELD+s+t];i&&i.length>0&&" "!==i&&n.push(i)}return n}static sanitizeFoodNameFromMarkingLabels(e){let t=e.replace(/\s?\([^\)]+\)/gm,"");return t=t.replace(/,\s*$/gm,""),t}static _getFoodNameDe(e){let t=um._getRawNamesList(e,"").join(", ");return um.sanitizeFoodNameFromMarkingLabels(t)}static _getFoodNameEn(e){let t=um._getRawNamesList(e,"_1").join(", ");return um.sanitizeFoodNameFromMarkingLabels(t)}};let pm=um;pm.DEFAULT_CANTEEN_FIELD="MENSA",pm.DEFAULT_DATE_FIELD="DATUM",pm.DEFAULT_TEXT_FIELD="TEXT",pm.DEFAULT_RECIPE_ID_FIELD="REZEPTUR_ID",pm.DEFAULT_NUTRITIONS_FIELD="NAEHRWERTEJEPORT",pm.DEFAULT_CATEGORY_FIELD="SPEISE",pm.FIELD_PRICE_STUDENT_OSNABRUECK="STD_PREIS",pm.FIELD_PRICE_STUDENT_HANNOVER="PREIS_STUDENT",pm.FIELD_PRICE_EMPLOYEE_OSNABRUECK="BED_PREIS",pm.FIELD_PRICE_EMPLOYEE_HANNOVER="PREIS_BEDIENSTETER",pm.FIELD_PRICE_GUEST_OSNABRUECK="GSTE_PREIS",pm.FIELD_PRICE_GUEST_HANNOVER="PREIS_GAST",pm.DEFAULT_MARKING_LABELS_FIELD="ZSNUMMERN",pm.DEFAULT_MARKING_NAMES_FIELD="ZSNAMEN",pm.DEFAULT_MENU_LINE_FIELD="FREI1",pm.DEFAULT_CO2_GRAMM_FIELD="EXTINFO_CO2_WERT",pm.DEFAULT_CO2_SAVING_PERCENTAGE_FIELD="EXTINFO_CO2_EINSPARUNG",pm.DEFAULT_CO2_RATING_FIELD="EXTINFO_CO2_BEWERTUNG",pm.MARKING_EXTERNAL_IDENTIFIER_PREFIX_FOR_MENU_LINE="menu_line_";class dm{static async readFileSync(e,t){if(e)try{const n={encoding:t};return E.readFileSync(g.resolve(e),n).toString()}catch(e){console.log("TL1 Report read error: "),console.log(e.toString())}}}class hm{constructor(e,t){this.path_to_tl1_export=e,this.encoding=t}async getRawReport(){return await dm.readFileSync(this.path_to_tl1_export,this.encoding)}}class fm{constructor(e){this.api_url=e}async getRawReport(){console.log("TL1Parser_Web: getRawReport"),console.log("TL1Parser_Web: api_url= "+this.api_url);try{const e=this.api_url;let t=(await Rs.request({method:"GET",url:e,responseType:"arraybuffer"})).data.toString("latin1"),n=Buffer.from(t,"utf-8").toString();return console.log("TL1 Report; length= "+n.length),n}catch(e){console.log("File not found yet")}}}const mm="name";class gm{constructor(e,t,n){this.apiContext=e,this.parsedReport=[],this.path_to_tl1_export=t,this.encoding=n}async createNeededData(){this.parsedReport=[];let e=await this.getRawReport();this.parsedReport=cm.getListOfLineObjects(e,cm.NEW_LINE_DELIMITER,cm.INLINE_DELIMITER_SEMICOLON,!0)}async getRawReport(){return dm.readFileSync(this.path_to_tl1_export,this.encoding)}async getMarkingsJSONList(){let e=[];for(let t=0;t<this.parsedReport.length;t++){let n=this.parsedReport[t];if(n){let t=gm.getMarkingJSONFromRawMarking(n);t&&e.push(t)}}return e}static getMarkingJSONFromRawMarking(e){let t=e.ID,n=e.BESCHREIBUNG;e.HINWEISE;let s=e.KUERZEL,i=gm.getMarkingExternalIdentifier(t,s);if(!i)return console.log("MarkingTL1Parser: getMarkingJSONFromRawMarking: externalIdentifier is null. Skip this marking."),console.log("MarkingTL1Parser: getMarkingJSONFromRawMarking: rawMarking: "+JSON.stringify(e,null,2)),null;let a={};if(n){let e=gm.getMarkingNameDe(n);e&&(a[Wf.LANGUAGE_CODE_DE]={[mm]:e});let t=gm.getMarkingNameEn(n);t&&(a[Wf.LANGUAGE_CODE_EN]={[mm]:t})}return{external_identifier:i,alias:n,translations:a}}static getMarkingNameDe(e){if(!e||""===e.trim())return;let t=e.indexOf("/");return t>-1?e.substring(0,t).trim():e.trim()}static getMarkingNameEn(e){if(!e||""===e.trim())return;let t=e.indexOf("/");return t>-1?e.substring(t+1).trim():void 0}static getMarkingExternalIdentifier(e,t){let n=null;return t?n=t:e&&(n=e.trim(),n=n.replace(/^0+/,"")),n}}class ym{constructor(e,t=8){this.foods={},this.canteens={},this.api_url="",this.foods={},this.canteens={},this.api_url=e,this.amountOfDaysToPull=t}async createNeededData(){this.foods={},this.canteens={},this.foods=await this.downloadDictFoodIdToFood(),this.canteens=await this.downloadCanteensDictIdToCanteen()}static getImageRemoteUrlForMealId(e,t){return e+"/meals/"+t+"/photos?resTag=high&webp=false"}async getMarkingsJSONList(){let e=(await Rs.get(this.api_url+"/markings")).data,t=[];for(let n of e)t.push({alias:n.label,external_identifier:n.label,translations:{[Wf.LANGUAGE_CODE_DE]:{name:n.description}}});return t}async getCanteensList(){let e=this.canteens,t=Object.keys(e),n=[];for(let s of t){let t=e[s];const i=null==t?void 0:t.name;i&&n.push({alias:i,external_identifier:i})}return n}async getFoodsListForParser(){let e=this.foods,t=Object.keys(e),n=[];for(let s of t){let t=e[s];const i=null==t?void 0:t.id,a=null==t?void 0:t.name;i&&a&&t&&n.push({basicFoodData:{id:i,alias:null==t?void 0:t.name,...this.getMealNutritionsFromFood(t),rating_amount_legacy:null==t?void 0:t.rating_amount,rating_average_legacy:null==t?void 0:t.rating_average},translations:{[Wf.LANGUAGE_CODE_DE]:{name:null==t?void 0:t.name},[Wf.LANGUAGE_CODE_EN]:{name:null==t?void 0:t.nameEng}},marking_external_identifiers:this.getMarkingExternalIdentifierListForFoodJSON(t)})}return n}getMarkingExternalIdentifierListForFoodJSON(e){let t="";t+=null==e?void 0:e.text1,t+=null==e?void 0:e.text2,t+=null==e?void 0:e.text3,t+=null==e?void 0:e.text4,t+=null==e?void 0:e.text5,t+=null==e?void 0:e.text6;let n=pm.getMarkingLabelsDictFromFoodName(t),s=Object.keys(n),i=[];i=i.concat(s);let a=e.foodtag,r=pm.getMarkingExternalIdentifierForMenuLineText(a);return i=i.concat(r),i}parseFloatWithOneDecimal(e){if(!e)return null;let t=parseFloat(e);return isNaN(t)?NaN:Math.round(10*t)/10}getMealNutritionsFromFood(e){var t,n,s,i;let a=this.parseFloatWithOneDecimal(null==e?void 0:e.fiberInGrams);a||(a=null);let r=this.parseFloatWithOneDecimal(null==e?void 0:e.proteinInGrams);return r||(r=null),{calories_kcal:this.parseFloatWithOneDecimal(null==e?void 0:e.kcal),fat_g:this.parseFloatWithOneDecimal(null==e?void 0:e.fatInGrams),saturated_fat_g:null==(t=this.parseFloatWithOneDecimal)?void 0:t.call(this,e.saturatedFatInGrams),carbohydrate_g:null==(n=this.parseFloatWithOneDecimal)?void 0:n.call(this,e.carbohydratesInGrams),sugar_g:null==(s=this.parseFloatWithOneDecimal)?void 0:s.call(this,e.sugarInGrams),fiber_g:a,protein_g:r,salt_g:null==(i=this.parseFloatWithOneDecimal)?void 0:i.call(this,e.saltInGrams)}}getDatesOfAmountNextDaysIncludingToday(e){let t=[],n=new Date;n.setMilliseconds(0),n.setSeconds(0),n.setMinutes(0),n.setHours(12);for(let s=0;s<e;s++)t.push(new Date(n.toISOString())),n.setDate(n.getDate()+1);return t}async getFoodoffersForParser(){let e=[],t=this.canteens,n=Object.keys(t),s=this.getDatesOfAmountNextDaysIncludingToday(this.amountOfDaysToPull);for(let t of n){let n=await this.getRawMealOffersJSONListForCanteenIdAndDates(t,s);e=e.concat(n)}return e}getCanteenExternalIdentifierFromRawMealOffer(e){let t=e.CanteenId,n=this.canteens[t];return null==n?void 0:n.name}getMarkingsExternalIdentifiersFromRawMealOffer(e){let t=e.totalMarkings.split(","),n=[];for(let e of t)n.push(e.trim());return n}async getRawMealOffersJSONListForCanteenIdAndDates(e,t){let n=[];for(let s of t){let t=await this.getRawMealOffersJSONListForCanteenId(e,s);n=n.concat(t)}return n}async getRawMealOffersJSONListForCanteenId(e,t){t=new Date(t);let n=this.padToTwoDigits(t.getDate()),s=this.padToTwoDigits(t.getMonth()+1),i=t.getFullYear(),a=(await Rs.get(this.api_url+"/canteens/"+e+"/days/"+n+"-"+s+"-"+i+"/meals")).data,r=[];for(let e of a){e.date=t.toISOString();const a=this.getCanteenExternalIdentifierFromRawMealOffer(e);if(a){const t={price_student:e.priceStudent,price_employee:e.priceEmployee,price_guest:e.priceGuest};r.push({food_id:e.MealId,date:{year:i,month:parseInt(s),day:parseInt(n)},basicFoodofferData:t,canteen_external_identifier:a,marking_external_identifiers:this.getMarkingsExternalIdentifiersFromRawMealOffer(e)})}}return r}padToTwoDigits(e){return(""+e).padStart(2,"0")}async downloadDictFoodIdToFood(){let e=(await Rs.get(this.api_url+"/meals")).data,t={};for(let n of e)n&&n.id&&(t[n.id]=n);return t}async downloadCanteensDictIdToCanteen(){let e=(await Rs.get(this.api_url+"/canteens")).data,t={};for(let n of e)t[n.id]=n;return t}}class _m{constructor(e){this.foodParserInterface=e}async createNeededData(){return await this.foodParserInterface.createNeededData()}async getCanteensList(){return await this.foodParserInterface.getCanteensList()}async getFoodoffersForParser(){let e=await this.foodParserInterface.getFoodoffersForParser();switch(Yl.getSyncForCustomer()){case ql.HANNOVER:case ql.OSNABRUECK:e=this.adaptFoodOffersRemoveFiber(e)}return e}adaptFoodOffersRemoveFiber(e){for(let t of e){let e=t.basicFoodofferData;e.fiber_g=null,t.basicFoodofferData=e}return e}async getFoodsListForParser(){let e=await this.foodParserInterface.getFoodsListForParser();switch(Yl.getSyncForCustomer()){case ql.HANNOVER:case ql.OSNABRUECK:e=this.adaptFoodsListRemoveFiber(e)}return e}adaptFoodsListRemoveFiber(e){for(let t of e){let e=t.basicFoodData;e.fiber_g=null,t.basicFoodData=e}return e}}const Em="food_parse";var bm=async({action:e,init:t,filter:n},s)=>{if(!await er.checkAllTablesExistWithApiContext(Em,s))return;let i=function(e){const t=e.env;switch(t.FOOD_SYNC_MODE){case"TL1CSV":const e=t.FOOD_SYNC_TL1FILE_EXPORT_CSV_FILE_PATH,n=t.FOOD_SYNC_TL1FILE_EXPORT_CSV_FILE_ENCODING||"latin1";console.log(Em+": Using TL1 CSV file from host file path: "+e);const s=new hm("/directus/tl1/foodPlan.csv",n);return new _m(new pm(s));case"TL1WEB":const i=t.FOOD_SYNC_TL1WEB_EXPORT_URL;if(!i)return console.log(Em+": no URL configured for TL1WEB"),null;console.log(Em+": Using TL1 CSV file from URL: "+i);const a=new fm(i);return new _m(new pm(a));case"SWOSY_API":const r=t.FOOD_IMAGE_SYNC_SWOSY_API_SERVER_URL;if(r&&r.length>0)return new _m(new ym(r,7));console.log(Em+": no URL configured for SWOSY_API, please set the environment variable FOOD_IMAGE_SYNC_SWOSY_API_SERVER_URL")}return null}(s);i||console.log(Em+": no food parser configured");let a=function(e){const t=e.env;switch(t.MARKING_SYNC_MODE){case"TL1CSV":const n=t.MARKING_SYNC_TL1FILE_EXPORT_CSV_FILE_PATH,s=t.MARKING_SYNC_TL1FILE_EXPORT_CSV_FILE_ENCODING||"utf8";return console.log(Em+": Using TL1 CSV file from host file path: "+n),new gm(e,"/directus/tl1/markings.csv",s);case"SWOSY_API":const i=t.FOOD_IMAGE_SYNC_SWOSY_API_SERVER_URL;if(i&&i.length>0)return new ym(i,7);console.log(Em+": no URL configured for SWOSY_API, please set the environment variable FOOD_IMAGE_SYNC_SWOSY_API_SERVER_URL")}return null}(s);a||console.log(Em+": no marking parser configured");const r=new rm(s,i,a),o=new Gl(s);let c=Xa.APP_SETTINGS;t(cr.INIT_APP_STARTED,(async()=>{console.log(Em+": App started, resetting food parsing status and parsing hash"),await o.getAppSettingsHelper().setFoodParsingStatus(Fl.FINISHED,null)})),n(c+".items.update",(async(e,{keys:t,collection:n})=>{if(!t||0===t.length)throw new Error("No keys provided for update");if(e[Ul.FIELD_APP_SETTINGS_FOODS_PARSING_STATUS]===Fl.START){if(await o.getAppSettingsHelper().getFoodParsingStatus()===Fl.RUNNING)throw new Error("Parsing is already running. Please wait until it is finished or set to "+Fl.FINISHED+" manually.")}return e})),e(c+".items.update",(async()=>{try{await r.parse(!1)}catch(e){console.log(e)}}))};class Tm{constructor(e,t){this.apiContext=e,this.parser=t,this.myDatabaseHelper=new Gl(e)}async setStatus(e){await this.myDatabaseHelper.getAppSettingsHelper().setApartmentParsingStatus(e,new Date)}async isEnabled(){return await this.myDatabaseHelper.getAppSettingsHelper().isApartmentParsingEnabled()}async getStatus(){return await this.myDatabaseHelper.getAppSettingsHelper().getApartmentParsingStatus()}async parse(){let e=await this.isEnabled(),t=await this.getStatus();if(console.log("housing-sync-hook: parse: enabled: "+e+" status: "+t),e&&t===Fl.START){console.log("[Start] ApartmentsParseSchedule Parse Schedule"),await this.setStatus(Fl.RUNNING);try{let e=await this.parser.getApartmentList();await this.updateApartments(e),console.log("Finished"),await this.setStatus(Fl.FINISHED)}catch(e){console.log("[MealParseSchedule] Failed"),console.log(e),await this.setStatus(Fl.FAILED)}}}async findOrCreateApartment(e){const t=this.myDatabaseHelper.getApartmentsHelper(),n={external_identifier:e.basicData.external_identifier},s=n;return await t.findOrCreateItem(n,s)}async updateApartments(e){for(let t of e){let e=await this.findOrCreateApartment(t);e&&(null==e?void 0:e.id)&&await this.updateApartment(e.id,t)}}async updateApartment(e,t){const n=this.myDatabaseHelper.getApartmentsHelper();await n.updateOne(e,t.basicData);const s=t.buildingData,i={external_identifier:s.external_identifier},a=this.myDatabaseHelper.getBuildingsHelper(),r=await a.findOrCreateItem(i,s);if(r){const t=r.id;t&&await n.updateOne(e,{building:t})}}}const vm={xml:!1,decodeEntities:!0},xm={_useHtmlParser2:!0,xmlMode:!0};function Sm(e){return(null==e?void 0:e.xml)?"boolean"==typeof e.xml?xm:{...xm,...e.xml}:null!=e?e:void 0}var Am;function wm(e){return e.type===Am.Tag||e.type===Am.Script||e.type===Am.Style}!function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(Am||(Am={}));const Cm=Am.Root,Nm=Am.Text,Im=Am.Directive,km=Am.Comment,Om=Am.Script,Dm=Am.Style,Rm=Am.Tag,Lm=Am.CDATA,Pm=Am.Doctype;let Mm=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return $m(this,e)}},Fm=class extends Mm{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}},Bm=class extends Fm{constructor(){super(...arguments),this.type=Am.Text}get nodeType(){return 3}},Um=class extends Fm{constructor(){super(...arguments),this.type=Am.Comment}get nodeType(){return 8}},Hm=class extends Fm{constructor(e,t){super(t),this.name=e,this.type=Am.Directive}get nodeType(){return 1}},jm=class extends Mm{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}},Gm=class extends jm{constructor(){super(...arguments),this.type=Am.CDATA}get nodeType(){return 4}},qm=class extends jm{constructor(){super(...arguments),this.type=Am.Root}get nodeType(){return 9}},Ym=class extends jm{constructor(e,t,n=[],s=("script"===e?Am.Script:"style"===e?Am.Style:Am.Tag)){super(n),this.name=e,this.attribs=t,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}};function zm(e){return wm(e)}function Vm(e){return e.type===Am.CDATA}function Wm(e){return e.type===Am.Text}function Qm(e){return e.type===Am.Comment}function Km(e){return e.type===Am.Root}function Zm(e){return Object.prototype.hasOwnProperty.call(e,"children")}function $m(e,t=!1){let n;if(Wm(e))n=new Bm(e.data);else if(Qm(e))n=new Um(e.data);else if(zm(e)){const s=t?Xm(e.children):[],i=new Ym(e.name,{...e.attribs},s);s.forEach((e=>e.parent=i)),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=i}else if(Vm(e)){const s=t?Xm(e.children):[],i=new Gm(s);s.forEach((e=>e.parent=i)),n=i}else if(Km(e)){const s=t?Xm(e.children):[],i=new qm(s);s.forEach((e=>e.parent=i)),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else{if(!function(e){return e.type===Am.Directive}(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new Hm(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function Xm(e){const t=e.map((e=>$m(e,!0)));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}const Jm=/["&'<>$\x80-\uFFFF]/g,eg=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),tg=null!=String.prototype.codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function ng(e){let t,n="",s=0;for(;null!==(t=Jm.exec(e));){const i=t.index,a=e.charCodeAt(i),r=eg.get(a);void 0!==r?(n+=e.substring(s,i)+r,s=i+1):(n+=`${e.substring(s,i)}&#x${tg(e,i).toString(16)};`,s=Jm.lastIndex+=Number(55296==(64512&a)))}return n+e.substr(s)}function sg(e,t){return function(n){let s,i=0,a="";for(;s=e.exec(n);)i!==s.index&&(a+=n.substring(i,s.index)),a+=t.get(s[0].charCodeAt(0)),i=s.index+1;return a+n.substring(i)}}const ig=sg(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),ag=sg(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),rg=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),og=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),cg=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function lg(e){return e.replace(/"/g,"&quot;")}const ug=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function pg(e,t={}){const n="length"in e?e:[e];let s="";for(let e=0;e<n.length;e++)s+=dg(n[e],t);return s}function dg(e,t){switch(e.type){case Cm:return pg(e.children,t);case Pm:case Im:return`<${e.data}>`;case km:return function(e){return`\x3c!--${e.data}--\x3e`}(e);case Lm:return function(e){return`<![CDATA[${e.children[0].data}]]>`}(e);case Om:case Dm:case Rm:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=rg.get(e.name))&&void 0!==n?n:e.name,e.parent&&hg.has(e.parent.name)&&(t={...t,xmlMode:!1}));!t.xmlMode&&fg.has(e.name)&&(t={...t,xmlMode:"foreign"});let s=`<${e.name}`;const i=function(e,t){var n;if(!e)return;const s=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?lg:t.xmlMode||"utf8"!==t.encodeEntities?ng:ig;return Object.keys(e).map((n=>{var i,a;const r=null!==(i=e[n])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(n=null!==(a=og.get(n))&&void 0!==a?a:n),t.emptyAttrs||t.xmlMode||""!==r?`${n}="${s(r)}"`:n})).join(" ")}(e.attribs,t);i&&(s+=` ${i}`);0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&ug.has(e.name))?(t.xmlMode||(s+=" "),s+="/>"):(s+=">",e.children.length>0&&(s+=pg(e.children,t)),!t.xmlMode&&ug.has(e.name)||(s+=`</${e.name}>`));return s}(e,t);case Nm:return function(e,t){var n;let s=e.data||"";!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)||!t.xmlMode&&e.parent&&cg.has(e.parent.name)||(s=t.xmlMode||"utf8"!==t.encodeEntities?ng(s):ag(s));return s}(e,t)}}const hg=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),fg=new Set(["svg","math"]);function mg(e){return Array.isArray(e)?e.map(mg).join(""):Zm(e)&&!Qm(e)?mg(e.children):Wm(e)?e.data:""}function gg(e){return Array.isArray(e)?e.map(gg).join(""):Zm(e)&&(e.type===Am.Tag||Vm(e))?gg(e.children):Wm(e)?e.data:""}function yg(e){return Zm(e)?e.children:[]}function _g(e){let{next:t}=e;for(;null!==t&&!zm(t);)({next:t}=t);return t}function Eg(e){let{prev:t}=e;for(;null!==t&&!zm(t);)({prev:t}=t);return t}function bg(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}var Tg;function vg(e){return e=e.filter(((e,t,n)=>!n.includes(e,t+1))),e.sort(((e,t)=>{const n=function(e,t){const n=[],s=[];if(e===t)return 0;let i=Zm(e)?e:e.parent;for(;i;)n.unshift(i),i=i.parent;for(i=Zm(t)?t:t.parent;i;)s.unshift(i),i=i.parent;const a=Math.min(n.length,s.length);let r=0;for(;r<a&&n[r]===s[r];)r++;if(0===r)return Tg.DISCONNECTED;const o=n[r-1],c=o.children,l=n[r],u=s[r];return c.indexOf(l)>c.indexOf(u)?o===t?Tg.FOLLOWING|Tg.CONTAINED_BY:Tg.FOLLOWING:o===e?Tg.PRECEDING|Tg.CONTAINS:Tg.PRECEDING}(e,t);return n&Tg.PRECEDING?-1:n&Tg.FOLLOWING?1:0})),e}function xg(e,t,n){return e?e(null!=t?t:e._root.children,null,void 0,n).toString():""}function Sg(e){const t=e||(this?this.root():[]);let n="";for(let e=0;e<t.length;e++)n+=mg(t[e]);return n}function Ag(e,t){if(t===e)return!1;let n=t;for(;n&&n!==n.parent;)if(n=n.parent,n===e)return!0;return!1}function wg(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!Object.prototype.hasOwnProperty.call(e,"length")||"number"!=typeof e.length||e.length<0)return!1;for(let t=0;t<e.length;t++)if(!(t in e))return!1;return!0}!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(Tg||(Tg={}));var Cg,Ng=Object.freeze({__proto__:null,contains:Ag,html:function(e,t){return xg(this,function(e,t){return!t&&"object"==typeof e&&null!=e&&!("length"in e)&&!("type"in e)}(e)?void(t=e):e,{...vm,...null==this?void 0:this._options,...Sm(null!=t?t:{})})},merge:function(e,t){if(!wg(e)||!wg(t))return;let n=e.length;const s=+t.length;for(let i=0;i<s;i++)e[n++]=t[i];return e.length=n,e},parseHTML:function(e,t,n="boolean"==typeof t&&t){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t);const s=this.load(e,vm,!1);return n||s("script").remove(),s.root()[0].children.slice()},root:function(){return this(this._root)},text:Sg,xml:function(e){return xg(this,e,{...this._options,xmlMode:!0})}});function Ig(e){return null!=e.cheerio}function kg(e,t){const n=e.length;for(let s=0;s<n;s++)t(e[s],s);return e}function Og(e){const t="length"in e?Array.prototype.map.call(e,(e=>$m(e,!0))):[$m(e,!0)],n=new qm(t);return t.forEach((e=>{e.parent=n})),t}function Dg(e){const t=e.indexOf("<");if(t<0||t>e.length-3)return!1;const n=e.charCodeAt(t+1);return(n>=Cg.LowerA&&n<=Cg.LowerZ||n>=Cg.UpperA&&n<=Cg.UpperZ||n===Cg.Exclamation)&&e.includes(">",t+2)}!function(e){e[e.LowerA=97]="LowerA",e[e.LowerZ=122]="LowerZ",e[e.UpperA=65]="UpperA",e[e.UpperZ=90]="UpperZ",e[e.Exclamation=33]="Exclamation"}(Cg||(Cg={}));const Rg=Object.prototype.hasOwnProperty,Lg=/\s+/,Pg="data-",Mg={null:null,true:!0,false:!1},Fg=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Bg=/^{[^]*}$|^\[[^]*]$/;function Ug(e,t,n){var s;if(e&&zm(e))return null!==(s=e.attribs)&&void 0!==s||(e.attribs={}),t?Rg.call(e.attribs,t)?!n&&Fg.test(t)?t:e.attribs[t]:"option"===e.name&&"value"===t?Sg(e.children):"input"!==e.name||"radio"!==e.attribs.type&&"checkbox"!==e.attribs.type||"value"!==t?void 0:"on":e.attribs}function Hg(e,t,n){null===n?zg(e,t):e.attribs[t]=`${n}`}function jg(e,t,n){return t in e?e[t]:!n&&Fg.test(t)?void 0!==Ug(e,t,!1):Ug(e,t,n)}function Gg(e,t,n,s){t in e?e[t]=n:Hg(e,t,!s&&Fg.test(t)?n?"":null:`${n}`)}function qg(e,t,n){var s;const i=e;null!==(s=i.data)&&void 0!==s||(i.data={}),"object"==typeof t?Object.assign(i.data,t):"string"==typeof t&&void 0!==n&&(i.data[t]=n)}function Yg(e,t){let n,s,i;var a;null==t?(n=Object.keys(e.attribs).filter((e=>e.startsWith(Pg))),s=n.map((e=>e.slice(Pg.length).replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))))):(n=[Pg+(a=t,a.replace(/[A-Z]/g,"-$&").toLowerCase())],s=[t]);for(let t=0;t<n.length;++t){const a=n[t],r=s[t];if(Rg.call(e.attribs,a)&&!Rg.call(e.data,r)){if(i=e.attribs[a],Rg.call(Mg,i))i=Mg[i];else if(i===String(Number(i)))i=Number(i);else if(Bg.test(i))try{i=JSON.parse(i)}catch(e){}e.data[r]=i}}return null==t?e.data:i}function zg(e,t){e.attribs&&Rg.call(e.attribs,t)&&delete e.attribs[t]}function Vg(e){return e?e.trim().split(Lg):[]}var Wg,Qg,Kg=Object.freeze({__proto__:null,addClass:function e(t){if("function"==typeof t)return kg(this,((n,s)=>{if(zm(n)){const i=n.attribs.class||"";e.call([n],t.call(n,s,i))}}));if(!t||"string"!=typeof t)return this;const n=t.split(Lg),s=this.length;for(let e=0;e<s;e++){const t=this[e];if(!zm(t))continue;const s=Ug(t,"class",!1);if(s){let e=` ${s} `;for(let t=0;t<n.length;t++){const s=`${n[t]} `;e.includes(` ${s}`)||(e+=s)}Hg(t,"class",e.trim())}else Hg(t,"class",n.join(" ").trim())}return this},attr:function(e,t){if("object"==typeof e||void 0!==t){if("function"==typeof t){if("string"!=typeof e)throw new Error("Bad combination of arguments.");return kg(this,((n,s)=>{zm(n)&&Hg(n,e,t.call(n,s,n.attribs[e]))}))}return kg(this,(n=>{zm(n)&&("object"==typeof e?Object.keys(e).forEach((t=>{const s=e[t];Hg(n,t,s)})):Hg(n,e,t))}))}return arguments.length>1?this:Ug(this[0],e,this.options.xmlMode)},data:function(e,t){var n;const s=this[0];if(!s||!zm(s))return;const i=s;return null!==(n=i.data)&&void 0!==n||(i.data={}),e?"object"==typeof e||void 0!==t?(kg(this,(n=>{zm(n)&&("object"==typeof e?qg(n,e):qg(n,e,t))})),this):Rg.call(i.data,e)?i.data[e]:Yg(i,e):Yg(i)},hasClass:function(e){return this.toArray().some((t=>{const n=zm(t)&&t.attribs.class;let s=-1;if(n&&e.length)for(;(s=n.indexOf(e,s+1))>-1;){const t=s+e.length;if((0===s||Lg.test(n[s-1]))&&(t===n.length||Lg.test(n[t])))return!0}return!1}))},prop:function(e,t){var n;if("string"==typeof e&&void 0===t){const t=this[0];if(!t||!zm(t))return;switch(e){case"style":{const e=this.css(),t=Object.keys(e);return t.forEach(((t,n)=>{e[n]=t})),e.length=t.length,e}case"tagName":case"nodeName":return t.name.toUpperCase();case"href":case"src":{const s=null===(n=t.attribs)||void 0===n?void 0:n[e];return"undefined"==typeof URL||("href"!==e||"a"!==t.tagName&&"link"!==t.name)&&("src"!==e||"img"!==t.tagName&&"iframe"!==t.tagName&&"audio"!==t.tagName&&"video"!==t.tagName&&"source"!==t.tagName)||void 0===s||!this.options.baseURI?s:new URL(s,this.options.baseURI).href}case"innerText":return gg(t);case"textContent":return mg(t);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return jg(t,e,this.options.xmlMode)}}if("object"==typeof e||void 0!==t){if("function"==typeof t){if("object"==typeof e)throw new Error("Bad combination of arguments.");return kg(this,((n,s)=>{zm(n)&&Gg(n,e,t.call(n,s,jg(n,e,this.options.xmlMode)),this.options.xmlMode)}))}return kg(this,(n=>{zm(n)&&("object"==typeof e?Object.keys(e).forEach((t=>{const s=e[t];Gg(n,t,s,this.options.xmlMode)})):Gg(n,e,t,this.options.xmlMode))}))}},removeAttr:function(e){const t=Vg(e);for(let e=0;e<t.length;e++)kg(this,(n=>{zm(n)&&zg(n,t[e])}));return this},removeClass:function e(t){if("function"==typeof t)return kg(this,((n,s)=>{zm(n)&&e.call([n],t.call(n,s,n.attribs.class||""))}));const n=Vg(t),s=n.length,i=0===arguments.length;return kg(this,(e=>{if(zm(e))if(i)e.attribs.class="";else{const t=Vg(e.attribs.class);let i=!1;for(let e=0;e<s;e++){const s=t.indexOf(n[e]);s>=0&&(t.splice(s,1),i=!0,e--)}i&&(e.attribs.class=t.join(" "))}}))},toggleClass:function e(t,n){if("function"==typeof t)return kg(this,((s,i)=>{zm(s)&&e.call([s],t.call(s,i,s.attribs.class||"",n),n)}));if(!t||"string"!=typeof t)return this;const s=t.split(Lg),i=s.length,a="boolean"==typeof n?n?1:-1:0,r=this.length;for(let e=0;e<r;e++){const t=this[e];if(!zm(t))continue;const n=Vg(t.attribs.class);for(let e=0;e<i;e++){const t=n.indexOf(s[e]);a>=0&&t<0?n.push(s[e]):a<=0&&t>=0&&n.splice(t,1)}t.attribs.class=n.join(" ")}return this},val:function(e){const t=0===arguments.length,n=this[0];if(!n||!zm(n))return t?void 0:this;switch(n.name){case"textarea":return this.text(e);case"select":{const n=this.find("option:selected");if(!t){if(null==this.attr("multiple")&&"object"==typeof e)return this;this.find("option").removeAttr("selected");const t="object"!=typeof e?[e]:e;for(let e=0;e<t.length;e++)this.find(`option[value="${t[e]}"]`).attr("selected","");return this}return this.attr("multiple")?n.toArray().map((e=>Sg(e.children))):n.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}});!function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"}(Wg||(Wg={})),function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"}(Qg||(Qg={}));const Zg=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,$g=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,Xg=new Map([[126,Qg.Element],[94,Qg.Start],[36,Qg.End],[42,Qg.Any],[33,Qg.Not],[124,Qg.Hyphen]]),Jg=new Set(["has","not","matches","is","where","host","host-context"]);function ey(e){switch(e.type){case Wg.Adjacent:case Wg.Child:case Wg.Descendant:case Wg.Parent:case Wg.Sibling:case Wg.ColumnCombinator:return!0;default:return!1}}const ty=new Set(["contains","icontains"]);function ny(e,t,n){const s=parseInt(t,16)-65536;return s!=s||n?t:s<0?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,1023&s|56320)}function sy(e){return e.replace($g,ny)}function iy(e){return 39===e||34===e}function ay(e){return 32===e||9===e||10===e||12===e||13===e}function ry(e){const t=[],n=oy(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function oy(e,t,n){let s=[];function i(e){const s=t.slice(n+e).match(Zg);if(!s)throw new Error(`Expected name, found ${t.slice(n)}`);const[i]=s;return n+=e+i.length,sy(i)}function a(e){for(n+=e;n<t.length&&ay(t.charCodeAt(n));)n++}function r(){const e=n+=1;let s=1;for(;s>0&&n<t.length;n++)40!==t.charCodeAt(n)||o(n)?41!==t.charCodeAt(n)||o(n)||s--:s++;if(s)throw new Error("Parenthesis not matched");return sy(t.slice(e,n-1))}function o(e){let n=0;for(;92===t.charCodeAt(--e);)n++;return!(1&~n)}function c(){if(s.length>0&&ey(s[s.length-1]))throw new Error("Did not expect successive traversals.")}function l(e){s.length>0&&s[s.length-1].type===Wg.Descendant?s[s.length-1].type=e:(c(),s.push({type:e}))}function u(e,t){s.push({type:Wg.Attribute,name:e,action:t,value:i(1),namespace:null,ignoreCase:"quirks"})}function p(){if(s.length&&s[s.length-1].type===Wg.Descendant&&s.pop(),0===s.length)throw new Error("Empty sub-selector");e.push(s)}if(a(0),t.length===n)return n;e:for(;n<t.length;){const e=t.charCodeAt(n);switch(e){case 32:case 9:case 10:case 12:case 13:0!==s.length&&s[0].type===Wg.Descendant||(c(),s.push({type:Wg.Descendant})),a(1);break;case 62:l(Wg.Child),a(1);break;case 60:l(Wg.Parent),a(1);break;case 126:l(Wg.Sibling),a(1);break;case 43:l(Wg.Adjacent),a(1);break;case 46:u("class",Qg.Element);break;case 35:u("id",Qg.Equals);break;case 91:{let e;a(1);let r=null;124===t.charCodeAt(n)?e=i(1):t.startsWith("*|",n)?(r="*",e=i(2)):(e=i(0),124===t.charCodeAt(n)&&61!==t.charCodeAt(n+1)&&(r=e,e=i(1))),a(0);let c=Qg.Exists;const l=Xg.get(t.charCodeAt(n));if(l){if(c=l,61!==t.charCodeAt(n+1))throw new Error("Expected `=`");a(2)}else 61===t.charCodeAt(n)&&(c=Qg.Equals,a(1));let u="",p=null;if("exists"!==c){if(iy(t.charCodeAt(n))){const e=t.charCodeAt(n);let s=n+1;for(;s<t.length&&(t.charCodeAt(s)!==e||o(s));)s+=1;if(t.charCodeAt(s)!==e)throw new Error("Attribute value didn't end");u=sy(t.slice(n+1,s)),n=s+1}else{const e=n;for(;n<t.length&&(!ay(t.charCodeAt(n))&&93!==t.charCodeAt(n)||o(n));)n+=1;u=sy(t.slice(e,n))}a(0);const e=32|t.charCodeAt(n);115===e?(p=!1,a(1)):105===e&&(p=!0,a(1))}if(93!==t.charCodeAt(n))throw new Error("Attribute selector didn't terminate");n+=1;const d={type:Wg.Attribute,name:e,action:c,value:u,namespace:r,ignoreCase:p};s.push(d);break}case 58:{if(58===t.charCodeAt(n+1)){s.push({type:Wg.PseudoElement,name:i(2).toLowerCase(),data:40===t.charCodeAt(n)?r():null});continue}const e=i(1).toLowerCase();let a=null;if(40===t.charCodeAt(n))if(Jg.has(e)){if(iy(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${e} cannot be quoted`);if(a=[],n=oy(a,t,n+1),41!==t.charCodeAt(n))throw new Error(`Missing closing parenthesis in :${e} (${t})`);n+=1}else{if(a=r(),ty.has(e)){const e=a.charCodeAt(0);e===a.charCodeAt(a.length-1)&&iy(e)&&(a=a.slice(1,-1))}a=sy(a)}s.push({type:Wg.Pseudo,name:e,data:a});break}case 44:p(),s=[],a(1);break;default:{if(t.startsWith("/*",n)){const e=t.indexOf("*/",n+2);if(e<0)throw new Error("Comment was not terminated");n=e+2,0===s.length&&a(0);break}let r,o=null;if(42===e)n+=1,r="*";else if(124===e){if(r="",124===t.charCodeAt(n+1)){l(Wg.ColumnCombinator),a(2);break}}else{if(!Zg.test(t.slice(n)))break e;r=i(0)}124===t.charCodeAt(n)&&124!==t.charCodeAt(n+1)&&(o=r,42===t.charCodeAt(n+1)?(r="*",n+=2):r=i(1)),s.push("*"===r?{type:Wg.Universal,namespace:o}:{type:Wg.Tag,name:r,namespace:o})}}}return p(),n}function cy(e){return wm(e)}function ly(e){return e.type===Am.CDATA}function uy(e){return e.type===Am.Text}function py(e){return e.type===Am.Comment}function dy(e){return Object.prototype.hasOwnProperty.call(e,"children")}const hy=/["&'<>$\x80-\uFFFF]/g,fy=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),my=null!=String.prototype.codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function gy(e){let t,n="",s=0;for(;null!==(t=hy.exec(e));){const i=t.index,a=e.charCodeAt(i),r=fy.get(a);void 0!==r?(n+=e.substring(s,i)+r,s=i+1):(n+=`${e.substring(s,i)}&#x${my(e,i).toString(16)};`,s=hy.lastIndex+=Number(55296==(64512&a)))}return n+e.substr(s)}function yy(e,t){return function(n){let s,i=0,a="";for(;s=e.exec(n);)i!==s.index&&(a+=n.substring(i,s.index)),a+=t.get(s[0].charCodeAt(0)),i=s.index+1;return a+n.substring(i)}}const _y=yy(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Ey=yy(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),by=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),Ty=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),vy=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function xy(e){return e.replace(/"/g,"&quot;")}const Sy=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Ay(e,t={}){const n="length"in e?e:[e];let s="";for(let e=0;e<n.length;e++)s+=wy(n[e],t);return s}function wy(e,t){switch(e.type){case Cm:return Ay(e.children,t);case Pm:case Im:return`<${e.data}>`;case km:return function(e){return`\x3c!--${e.data}--\x3e`}(e);case Lm:return function(e){return`<![CDATA[${e.children[0].data}]]>`}(e);case Om:case Dm:case Rm:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=by.get(e.name))&&void 0!==n?n:e.name,e.parent&&Cy.has(e.parent.name)&&(t={...t,xmlMode:!1}));!t.xmlMode&&Ny.has(e.name)&&(t={...t,xmlMode:"foreign"});let s=`<${e.name}`;const i=function(e,t){var n;if(!e)return;const s=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?xy:t.xmlMode||"utf8"!==t.encodeEntities?gy:_y;return Object.keys(e).map((n=>{var i,a;const r=null!==(i=e[n])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(n=null!==(a=Ty.get(n))&&void 0!==a?a:n),t.emptyAttrs||t.xmlMode||""!==r?`${n}="${s(r)}"`:n})).join(" ")}(e.attribs,t);i&&(s+=` ${i}`);0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&Sy.has(e.name))?(t.xmlMode||(s+=" "),s+="/>"):(s+=">",e.children.length>0&&(s+=Ay(e.children,t)),!t.xmlMode&&Sy.has(e.name)||(s+=`</${e.name}>`));return s}(e,t);case Nm:return function(e,t){var n;let s=e.data||"";!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)||!t.xmlMode&&e.parent&&vy.has(e.parent.name)||(s=t.xmlMode||"utf8"!==t.encodeEntities?gy(s):Ey(s));return s}(e,t)}}const Cy=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Ny=new Set(["svg","math"]);function Iy(e,t){return Ay(e,t)}function ky(e){return Array.isArray(e)?e.map(ky).join(""):dy(e)&&!py(e)?ky(e.children):uy(e)?e.data:""}function Oy(e){return dy(e)?e.children:[]}function Dy(e){return e.parent||null}function Ry(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}function Ly(e,t,n=!0,s=1/0){return Py(e,Array.isArray(t)?t:[t],n,s)}function Py(e,t,n,s){const i=[],a=[t],r=[0];for(;;){if(r[0]>=a[0].length){if(1===r.length)return i;a.shift(),r.shift();continue}const t=a[0][r[0]++];if(e(t)&&(i.push(t),--s<=0))return i;n&&dy(t)&&t.children.length>0&&(r.unshift(0),a.unshift(t.children))}}function My(e,t,n=!0){let s=null;for(let i=0;i<t.length&&!s;i++){const a=t[i];cy(a)&&(e(a)?s=a:n&&a.children.length>0&&(s=My(e,a.children,!0)))}return s}const Fy={tag_name:e=>"function"==typeof e?t=>cy(t)&&e(t.name):"*"===e?cy:t=>cy(t)&&t.name===e,tag_type:e=>"function"==typeof e?t=>e(t.type):t=>t.type===e,tag_contains:e=>"function"==typeof e?t=>uy(t)&&e(t.data):t=>uy(t)&&t.data===e};function By(e,t){return"function"==typeof t?n=>cy(n)&&t(n.attribs[e]):n=>cy(n)&&n.attribs[e]===t}function Uy(e,t){return n=>e(n)||t(n)}function Hy(e){const t=Object.keys(e).map((t=>{const n=e[t];return Object.prototype.hasOwnProperty.call(Fy,t)?Fy[t](n):By(t,n)}));return 0===t.length?null:t.reduce(Uy)}function jy(e,t,n=!0,s=1/0){return Ly(Fy.tag_name(e),t,n,s)}var Gy;function qy(e,t){const n=[],s=[];if(e===t)return 0;let i=dy(e)?e:e.parent;for(;i;)n.unshift(i),i=i.parent;for(i=dy(t)?t:t.parent;i;)s.unshift(i),i=i.parent;const a=Math.min(n.length,s.length);let r=0;for(;r<a&&n[r]===s[r];)r++;if(0===r)return Gy.DISCONNECTED;const o=n[r-1],c=o.children,l=n[r],u=s[r];return c.indexOf(l)>c.indexOf(u)?o===t?Gy.FOLLOWING|Gy.CONTAINED_BY:Gy.FOLLOWING:o===e?Gy.PRECEDING|Gy.CONTAINS:Gy.PRECEDING}function Yy(e){return e=e.filter(((e,t,n)=>!n.includes(e,t+1))),e.sort(((e,t)=>{const n=qy(e,t);return n&Gy.PRECEDING?-1:n&Gy.FOLLOWING?1:0})),e}!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(Gy||(Gy={}));const zy=["url","type","lang"],Vy=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function Wy(e){return jy("media:content",e).map((e=>{const{attribs:t}=e,n={medium:t.medium,isDefault:!!t.isDefault};for(const e of zy)t[e]&&(n[e]=t[e]);for(const e of Vy)t[e]&&(n[e]=parseInt(t[e],10));return t.expression&&(n.expression=t.expression),n}))}function Qy(e,t){return jy(e,t,!0,1)[0]}function Ky(e,t,n=!1){return ky(jy(e,t,n,1)).trim()}function Zy(e,t,n,s,i=!1){const a=Ky(n,s,i);a&&(e[t]=a)}function $y(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}var Xy=Object.freeze({__proto__:null,get DocumentPosition(){return Gy},append:function(e,t){Ry(t);const{parent:n}=e,s=e.next;if(t.next=s,t.prev=e,e.next=t,t.parent=n,s){if(s.prev=t,n){const e=n.children;e.splice(e.lastIndexOf(s),0,t)}}else n&&n.children.push(t)},appendChild:function(e,t){if(Ry(t),t.next=null,t.parent=e,e.children.push(t)>1){const n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},compareDocumentPosition:qy,existsOne:function e(t,n){return n.some((n=>cy(n)&&(t(n)||e(t,n.children))))},filter:Ly,find:Py,findAll:function(e,t){const n=[],s=[t],i=[0];for(;;){if(i[0]>=s[0].length){if(1===s.length)return n;s.shift(),i.shift();continue}const t=s[0][i[0]++];cy(t)&&(e(t)&&n.push(t),t.children.length>0&&(i.unshift(0),s.unshift(t.children)))}},findOne:My,findOneChild:function(e,t){return t.find(e)},getAttributeValue:function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},getChildren:Oy,getElementById:function(e,t,n=!0){return Array.isArray(t)||(t=[t]),My(By("id",e),t,n)},getElements:function(e,t,n,s=1/0){const i=Hy(e);return i?Ly(i,t,n,s):[]},getElementsByTagName:jy,getElementsByTagType:function(e,t,n=!0,s=1/0){return Ly(Fy.tag_type(e),t,n,s)},getFeed:function(e){const t=Qy($y,e);return t?"feed"===t.name?function(e){var t;const n=e.children,s={type:"atom",items:jy("entry",n).map((e=>{var t;const{children:n}=e,s={media:Wy(n)};Zy(s,"id","id",n),Zy(s,"title","title",n);const i=null===(t=Qy("link",n))||void 0===t?void 0:t.attribs.href;i&&(s.link=i);const a=Ky("summary",n)||Ky("content",n);a&&(s.description=a);const r=Ky("updated",n);return r&&(s.pubDate=new Date(r)),s}))};Zy(s,"id","id",n),Zy(s,"title","title",n);const i=null===(t=Qy("link",n))||void 0===t?void 0:t.attribs.href;i&&(s.link=i);Zy(s,"description","subtitle",n);const a=Ky("updated",n);a&&(s.updated=new Date(a));return Zy(s,"author","email",n,!0),s}(t):function(e){var t,n;const s=null!==(n=null===(t=Qy("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],i={type:e.name.substr(0,3),id:"",items:jy("item",e.children).map((e=>{const{children:t}=e,n={media:Wy(t)};Zy(n,"id","guid",t),Zy(n,"title","title",t),Zy(n,"link","link",t),Zy(n,"description","description",t);const s=Ky("pubDate",t)||Ky("dc:date",t);return s&&(n.pubDate=new Date(s)),n}))};Zy(i,"title","title",s),Zy(i,"link","link",s),Zy(i,"description","description",s);const a=Ky("lastBuildDate",s);a&&(i.updated=new Date(a));return Zy(i,"author","managingEditor",s,!0),i}(t):null},getInnerHTML:function(e,t){return dy(e)?e.children.map((e=>Iy(e,t))).join(""):""},getName:function(e){return e.name},getOuterHTML:Iy,getParent:Dy,getSiblings:function(e){const t=Dy(e);if(null!=t)return Oy(t);const n=[e];let{prev:s,next:i}=e;for(;null!=s;)n.unshift(s),({prev:s}=s);for(;null!=i;)n.push(i),({next:i}=i);return n},getText:function e(t){return Array.isArray(t)?t.map(e).join(""):cy(t)?"br"===t.name?"\n":e(t.children):ly(t)?e(t.children):uy(t)?t.data:""},hasAttrib:function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},hasChildren:dy,innerText:function e(t){return Array.isArray(t)?t.map(e).join(""):dy(t)&&(t.type===Am.Tag||ly(t))?e(t.children):uy(t)?t.data:""},isCDATA:ly,isComment:py,isDocument:function(e){return e.type===Am.Root},isTag:cy,isText:uy,nextElementSibling:function(e){let{next:t}=e;for(;null!==t&&!cy(t);)({next:t}=t);return t},prepend:function(e,t){Ry(t);const{parent:n}=e;if(n){const s=n.children;s.splice(s.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t},prependChild:function(e,t){if(Ry(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){const n=e.children[1];n.prev=t,t.next=n}else t.next=null},prevElementSibling:function(e){let{prev:t}=e;for(;null!==t&&!cy(t);)({prev:t}=t);return t},removeElement:Ry,removeSubsets:function(e){let t=e.length;for(;--t>=0;){const n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(let s=n.parent;s;s=s.parent)if(e.includes(s)){e.splice(t,1);break}}return e},replaceElement:function(e,t){const n=t.prev=e.prev;n&&(n.next=t);const s=t.next=e.next;s&&(s.prev=t);const i=t.parent=e.parent;if(i){const n=i.children;n[n.lastIndexOf(e)]=t,e.parent=null}},testElement:function(e,t){const n=Hy(e);return!n||n(t)},textContent:ky,uniqueSort:Yy}),Jy={trueFunc:function(){return!0},falseFunc:function(){return!1}},e_=N(Jy);const t_=new Map([[Wg.Universal,50],[Wg.Tag,30],[Wg.Attribute,1],[Wg.Pseudo,0]]);function n_(e){return!t_.has(e.type)}const s_=new Map([[Qg.Exists,10],[Qg.Equals,8],[Qg.Not,7],[Qg.Start,6],[Qg.End,6],[Qg.Any,5]]);function i_(e){const t=e.map(a_);for(let n=1;n<e.length;n++){const s=t[n];if(!(s<0))for(let i=n-1;i>=0&&s<t[i];i--){const n=e[i+1];e[i+1]=e[i],e[i]=n,t[i+1]=t[i],t[i]=s}}}function a_(e){var t,n;let s=null!==(t=t_.get(e.type))&&void 0!==t?t:-1;return e.type===Wg.Attribute?(s=null!==(n=s_.get(e.action))&&void 0!==n?n:4,e.action===Qg.Equals&&"id"===e.name&&(s=9),e.ignoreCase&&(s>>=1)):e.type===Wg.Pseudo&&(e.data?"has"===e.name||"contains"===e.name?s=0:Array.isArray(e.data)?(s=Math.min(...e.data.map((e=>Math.min(...e.map(a_))))),s<0&&(s=0)):s=2:s=3),s}const r_=/[-[\]{}()*+?.,\\^$|#\s]/g;function o_(e){return e.replace(r_,"\\$&")}const c_=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function l_(e,t){return"boolean"==typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!t.quirksMode:!t.xmlMode&&c_.has(e.name)}const u_={equals(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:a}=t;return l_(t,n)?(a=a.toLowerCase(),t=>{const n=s.getAttributeValue(t,i);return null!=n&&n.length===a.length&&n.toLowerCase()===a&&e(t)}):t=>s.getAttributeValue(t,i)===a&&e(t)},hyphen(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:a}=t;const r=a.length;return l_(t,n)?(a=a.toLowerCase(),function(t){const n=s.getAttributeValue(t,i);return null!=n&&(n.length===r||"-"===n.charAt(r))&&n.substr(0,r).toLowerCase()===a&&e(t)}):function(t){const n=s.getAttributeValue(t,i);return null!=n&&(n.length===r||"-"===n.charAt(r))&&n.substr(0,r)===a&&e(t)}},element(e,t,n){const{adapter:s}=n,{name:i,value:a}=t;if(/\s/.test(a))return e_.falseFunc;const r=new RegExp(`(?:^|\\s)${o_(a)}(?:$|\\s)`,l_(t,n)?"i":"");return function(t){const n=s.getAttributeValue(t,i);return null!=n&&n.length>=a.length&&r.test(n)&&e(t)}},exists:(e,{name:t},{adapter:n})=>s=>n.hasAttrib(s,t)&&e(s),start(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:a}=t;const r=a.length;return 0===r?e_.falseFunc:l_(t,n)?(a=a.toLowerCase(),t=>{const n=s.getAttributeValue(t,i);return null!=n&&n.length>=r&&n.substr(0,r).toLowerCase()===a&&e(t)}):t=>{var n;return!!(null===(n=s.getAttributeValue(t,i))||void 0===n?void 0:n.startsWith(a))&&e(t)}},end(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:a}=t;const r=-a.length;return 0===r?e_.falseFunc:l_(t,n)?(a=a.toLowerCase(),t=>{var n;return(null===(n=s.getAttributeValue(t,i))||void 0===n?void 0:n.substr(r).toLowerCase())===a&&e(t)}):t=>{var n;return!!(null===(n=s.getAttributeValue(t,i))||void 0===n?void 0:n.endsWith(a))&&e(t)}},any(e,t,n){const{adapter:s}=n,{name:i,value:a}=t;if(""===a)return e_.falseFunc;if(l_(t,n)){const t=new RegExp(o_(a),"i");return function(n){const r=s.getAttributeValue(n,i);return null!=r&&r.length>=a.length&&t.test(r)&&e(n)}}return t=>{var n;return!!(null===(n=s.getAttributeValue(t,i))||void 0===n?void 0:n.includes(a))&&e(t)}},not(e,t,n){const{adapter:s}=n,{name:i}=t;let{value:a}=t;return""===a?t=>!!s.getAttributeValue(t,i)&&e(t):l_(t,n)?(a=a.toLowerCase(),t=>{const n=s.getAttributeValue(t,i);return(null==n||n.length!==a.length||n.toLowerCase()!==a)&&e(t)}):t=>s.getAttributeValue(t,i)!==a&&e(t)}},p_=new Set([9,10,12,13,32]),d_="0".charCodeAt(0),h_="9".charCodeAt(0);function f_(e){return function(e){const t=e[0],n=e[1]-1;if(n<0&&t<=0)return e_.falseFunc;if(-1===t)return e=>e<=n;if(0===t)return e=>e===n;if(1===t)return n<0?e_.trueFunc:e=>e>=n;const s=Math.abs(t),i=(n%s+s)%s;return t>1?e=>e>=n&&e%s===i:e=>e<=n&&e%s===i}(function(e){if("even"===(e=e.trim().toLowerCase()))return[2,0];if("odd"===e)return[2,1];let t=0,n=0,s=a(),i=r();if(t<e.length&&"n"===e.charAt(t)&&(t++,n=s*(null!=i?i:1),o(),t<e.length?(s=a(),o(),i=r()):s=i=0),null===i||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[n,s*i];function a(){return"-"===e.charAt(t)?(t++,-1):("+"===e.charAt(t)&&t++,1)}function r(){const n=t;let s=0;for(;t<e.length&&e.charCodeAt(t)>=d_&&e.charCodeAt(t)<=h_;)s=10*s+(e.charCodeAt(t)-d_),t++;return t===n?null:s}function o(){for(;t<e.length&&p_.has(e.charCodeAt(t));)t++}}(e))}function m_(e,t){return n=>{const s=t.getParent(n);return null!=s&&t.isTag(s)&&e(n)}}const g_={contains:(e,t,{adapter:n})=>function(s){return e(s)&&n.getText(s).includes(t)},icontains(e,t,{adapter:n}){const s=t.toLowerCase();return function(t){return e(t)&&n.getText(t).toLowerCase().includes(s)}},"nth-child"(e,t,{adapter:n,equals:s}){const i=f_(t);return i===e_.falseFunc?e_.falseFunc:i===e_.trueFunc?m_(e,n):function(t){const a=n.getSiblings(t);let r=0;for(let e=0;e<a.length&&!s(t,a[e]);e++)n.isTag(a[e])&&r++;return i(r)&&e(t)}},"nth-last-child"(e,t,{adapter:n,equals:s}){const i=f_(t);return i===e_.falseFunc?e_.falseFunc:i===e_.trueFunc?m_(e,n):function(t){const a=n.getSiblings(t);let r=0;for(let e=a.length-1;e>=0&&!s(t,a[e]);e--)n.isTag(a[e])&&r++;return i(r)&&e(t)}},"nth-of-type"(e,t,{adapter:n,equals:s}){const i=f_(t);return i===e_.falseFunc?e_.falseFunc:i===e_.trueFunc?m_(e,n):function(t){const a=n.getSiblings(t);let r=0;for(let e=0;e<a.length;e++){const i=a[e];if(s(t,i))break;n.isTag(i)&&n.getName(i)===n.getName(t)&&r++}return i(r)&&e(t)}},"nth-last-of-type"(e,t,{adapter:n,equals:s}){const i=f_(t);return i===e_.falseFunc?e_.falseFunc:i===e_.trueFunc?m_(e,n):function(t){const a=n.getSiblings(t);let r=0;for(let e=a.length-1;e>=0;e--){const i=a[e];if(s(t,i))break;n.isTag(i)&&n.getName(i)===n.getName(t)&&r++}return i(r)&&e(t)}},root:(e,t,{adapter:n})=>t=>{const s=n.getParent(t);return(null==s||!n.isTag(s))&&e(t)},scope(e,t,n,s){const{equals:i}=n;return s&&0!==s.length?1===s.length?t=>i(s[0],t)&&e(t):t=>s.includes(t)&&e(t):g_.root(e,t,n)},hover:y_("isHovered"),visited:y_("isVisited"),active:y_("isActive")};function y_(e){return function(t,n,{adapter:s}){const i=s[e];return"function"!=typeof i?e_.falseFunc:function(e){return i(e)&&t(e)}}}const __={empty:(e,{adapter:t})=>!t.getChildren(e).some((e=>t.isTag(e)||""!==t.getText(e))),"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return null==t.prevElementSibling(e);const s=t.getSiblings(e).find((e=>t.isTag(e)));return null!=s&&n(e,s)},"last-child"(e,{adapter:t,equals:n}){const s=t.getSiblings(e);for(let i=s.length-1;i>=0;i--){if(n(e,s[i]))return!0;if(t.isTag(s[i]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const s=t.getSiblings(e),i=t.getName(e);for(let a=0;a<s.length;a++){const r=s[a];if(n(e,r))return!0;if(t.isTag(r)&&t.getName(r)===i)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const s=t.getSiblings(e),i=t.getName(e);for(let a=s.length-1;a>=0;a--){const r=s[a];if(n(e,r))return!0;if(t.isTag(r)&&t.getName(r)===i)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const s=t.getName(e);return t.getSiblings(e).every((i=>n(e,i)||!t.isTag(i)||t.getName(i)!==s))},"only-child":(e,{adapter:t,equals:n})=>t.getSiblings(e).every((s=>n(e,s)||!t.isTag(s)))};function E_(e,t,n,s){if(null===n){if(e.length>s)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===s)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const b_={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] > option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},T_={};function v_(e,t){const n=t.getSiblings(e);if(n.length<=1)return[];const s=n.indexOf(e);return s<0||s===n.length-1?[]:n.slice(s+1).filter(t.isTag)}function x_(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const S_=(e,t,n,s,i)=>{const a=i(t,x_(n),s);return a===e_.trueFunc?e:a===e_.falseFunc?e_.falseFunc:t=>a(t)&&e(t)},A_={is:S_,matches:S_,where:S_,not(e,t,n,s,i){const a=i(t,x_(n),s);return a===e_.falseFunc?e:a===e_.trueFunc?e_.falseFunc:t=>!a(t)&&e(t)},has(e,t,n,s,i){const{adapter:a}=n,r=x_(n);r.relativeSelector=!0;const o=t.some((e=>e.some(n_)))?[T_]:void 0,c=i(t,r,o);if(c===e_.falseFunc)return e_.falseFunc;const l=function(e,t){return e===e_.falseFunc?e_.falseFunc:n=>t.isTag(n)&&e(n)}(c,a);if(o&&c!==e_.trueFunc){const{shouldTestNextSiblings:t=!1}=c;return n=>{if(!e(n))return!1;o[0]=n;const s=a.getChildren(n),i=t?[...s,...v_(n,a)]:s;return a.existsOne(l,i)}}return t=>e(t)&&a.existsOne(l,a.getChildren(t))}};function w_(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function C_(e,t,n,s,i){const{adapter:a,equals:r}=n;switch(t.type){case Wg.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case Wg.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case Wg.Attribute:if(null!=t.namespace)throw new Error("Namespaced attributes are not yet supported by css-select");return n.xmlMode&&!n.lowerCaseAttributeNames||(t.name=t.name.toLowerCase()),u_[t.action](e,t,n);case Wg.Pseudo:return function(e,t,n,s,i){var a;const{name:r,data:o}=t;if(Array.isArray(o)){if(!(r in A_))throw new Error(`Unknown pseudo-class :${r}(${o})`);return A_[r](e,o,n,s,i)}const c=null===(a=n.pseudos)||void 0===a?void 0:a[r],l="string"==typeof c?c:b_[r];if("string"==typeof l){if(null!=o)throw new Error(`Pseudo ${r} doesn't have any arguments`);const t=ry(l);return A_.is(e,t,n,s,i)}if("function"==typeof c)return E_(c,r,o,1),t=>c(t,o)&&e(t);if(r in g_)return g_[r](e,o,n,s);if(r in __){const t=__[r];return E_(t,r,o,2),s=>t(s,n,o)&&e(s)}throw new Error(`Unknown pseudo-class :${r}`)}(e,t,n,s,i);case Wg.Tag:{if(null!=t.namespace)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:s}=t;return n.xmlMode&&!n.lowerCaseTags||(s=s.toLowerCase()),function(t){return a.getName(t)===s&&e(t)}}case Wg.Descendant:{if(!1===n.cacheResults||"undefined"==typeof WeakSet)return function(t){let n=t;for(;n=w_(n,a);)if(e(n))return!0;return!1};const t=new WeakSet;return function(n){let s=n;for(;s=w_(s,a);)if(!t.has(s)){if(a.isTag(s)&&e(s))return!0;t.add(s)}return!1}}case"_flexibleDescendant":return function(t){let n=t;do{if(e(n))return!0}while(n=w_(n,a));return!1};case Wg.Parent:return function(t){return a.getChildren(t).some((t=>a.isTag(t)&&e(t)))};case Wg.Child:return function(t){const n=a.getParent(t);return null!=n&&a.isTag(n)&&e(n)};case Wg.Sibling:return function(t){const n=a.getSiblings(t);for(let s=0;s<n.length;s++){const i=n[s];if(r(t,i))break;if(a.isTag(i)&&e(i))return!0}return!1};case Wg.Adjacent:return a.prevElementSibling?function(t){const n=a.prevElementSibling(t);return null!=n&&e(n)}:function(t){const n=a.getSiblings(t);let s;for(let e=0;e<n.length;e++){const i=n[e];if(r(t,i))break;a.isTag(i)&&(s=i)}return!!s&&e(s)};case Wg.Universal:if(null!=t.namespace&&"*"!==t.namespace)throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}function N_(e){return e.type===Wg.Pseudo&&("scope"===e.name||Array.isArray(e.data)&&e.data.some((e=>e.some(N_))))}const I_={type:Wg.Descendant},k_={type:"_flexibleDescendant"},O_={type:Wg.Pseudo,name:"scope",data:null};function D_(e,t,n){var s;e.forEach(i_),n=null!==(s=t.context)&&void 0!==s?s:n;const i=Array.isArray(n),a=n&&(Array.isArray(n)?n:[n]);if(!1!==t.relativeSelector)!function(e,{adapter:t},n){const s=!!(null==n?void 0:n.every((e=>{const n=t.isTag(e)&&t.getParent(e);return e===T_||n&&t.isTag(n)})));for(const t of e){if(t.length>0&&n_(t[0])&&t[0].type!==Wg.Descendant);else{if(!s||t.some(N_))continue;t.unshift(I_)}t.unshift(O_)}}(e,t,a);else if(e.some((e=>e.length>0&&n_(e[0]))))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let r=!1;const o=e.map((e=>{if(e.length>=2){const[t,n]=e;t.type!==Wg.Pseudo||"scope"!==t.name||(i&&n.type===Wg.Descendant?e[1]=k_:n.type!==Wg.Adjacent&&n.type!==Wg.Sibling||(r=!0))}return function(e,t,n){var s;return e.reduce(((e,s)=>e===e_.falseFunc?e_.falseFunc:C_(e,s,t,n,D_)),null!==(s=t.rootFunc)&&void 0!==s?s:e_.trueFunc)}(e,t,a)})).reduce(R_,e_.falseFunc);return o.shouldTestNextSiblings=r,o}function R_(e,t){return t===e_.falseFunc||e===e_.trueFunc?e:e===e_.falseFunc||t===e_.trueFunc?t:function(n){return e(n)||t(n)}}const L_=(e,t)=>e===t,P_={adapter:Xy,equals:L_};const M_=(F_=D_,function(e,t,n){const s=function(e){var t,n,s,i;const a=null!=e?e:P_;return null!==(t=a.adapter)&&void 0!==t||(a.adapter=Xy),null!==(n=a.equals)&&void 0!==n||(a.equals=null!==(i=null===(s=a.adapter)||void 0===s?void 0:s.equals)&&void 0!==i?i:L_),a}(t);return F_(e,s,n)});var F_;function B_(e,t,n=!1){return n&&(e=function(e,t){const n=Array.isArray(e)?e.slice(0):[e],s=n.length;for(let e=0;e<s;e++){const s=v_(n[e],t);n.push(...s)}return n}(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}const U_=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function H_(e){return"pseudo"===e.type&&(!!U_.has(e.name)||!("not"!==e.name||!Array.isArray(e.data))&&e.data.some((e=>e.some(H_))))}function j_(e){const t=[],n=[];for(const s of e)s.some(H_)?t.push(s):n.push(s);return[n,t]}const G_={type:Wg.Universal,namespace:null},q_={type:Wg.Pseudo,name:"scope",data:null};function Y_(e,t,n={}){return z_([e],t,n)}function z_(e,t,n={}){if("function"==typeof t)return e.some(t);const[s,i]=j_(ry(t));return s.length>0&&e.some(M_(s,n))||i.some((t=>Q_(t,e,n).length>0))}function V_(e,t,n={}){return W_(ry(e),t,n)}function W_(e,t,n){if(0===t.length)return[];const[s,i]=j_(e);let a;if(s.length){const e=X_(t,s,n);if(0===i.length)return e;e.length&&(a=new Set(e))}for(let e=0;e<i.length&&(null==a?void 0:a.size)!==t.length;e++){const s=i[e];if(0===(a?t.filter((e=>cy(e)&&!a.has(e))):t).length)break;const r=Q_(s,t,n);if(r.length)if(a)r.forEach((e=>a.add(e)));else{if(e===i.length-1)return r;a=new Set(r)}}return void 0!==a?a.size===t.length?t:t.filter((e=>a.has(e))):[]}function Q_(e,t,n){var s;if(e.some(ey)){const i=null!==(s=n.root)&&void 0!==s?s:function(e){for(;e.parent;)e=e.parent;return e}(t[0]),a={...n,context:t,relativeSelector:!1};return e.push(q_),K_(i,e,a,!0,t.length)}return K_(t,e,n,!1,t.length)}function K_(e,t,n,s,i){const a=t.findIndex(H_),r=t.slice(0,a),o=t[a],c=t.length-1===a?i:1/0,l=function(e,t,n){const s=null!=t?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(s)?s>=0?s+1:1/0:0;case"lt":return isFinite(s)?s>=0?Math.min(s,n):1/0:0;case"gt":return isFinite(s)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}(o.name,o.data,c);if(0===l)return[];const u=(0!==r.length||Array.isArray(e)?0===r.length?(Array.isArray(e)?e:[e]).filter(cy):s||r.some(ey)?Z_(e,[r],n,l):X_(e,[r],n):Oy(e).filter(cy)).slice(0,l);let p=function(e,t,n,s){const i="string"==typeof n?parseInt(n,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(i)&&Math.abs(i)<t.length?[i<0?t[t.length+i]:t[i]]:[];case"gt":return isFinite(i)?t.slice(i+1):[];case"even":return t.filter(((e,t)=>t%2==0));case"odd":return t.filter(((e,t)=>t%2==1));case"not":{const e=new Set(W_(n,t,s));return t.filter((t=>!e.has(t)))}}}(o.name,u,o.data,n);if(0===p.length||t.length===a+1)return p;const d=t.slice(a+1),h=d.some(ey);if(h){if(ey(d[0])){const{type:e}=d[0];e!==Wg.Sibling&&e!==Wg.Adjacent||(p=B_(p,Xy,!0)),d.unshift(G_)}n={...n,relativeSelector:!1,rootFunc:e=>p.includes(e)}}else n.rootFunc&&n.rootFunc!==Jy.trueFunc&&(n={...n,rootFunc:Jy.trueFunc});return d.some(H_)?K_(p,d,n,!1,i):h?Z_(p,[d],n,i):X_(p,[d],n)}function Z_(e,t,n,s){return $_(e,M_(t,n,e),s)}function $_(e,t,n=1/0){return Py((e=>cy(e)&&t(e)),B_(e,Xy,t.shouldTestNextSiblings),!0,n)}function X_(e,t,n){const s=(Array.isArray(e)?e:[e]).filter(cy);if(0===s.length)return s;const i=M_(t,n);return i===Jy.trueFunc?s:s.filter(i)}const J_=/^\s*[~+]/;function eE(e){return function(t,...n){return function(s){var i;let a=e(t,this);return s&&(a=yE(a,s,this.options.xmlMode,null===(i=this._root)||void 0===i?void 0:i[0])),this._make(this.length>1&&a.length>1?n.reduce(((e,t)=>t(e)),a):a)}}}const tE=eE(((e,t)=>{const n=[];for(let s=0;s<t.length;s++){const i=e(t[s]);n.push(i)}return(new Array).concat(...n)})),nE=eE(((e,t)=>{const n=[];for(let s=0;s<t.length;s++){const i=e(t[s]);null!==i&&n.push(i)}return n}));function sE(e,...t){let n=null;const s=eE(((e,t)=>{const s=[];return kg(t,(t=>{for(let i;(i=e(t))&&!(null==n?void 0:n(i,s.length));t=i)s.push(i)})),s}))(e,...t);return function(e,t){n="string"==typeof e?t=>Y_(t,e,this.options):e?gE(e):null;const i=s.call(this,t);return n=null,i}}function iE(e){return Array.from(new Set(e))}const aE=nE((({parent:e})=>e&&!Km(e)?e:null),iE),rE=tE((e=>{const t=[];for(;e.parent&&!Km(e.parent);)t.push(e.parent),e=e.parent;return t}),vg,(e=>e.reverse())),oE=sE((({parent:e})=>e&&!Km(e)?e:null),vg,(e=>e.reverse()));const cE=nE((e=>_g(e))),lE=tE((e=>{const t=[];for(;e.next;)zm(e=e.next)&&t.push(e);return t}),iE),uE=sE((e=>_g(e)),iE),pE=nE((e=>Eg(e))),dE=tE((e=>{const t=[];for(;e.prev;)zm(e=e.prev)&&t.push(e);return t}),iE),hE=sE((e=>Eg(e)),iE),fE=tE((e=>function(e){const t=function(e){return e.parent||null}(e);if(null!=t)return yg(t);const n=[e];let{prev:s,next:i}=e;for(;null!=s;)n.unshift(s),({prev:s}=s);for(;null!=i;)n.push(i),({next:i}=i);return n}(e).filter((t=>zm(t)&&t!==e))),vg),mE=tE((e=>yg(e).filter(zm)),iE);function gE(e){return"function"==typeof e?(t,n)=>e.call(t,n,t):Ig(e)?t=>Array.prototype.includes.call(e,t):function(t){return e===t}}function yE(e,t,n,s){return"string"==typeof t?V_(t,e,{xmlMode:n,root:s}):e.filter(gE(t))}var _E=Object.freeze({__proto__:null,add:function(e,t){const n=this._make(e,t),s=vg([...this.get(),...n.get()]);return this._make(s)},addBack:function(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this},children:mE,closest:function(e){var t;const n=[];if(!e)return this._make(n);const s={xmlMode:this.options.xmlMode,root:null===(t=this._root)||void 0===t?void 0:t[0]},i="string"==typeof e?t=>Y_(t,e,s):gE(e);return kg(this,(e=>{for(;e&&zm(e);){if(i(e,0)){n.includes(e)||n.push(e);break}e=e.parent}})),this._make(n)},contents:function(){const e=this.toArray().reduce(((e,t)=>Zm(t)?e.concat(t.children):e),[]);return this._make(e)},each:function(e){let t=0;const n=this.length;for(;t<n&&!1!==e.call(this[t],t,this[t]);)++t;return this},end:function(){var e;return null!==(e=this.prevObject)&&void 0!==e?e:this._make([])},eq:function(e){var t;return 0===(e=+e)&&this.length<=1?this:(e<0&&(e=this.length+e),this._make(null!==(t=this[e])&&void 0!==t?t:[]))},filter:function(e){var t;return this._make(yE(this.toArray(),e,this.options.xmlMode,null===(t=this._root)||void 0===t?void 0:t[0]))},filterArray:yE,find:function(e){var t;if(!e)return this._make([]);const n=this.toArray();if("string"!=typeof e){const t=Ig(e)?e.toArray():[e];return this._make(t.filter((e=>n.some((t=>Ag(t,e))))))}const s=J_.test(e)?n:this.children().toArray(),i={context:n,root:null===(t=this._root)||void 0===t?void 0:t[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(function(e,t,n={},s=1/0){if("function"==typeof e)return $_(t,e);const[i,a]=j_(ry(e)),r=a.map((e=>K_(t,e,n,!0,s)));return i.length&&r.push(Z_(t,i,n,s)),0===r.length?[]:1===r.length?r[0]:Yy(r.reduce(((e,t)=>[...e,...t])))}(e,s,i))},first:function(){return this.length>1?this._make(this[0]):this},get:function(e){return null==e?this.toArray():this[e<0?this.length+e:e]},has:function(e){return this.filter("string"==typeof e?`:has(${e})`:(t,n)=>this._make(n).find(e).length>0)},index:function(e){let t,n;return null==e?(t=this.parent().children(),n=this[0]):"string"==typeof e?(t=this._make(e),n=this[0]):(t=this,n=Ig(e)?e[0]:e),Array.prototype.indexOf.call(t,n)},is:function(e){const t=this.toArray();return"string"==typeof e?z_(t.filter(zm),e,this.options):!!e&&t.some(gE(e))},last:function(){return this.length>0?this._make(this[this.length-1]):this},map:function(e){let t=[];for(let n=0;n<this.length;n++){const s=this[n],i=e.call(s,n,s);null!=i&&(t=t.concat(i))}return this._make(t)},next:cE,nextAll:lE,nextUntil:uE,not:function(e){let t=this.toArray();if("string"==typeof e){const n=new Set(V_(e,t,this.options));t=t.filter((e=>!n.has(e)))}else{const n=gE(e);t=t.filter(((e,t)=>!n(e,t)))}return this._make(t)},parent:aE,parents:rE,parentsUntil:oE,prev:pE,prevAll:dE,prevUntil:hE,siblings:fE,slice:function(e,t){return this._make(Array.prototype.slice.call(this,e,t))},toArray:function(){return Array.prototype.slice.call(this)}});function EE(e,t){const n=Array.isArray(e)?e:[e];t?t.children=n:t=null;for(let e=0;e<n.length;e++){const s=n[e];s.parent&&s.parent.children!==n&&bg(s),t?(s.prev=n[e-1]||null,s.next=n[e+1]||null):s.prev=s.next=null,s.parent=t}return t}function bE(e){return function(...t){const n=this.length-1;return kg(this,((s,i)=>{if(!Zm(s))return;const a="function"==typeof t[0]?t[0].call(s,i,this._render(s.children)):t,r=this._makeDomArray(a,i<n);e(r,s.children,s)}))}}function TE(e,t,n,s,i){var a,r;const o=[t,n,...s],c=0===t?null:e[t-1],l=t+n>=e.length?null:e[t+n];for(let e=0;e<s.length;++e){const n=s[e],u=n.parent;if(u){const e=u.children.indexOf(n);e>-1&&(u.children.splice(e,1),i===u&&t>e&&o[0]--)}n.parent=i,n.prev&&(n.prev.next=null!==(a=n.next)&&void 0!==a?a:null),n.next&&(n.next.prev=null!==(r=n.prev)&&void 0!==r?r:null),n.prev=0===e?c:s[e-1],n.next=e===s.length-1?l:s[e+1]}return c&&(c.next=s[0]),l&&(l.prev=s[s.length-1]),e.splice(...o)}const vE=bE(((e,t,n)=>{TE(t,t.length,0,e,n)})),xE=bE(((e,t,n)=>{TE(t,0,0,e,n)}));function SE(e){return function(t){const n=this.length-1,s=this.parents().last();for(let i=0;i<this.length;i++){const a=this[i],r="function"==typeof t?t.call(a,i,a):"string"!=typeof t||Dg(t)?t:s.find(t).clone(),[o]=this._makeDomArray(r,i<n);if(!o||!Zm(o))continue;let c=o,l=0;for(;l<c.children.length;){const e=c.children[l];zm(e)?(c=e,l=0):l++}e(a,c,[o])}return this}}const AE=SE(((e,t,n)=>{const{parent:s}=e;if(!s)return;const i=s.children,a=i.indexOf(e);EE([e],t),TE(i,a,0,n,s)})),wE=SE(((e,t,n)=>{Zm(e)&&(EE(e.children,t),EE(n,e))}));var CE=Object.freeze({__proto__:null,_makeDomArray:function(e,t){return null==e?[]:Ig(e)?t?Og(e.get()):e.get():Array.isArray(e)?e.reduce(((e,n)=>e.concat(this._makeDomArray(n,t))),[]):"string"==typeof e?this._parse(e,this.options,!1,null).children:t?Og([e]):[e]},after:function(...e){const t=this.length-1;return kg(this,((n,s)=>{const{parent:i}=n;if(!Zm(n)||!i)return;const a=i.children,r=a.indexOf(n);if(r<0)return;const o="function"==typeof e[0]?e[0].call(n,s,this._render(n.children)):e;TE(a,r+1,0,this._makeDomArray(o,s<t),i)}))},append:vE,appendTo:function(e){return(Ig(e)?e:this._make(e)).append(this),this},before:function(...e){const t=this.length-1;return kg(this,((n,s)=>{const{parent:i}=n;if(!Zm(n)||!i)return;const a=i.children,r=a.indexOf(n);if(r<0)return;const o="function"==typeof e[0]?e[0].call(n,s,this._render(n.children)):e;TE(a,r,0,this._makeDomArray(o,s<t),i)}))},clone:function(){return this._make(Og(this.get()))},empty:function(){return kg(this,(e=>{Zm(e)&&(e.children.forEach((e=>{e.next=e.prev=e.parent=null})),e.children.length=0)}))},html:function(e){if(void 0===e){const e=this[0];return e&&Zm(e)?this._render(e.children):null}return kg(this,(t=>{if(!Zm(t))return;t.children.forEach((e=>{e.next=e.prev=e.parent=null}));EE(Ig(e)?e.toArray():this._parse(`${e}`,this.options,!1,t).children,t)}))},insertAfter:function(e){"string"==typeof e&&(e=this._make(e)),this.remove();const t=[];return this._makeDomArray(e).forEach((e=>{const n=this.clone().toArray(),{parent:s}=e;if(!s)return;const i=s.children,a=i.indexOf(e);a<0||(TE(i,a+1,0,n,s),t.push(...n))})),this._make(t)},insertBefore:function(e){const t=this._make(e);this.remove();const n=[];return kg(t,(e=>{const t=this.clone().toArray(),{parent:s}=e;if(!s)return;const i=s.children,a=i.indexOf(e);a<0||(TE(i,a,0,t,s),n.push(...t))})),this._make(n)},prepend:xE,prependTo:function(e){return(Ig(e)?e:this._make(e)).prepend(this),this},remove:function(e){return kg(e?this.filter(e):this,(e=>{bg(e),e.prev=e.next=e.parent=null})),this},replaceWith:function(e){return kg(this,((t,n)=>{const{parent:s}=t;if(!s)return;const i=s.children,a="function"==typeof e?e.call(t,n,t):e,r=this._makeDomArray(a);EE(r,null);const o=i.indexOf(t);TE(i,o,1,r,s),r.includes(t)||(t.parent=t.prev=t.next=null)}))},text:function(e){return void 0===e?Sg(this):kg(this,"function"==typeof e?(t,n)=>this._make(t).text(e.call(t,n,Sg([t]))):t=>{if(!Zm(t))return;t.children.forEach((e=>{e.next=e.prev=e.parent=null}));EE(new Bm(`${e}`),t)})},toString:function(){return this._render(this)},unwrap:function(e){return this.parent(e).not("body").each(((e,t)=>{this._make(t).replaceWith(t.children)})),this},wrap:AE,wrapAll:function(e){const t=this[0];if(t){const n=this._make("function"==typeof e?e.call(t,0,t):e).insertBefore(t);let s;for(let e=0;e<n.length;e++)"tag"===n[e].type&&(s=n[e]);let i=0;for(;s&&i<s.children.length;){const e=s.children[i];"tag"===e.type?(s=e,i=0):i++}s&&this._make(s).append(this)}return this},wrapInner:wE});function NE(e,t,n,s){if("string"==typeof t){const a=IE(e),r="function"==typeof n?n.call(e,s,a[t]):n;""===r?delete a[t]:null!=r&&(a[t]=r),e.attribs.style=(i=a,Object.keys(i).reduce(((e,t)=>`${e}${e?" ":""}${t}: ${i[t]};`),""))}else"object"==typeof t&&Object.keys(t).forEach(((n,s)=>{NE(e,n,t[n],s)}));var i}function IE(e,t){if(!e||!zm(e))return;const n=function(e){if(e=(e||"").trim(),!e)return{};const t={};let n;for(const s of e.split(";")){const e=s.indexOf(":");if(e<1||e===s.length-1){const e=s.trimEnd();e.length>0&&void 0!==n&&(t[n]+=`;${e}`)}else n=s.slice(0,e).trim(),t[n]=s.slice(e+1).trim()}return t}(e.attribs.style);if("string"==typeof t)return n[t];if(Array.isArray(t)){const e={};return t.forEach((t=>{null!=n[t]&&(e[t]=n[t])})),e}return n}var kE=Object.freeze({__proto__:null,css:function(e,t){return null!=e&&null!=t||"object"==typeof e&&!Array.isArray(e)?kg(this,((n,s)=>{zm(n)&&NE(n,e,t,s)})):0!==this.length?IE(this[0],e):void 0}});const OE="input,select,textarea,keygen",DE=/%20/g,RE=/\r?\n/g;var LE=Object.freeze({__proto__:null,serialize:function(){const e=this.serializeArray().map((e=>`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`));return e.join("&").replace(DE,"+")},serializeArray:function(){return this.map(((e,t)=>{const n=this._make(t);return zm(t)&&"form"===t.name?n.find(OE).toArray():n.filter(OE).toArray()})).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map(((e,t)=>{var n;const s=this._make(t),i=s.attr("name"),a=null!==(n=s.val())&&void 0!==n?n:"";return Array.isArray(a)?a.map((e=>({name:i,value:e.replace(RE,"\r\n")}))):{name:i,value:a.replace(RE,"\r\n")}})).toArray()}});class PE{constructor(e,t,n){if(this.length=0,this.options=n,this._root=t,e){for(let t=0;t<e.length;t++)this[t]=e[t];this.length=e.length}}}PE.prototype.cheerio="[cheerio object]",PE.prototype.splice=Array.prototype.splice,PE.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(PE.prototype,Kg,_E,CE,kE,LE);const ME=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),FE="";var BE;!function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(BE=BE||(BE={}));const UE="--",HE="[CDATA[",jE="doctype",GE="script",qE="public",YE="system";function zE(e){return e>=55296&&e<=57343}function VE(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function WE(e){return e>=64976&&e<=65007||ME.has(e)}var QE;!function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(QE=QE||(QE={}));class KE{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){const{line:t,col:n,offset:s}=this;return{code:e,startLine:t,endLine:t,startCol:n,endCol:n,startOffset:s,endOffset:s}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(function(e){return e>=56320&&e<=57343}(t))return this.pos++,this._addGap(),1024*(e-55296)+9216+t}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,BE.EOF;return this._err(QE.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let t=0;t<e.length;t++){if((32|this.html.charCodeAt(this.pos+t))!==e.charCodeAt(t))return!1}return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,BE.EOF;const n=this.html.charCodeAt(t);return n===BE.CARRIAGE_RETURN?BE.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,BE.EOF;let e=this.html.charCodeAt(this.pos);if(e===BE.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,BE.LINE_FEED;if(e===BE.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,zE(e)&&(e=this._processSurrogate(e));return null===this.handler.onParseError||e>31&&e<127||e===BE.LINE_FEED||e===BE.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){VE(e)?this._err(QE.controlCharacterInInputStream):WE(e)&&this._err(QE.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var ZE;function $E(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}!function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"}(ZE=ZE||(ZE={}));var XE,JE=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0)))),eb=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((e=>e.charCodeAt(0))));const tb=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),nb=null!==(XE=String.fromCodePoint)&&void 0!==XE?XE:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};var sb;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(sb||(sb={}));var ib,ab,rb;function ob(e){return e>=sb.ZERO&&e<=sb.NINE}function cb(e){return e===sb.EQUALS||function(e){return e>=sb.UPPER_A&&e<=sb.UPPER_Z||e>=sb.LOWER_A&&e<=sb.LOWER_Z||ob(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(ib||(ib={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(ab||(ab={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(rb||(rb={}));let lb=class{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=ab.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=rb.Strict}startEntity(e){this.decodeMode=e,this.state=ab.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case ab.EntityStart:return e.charCodeAt(t)===sb.NUM?(this.state=ab.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=ab.NamedEntity,this.stateNamedEntity(e,t));case ab.NumericStart:return this.stateNumericStart(e,t);case ab.NumericDecimal:return this.stateNumericDecimal(e,t);case ab.NumericHex:return this.stateNumericHex(e,t);case ab.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===sb.LOWER_X?(this.state=ab.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=ab.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,s){if(t!==n){const i=n-t;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(t,i),s),this.consumed+=i}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const i=e.charCodeAt(t);if(!(ob(i)||(s=i,s>=sb.UPPER_A&&s<=sb.UPPER_F||s>=sb.LOWER_A&&s<=sb.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3);t+=1}var s;return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const s=e.charCodeAt(t);if(!ob(s))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(s,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===sb.SEMI)this.consumed+=1;else if(this.decodeMode===rb.Strict)return 0;return this.emitCodePoint(function(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=tb.get(e))&&void 0!==t?t:e}(this.result),this.consumed),this.errors&&(e!==sb.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&ib.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const a=e.charCodeAt(t);if(this.treeIndex=pb(n,s,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return 0===this.result||this.decodeMode===rb.Attribute&&(0===i||cb(a))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&ib.VALUE_LENGTH)>>14,0!==i){if(a===sb.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==rb.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,s=(n[t]&ib.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,s,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:s}=this;return this.emitCodePoint(1===t?s[e]&~ib.VALUE_LENGTH:s[e+1],n),3===t&&this.emitCodePoint(s[e+2],n),n}end(){var e;switch(this.state){case ab.NamedEntity:return 0===this.result||this.decodeMode===rb.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case ab.NumericDecimal:return this.emitNumericEntity(0,2);case ab.NumericHex:return this.emitNumericEntity(0,3);case ab.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ab.EntityStart:return 0}}};function ub(e){let t="";const n=new lb(e,(e=>t+=nb(e)));return function(e,s){let i=0,a=0;for(;(a=e.indexOf("&",a))>=0;){t+=e.slice(i,a),n.startEntity(s);const r=n.write(e,a+1);if(r<0){i=a+n.end();break}i=a+r,a=0===r?i+1:i}const r=t+e.slice(i);return t="",r}}function pb(e,t,n,s){const i=(t&ib.BRANCH_LENGTH)>>7,a=t&ib.JUMP_TABLE;if(0===i)return 0!==a&&s===a?n:-1;if(a){const t=s-a;return t<0||t>=i?-1:e[n+t]-1}let r=n,o=r+i-1;for(;r<=o;){const t=r+o>>>1,n=e[t];if(n<s)r=t+1;else{if(!(n>s))return e[t+i];o=t-1}}return-1}var db,hb,fb,mb,gb;ub(JE),ub(eb),function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"}(db=db||(db={})),function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(hb=hb||(hb={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(fb=fb||(fb={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}(mb=mb||(mb={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"}(gb=gb||(gb={}));const yb=new Map([[mb.A,gb.A],[mb.ADDRESS,gb.ADDRESS],[mb.ANNOTATION_XML,gb.ANNOTATION_XML],[mb.APPLET,gb.APPLET],[mb.AREA,gb.AREA],[mb.ARTICLE,gb.ARTICLE],[mb.ASIDE,gb.ASIDE],[mb.B,gb.B],[mb.BASE,gb.BASE],[mb.BASEFONT,gb.BASEFONT],[mb.BGSOUND,gb.BGSOUND],[mb.BIG,gb.BIG],[mb.BLOCKQUOTE,gb.BLOCKQUOTE],[mb.BODY,gb.BODY],[mb.BR,gb.BR],[mb.BUTTON,gb.BUTTON],[mb.CAPTION,gb.CAPTION],[mb.CENTER,gb.CENTER],[mb.CODE,gb.CODE],[mb.COL,gb.COL],[mb.COLGROUP,gb.COLGROUP],[mb.DD,gb.DD],[mb.DESC,gb.DESC],[mb.DETAILS,gb.DETAILS],[mb.DIALOG,gb.DIALOG],[mb.DIR,gb.DIR],[mb.DIV,gb.DIV],[mb.DL,gb.DL],[mb.DT,gb.DT],[mb.EM,gb.EM],[mb.EMBED,gb.EMBED],[mb.FIELDSET,gb.FIELDSET],[mb.FIGCAPTION,gb.FIGCAPTION],[mb.FIGURE,gb.FIGURE],[mb.FONT,gb.FONT],[mb.FOOTER,gb.FOOTER],[mb.FOREIGN_OBJECT,gb.FOREIGN_OBJECT],[mb.FORM,gb.FORM],[mb.FRAME,gb.FRAME],[mb.FRAMESET,gb.FRAMESET],[mb.H1,gb.H1],[mb.H2,gb.H2],[mb.H3,gb.H3],[mb.H4,gb.H4],[mb.H5,gb.H5],[mb.H6,gb.H6],[mb.HEAD,gb.HEAD],[mb.HEADER,gb.HEADER],[mb.HGROUP,gb.HGROUP],[mb.HR,gb.HR],[mb.HTML,gb.HTML],[mb.I,gb.I],[mb.IMG,gb.IMG],[mb.IMAGE,gb.IMAGE],[mb.INPUT,gb.INPUT],[mb.IFRAME,gb.IFRAME],[mb.KEYGEN,gb.KEYGEN],[mb.LABEL,gb.LABEL],[mb.LI,gb.LI],[mb.LINK,gb.LINK],[mb.LISTING,gb.LISTING],[mb.MAIN,gb.MAIN],[mb.MALIGNMARK,gb.MALIGNMARK],[mb.MARQUEE,gb.MARQUEE],[mb.MATH,gb.MATH],[mb.MENU,gb.MENU],[mb.META,gb.META],[mb.MGLYPH,gb.MGLYPH],[mb.MI,gb.MI],[mb.MO,gb.MO],[mb.MN,gb.MN],[mb.MS,gb.MS],[mb.MTEXT,gb.MTEXT],[mb.NAV,gb.NAV],[mb.NOBR,gb.NOBR],[mb.NOFRAMES,gb.NOFRAMES],[mb.NOEMBED,gb.NOEMBED],[mb.NOSCRIPT,gb.NOSCRIPT],[mb.OBJECT,gb.OBJECT],[mb.OL,gb.OL],[mb.OPTGROUP,gb.OPTGROUP],[mb.OPTION,gb.OPTION],[mb.P,gb.P],[mb.PARAM,gb.PARAM],[mb.PLAINTEXT,gb.PLAINTEXT],[mb.PRE,gb.PRE],[mb.RB,gb.RB],[mb.RP,gb.RP],[mb.RT,gb.RT],[mb.RTC,gb.RTC],[mb.RUBY,gb.RUBY],[mb.S,gb.S],[mb.SCRIPT,gb.SCRIPT],[mb.SECTION,gb.SECTION],[mb.SELECT,gb.SELECT],[mb.SOURCE,gb.SOURCE],[mb.SMALL,gb.SMALL],[mb.SPAN,gb.SPAN],[mb.STRIKE,gb.STRIKE],[mb.STRONG,gb.STRONG],[mb.STYLE,gb.STYLE],[mb.SUB,gb.SUB],[mb.SUMMARY,gb.SUMMARY],[mb.SUP,gb.SUP],[mb.TABLE,gb.TABLE],[mb.TBODY,gb.TBODY],[mb.TEMPLATE,gb.TEMPLATE],[mb.TEXTAREA,gb.TEXTAREA],[mb.TFOOT,gb.TFOOT],[mb.TD,gb.TD],[mb.TH,gb.TH],[mb.THEAD,gb.THEAD],[mb.TITLE,gb.TITLE],[mb.TR,gb.TR],[mb.TRACK,gb.TRACK],[mb.TT,gb.TT],[mb.U,gb.U],[mb.UL,gb.UL],[mb.SVG,gb.SVG],[mb.VAR,gb.VAR],[mb.WBR,gb.WBR],[mb.XMP,gb.XMP]]);function _b(e){var t;return null!==(t=yb.get(e))&&void 0!==t?t:gb.UNKNOWN}const Eb=gb,bb={[db.HTML]:new Set([Eb.ADDRESS,Eb.APPLET,Eb.AREA,Eb.ARTICLE,Eb.ASIDE,Eb.BASE,Eb.BASEFONT,Eb.BGSOUND,Eb.BLOCKQUOTE,Eb.BODY,Eb.BR,Eb.BUTTON,Eb.CAPTION,Eb.CENTER,Eb.COL,Eb.COLGROUP,Eb.DD,Eb.DETAILS,Eb.DIR,Eb.DIV,Eb.DL,Eb.DT,Eb.EMBED,Eb.FIELDSET,Eb.FIGCAPTION,Eb.FIGURE,Eb.FOOTER,Eb.FORM,Eb.FRAME,Eb.FRAMESET,Eb.H1,Eb.H2,Eb.H3,Eb.H4,Eb.H5,Eb.H6,Eb.HEAD,Eb.HEADER,Eb.HGROUP,Eb.HR,Eb.HTML,Eb.IFRAME,Eb.IMG,Eb.INPUT,Eb.LI,Eb.LINK,Eb.LISTING,Eb.MAIN,Eb.MARQUEE,Eb.MENU,Eb.META,Eb.NAV,Eb.NOEMBED,Eb.NOFRAMES,Eb.NOSCRIPT,Eb.OBJECT,Eb.OL,Eb.P,Eb.PARAM,Eb.PLAINTEXT,Eb.PRE,Eb.SCRIPT,Eb.SECTION,Eb.SELECT,Eb.SOURCE,Eb.STYLE,Eb.SUMMARY,Eb.TABLE,Eb.TBODY,Eb.TD,Eb.TEMPLATE,Eb.TEXTAREA,Eb.TFOOT,Eb.TH,Eb.THEAD,Eb.TITLE,Eb.TR,Eb.TRACK,Eb.UL,Eb.WBR,Eb.XMP]),[db.MATHML]:new Set([Eb.MI,Eb.MO,Eb.MN,Eb.MS,Eb.MTEXT,Eb.ANNOTATION_XML]),[db.SVG]:new Set([Eb.TITLE,Eb.FOREIGN_OBJECT,Eb.DESC]),[db.XLINK]:new Set,[db.XML]:new Set,[db.XMLNS]:new Set};function Tb(e){return e===Eb.H1||e===Eb.H2||e===Eb.H3||e===Eb.H4||e===Eb.H5||e===Eb.H6}const vb=new Set([mb.STYLE,mb.SCRIPT,mb.XMP,mb.IFRAME,mb.NOEMBED,mb.NOFRAMES,mb.PLAINTEXT]);const xb=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Sb;!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"}(Sb||(Sb={}));const Ab={DATA:Sb.DATA,RCDATA:Sb.RCDATA,RAWTEXT:Sb.RAWTEXT,SCRIPT_DATA:Sb.SCRIPT_DATA,PLAINTEXT:Sb.PLAINTEXT,CDATA_SECTION:Sb.CDATA_SECTION};function wb(e){return e>=BE.DIGIT_0&&e<=BE.DIGIT_9}function Cb(e){return e>=BE.LATIN_CAPITAL_A&&e<=BE.LATIN_CAPITAL_Z}function Nb(e){return function(e){return e>=BE.LATIN_SMALL_A&&e<=BE.LATIN_SMALL_Z}(e)||Cb(e)}function Ib(e){return Nb(e)||wb(e)}function kb(e){return e>=BE.LATIN_CAPITAL_A&&e<=BE.LATIN_CAPITAL_F}function Ob(e){return e>=BE.LATIN_SMALL_A&&e<=BE.LATIN_SMALL_F}function Db(e){return e+32}function Rb(e){return e===BE.SPACE||e===BE.LINE_FEED||e===BE.TABULATION||e===BE.FORM_FEED}function Lb(e){return Rb(e)||e===BE.SOLIDUS||e===BE.GREATER_THAN_SIGN}let Pb=class{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Sb.DATA,this.returnState=Sb.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new KE(t),this.currentLocation=this.getCurrentLocation(-1)}_err(e){var t,n;null===(n=(t=this.handler).onParseError)||void 0===n||n.call(t,this.preprocessor.getError(e))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==n||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}_reconsumeInState(e,t){this.state=e,this._callState(t)}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:ZE.START_TAG,tagName:"",tagID:gb.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:ZE.END_TAG,tagName:"",tagID:gb.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:ZE.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:ZE.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const n=this.currentToken;if(null===$E(n,this.currentAttr.name)){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){(null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(QE.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=_b(e.tagName),e.type===ZE.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(QE.endTagWithAttributes),e.selfClosing&&this._err(QE.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case ZE.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case ZE.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case ZE.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:ZE.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=Rb(e)?ZE.WHITESPACE_CHARACTER:e===BE.NULL?ZE.NULL_CHARACTER:ZE.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(ZE.CHARACTER,e)}_matchNamedCharacterReference(e){let t=null,n=0,s=!1;for(let a=0,r=JE[0];a>=0&&(a=pb(JE,r,a+1,e),!(a<0));e=this._consume()){n+=1,r=JE[a];const o=r&ib.VALUE_LENGTH;if(o){const r=(o>>14)-1;if(e!==BE.SEMICOLON&&this._isCharacterReferenceInAttribute()&&((i=this.preprocessor.peek(1))===BE.EQUALS_SIGN||Ib(i))?(t=[BE.AMPERSAND],a+=r):(t=0===r?[JE[a]&~ib.VALUE_LENGTH]:1===r?[JE[++a]]:[JE[++a],JE[++a]],n=0,s=e!==BE.SEMICOLON),0===r){this._consume();break}}}var i;return this._unconsume(n),s&&!this.preprocessor.endOfChunkHit&&this._err(QE.missingSemicolonAfterCharacterReference),this._unconsume(1),t}_isCharacterReferenceInAttribute(){return this.returnState===Sb.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Sb.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Sb.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case Sb.DATA:this._stateData(e);break;case Sb.RCDATA:this._stateRcdata(e);break;case Sb.RAWTEXT:this._stateRawtext(e);break;case Sb.SCRIPT_DATA:this._stateScriptData(e);break;case Sb.PLAINTEXT:this._statePlaintext(e);break;case Sb.TAG_OPEN:this._stateTagOpen(e);break;case Sb.END_TAG_OPEN:this._stateEndTagOpen(e);break;case Sb.TAG_NAME:this._stateTagName(e);break;case Sb.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case Sb.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case Sb.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case Sb.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case Sb.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case Sb.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case Sb.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case Sb.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case Sb.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case Sb.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case Sb.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case Sb.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case Sb.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case Sb.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case Sb.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case Sb.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case Sb.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case Sb.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case Sb.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case Sb.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case Sb.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case Sb.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case Sb.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case Sb.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case Sb.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case Sb.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case Sb.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case Sb.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case Sb.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case Sb.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case Sb.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case Sb.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case Sb.BOGUS_COMMENT:this._stateBogusComment(e);break;case Sb.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case Sb.COMMENT_START:this._stateCommentStart(e);break;case Sb.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case Sb.COMMENT:this._stateComment(e);break;case Sb.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case Sb.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case Sb.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case Sb.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case Sb.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case Sb.COMMENT_END:this._stateCommentEnd(e);break;case Sb.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case Sb.DOCTYPE:this._stateDoctype(e);break;case Sb.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case Sb.DOCTYPE_NAME:this._stateDoctypeName(e);break;case Sb.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case Sb.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case Sb.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case Sb.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case Sb.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case Sb.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case Sb.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case Sb.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case Sb.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case Sb.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case Sb.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case Sb.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case Sb.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case Sb.CDATA_SECTION:this._stateCdataSection(e);break;case Sb.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case Sb.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case Sb.CHARACTER_REFERENCE:this._stateCharacterReference(e);break;case Sb.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(e);break;case Sb.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;case Sb.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(e);break;case Sb.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(e);break;case Sb.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(e);break;case Sb.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(e);break;case Sb.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(e);break;default:throw new Error("Unknown state")}}_stateData(e){switch(e){case BE.LESS_THAN_SIGN:this.state=Sb.TAG_OPEN;break;case BE.AMPERSAND:this.returnState=Sb.DATA,this.state=Sb.CHARACTER_REFERENCE;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this._emitCodePoint(e);break;case BE.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case BE.AMPERSAND:this.returnState=Sb.RCDATA,this.state=Sb.CHARACTER_REFERENCE;break;case BE.LESS_THAN_SIGN:this.state=Sb.RCDATA_LESS_THAN_SIGN;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this._emitChars(FE);break;case BE.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case BE.LESS_THAN_SIGN:this.state=Sb.RAWTEXT_LESS_THAN_SIGN;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this._emitChars(FE);break;case BE.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case BE.LESS_THAN_SIGN:this.state=Sb.SCRIPT_DATA_LESS_THAN_SIGN;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this._emitChars(FE);break;case BE.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case BE.NULL:this._err(QE.unexpectedNullCharacter),this._emitChars(FE);break;case BE.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Nb(e))this._createStartTagToken(),this.state=Sb.TAG_NAME,this._stateTagName(e);else switch(e){case BE.EXCLAMATION_MARK:this.state=Sb.MARKUP_DECLARATION_OPEN;break;case BE.SOLIDUS:this.state=Sb.END_TAG_OPEN;break;case BE.QUESTION_MARK:this._err(QE.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Sb.BOGUS_COMMENT,this._stateBogusComment(e);break;case BE.EOF:this._err(QE.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(QE.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Sb.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Nb(e))this._createEndTagToken(),this.state=Sb.TAG_NAME,this._stateTagName(e);else switch(e){case BE.GREATER_THAN_SIGN:this._err(QE.missingEndTagName),this.state=Sb.DATA;break;case BE.EOF:this._err(QE.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(QE.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Sb.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:this.state=Sb.BEFORE_ATTRIBUTE_NAME;break;case BE.SOLIDUS:this.state=Sb.SELF_CLOSING_START_TAG;break;case BE.GREATER_THAN_SIGN:this.state=Sb.DATA,this.emitCurrentTagToken();break;case BE.NULL:this._err(QE.unexpectedNullCharacter),t.tagName+=FE;break;case BE.EOF:this._err(QE.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(Cb(e)?Db(e):e)}}_stateRcdataLessThanSign(e){e===BE.SOLIDUS?this.state=Sb.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Sb.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Nb(e)?(this.state=Sb.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=Sb.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();this.currentToken.tagName=this.lastStartTagName;switch(this.preprocessor.peek(this.lastStartTagName.length)){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Sb.BEFORE_ATTRIBUTE_NAME,!1;case BE.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Sb.SELF_CLOSING_START_TAG,!1;case BE.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Sb.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Sb.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===BE.SOLIDUS?this.state=Sb.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Sb.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Nb(e)?(this.state=Sb.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=Sb.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Sb.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case BE.SOLIDUS:this.state=Sb.SCRIPT_DATA_END_TAG_OPEN;break;case BE.EXCLAMATION_MARK:this.state=Sb.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=Sb.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Nb(e)?(this.state=Sb.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=Sb.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Sb.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===BE.HYPHEN_MINUS?(this.state=Sb.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Sb.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===BE.HYPHEN_MINUS?(this.state=Sb.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Sb.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case BE.HYPHEN_MINUS:this.state=Sb.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case BE.LESS_THAN_SIGN:this.state=Sb.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this._emitChars(FE);break;case BE.EOF:this._err(QE.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case BE.HYPHEN_MINUS:this.state=Sb.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case BE.LESS_THAN_SIGN:this.state=Sb.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this.state=Sb.SCRIPT_DATA_ESCAPED,this._emitChars(FE);break;case BE.EOF:this._err(QE.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=Sb.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case BE.HYPHEN_MINUS:this._emitChars("-");break;case BE.LESS_THAN_SIGN:this.state=Sb.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case BE.GREATER_THAN_SIGN:this.state=Sb.SCRIPT_DATA,this._emitChars(">");break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this.state=Sb.SCRIPT_DATA_ESCAPED,this._emitChars(FE);break;case BE.EOF:this._err(QE.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=Sb.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===BE.SOLIDUS?this.state=Sb.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Nb(e)?(this._emitChars("<"),this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=Sb.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Nb(e)?(this.state=Sb.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=Sb.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Sb.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(GE,!1)&&Lb(this.preprocessor.peek(GE.length))){this._emitCodePoint(e);for(let e=0;e<GE.length;e++)this._emitCodePoint(this._consume());this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Sb.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case BE.HYPHEN_MINUS:this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case BE.LESS_THAN_SIGN:this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this._emitChars(FE);break;case BE.EOF:this._err(QE.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case BE.HYPHEN_MINUS:this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case BE.LESS_THAN_SIGN:this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(FE);break;case BE.EOF:this._err(QE.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case BE.HYPHEN_MINUS:this._emitChars("-");break;case BE.LESS_THAN_SIGN:this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case BE.GREATER_THAN_SIGN:this.state=Sb.SCRIPT_DATA,this._emitChars(">");break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(FE);break;case BE.EOF:this._err(QE.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===BE.SOLIDUS?(this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(GE,!1)&&Lb(this.preprocessor.peek(GE.length))){this._emitCodePoint(e);for(let e=0;e<GE.length;e++)this._emitCodePoint(this._consume());this.state=Sb.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Sb.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.SOLIDUS:case BE.GREATER_THAN_SIGN:case BE.EOF:this.state=Sb.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case BE.EQUALS_SIGN:this._err(QE.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Sb.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=Sb.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:case BE.SOLIDUS:case BE.GREATER_THAN_SIGN:case BE.EOF:this._leaveAttrName(),this.state=Sb.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case BE.EQUALS_SIGN:this._leaveAttrName(),this.state=Sb.BEFORE_ATTRIBUTE_VALUE;break;case BE.QUOTATION_MARK:case BE.APOSTROPHE:case BE.LESS_THAN_SIGN:this._err(QE.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this.currentAttr.name+=FE;break;default:this.currentAttr.name+=String.fromCodePoint(Cb(e)?Db(e):e)}}_stateAfterAttributeName(e){switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.SOLIDUS:this.state=Sb.SELF_CLOSING_START_TAG;break;case BE.EQUALS_SIGN:this.state=Sb.BEFORE_ATTRIBUTE_VALUE;break;case BE.GREATER_THAN_SIGN:this.state=Sb.DATA,this.emitCurrentTagToken();break;case BE.EOF:this._err(QE.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=Sb.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.QUOTATION_MARK:this.state=Sb.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case BE.APOSTROPHE:this.state=Sb.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case BE.GREATER_THAN_SIGN:this._err(QE.missingAttributeValue),this.state=Sb.DATA,this.emitCurrentTagToken();break;default:this.state=Sb.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case BE.QUOTATION_MARK:this.state=Sb.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case BE.AMPERSAND:this.returnState=Sb.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Sb.CHARACTER_REFERENCE;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this.currentAttr.value+=FE;break;case BE.EOF:this._err(QE.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case BE.APOSTROPHE:this.state=Sb.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case BE.AMPERSAND:this.returnState=Sb.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Sb.CHARACTER_REFERENCE;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this.currentAttr.value+=FE;break;case BE.EOF:this._err(QE.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:this._leaveAttrValue(),this.state=Sb.BEFORE_ATTRIBUTE_NAME;break;case BE.AMPERSAND:this.returnState=Sb.ATTRIBUTE_VALUE_UNQUOTED,this.state=Sb.CHARACTER_REFERENCE;break;case BE.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=Sb.DATA,this.emitCurrentTagToken();break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this.currentAttr.value+=FE;break;case BE.QUOTATION_MARK:case BE.APOSTROPHE:case BE.LESS_THAN_SIGN:case BE.EQUALS_SIGN:case BE.GRAVE_ACCENT:this._err(QE.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case BE.EOF:this._err(QE.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:this._leaveAttrValue(),this.state=Sb.BEFORE_ATTRIBUTE_NAME;break;case BE.SOLIDUS:this._leaveAttrValue(),this.state=Sb.SELF_CLOSING_START_TAG;break;case BE.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=Sb.DATA,this.emitCurrentTagToken();break;case BE.EOF:this._err(QE.eofInTag),this._emitEOFToken();break;default:this._err(QE.missingWhitespaceBetweenAttributes),this.state=Sb.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case BE.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=Sb.DATA,this.emitCurrentTagToken();break;case BE.EOF:this._err(QE.eofInTag),this._emitEOFToken();break;default:this._err(QE.unexpectedSolidusInTag),this.state=Sb.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case BE.GREATER_THAN_SIGN:this.state=Sb.DATA,this.emitCurrentComment(t);break;case BE.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case BE.NULL:this._err(QE.unexpectedNullCharacter),t.data+=FE;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(UE,!0)?(this._createCommentToken(UE.length+1),this.state=Sb.COMMENT_START):this._consumeSequenceIfMatch(jE,!1)?(this.currentLocation=this.getCurrentLocation(jE.length+1),this.state=Sb.DOCTYPE):this._consumeSequenceIfMatch(HE,!0)?this.inForeignNode?this.state=Sb.CDATA_SECTION:(this._err(QE.cdataInHtmlContent),this._createCommentToken(HE.length+1),this.currentToken.data="[CDATA[",this.state=Sb.BOGUS_COMMENT):this._ensureHibernation()||(this._err(QE.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Sb.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case BE.HYPHEN_MINUS:this.state=Sb.COMMENT_START_DASH;break;case BE.GREATER_THAN_SIGN:{this._err(QE.abruptClosingOfEmptyComment),this.state=Sb.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=Sb.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case BE.HYPHEN_MINUS:this.state=Sb.COMMENT_END;break;case BE.GREATER_THAN_SIGN:this._err(QE.abruptClosingOfEmptyComment),this.state=Sb.DATA,this.emitCurrentComment(t);break;case BE.EOF:this._err(QE.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=Sb.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case BE.HYPHEN_MINUS:this.state=Sb.COMMENT_END_DASH;break;case BE.LESS_THAN_SIGN:t.data+="<",this.state=Sb.COMMENT_LESS_THAN_SIGN;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),t.data+=FE;break;case BE.EOF:this._err(QE.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case BE.EXCLAMATION_MARK:t.data+="!",this.state=Sb.COMMENT_LESS_THAN_SIGN_BANG;break;case BE.LESS_THAN_SIGN:t.data+="<";break;default:this.state=Sb.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===BE.HYPHEN_MINUS?this.state=Sb.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Sb.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===BE.HYPHEN_MINUS?this.state=Sb.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Sb.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==BE.GREATER_THAN_SIGN&&e!==BE.EOF&&this._err(QE.nestedComment),this.state=Sb.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case BE.HYPHEN_MINUS:this.state=Sb.COMMENT_END;break;case BE.EOF:this._err(QE.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=Sb.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case BE.GREATER_THAN_SIGN:this.state=Sb.DATA,this.emitCurrentComment(t);break;case BE.EXCLAMATION_MARK:this.state=Sb.COMMENT_END_BANG;break;case BE.HYPHEN_MINUS:t.data+="-";break;case BE.EOF:this._err(QE.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=Sb.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case BE.HYPHEN_MINUS:t.data+="--!",this.state=Sb.COMMENT_END_DASH;break;case BE.GREATER_THAN_SIGN:this._err(QE.incorrectlyClosedComment),this.state=Sb.DATA,this.emitCurrentComment(t);break;case BE.EOF:this._err(QE.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=Sb.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:this.state=Sb.BEFORE_DOCTYPE_NAME;break;case BE.GREATER_THAN_SIGN:this.state=Sb.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case BE.EOF:{this._err(QE.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(QE.missingWhitespaceBeforeDoctypeName),this.state=Sb.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Cb(e))this._createDoctypeToken(String.fromCharCode(Db(e))),this.state=Sb.DOCTYPE_NAME;else switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.NULL:this._err(QE.unexpectedNullCharacter),this._createDoctypeToken(FE),this.state=Sb.DOCTYPE_NAME;break;case BE.GREATER_THAN_SIGN:{this._err(QE.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=Sb.DATA;break}case BE.EOF:{this._err(QE.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=Sb.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:this.state=Sb.AFTER_DOCTYPE_NAME;break;case BE.GREATER_THAN_SIGN:this.state=Sb.DATA,this.emitCurrentDoctype(t);break;case BE.NULL:this._err(QE.unexpectedNullCharacter),t.name+=FE;break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(Cb(e)?Db(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.GREATER_THAN_SIGN:this.state=Sb.DATA,this.emitCurrentDoctype(t);break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(qE,!1)?this.state=Sb.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(YE,!1)?this.state=Sb.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(QE.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=Sb.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:this.state=Sb.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case BE.QUOTATION_MARK:this._err(QE.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=Sb.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case BE.APOSTROPHE:this._err(QE.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=Sb.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case BE.GREATER_THAN_SIGN:this._err(QE.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=Sb.DATA,this.emitCurrentDoctype(t);break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(QE.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=Sb.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.QUOTATION_MARK:t.publicId="",this.state=Sb.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case BE.APOSTROPHE:t.publicId="",this.state=Sb.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case BE.GREATER_THAN_SIGN:this._err(QE.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=Sb.DATA,this.emitCurrentDoctype(t);break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(QE.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=Sb.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case BE.QUOTATION_MARK:this.state=Sb.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),t.publicId+=FE;break;case BE.GREATER_THAN_SIGN:this._err(QE.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=Sb.DATA;break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case BE.APOSTROPHE:this.state=Sb.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),t.publicId+=FE;break;case BE.GREATER_THAN_SIGN:this._err(QE.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=Sb.DATA;break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:this.state=Sb.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case BE.GREATER_THAN_SIGN:this.state=Sb.DATA,this.emitCurrentDoctype(t);break;case BE.QUOTATION_MARK:this._err(QE.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=Sb.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case BE.APOSTROPHE:this._err(QE.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=Sb.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(QE.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Sb.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=Sb.DATA;break;case BE.QUOTATION_MARK:t.systemId="",this.state=Sb.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case BE.APOSTROPHE:t.systemId="",this.state=Sb.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(QE.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Sb.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:this.state=Sb.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case BE.QUOTATION_MARK:this._err(QE.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=Sb.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case BE.APOSTROPHE:this._err(QE.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=Sb.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case BE.GREATER_THAN_SIGN:this._err(QE.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Sb.DATA,this.emitCurrentDoctype(t);break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(QE.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Sb.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.QUOTATION_MARK:t.systemId="",this.state=Sb.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case BE.APOSTROPHE:t.systemId="",this.state=Sb.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case BE.GREATER_THAN_SIGN:this._err(QE.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Sb.DATA,this.emitCurrentDoctype(t);break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(QE.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Sb.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case BE.QUOTATION_MARK:this.state=Sb.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),t.systemId+=FE;break;case BE.GREATER_THAN_SIGN:this._err(QE.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=Sb.DATA;break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case BE.APOSTROPHE:this.state=Sb.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case BE.NULL:this._err(QE.unexpectedNullCharacter),t.systemId+=FE;break;case BE.GREATER_THAN_SIGN:this._err(QE.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=Sb.DATA;break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case BE.SPACE:case BE.LINE_FEED:case BE.TABULATION:case BE.FORM_FEED:break;case BE.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=Sb.DATA;break;case BE.EOF:this._err(QE.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(QE.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Sb.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case BE.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=Sb.DATA;break;case BE.NULL:this._err(QE.unexpectedNullCharacter);break;case BE.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case BE.RIGHT_SQUARE_BRACKET:this.state=Sb.CDATA_SECTION_BRACKET;break;case BE.EOF:this._err(QE.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===BE.RIGHT_SQUARE_BRACKET?this.state=Sb.CDATA_SECTION_END:(this._emitChars("]"),this.state=Sb.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case BE.GREATER_THAN_SIGN:this.state=Sb.DATA;break;case BE.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=Sb.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(e){e===BE.NUMBER_SIGN?this.state=Sb.NUMERIC_CHARACTER_REFERENCE:Ib(e)?(this.state=Sb.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(BE.AMPERSAND),this._reconsumeInState(this.returnState,e))}_stateNamedCharacterReference(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation());else if(t){for(let e=0;e<t.length;e++)this._flushCodePointConsumedAsCharacterReference(t[e]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(BE.AMPERSAND),this.state=Sb.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(e){Ib(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===BE.SEMICOLON&&this._err(QE.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}_stateNumericCharacterReference(e){this.charRefCode=0,e===BE.LATIN_SMALL_X||e===BE.LATIN_CAPITAL_X?this.state=Sb.HEXADEMICAL_CHARACTER_REFERENCE_START:wb(e)?(this.state=Sb.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(QE.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(BE.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(BE.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}_stateHexademicalCharacterReferenceStart(e){!function(e){return wb(e)||kb(e)||Ob(e)}(e)?(this._err(QE.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(BE.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(BE.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState):(this.state=Sb.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e))}_stateHexademicalCharacterReference(e){kb(e)?this.charRefCode=16*this.charRefCode+e-55:Ob(e)?this.charRefCode=16*this.charRefCode+e-87:wb(e)?this.charRefCode=16*this.charRefCode+e-48:e===BE.SEMICOLON?this.state=Sb.NUMERIC_CHARACTER_REFERENCE_END:(this._err(QE.missingSemicolonAfterCharacterReference),this.state=Sb.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateDecimalCharacterReference(e){wb(e)?this.charRefCode=10*this.charRefCode+e-48:e===BE.SEMICOLON?this.state=Sb.NUMERIC_CHARACTER_REFERENCE_END:(this._err(QE.missingSemicolonAfterCharacterReference),this.state=Sb.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateNumericCharacterReferenceEnd(e){if(this.charRefCode===BE.NULL)this._err(QE.nullCharacterReference),this.charRefCode=BE.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(QE.characterReferenceOutsideUnicodeRange),this.charRefCode=BE.REPLACEMENT_CHARACTER;else if(zE(this.charRefCode))this._err(QE.surrogateCharacterReference),this.charRefCode=BE.REPLACEMENT_CHARACTER;else if(WE(this.charRefCode))this._err(QE.noncharacterCharacterReference);else if(VE(this.charRefCode)||this.charRefCode===BE.CARRIAGE_RETURN){this._err(QE.controlCharacterReference);const e=xb.get(this.charRefCode);void 0!==e&&(this.charRefCode=e)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}};const Mb=new Set([gb.DD,gb.DT,gb.LI,gb.OPTGROUP,gb.OPTION,gb.P,gb.RB,gb.RP,gb.RT,gb.RTC]),Fb=new Set([...Mb,gb.CAPTION,gb.COLGROUP,gb.TBODY,gb.TD,gb.TFOOT,gb.TH,gb.THEAD,gb.TR]),Bb=new Map([[gb.APPLET,db.HTML],[gb.CAPTION,db.HTML],[gb.HTML,db.HTML],[gb.MARQUEE,db.HTML],[gb.OBJECT,db.HTML],[gb.TABLE,db.HTML],[gb.TD,db.HTML],[gb.TEMPLATE,db.HTML],[gb.TH,db.HTML],[gb.ANNOTATION_XML,db.MATHML],[gb.MI,db.MATHML],[gb.MN,db.MATHML],[gb.MO,db.MATHML],[gb.MS,db.MATHML],[gb.MTEXT,db.MATHML],[gb.DESC,db.SVG],[gb.FOREIGN_OBJECT,db.SVG],[gb.TITLE,db.SVG]]),Ub=[gb.H1,gb.H2,gb.H3,gb.H4,gb.H5,gb.H6],Hb=[gb.TR,gb.TEMPLATE,gb.HTML],jb=[gb.TBODY,gb.TFOOT,gb.THEAD,gb.TEMPLATE,gb.HTML],Gb=[gb.TABLE,gb.TEMPLATE,gb.HTML],qb=[gb.TD,gb.TH];class Yb{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,n){this.treeAdapter=t,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=gb.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===gb.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===db.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}insertAfter(e,t,n){const s=this._indexOf(e)+1;this.items.splice(s,0,t),this.tagIDs.splice(s,0,n),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==db.HTML);this.shortenToLength(t<0?0:t)}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(t<0?0:t)}popUntilPopped(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n<0?0:n)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Ub,db.HTML)}popUntilTableCellPopped(){this.popUntilPopped(qb,db.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let n=this.stackTop;n>=0;n--)if(e.includes(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return-1}clearBackTo(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(Gb,db.HTML)}clearBackToTableBodyContext(){this.clearBackTo(jb,db.HTML)}clearBackToTableRowContext(){this.clearBackTo(Hb,db.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===gb.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===gb.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],s=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&s===db.HTML)return!0;if(Bb.get(n)===s)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e],n=this.treeAdapter.getNamespaceURI(this.items[e]);if(Tb(t)&&n===db.HTML)return!0;if(Bb.get(t)===n)return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],s=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&s===db.HTML)return!0;if((n===gb.UL||n===gb.OL)&&s===db.HTML||Bb.get(n)===s)return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],s=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&s===db.HTML)return!0;if(n===gb.BUTTON&&s===db.HTML||Bb.get(n)===s)return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===db.HTML){if(n===e)return!0;if(n===gb.TABLE||n===gb.TEMPLATE||n===gb.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===db.HTML){if(t===gb.TBODY||t===gb.THEAD||t===gb.TFOOT)return!0;if(t===gb.TABLE||t===gb.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===db.HTML){if(n===e)return!0;if(n!==gb.OPTION&&n!==gb.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Mb.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Fb.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&Fb.has(this.currentTagId);)this.pop()}}var zb;!function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"}(zb=zb||(zb={}));const Vb={type:zb.Marker};class Wb{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const n=[],s=t.length,i=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let e=0;e<this.entries.length;e++){const t=this.entries[e];if(t.type===zb.Marker)break;const{element:r}=t;if(this.treeAdapter.getTagName(r)===i&&this.treeAdapter.getNamespaceURI(r)===a){const t=this.treeAdapter.getAttrList(r);t.length===s&&n.push({idx:e,attrs:t})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<3)return;const t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<3)return;const s=new Map(t.map((e=>[e.name,e.value])));let i=0;for(let e=0;e<n.length;e++){const t=n[e];t.attrs.every((e=>s.get(e.name)===e.value))&&(i+=1,i>=3&&this.entries.splice(t.idx,1))}}insertMarker(){this.entries.unshift(Vb)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:zb.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:zb.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);t>=0&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(Vb);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const t=this.entries.find((t=>t.type===zb.Marker||this.treeAdapter.getTagName(t.element)===e));return t&&t.type===zb.Element?t:null}getElementEntry(e){return this.entries.find((t=>t.type===zb.Element&&t.element===e))}}function Qb(e){return{nodeName:"#text",value:e,parentNode:null}}const Kb={createDocument:()=>({nodeName:"#document",mode:fb.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const s=e.childNodes.indexOf(n);e.childNodes.splice(s,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,n,s){const i=e.childNodes.find((e=>"#documentType"===e.nodeName));if(i)i.name=t,i.publicId=n,i.systemId=s;else{const i={nodeName:"#documentType",name:t,publicId:n,systemId:s,parentNode:null};Kb.appendChild(e,i)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Kb.isTextNode(n))return void(n.value+=t)}Kb.appendChild(e,Qb(t))},insertTextBefore(e,t,n){const s=e.childNodes[e.childNodes.indexOf(n)-1];s&&Kb.isTextNode(s)?s.value+=t:Kb.insertBefore(e,Qb(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map((e=>e.name)));for(let s=0;s<t.length;s++)n.has(t[s].name)||e.attrs.push(t[s])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Zb="html",$b="about:legacy-compat",Xb="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Jb=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],eT=[...Jb,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],tT=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),nT=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],sT=[...nT,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function iT(e,t){return t.some((t=>e.startsWith(t)))}const aT={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},rT="definitionurl",oT="definitionURL",cT=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),lT=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:db.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:db.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:db.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:db.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:db.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:db.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:db.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:db.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:db.XML}],["xml:space",{prefix:"xml",name:"space",namespace:db.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:db.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:db.XMLNS}]]),uT=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),pT=new Set([gb.B,gb.BIG,gb.BLOCKQUOTE,gb.BODY,gb.BR,gb.CENTER,gb.CODE,gb.DD,gb.DIV,gb.DL,gb.DT,gb.EM,gb.EMBED,gb.H1,gb.H2,gb.H3,gb.H4,gb.H5,gb.H6,gb.HEAD,gb.HR,gb.I,gb.IMG,gb.LI,gb.LISTING,gb.MENU,gb.META,gb.NOBR,gb.OL,gb.P,gb.PRE,gb.RUBY,gb.S,gb.SMALL,gb.SPAN,gb.STRONG,gb.STRIKE,gb.SUB,gb.SUP,gb.TABLE,gb.TT,gb.U,gb.UL,gb.VAR]);function dT(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===rT){e.attrs[t].name=oT;break}}function hT(e){for(let t=0;t<e.attrs.length;t++){const n=cT.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}}function fT(e){for(let t=0;t<e.attrs.length;t++){const n=lT.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function mT(e,t,n,s){return(!s||s===db.HTML)&&function(e,t,n){if(t===db.MATHML&&e===gb.ANNOTATION_XML)for(let e=0;e<n.length;e++)if(n[e].name===hb.ENCODING){const t=n[e].value.toLowerCase();return t===aT.TEXT_HTML||t===aT.APPLICATION_XML}return t===db.SVG&&(e===gb.FOREIGN_OBJECT||e===gb.DESC||e===gb.TITLE)}(e,t,n)||(!s||s===db.MATHML)&&function(e,t){return t===db.MATHML&&(e===gb.MI||e===gb.MO||e===gb.MN||e===gb.MS||e===gb.MTEXT)}(e,t)}const gT="hidden",yT=8,_T=3;var ET;!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(ET||(ET={}));const bT={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},TT=new Set([gb.TABLE,gb.TBODY,gb.TFOOT,gb.THEAD,gb.TR]),vT={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Kb,onParseError:null};let xT=class{constructor(e,t,n=null,s=null){this.fragmentContext=n,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=ET.INITIAL,this.originalInsertionMode=ET.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...vT,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=t?t:this.treeAdapter.createDocument(),this.tokenizer=new Pb(this.options,this),this.activeFormattingElements=new Wb(this.treeAdapter),this.fragmentContextID=n?_b(this.treeAdapter.getTagName(n)):gb.UNKNOWN,this._setContextModes(null!=n?n:this.document,this.fragmentContextID),this.openElements=new Yb(this.document,this.treeAdapter,this)}static parse(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){const n={...vT,...t};null!=e||(e=n.treeAdapter.createElement(mb.TEMPLATE,db.HTML,[]));const s=n.treeAdapter.createElement("documentmock",db.HTML,[]),i=new this(n,s,e);return i.fragmentContextID===gb.TEMPLATE&&i.tmplInsertionModeStack.unshift(ET.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var s;if(!this.onParseError)return;const i=null!==(s=e.location)&&void 0!==s?s:bT,a={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(a)}onItemPush(e,t,n){var s,i;null===(i=(s=this.treeAdapter).onItemPush)||void 0===i||i.call(s,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(s=(n=this.treeAdapter).onItemPop)||void 0===s||s.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===db.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,db.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=ET.TEXT}switchToPlaintextParsing(){this.insertionMode=ET.TEXT,this.originalInsertionMode=ET.IN_BODY,this.tokenizer.state=Ab.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===mb.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===db.HTML)switch(this.fragmentContextID){case gb.TITLE:case gb.TEXTAREA:this.tokenizer.state=Ab.RCDATA;break;case gb.STYLE:case gb.XMP:case gb.IFRAME:case gb.NOEMBED:case gb.NOFRAMES:case gb.NOSCRIPT:this.tokenizer.state=Ab.RAWTEXT;break;case gb.SCRIPT:this.tokenizer.state=Ab.SCRIPT_DATA;break;case gb.PLAINTEXT:this.tokenizer.state=Ab.PLAINTEXT}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,s),e.location){const t=this.treeAdapter.getChildNodes(this.document).find((e=>this.treeAdapter.isDocumentTypeNode(e)));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){const n=this.treeAdapter.createElement(e,db.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,db.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(mb.HTML,db.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,gb.HTML)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:n}=this._findFosterParentingLocation()),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(t),i=n?s.lastIndexOf(n):s.length,a=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:t,endCol:n,endOffset:s}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:t,endCol:n,endOffset:s})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,s=this.treeAdapter.getTagName(e),i=t.type===ZE.END_TAG&&s===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,n;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):({current:t,currentTagId:n}=this.openElements),(e.tagID!==gb.SVG||this.treeAdapter.getTagName(t)!==mb.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==db.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===gb.MGLYPH||e.tagID===gb.MALIGNMARK)&&!this._isIntegrationPoint(n,t,db.HTML))}_processToken(e){switch(e.type){case ZE.CHARACTER:this.onCharacter(e);break;case ZE.NULL_CHARACTER:this.onNullCharacter(e);break;case ZE.COMMENT:this.onComment(e);break;case ZE.DOCTYPE:this.onDoctype(e);break;case ZE.START_TAG:this._processStartTag(e);break;case ZE.END_TAG:this.onEndTag(e);break;case ZE.EOF:this.onEof(e);break;case ZE.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,n){return mT(e,this.treeAdapter.getNamespaceURI(t),this.treeAdapter.getAttrList(t),n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex((e=>e.type===zb.Marker||this.openElements.contains(e.element)));for(let n=t<0?e-1:t-1;n>=0;n--){const e=this.activeFormattingElements.entries[n];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ET.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(gb.P),this.openElements.popUntilTagNamePopped(gb.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case gb.TR:return void(this.insertionMode=ET.IN_ROW);case gb.TBODY:case gb.THEAD:case gb.TFOOT:return void(this.insertionMode=ET.IN_TABLE_BODY);case gb.CAPTION:return void(this.insertionMode=ET.IN_CAPTION);case gb.COLGROUP:return void(this.insertionMode=ET.IN_COLUMN_GROUP);case gb.TABLE:return void(this.insertionMode=ET.IN_TABLE);case gb.BODY:return void(this.insertionMode=ET.IN_BODY);case gb.FRAMESET:return void(this.insertionMode=ET.IN_FRAMESET);case gb.SELECT:return void this._resetInsertionModeForSelect(e);case gb.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case gb.HTML:return void(this.insertionMode=this.headElement?ET.AFTER_HEAD:ET.BEFORE_HEAD);case gb.TD:case gb.TH:if(e>0)return void(this.insertionMode=ET.IN_CELL);break;case gb.HEAD:if(e>0)return void(this.insertionMode=ET.IN_HEAD)}this.insertionMode=ET.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===gb.TEMPLATE)break;if(e===gb.TABLE)return void(this.insertionMode=ET.IN_SELECT_IN_TABLE)}this.insertionMode=ET.IN_SELECT}_isElementCausesFosterParenting(e){return TT.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case gb.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===db.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case gb.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const n=this.treeAdapter.getNamespaceURI(e);return bb[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e);else switch(this.insertionMode){case ET.INITIAL:RT(this,e);break;case ET.BEFORE_HTML:LT(this,e);break;case ET.BEFORE_HEAD:PT(this,e);break;case ET.IN_HEAD:BT(this,e);break;case ET.IN_HEAD_NO_SCRIPT:UT(this,e);break;case ET.AFTER_HEAD:HT(this,e);break;case ET.IN_BODY:case ET.IN_CAPTION:case ET.IN_CELL:case ET.IN_TEMPLATE:qT(this,e);break;case ET.TEXT:case ET.IN_SELECT:case ET.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case ET.IN_TABLE:case ET.IN_TABLE_BODY:case ET.IN_ROW:XT(this,e);break;case ET.IN_TABLE_TEXT:sv(this,e);break;case ET.IN_COLUMN_GROUP:ov(this,e);break;case ET.AFTER_BODY:gv(this,e);break;case ET.AFTER_AFTER_BODY:yv(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){t.chars=FE,e._insertCharacters(t)}(this,e);else switch(this.insertionMode){case ET.INITIAL:RT(this,e);break;case ET.BEFORE_HTML:LT(this,e);break;case ET.BEFORE_HEAD:PT(this,e);break;case ET.IN_HEAD:BT(this,e);break;case ET.IN_HEAD_NO_SCRIPT:UT(this,e);break;case ET.AFTER_HEAD:HT(this,e);break;case ET.TEXT:this._insertCharacters(e);break;case ET.IN_TABLE:case ET.IN_TABLE_BODY:case ET.IN_ROW:XT(this,e);break;case ET.IN_COLUMN_GROUP:ov(this,e);break;case ET.AFTER_BODY:gv(this,e);break;case ET.AFTER_AFTER_BODY:yv(this,e)}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)OT(this,e);else switch(this.insertionMode){case ET.INITIAL:case ET.BEFORE_HTML:case ET.BEFORE_HEAD:case ET.IN_HEAD:case ET.IN_HEAD_NO_SCRIPT:case ET.AFTER_HEAD:case ET.IN_BODY:case ET.IN_TABLE:case ET.IN_CAPTION:case ET.IN_COLUMN_GROUP:case ET.IN_TABLE_BODY:case ET.IN_ROW:case ET.IN_CELL:case ET.IN_SELECT:case ET.IN_SELECT_IN_TABLE:case ET.IN_TEMPLATE:case ET.IN_FRAMESET:case ET.AFTER_FRAMESET:OT(this,e);break;case ET.IN_TABLE_TEXT:iv(this,e);break;case ET.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case ET.AFTER_AFTER_BODY:case ET.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case ET.INITIAL:!function(e,t){e._setDocumentType(t);const n=t.forceQuirks?fb.QUIRKS:function(e){if(e.name!==Zb)return fb.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Xb)return fb.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),tT.has(n))return fb.QUIRKS;let e=null===t?eT:Jb;if(iT(n,e))return fb.QUIRKS;if(e=null===t?nT:sT,iT(n,e))return fb.LIMITED_QUIRKS}return fb.NO_QUIRKS}(t);(function(e){return e.name===Zb&&null===e.publicId&&(null===e.systemId||e.systemId===$b)})(t)||e._err(t,QE.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ET.BEFORE_HTML}(this,e);break;case ET.BEFORE_HEAD:case ET.IN_HEAD:case ET.IN_HEAD_NO_SCRIPT:case ET.AFTER_HEAD:this._err(e,QE.misplacedDoctype);break;case ET.IN_TABLE_TEXT:iv(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,QE.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(function(e){const t=e.tagID;return t===gb.FONT&&e.attrs.some((({name:e})=>e===hb.COLOR||e===hb.SIZE||e===hb.FACE))||pT.has(t)}(t))_v(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),s=e.treeAdapter.getNamespaceURI(n);s===db.MATHML?dT(t):s===db.SVG&&(!function(e){const t=uT.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=_b(e.tagName))}(t),hT(t)),fT(t),t.selfClosing?e._appendElement(t,s):e._insertElement(t,s),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case ET.INITIAL:RT(this,e);break;case ET.BEFORE_HTML:!function(e,t){t.tagID===gb.HTML?(e._insertElement(t,db.HTML),e.insertionMode=ET.BEFORE_HEAD):LT(e,t)}(this,e);break;case ET.BEFORE_HEAD:!function(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.HEAD:e._insertElement(t,db.HTML),e.headElement=e.openElements.current,e.insertionMode=ET.IN_HEAD;break;default:PT(e,t)}}(this,e);break;case ET.IN_HEAD:MT(this,e);break;case ET.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.BASEFONT:case gb.BGSOUND:case gb.HEAD:case gb.LINK:case gb.META:case gb.NOFRAMES:case gb.STYLE:MT(e,t);break;case gb.NOSCRIPT:e._err(t,QE.nestedNoscriptInHead);break;default:UT(e,t)}}(this,e);break;case ET.AFTER_HEAD:!function(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.BODY:e._insertElement(t,db.HTML),e.framesetOk=!1,e.insertionMode=ET.IN_BODY;break;case gb.FRAMESET:e._insertElement(t,db.HTML),e.insertionMode=ET.IN_FRAMESET;break;case gb.BASE:case gb.BASEFONT:case gb.BGSOUND:case gb.LINK:case gb.META:case gb.NOFRAMES:case gb.SCRIPT:case gb.STYLE:case gb.TEMPLATE:case gb.TITLE:e._err(t,QE.abandonedHeadElementChild),e.openElements.push(e.headElement,gb.HEAD),MT(e,t),e.openElements.remove(e.headElement);break;case gb.HEAD:e._err(t,QE.misplacedStartTagForHeadElement);break;default:HT(e,t)}}(this,e);break;case ET.IN_BODY:QT(this,e);break;case ET.IN_TABLE:JT(this,e);break;case ET.IN_TABLE_TEXT:iv(this,e);break;case ET.IN_CAPTION:!function(e,t){const n=t.tagID;av.has(n)?e.openElements.hasInTableScope(gb.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(gb.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ET.IN_TABLE,JT(e,t)):QT(e,t)}(this,e);break;case ET.IN_COLUMN_GROUP:rv(this,e);break;case ET.IN_TABLE_BODY:cv(this,e);break;case ET.IN_ROW:uv(this,e);break;case ET.IN_CELL:!function(e,t){const n=t.tagID;av.has(n)?(e.openElements.hasInTableScope(gb.TD)||e.openElements.hasInTableScope(gb.TH))&&(e._closeTableCell(),uv(e,t)):QT(e,t)}(this,e);break;case ET.IN_SELECT:dv(this,e);break;case ET.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===gb.CAPTION||n===gb.TABLE||n===gb.TBODY||n===gb.TFOOT||n===gb.THEAD||n===gb.TR||n===gb.TD||n===gb.TH?(e.openElements.popUntilTagNamePopped(gb.SELECT),e._resetInsertionMode(),e._processStartTag(t)):dv(e,t)}(this,e);break;case ET.IN_TEMPLATE:!function(e,t){switch(t.tagID){case gb.BASE:case gb.BASEFONT:case gb.BGSOUND:case gb.LINK:case gb.META:case gb.NOFRAMES:case gb.SCRIPT:case gb.STYLE:case gb.TEMPLATE:case gb.TITLE:MT(e,t);break;case gb.CAPTION:case gb.COLGROUP:case gb.TBODY:case gb.TFOOT:case gb.THEAD:e.tmplInsertionModeStack[0]=ET.IN_TABLE,e.insertionMode=ET.IN_TABLE,JT(e,t);break;case gb.COL:e.tmplInsertionModeStack[0]=ET.IN_COLUMN_GROUP,e.insertionMode=ET.IN_COLUMN_GROUP,rv(e,t);break;case gb.TR:e.tmplInsertionModeStack[0]=ET.IN_TABLE_BODY,e.insertionMode=ET.IN_TABLE_BODY,cv(e,t);break;case gb.TD:case gb.TH:e.tmplInsertionModeStack[0]=ET.IN_ROW,e.insertionMode=ET.IN_ROW,uv(e,t);break;default:e.tmplInsertionModeStack[0]=ET.IN_BODY,e.insertionMode=ET.IN_BODY,QT(e,t)}}(this,e);break;case ET.AFTER_BODY:!function(e,t){t.tagID===gb.HTML?QT(e,t):gv(e,t)}(this,e);break;case ET.IN_FRAMESET:!function(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.FRAMESET:e._insertElement(t,db.HTML);break;case gb.FRAME:e._appendElement(t,db.HTML),t.ackSelfClosing=!0;break;case gb.NOFRAMES:MT(e,t)}}(this,e);break;case ET.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.NOFRAMES:MT(e,t)}}(this,e);break;case ET.AFTER_AFTER_BODY:!function(e,t){t.tagID===gb.HTML?QT(e,t):yv(e,t)}(this,e);break;case ET.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.NOFRAMES:MT(e,t)}}(this,e)}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===gb.P||t.tagID===gb.BR)return _v(e),void e._endTagOutsideForeignContent(t);for(let n=e.openElements.stackTop;n>0;n--){const s=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(s)===db.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(s);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case ET.INITIAL:RT(this,e);break;case ET.BEFORE_HTML:!function(e,t){const n=t.tagID;n!==gb.HTML&&n!==gb.HEAD&&n!==gb.BODY&&n!==gb.BR||LT(e,t)}(this,e);break;case ET.BEFORE_HEAD:!function(e,t){const n=t.tagID;n===gb.HEAD||n===gb.BODY||n===gb.HTML||n===gb.BR?PT(e,t):e._err(t,QE.endTagWithoutMatchingOpenElement)}(this,e);break;case ET.IN_HEAD:!function(e,t){switch(t.tagID){case gb.HEAD:e.openElements.pop(),e.insertionMode=ET.AFTER_HEAD;break;case gb.BODY:case gb.BR:case gb.HTML:BT(e,t);break;case gb.TEMPLATE:FT(e,t);break;default:e._err(t,QE.endTagWithoutMatchingOpenElement)}}(this,e);break;case ET.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case gb.NOSCRIPT:e.openElements.pop(),e.insertionMode=ET.IN_HEAD;break;case gb.BR:UT(e,t);break;default:e._err(t,QE.endTagWithoutMatchingOpenElement)}}(this,e);break;case ET.AFTER_HEAD:!function(e,t){switch(t.tagID){case gb.BODY:case gb.HTML:case gb.BR:HT(e,t);break;case gb.TEMPLATE:FT(e,t);break;default:e._err(t,QE.endTagWithoutMatchingOpenElement)}}(this,e);break;case ET.IN_BODY:ZT(this,e);break;case ET.TEXT:!function(e,t){var n;t.tagID===gb.SCRIPT&&(null===(n=e.scriptHandler)||void 0===n||n.call(e,e.openElements.current));e.openElements.pop(),e.insertionMode=e.originalInsertionMode}(this,e);break;case ET.IN_TABLE:ev(this,e);break;case ET.IN_TABLE_TEXT:iv(this,e);break;case ET.IN_CAPTION:!function(e,t){const n=t.tagID;switch(n){case gb.CAPTION:case gb.TABLE:e.openElements.hasInTableScope(gb.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(gb.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ET.IN_TABLE,n===gb.TABLE&&ev(e,t));break;case gb.BODY:case gb.COL:case gb.COLGROUP:case gb.HTML:case gb.TBODY:case gb.TD:case gb.TFOOT:case gb.TH:case gb.THEAD:case gb.TR:break;default:ZT(e,t)}}(this,e);break;case ET.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case gb.COLGROUP:e.openElements.currentTagId===gb.COLGROUP&&(e.openElements.pop(),e.insertionMode=ET.IN_TABLE);break;case gb.TEMPLATE:FT(e,t);break;case gb.COL:break;default:ov(e,t)}}(this,e);break;case ET.IN_TABLE_BODY:lv(this,e);break;case ET.IN_ROW:pv(this,e);break;case ET.IN_CELL:!function(e,t){const n=t.tagID;switch(n){case gb.TD:case gb.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ET.IN_ROW);break;case gb.TABLE:case gb.TBODY:case gb.TFOOT:case gb.THEAD:case gb.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),pv(e,t));break;case gb.BODY:case gb.CAPTION:case gb.COL:case gb.COLGROUP:case gb.HTML:break;default:ZT(e,t)}}(this,e);break;case ET.IN_SELECT:hv(this,e);break;case ET.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===gb.CAPTION||n===gb.TABLE||n===gb.TBODY||n===gb.TFOOT||n===gb.THEAD||n===gb.TR||n===gb.TD||n===gb.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(gb.SELECT),e._resetInsertionMode(),e.onEndTag(t)):hv(e,t)}(this,e);break;case ET.IN_TEMPLATE:!function(e,t){t.tagID===gb.TEMPLATE&&FT(e,t)}(this,e);break;case ET.AFTER_BODY:mv(this,e);break;case ET.IN_FRAMESET:!function(e,t){t.tagID!==gb.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===gb.FRAMESET||(e.insertionMode=ET.AFTER_FRAMESET))}(this,e);break;case ET.AFTER_FRAMESET:!function(e,t){t.tagID===gb.HTML&&(e.insertionMode=ET.AFTER_AFTER_FRAMESET)}(this,e);break;case ET.AFTER_AFTER_BODY:yv(this,e)}}onEof(e){switch(this.insertionMode){case ET.INITIAL:RT(this,e);break;case ET.BEFORE_HTML:LT(this,e);break;case ET.BEFORE_HEAD:PT(this,e);break;case ET.IN_HEAD:BT(this,e);break;case ET.IN_HEAD_NO_SCRIPT:UT(this,e);break;case ET.AFTER_HEAD:HT(this,e);break;case ET.IN_BODY:case ET.IN_TABLE:case ET.IN_CAPTION:case ET.IN_COLUMN_GROUP:case ET.IN_TABLE_BODY:case ET.IN_ROW:case ET.IN_CELL:case ET.IN_SELECT:case ET.IN_SELECT_IN_TABLE:$T(this,e);break;case ET.TEXT:!function(e,t){e._err(t,QE.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}(this,e);break;case ET.IN_TABLE_TEXT:iv(this,e);break;case ET.IN_TEMPLATE:fv(this,e);break;case ET.AFTER_BODY:case ET.IN_FRAMESET:case ET.AFTER_FRAMESET:case ET.AFTER_AFTER_BODY:case ET.AFTER_AFTER_FRAMESET:DT(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===BE.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case ET.IN_HEAD:case ET.IN_HEAD_NO_SCRIPT:case ET.AFTER_HEAD:case ET.TEXT:case ET.IN_COLUMN_GROUP:case ET.IN_SELECT:case ET.IN_SELECT_IN_TABLE:case ET.IN_FRAMESET:case ET.AFTER_FRAMESET:this._insertCharacters(e);break;case ET.IN_BODY:case ET.IN_CAPTION:case ET.IN_CELL:case ET.IN_TEMPLATE:case ET.AFTER_BODY:case ET.AFTER_AFTER_BODY:case ET.AFTER_AFTER_FRAMESET:GT(this,e);break;case ET.IN_TABLE:case ET.IN_TABLE_BODY:case ET.IN_ROW:XT(this,e);break;case ET.IN_TABLE_TEXT:nv(this,e)}}};function ST(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):KT(e,t),n}function AT(e,t){let n=null,s=e.openElements.stackTop;for(;s>=0;s--){const i=e.openElements.items[s];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[s])&&(n=i)}return n||(e.openElements.shortenToLength(s<0?0:s),e.activeFormattingElements.removeEntry(t)),n}function wT(e,t,n){let s=t,i=e.openElements.getCommonAncestor(t);for(let a=0,r=i;r!==n;a++,r=i){i=e.openElements.getCommonAncestor(r);const n=e.activeFormattingElements.getElementEntry(r),o=n&&a>=_T;!n||o?(o&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(r)):(r=CT(e,n),s===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(s),e.treeAdapter.appendChild(r,s),s=r)}return s}function CT(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),s=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,s),t.element=s,s}function NT(e,t,n){const s=_b(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(s))e._fosterParentElement(n);else{const i=e.treeAdapter.getNamespaceURI(t);s===gb.TEMPLATE&&i===db.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function IT(e,t,n){const s=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,a=e.treeAdapter.createElement(i.tagName,s,i.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a,i.tagID)}function kT(e,t){for(let n=0;n<yT;n++){const n=ST(e,t);if(!n)break;const s=AT(e,n);if(!s)break;e.activeFormattingElements.bookmark=n;const i=wT(e,s,n.element),a=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),a&&NT(e,a,i),IT(e,s,n)}}function OT(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function DT(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let s=e.openElements.stackTop;s>=n;s--)e._setEndLocation(e.openElements.items[s],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],s=e.treeAdapter.getNodeSourceCodeLocation(n);if(s&&!s.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],s=e.treeAdapter.getNodeSourceCodeLocation(n);s&&!s.endTag&&e._setEndLocation(n,t)}}}}function RT(e,t){e._err(t,QE.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,fb.QUIRKS),e.insertionMode=ET.BEFORE_HTML,e._processToken(t)}function LT(e,t){e._insertFakeRootElement(),e.insertionMode=ET.BEFORE_HEAD,e._processToken(t)}function PT(e,t){e._insertFakeElement(mb.HEAD,gb.HEAD),e.headElement=e.openElements.current,e.insertionMode=ET.IN_HEAD,e._processToken(t)}function MT(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.BASE:case gb.BASEFONT:case gb.BGSOUND:case gb.LINK:case gb.META:e._appendElement(t,db.HTML),t.ackSelfClosing=!0;break;case gb.TITLE:e._switchToTextParsing(t,Ab.RCDATA);break;case gb.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,Ab.RAWTEXT):(e._insertElement(t,db.HTML),e.insertionMode=ET.IN_HEAD_NO_SCRIPT);break;case gb.NOFRAMES:case gb.STYLE:e._switchToTextParsing(t,Ab.RAWTEXT);break;case gb.SCRIPT:e._switchToTextParsing(t,Ab.SCRIPT_DATA);break;case gb.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ET.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ET.IN_TEMPLATE);break;case gb.HEAD:e._err(t,QE.misplacedStartTagForHeadElement);break;default:BT(e,t)}}function FT(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==gb.TEMPLATE&&e._err(t,QE.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(gb.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,QE.endTagWithoutMatchingOpenElement)}function BT(e,t){e.openElements.pop(),e.insertionMode=ET.AFTER_HEAD,e._processToken(t)}function UT(e,t){const n=t.type===ZE.EOF?QE.openElementsLeftAfterEof:QE.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ET.IN_HEAD,e._processToken(t)}function HT(e,t){e._insertFakeElement(mb.BODY,gb.BODY),e.insertionMode=ET.IN_BODY,jT(e,t)}function jT(e,t){switch(t.type){case ZE.CHARACTER:qT(e,t);break;case ZE.WHITESPACE_CHARACTER:GT(e,t);break;case ZE.COMMENT:OT(e,t);break;case ZE.START_TAG:QT(e,t);break;case ZE.END_TAG:ZT(e,t);break;case ZE.EOF:$T(e,t)}}function GT(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function qT(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function YT(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,db.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function zT(e){const t=$E(e,hb.TYPE);return null!=t&&t.toLowerCase()===gT}function VT(e,t){e._switchToTextParsing(t,Ab.RAWTEXT)}function WT(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,db.HTML)}function QT(e,t){switch(t.tagID){case gb.I:case gb.S:case gb.B:case gb.U:case gb.EM:case gb.TT:case gb.BIG:case gb.CODE:case gb.FONT:case gb.SMALL:case gb.STRIKE:case gb.STRONG:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,db.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case gb.A:!function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(mb.A);n&&(kT(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,db.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case gb.H1:case gb.H2:case gb.H3:case gb.H4:case gb.H5:case gb.H6:!function(e,t){e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),Tb(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,db.HTML)}(e,t);break;case gb.P:case gb.DL:case gb.OL:case gb.UL:case gb.DIV:case gb.DIR:case gb.NAV:case gb.MAIN:case gb.MENU:case gb.ASIDE:case gb.CENTER:case gb.FIGURE:case gb.FOOTER:case gb.HEADER:case gb.HGROUP:case gb.DIALOG:case gb.DETAILS:case gb.ADDRESS:case gb.ARTICLE:case gb.SECTION:case gb.SUMMARY:case gb.FIELDSET:case gb.BLOCKQUOTE:case gb.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),e._insertElement(t,db.HTML)}(e,t);break;case gb.LI:case gb.DD:case gb.DT:!function(e,t){e.framesetOk=!1;const n=t.tagID;for(let t=e.openElements.stackTop;t>=0;t--){const s=e.openElements.tagIDs[t];if(n===gb.LI&&s===gb.LI||(n===gb.DD||n===gb.DT)&&(s===gb.DD||s===gb.DT)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.popUntilTagNamePopped(s);break}if(s!==gb.ADDRESS&&s!==gb.DIV&&s!==gb.P&&e._isSpecialElement(e.openElements.items[t],s))break}e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),e._insertElement(t,db.HTML)}(e,t);break;case gb.BR:case gb.IMG:case gb.WBR:case gb.AREA:case gb.EMBED:case gb.KEYGEN:YT(e,t);break;case gb.HR:!function(e,t){e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),e._appendElement(t,db.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case gb.RB:case gb.RTC:!function(e,t){e.openElements.hasInScope(gb.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,db.HTML)}(e,t);break;case gb.RT:case gb.RP:!function(e,t){e.openElements.hasInScope(gb.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(gb.RTC),e._insertElement(t,db.HTML)}(e,t);break;case gb.PRE:case gb.LISTING:!function(e,t){e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),e._insertElement(t,db.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case gb.XMP:!function(e,t){e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Ab.RAWTEXT)}(e,t);break;case gb.SVG:!function(e,t){e._reconstructActiveFormattingElements(),hT(t),fT(t),t.selfClosing?e._appendElement(t,db.SVG):e._insertElement(t,db.SVG),t.ackSelfClosing=!0}(e,t);break;case gb.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case gb.BASE:case gb.LINK:case gb.META:case gb.STYLE:case gb.TITLE:case gb.SCRIPT:case gb.BGSOUND:case gb.BASEFONT:case gb.TEMPLATE:MT(e,t);break;case gb.BODY:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t);break;case gb.FORM:!function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),e._insertElement(t,db.HTML),n||(e.formElement=e.openElements.current))}(e,t);break;case gb.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(gb.NOBR)&&(kT(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,db.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case gb.MATH:!function(e,t){e._reconstructActiveFormattingElements(),dT(t),fT(t),t.selfClosing?e._appendElement(t,db.MATHML):e._insertElement(t,db.MATHML),t.ackSelfClosing=!0}(e,t);break;case gb.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==fb.QUIRKS&&e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),e._insertElement(t,db.HTML),e.framesetOk=!1,e.insertionMode=ET.IN_TABLE}(e,t);break;case gb.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,db.HTML),zT(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case gb.PARAM:case gb.TRACK:case gb.SOURCE:!function(e,t){e._appendElement(t,db.HTML),t.ackSelfClosing=!0}(e,t);break;case gb.IMAGE:!function(e,t){t.tagName=mb.IMG,t.tagID=gb.IMG,YT(e,t)}(e,t);break;case gb.BUTTON:!function(e,t){e.openElements.hasInScope(gb.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(gb.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,db.HTML),e.framesetOk=!1}(e,t);break;case gb.APPLET:case gb.OBJECT:case gb.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,db.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case gb.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Ab.RAWTEXT)}(e,t);break;case gb.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,db.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ET.IN_TABLE||e.insertionMode===ET.IN_CAPTION||e.insertionMode===ET.IN_TABLE_BODY||e.insertionMode===ET.IN_ROW||e.insertionMode===ET.IN_CELL?ET.IN_SELECT_IN_TABLE:ET.IN_SELECT}(e,t);break;case gb.OPTION:case gb.OPTGROUP:!function(e,t){e.openElements.currentTagId===gb.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,db.HTML)}(e,t);break;case gb.NOEMBED:VT(e,t);break;case gb.FRAMESET:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,db.HTML),e.insertionMode=ET.IN_FRAMESET)}(e,t);break;case gb.TEXTAREA:!function(e,t){e._insertElement(t,db.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Ab.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ET.TEXT}(e,t);break;case gb.NOSCRIPT:e.options.scriptingEnabled?VT(e,t):WT(e,t);break;case gb.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(gb.P)&&e._closePElement(),e._insertElement(t,db.HTML),e.tokenizer.state=Ab.PLAINTEXT}(e,t);break;case gb.COL:case gb.TH:case gb.TD:case gb.TR:case gb.HEAD:case gb.FRAME:case gb.TBODY:case gb.TFOOT:case gb.THEAD:case gb.CAPTION:case gb.COLGROUP:break;default:WT(e,t)}}function KT(e,t){const n=t.tagName,s=t.tagID;for(let t=e.openElements.stackTop;t>0;t--){const i=e.openElements.items[t],a=e.openElements.tagIDs[t];if(s===a&&(s!==gb.UNKNOWN||e.treeAdapter.getTagName(i)===n)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.stackTop>=t&&e.openElements.shortenToLength(t);break}if(e._isSpecialElement(i,a))break}}function ZT(e,t){switch(t.tagID){case gb.A:case gb.B:case gb.I:case gb.S:case gb.U:case gb.EM:case gb.TT:case gb.BIG:case gb.CODE:case gb.FONT:case gb.NOBR:case gb.SMALL:case gb.STRIKE:case gb.STRONG:kT(e,t);break;case gb.P:!function(e){e.openElements.hasInButtonScope(gb.P)||e._insertFakeElement(mb.P,gb.P),e._closePElement()}(e);break;case gb.DL:case gb.UL:case gb.OL:case gb.DIR:case gb.DIV:case gb.NAV:case gb.PRE:case gb.MAIN:case gb.MENU:case gb.ASIDE:case gb.BUTTON:case gb.CENTER:case gb.FIGURE:case gb.FOOTER:case gb.HEADER:case gb.HGROUP:case gb.DIALOG:case gb.ADDRESS:case gb.ARTICLE:case gb.DETAILS:case gb.SECTION:case gb.SUMMARY:case gb.LISTING:case gb.FIELDSET:case gb.BLOCKQUOTE:case gb.FIGCAPTION:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case gb.LI:!function(e){e.openElements.hasInListItemScope(gb.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(gb.LI),e.openElements.popUntilTagNamePopped(gb.LI))}(e);break;case gb.DD:case gb.DT:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case gb.H1:case gb.H2:case gb.H3:case gb.H4:case gb.H5:case gb.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case gb.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(mb.BR,gb.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case gb.BODY:!function(e,t){if(e.openElements.hasInScope(gb.BODY)&&(e.insertionMode=ET.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}(e,t);break;case gb.HTML:!function(e,t){e.openElements.hasInScope(gb.BODY)&&(e.insertionMode=ET.AFTER_BODY,mv(e,t))}(e,t);break;case gb.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(gb.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(gb.FORM):n&&e.openElements.remove(n))}(e);break;case gb.APPLET:case gb.OBJECT:case gb.MARQUEE:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case gb.TEMPLATE:FT(e,t);break;default:KT(e,t)}}function $T(e,t){e.tmplInsertionModeStack.length>0?fv(e,t):DT(e,t)}function XT(e,t){if(TT.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ET.IN_TABLE_TEXT,t.type){case ZE.CHARACTER:sv(e,t);break;case ZE.WHITESPACE_CHARACTER:nv(e,t)}else tv(e,t)}function JT(e,t){switch(t.tagID){case gb.TD:case gb.TH:case gb.TR:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(mb.TBODY,gb.TBODY),e.insertionMode=ET.IN_TABLE_BODY,cv(e,t)}(e,t);break;case gb.STYLE:case gb.SCRIPT:case gb.TEMPLATE:MT(e,t);break;case gb.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(mb.COLGROUP,gb.COLGROUP),e.insertionMode=ET.IN_COLUMN_GROUP,rv(e,t)}(e,t);break;case gb.FORM:!function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,db.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case gb.TABLE:!function(e,t){e.openElements.hasInTableScope(gb.TABLE)&&(e.openElements.popUntilTagNamePopped(gb.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case gb.TBODY:case gb.TFOOT:case gb.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,db.HTML),e.insertionMode=ET.IN_TABLE_BODY}(e,t);break;case gb.INPUT:!function(e,t){zT(t)?e._appendElement(t,db.HTML):tv(e,t),t.ackSelfClosing=!0}(e,t);break;case gb.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,db.HTML),e.insertionMode=ET.IN_CAPTION}(e,t);break;case gb.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,db.HTML),e.insertionMode=ET.IN_COLUMN_GROUP}(e,t);break;default:tv(e,t)}}function ev(e,t){switch(t.tagID){case gb.TABLE:e.openElements.hasInTableScope(gb.TABLE)&&(e.openElements.popUntilTagNamePopped(gb.TABLE),e._resetInsertionMode());break;case gb.TEMPLATE:FT(e,t);break;case gb.BODY:case gb.CAPTION:case gb.COL:case gb.COLGROUP:case gb.HTML:case gb.TBODY:case gb.TD:case gb.TFOOT:case gb.TH:case gb.THEAD:case gb.TR:break;default:tv(e,t)}}function tv(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,jT(e,t),e.fosterParentingEnabled=n}function nv(e,t){e.pendingCharacterTokens.push(t)}function sv(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function iv(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)tv(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const av=new Set([gb.CAPTION,gb.COL,gb.COLGROUP,gb.TBODY,gb.TD,gb.TFOOT,gb.TH,gb.THEAD,gb.TR]);function rv(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.COL:e._appendElement(t,db.HTML),t.ackSelfClosing=!0;break;case gb.TEMPLATE:MT(e,t);break;default:ov(e,t)}}function ov(e,t){e.openElements.currentTagId===gb.COLGROUP&&(e.openElements.pop(),e.insertionMode=ET.IN_TABLE,e._processToken(t))}function cv(e,t){switch(t.tagID){case gb.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,db.HTML),e.insertionMode=ET.IN_ROW;break;case gb.TH:case gb.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(mb.TR,gb.TR),e.insertionMode=ET.IN_ROW,uv(e,t);break;case gb.CAPTION:case gb.COL:case gb.COLGROUP:case gb.TBODY:case gb.TFOOT:case gb.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ET.IN_TABLE,JT(e,t));break;default:JT(e,t)}}function lv(e,t){const n=t.tagID;switch(t.tagID){case gb.TBODY:case gb.TFOOT:case gb.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ET.IN_TABLE);break;case gb.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ET.IN_TABLE,ev(e,t));break;case gb.BODY:case gb.CAPTION:case gb.COL:case gb.COLGROUP:case gb.HTML:case gb.TD:case gb.TH:case gb.TR:break;default:ev(e,t)}}function uv(e,t){switch(t.tagID){case gb.TH:case gb.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,db.HTML),e.insertionMode=ET.IN_CELL,e.activeFormattingElements.insertMarker();break;case gb.CAPTION:case gb.COL:case gb.COLGROUP:case gb.TBODY:case gb.TFOOT:case gb.THEAD:case gb.TR:e.openElements.hasInTableScope(gb.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ET.IN_TABLE_BODY,cv(e,t));break;default:JT(e,t)}}function pv(e,t){switch(t.tagID){case gb.TR:e.openElements.hasInTableScope(gb.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ET.IN_TABLE_BODY);break;case gb.TABLE:e.openElements.hasInTableScope(gb.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ET.IN_TABLE_BODY,lv(e,t));break;case gb.TBODY:case gb.TFOOT:case gb.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(gb.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ET.IN_TABLE_BODY,lv(e,t));break;case gb.BODY:case gb.CAPTION:case gb.COL:case gb.COLGROUP:case gb.HTML:case gb.TD:case gb.TH:break;default:ev(e,t)}}function dv(e,t){switch(t.tagID){case gb.HTML:QT(e,t);break;case gb.OPTION:e.openElements.currentTagId===gb.OPTION&&e.openElements.pop(),e._insertElement(t,db.HTML);break;case gb.OPTGROUP:e.openElements.currentTagId===gb.OPTION&&e.openElements.pop(),e.openElements.currentTagId===gb.OPTGROUP&&e.openElements.pop(),e._insertElement(t,db.HTML);break;case gb.INPUT:case gb.KEYGEN:case gb.TEXTAREA:case gb.SELECT:e.openElements.hasInSelectScope(gb.SELECT)&&(e.openElements.popUntilTagNamePopped(gb.SELECT),e._resetInsertionMode(),t.tagID!==gb.SELECT&&e._processStartTag(t));break;case gb.SCRIPT:case gb.TEMPLATE:MT(e,t)}}function hv(e,t){switch(t.tagID){case gb.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===gb.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===gb.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===gb.OPTGROUP&&e.openElements.pop();break;case gb.OPTION:e.openElements.currentTagId===gb.OPTION&&e.openElements.pop();break;case gb.SELECT:e.openElements.hasInSelectScope(gb.SELECT)&&(e.openElements.popUntilTagNamePopped(gb.SELECT),e._resetInsertionMode());break;case gb.TEMPLATE:FT(e,t)}}function fv(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(gb.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):DT(e,t)}function mv(e,t){var n;if(t.tagID===gb.HTML){if(e.fragmentContext||(e.insertionMode=ET.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===gb.HTML){e._setEndLocation(e.openElements.items[0],t);const s=e.openElements.items[1];s&&!(null===(n=e.treeAdapter.getNodeSourceCodeLocation(s))||void 0===n?void 0:n.endTag)&&e._setEndLocation(s,t)}}else gv(e,t)}function gv(e,t){e.insertionMode=ET.IN_BODY,jT(e,t)}function yv(e,t){e.insertionMode=ET.IN_BODY,jT(e,t)}function _v(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==db.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Ev(e,t){return function(n){let s,i=0,a="";for(;s=e.exec(n);)i!==s.index&&(a+=n.substring(i,s.index)),a+=t.get(s[0].charCodeAt(0)),i=s.index+1;return a+n.substring(i)}}const bv=Ev(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Tv=Ev(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),vv=new Set([mb.AREA,mb.BASE,mb.BASEFONT,mb.BGSOUND,mb.BR,mb.COL,mb.EMBED,mb.FRAME,mb.HR,mb.IMG,mb.INPUT,mb.KEYGEN,mb.LINK,mb.META,mb.PARAM,mb.SOURCE,mb.TRACK,mb.WBR]);const xv={treeAdapter:Kb,scriptingEnabled:!0};function Sv(e,t){return Av(e,{...xv,...t})}function Av(e,t){return t.treeAdapter.isElementNode(e)?function(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${function(e,{treeAdapter:t}){let n="";for(const s of t.getAttrList(e)){if(n+=" ",s.namespace)switch(s.namespace){case db.XML:n+=`xml:${s.name}`;break;case db.XMLNS:"xmlns"!==s.name&&(n+="xmlns:"),n+=s.name;break;case db.XLINK:n+=`xlink:${s.name}`;break;default:n+=`${s.prefix}:${s.name}`}else n+=s.name;n+=`="${bv(s.value)}"`}return n}(e,t)}>${function(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===db.HTML&&vv.has(t.treeAdapter.getTagName(e))}(e,t)?"":`${function(e,t){let n="";const s=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===mb.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===db.HTML?t.treeAdapter.getTemplateContent(e):e,i=t.treeAdapter.getChildNodes(s);if(i)for(const e of i)n+=Av(e,t);return n}(e,t)}</${n}>`}`}(e,t):t.treeAdapter.isTextNode(e)?function(e,t){const{treeAdapter:n}=t,s=n.getTextNodeContent(e),i=n.getParentNode(e),a=i&&n.isElementNode(i)&&n.getTagName(i);return a&&n.getNamespaceURI(i)===db.HTML&&(r=a,o=t.scriptingEnabled,vb.has(r)||o&&r===mb.NOSCRIPT)?s:Tv(s);var r,o}(e,t):t.treeAdapter.isCommentNode(e)?function(e,{treeAdapter:t}){return`\x3c!--${t.getCommentNodeContent(e)}--\x3e`}(e,t):t.treeAdapter.isDocumentTypeNode(e)?function(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(e,t):""}let wv=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return Uv(this,e)}},Cv=class extends wv{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}},Nv=class extends Cv{constructor(){super(...arguments),this.type=Am.Text}get nodeType(){return 3}},Iv=class extends Cv{constructor(){super(...arguments),this.type=Am.Comment}get nodeType(){return 8}},kv=class extends Cv{constructor(e,t){super(t),this.name=e,this.type=Am.Directive}get nodeType(){return 1}},Ov=class extends wv{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}},Dv=class extends Ov{constructor(){super(...arguments),this.type=Am.CDATA}get nodeType(){return 4}},Rv=class extends Ov{constructor(){super(...arguments),this.type=Am.Root}get nodeType(){return 9}},Lv=class extends Ov{constructor(e,t,n=[],s=("script"===e?Am.Script:"style"===e?Am.Style:Am.Tag)){super(n),this.name=e,this.attribs=t,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}};function Pv(e){return wm(e)}function Mv(e){return e.type===Am.Text}function Fv(e){return e.type===Am.Comment}function Bv(e){return e.type===Am.Directive}function Uv(e,t=!1){let n;if(Mv(e))n=new Nv(e.data);else if(Fv(e))n=new Iv(e.data);else if(Pv(e)){const s=t?Hv(e.children):[],i=new Lv(e.name,{...e.attribs},s);s.forEach((e=>e.parent=i)),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=i}else if(function(e){return e.type===Am.CDATA}(e)){const s=t?Hv(e.children):[],i=new Dv(s);s.forEach((e=>e.parent=i)),n=i}else if(function(e){return e.type===Am.Root}(e)){const s=t?Hv(e.children):[],i=new Rv(s);s.forEach((e=>e.parent=i)),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else{if(!Bv(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new kv(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function Hv(e){const t=e.map((e=>Uv(e,!0)));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}function jv(e){return new Nv(e)}function Gv(e){const t=e.includes('"')?"'":'"';return t+e+t}const qv={isCommentNode:Fv,isElementNode:Pv,isTextNode:Mv,createDocument(){const e=new Rv([]);return e["x-mode"]=fb.NO_QUIRKS,e},createDocumentFragment:()=>new Rv([]),createElement(e,t,n){const s=Object.create(null),i=Object.create(null),a=Object.create(null);for(let e=0;e<n.length;e++){const t=n[e].name;s[t]=n[e].value,i[t]=n[e].namespace,a[t]=n[e].prefix}const r=new Lv(e,s,[]);return r.namespace=t,r["x-attribsNamespace"]=i,r["x-attribsPrefix"]=a,r},createCommentNode:e=>new Iv(e),appendChild(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},insertBefore(e,t,n){const s=e.children.indexOf(n),{prev:i}=n;i&&(i.next=t,t.prev=i),n.prev=t,t.next=n,e.children.splice(s,0,t),t.parent=e},setTemplateContent(e,t){qv.appendChild(e,t)},getTemplateContent:e=>e.children[0],setDocumentType(e,t,n,s){const i=function(e,t,n){let s="!DOCTYPE ";return e&&(s+=e),t?s+=` PUBLIC ${Gv(t)}`:n&&(s+=" SYSTEM"),n&&(s+=` ${Gv(n)}`),s}(t,n,s);let a=e.children.find((e=>Bv(e)&&"!doctype"===e.name));a?a.data=null!=i?i:null:(a=new kv("!doctype",i),qv.appendChild(e,a)),a["x-name"]=null!=t?t:void 0,a["x-publicId"]=null!=n?n:void 0,a["x-systemId"]=null!=s?s:void 0},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode:e=>e["x-mode"],detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:n,next:s}=e;e.prev=null,e.next=null,n&&(n.next=s),s&&(s.prev=n),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const n=e.children[e.children.length-1];n&&Mv(n)?n.data+=t:qv.appendChild(e,jv(t))},insertTextBefore(e,t,n){const s=e.children[e.children.indexOf(n)-1];s&&Mv(s)?s.data+=t:qv.insertBefore(e,jv(t),n)},adoptAttributes(e,t){for(let n=0;n<t.length;n++){const s=t[n].name;void 0===e.attribs[s]&&(e.attribs[s]=t[n].value,e["x-attribsNamespace"][s]=t[n].namespace,e["x-attribsPrefix"][s]=t[n].prefix)}},getFirstChild:e=>e.children[0],getChildNodes:e=>e.children,getParentNode:e=>e.parent,getAttrList:e=>e.attributes,getTagName:e=>e.name,getNamespaceURI:e=>e.namespace,getTextNodeContent:e=>e.data,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName(e){var t;return null!==(t=e["x-name"])&&void 0!==t?t:""},getDocumentTypeNodePublicId(e){var t;return null!==(t=e["x-publicId"])&&void 0!==t?t:""},getDocumentTypeNodeSystemId(e){var t;return null!==(t=e["x-systemId"])&&void 0!==t?t:""},isDocumentTypeNode:e=>Bv(e)&&"!doctype"===e.name,setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){null!=t.endOffset&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}};function Yv(e,t,n,s){const i={scriptingEnabled:"boolean"!=typeof t.scriptingEnabled||t.scriptingEnabled,treeAdapter:qv,sourceCodeLocationInfo:t.sourceCodeLocationInfo};return n?function(e,t){return xT.parse(e,t)}(e,i):function(e,t,n){"string"==typeof e&&(n=t,t=e,e=null);const s=xT.getFragmentParser(e,n);return s.tokenizer.write(t,!0),s.getFragment()}(s,e,i)}const zv={treeAdapter:qv};var Vv,Wv=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0)))),Qv=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((e=>e.charCodeAt(0))));const Kv=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Zv=null!==(Vv=String.fromCodePoint)&&void 0!==Vv?Vv:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};function $v(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=Kv.get(e))&&void 0!==t?t:e}var Xv;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(Xv||(Xv={}));var Jv,ex,tx,nx,sx,ix;function ax(e){return e>=Xv.ZERO&&e<=Xv.NINE}function rx(e){return e===Xv.EQUALS||function(e){return e>=Xv.UPPER_A&&e<=Xv.UPPER_Z||e>=Xv.LOWER_A&&e<=Xv.LOWER_Z||ax(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(Jv||(Jv={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(ex||(ex={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(tx||(tx={}));class ox{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=ex.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=tx.Strict}startEntity(e){this.decodeMode=e,this.state=ex.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case ex.EntityStart:return e.charCodeAt(t)===Xv.NUM?(this.state=ex.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=ex.NamedEntity,this.stateNamedEntity(e,t));case ex.NumericStart:return this.stateNumericStart(e,t);case ex.NumericDecimal:return this.stateNumericDecimal(e,t);case ex.NumericHex:return this.stateNumericHex(e,t);case ex.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===Xv.LOWER_X?(this.state=ex.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=ex.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,s){if(t!==n){const i=n-t;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(t,i),s),this.consumed+=i}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const i=e.charCodeAt(t);if(!(ax(i)||(s=i,s>=Xv.UPPER_A&&s<=Xv.UPPER_F||s>=Xv.LOWER_A&&s<=Xv.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3);t+=1}var s;return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const s=e.charCodeAt(t);if(!ax(s))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(s,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Xv.SEMI)this.consumed+=1;else if(this.decodeMode===tx.Strict)return 0;return this.emitCodePoint($v(this.result),this.consumed),this.errors&&(e!==Xv.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&Jv.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const a=e.charCodeAt(t);if(this.treeIndex=lx(n,s,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return 0===this.result||this.decodeMode===tx.Attribute&&(0===i||rx(a))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&Jv.VALUE_LENGTH)>>14,0!==i){if(a===Xv.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==tx.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,s=(n[t]&Jv.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,s,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:s}=this;return this.emitCodePoint(1===t?s[e]&~Jv.VALUE_LENGTH:s[e+1],n),3===t&&this.emitCodePoint(s[e+2],n),n}end(){var e;switch(this.state){case ex.NamedEntity:return 0===this.result||this.decodeMode===tx.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case ex.NumericDecimal:return this.emitNumericEntity(0,2);case ex.NumericHex:return this.emitNumericEntity(0,3);case ex.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ex.EntityStart:return 0}}}function cx(e){let t="";const n=new ox(e,(e=>t+=Zv(e)));return function(e,s){let i=0,a=0;for(;(a=e.indexOf("&",a))>=0;){t+=e.slice(i,a),n.startEntity(s);const r=n.write(e,a+1);if(r<0){i=a+n.end();break}i=a+r,a=0===r?i+1:i}const r=t+e.slice(i);return t="",r}}function lx(e,t,n,s){const i=(t&Jv.BRANCH_LENGTH)>>7,a=t&Jv.JUMP_TABLE;if(0===i)return 0!==a&&s===a?n:-1;if(a){const t=s-a;return t<0||t>=i?-1:e[n+t]-1}let r=n,o=r+i-1;for(;r<=o;){const t=r+o>>>1,n=e[t];if(n<s)r=t+1;else{if(!(n>s))return e[t+i];o=t-1}}return-1}function ux(e){return e===nx.Space||e===nx.NewLine||e===nx.Tab||e===nx.FormFeed||e===nx.CarriageReturn}function px(e){return e===nx.Slash||e===nx.Gt||ux(e)}function dx(e){return e>=nx.Zero&&e<=nx.Nine}cx(Wv),cx(Qv),function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(nx||(nx={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(sx||(sx={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(ix||(ix={}));const hx={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class fx{constructor({xmlMode:e=!1,decodeEntities:t=!0},n){this.cbs=n,this.state=sx.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=sx.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=t,this.entityTrie=e?Qv:Wv}reset(){this.state=sx.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=sx.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===nx.Lt||!this.decodeEntities&&this.fastForwardTo(nx.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=sx.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===nx.Amp&&(this.state=sx.BeforeEntity)}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(t?px(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=sx.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===nx.Gt||ux(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===hx.TitleEnd?this.decodeEntities&&e===nx.Amp&&(this.state=sx.BeforeEntity):this.fastForwardTo(nx.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===nx.Lt)}stateCDATASequence(e){e===hx.Cdata[this.sequenceIndex]?++this.sequenceIndex===hx.Cdata.length&&(this.state=sx.InCommentLike,this.currentSequence=hx.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=sx.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===hx.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=sx.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!px(e):function(e){return e>=nx.LowerA&&e<=nx.LowerZ||e>=nx.UpperA&&e<=nx.UpperZ}(e)}startSpecial(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=sx.SpecialStartSequence}stateBeforeTagName(e){if(e===nx.ExclamationMark)this.state=sx.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===nx.Questionmark)this.state=sx.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const t=32|e;this.sectionStart=this.index,this.xmlMode||t!==hx.TitleEnd[2]?this.state=this.xmlMode||t!==hx.ScriptEnd[2]?sx.InTagName:sx.BeforeSpecialS:this.startSpecial(hx.TitleEnd,3)}else e===nx.Slash?this.state=sx.BeforeClosingTagName:(this.state=sx.Text,this.stateText(e))}stateInTagName(e){px(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=sx.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){ux(e)||(e===nx.Gt?this.state=sx.Text:(this.state=this.isTagStartChar(e)?sx.InClosingTagName:sx.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===nx.Gt||ux(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=sx.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===nx.Gt||this.fastForwardTo(nx.Gt))&&(this.state=sx.Text,this.baseState=sx.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===nx.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=sx.InSpecialTag,this.sequenceIndex=0):this.state=sx.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===nx.Slash?this.state=sx.InSelfClosingTag:ux(e)||(this.state=sx.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===nx.Gt?(this.cbs.onselfclosingtag(this.index),this.state=sx.Text,this.baseState=sx.Text,this.sectionStart=this.index+1,this.isSpecial=!1):ux(e)||(this.state=sx.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===nx.Eq||px(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=sx.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===nx.Eq?this.state=sx.BeforeAttributeValue:e===nx.Slash||e===nx.Gt?(this.cbs.onattribend(ix.NoValue,this.index),this.state=sx.BeforeAttributeName,this.stateBeforeAttributeName(e)):ux(e)||(this.cbs.onattribend(ix.NoValue,this.index),this.state=sx.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===nx.DoubleQuote?(this.state=sx.InAttributeValueDq,this.sectionStart=this.index+1):e===nx.SingleQuote?(this.state=sx.InAttributeValueSq,this.sectionStart=this.index+1):ux(e)||(this.sectionStart=this.index,this.state=sx.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===nx.DoubleQuote?ix.Double:ix.Single,this.index),this.state=sx.BeforeAttributeName):this.decodeEntities&&e===nx.Amp&&(this.baseState=this.state,this.state=sx.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,nx.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,nx.SingleQuote)}stateInAttributeValueNoQuotes(e){ux(e)||e===nx.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(ix.Unquoted,this.index),this.state=sx.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===nx.Amp&&(this.baseState=this.state,this.state=sx.BeforeEntity)}stateBeforeDeclaration(e){e===nx.OpeningSquareBracket?(this.state=sx.CDATASequence,this.sequenceIndex=0):this.state=e===nx.Dash?sx.BeforeComment:sx.InDeclaration}stateInDeclaration(e){(e===nx.Gt||this.fastForwardTo(nx.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=sx.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===nx.Gt||this.fastForwardTo(nx.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=sx.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===nx.Dash?(this.state=sx.InCommentLike,this.currentSequence=hx.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=sx.InDeclaration}stateInSpecialComment(e){(e===nx.Gt||this.fastForwardTo(nx.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=sx.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const t=32|e;t===hx.ScriptEnd[3]?this.startSpecial(hx.ScriptEnd,4):t===hx.StyleEnd[3]?this.startSpecial(hx.StyleEnd,4):(this.state=sx.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===nx.Number?this.state=sx.BeforeNumericEntity:e===nx.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=sx.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=lx(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];const t=this.trieCurrent&Jv.VALUE_LENGTH;if(t){const n=(t>>14)-1;if(this.allowLegacyEntity()||e===nx.Semi){const e=this.index-this.entityExcess+1;e>this.sectionStart&&this.emitPartial(this.sectionStart,e),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}}emitNamedEntity(){if(this.state=this.baseState,0===this.entityResult)return;switch((this.entityTrie[this.entityResult]&Jv.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~Jv.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(32|e)===nx.LowerX?(this.entityExcess++,this.state=sx.InHexEntity):(this.state=sx.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const t=this.index-this.entityExcess-1;t+2+Number(this.state===sx.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint($v(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===nx.Semi?this.emitNumericEntity(!0):dx(e)?(this.entityResult=10*this.entityResult+(e-nx.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===nx.Semi?this.emitNumericEntity(!0):dx(e)?(this.entityResult=16*this.entityResult+(e-nx.Zero),this.entityExcess++):!function(e){return e>=nx.UpperA&&e<=nx.UpperF||e>=nx.LowerA&&e<=nx.LowerF}(e)?(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--):(this.entityResult=16*this.entityResult+((32|e)-nx.LowerA+10),this.entityExcess++)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===sx.Text||this.baseState===sx.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===sx.Text||this.state===sx.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==sx.InAttributeValueDq&&this.state!==sx.InAttributeValueSq&&this.state!==sx.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case sx.Text:this.stateText(e);break;case sx.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case sx.InSpecialTag:this.stateInSpecialTag(e);break;case sx.CDATASequence:this.stateCDATASequence(e);break;case sx.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case sx.InAttributeName:this.stateInAttributeName(e);break;case sx.InCommentLike:this.stateInCommentLike(e);break;case sx.InSpecialComment:this.stateInSpecialComment(e);break;case sx.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case sx.InTagName:this.stateInTagName(e);break;case sx.InClosingTagName:this.stateInClosingTagName(e);break;case sx.BeforeTagName:this.stateBeforeTagName(e);break;case sx.AfterAttributeName:this.stateAfterAttributeName(e);break;case sx.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case sx.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case sx.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case sx.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case sx.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case sx.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case sx.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case sx.InDeclaration:this.stateInDeclaration(e);break;case sx.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case sx.BeforeComment:this.stateBeforeComment(e);break;case sx.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case sx.InNamedEntity:this.stateInNamedEntity(e);break;case sx.BeforeEntity:this.stateBeforeEntity(e);break;case sx.InHexEntity:this.stateInHexEntity(e);break;case sx.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===sx.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===sx.InCommentLike?this.currentSequence===hx.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===sx.InNumericEntity&&this.allowLegacyEntity()||this.state===sx.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===sx.InTagName||this.state===sx.BeforeAttributeName||this.state===sx.BeforeAttributeValue||this.state===sx.AfterAttributeName||this.state===sx.InAttributeName||this.state===sx.InAttributeValueSq||this.state===sx.InAttributeValueDq||this.state===sx.InAttributeValueNq||this.state===sx.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,t){this.baseState!==sx.Text&&this.baseState!==sx.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)}emitCodePoint(e){this.baseState!==sx.Text&&this.baseState!==sx.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const mx=new Set(["input","option","optgroup","select","button","datalist","textarea"]),gx=new Set(["p"]),yx=new Set(["thead","tbody"]),_x=new Set(["dd","dt"]),Ex=new Set(["rt","rp"]),bx=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",gx],["h1",gx],["h2",gx],["h3",gx],["h4",gx],["h5",gx],["h6",gx],["select",mx],["input",mx],["output",mx],["button",mx],["datalist",mx],["textarea",mx],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",_x],["dt",_x],["address",gx],["article",gx],["aside",gx],["blockquote",gx],["details",gx],["div",gx],["dl",gx],["fieldset",gx],["figcaption",gx],["figure",gx],["footer",gx],["form",gx],["header",gx],["hr",gx],["main",gx],["nav",gx],["ol",gx],["pre",gx],["section",gx],["table",gx],["ul",gx],["rt",Ex],["rp",Ex],["tbody",yx],["tfoot",yx]]),Tx=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),vx=new Set(["math","svg"]),xx=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Sx=/\s|\//;class Ax{constructor(e,t={}){var n,s,i,a,r;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(s=t.lowerCaseAttributeNames)&&void 0!==s?s:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:fx)(this.options,this),null===(r=(a=this.cbs).onparserinit)||void 0===r||r.call(a,this)}ontext(e,t){var n,s;const i=this.getSlice(e,t);this.endIndex=t-1,null===(s=(n=this.cbs).ontext)||void 0===s||s.call(n,i),this.startIndex=t}ontextentity(e){var t,n;const s=this.tokenizer.getSectionStart();this.endIndex=s-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,Zv(e)),this.startIndex=s}isVoidElement(e){return!this.options.xmlMode&&Tx.has(e)}onopentagname(e,t){this.endIndex=t;let n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(e){var t,n,s,i;this.openTagStart=this.startIndex,this.tagname=e;const a=!this.options.xmlMode&&bx.get(e);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){const e=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,e,!0)}this.isVoidElement(e)||(this.stack.push(e),vx.has(e)?this.foreignContext.push(!0):xx.has(e)&&this.foreignContext.push(!1)),null===(i=(s=this.cbs).onopentagname)||void 0===i||i.call(s,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,t){var n,s,i,a,r,o;this.endIndex=t;let c=this.getSlice(e,t);if(this.lowerCaseTagNames&&(c=c.toLowerCase()),(vx.has(c)||xx.has(c))&&this.foreignContext.pop(),this.isVoidElement(c))this.options.xmlMode||"br"!==c||(null===(s=(n=this.cbs).onopentagname)||void 0===s||s.call(n,"br"),null===(a=(i=this.cbs).onopentag)||void 0===a||a.call(i,"br",{},!0),null===(o=(r=this.cbs).onclosetag)||void 0===o||o.call(r,"br",!1));else{const e=this.stack.lastIndexOf(c);if(-1!==e)if(this.cbs.onclosetag){let t=this.stack.length-e;for(;t--;)this.cbs.onclosetag(this.stack.pop(),0!==t)}else this.stack.length=e;else this.options.xmlMode||"p"!==c||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var t,n;const s=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===s&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,s,!e),this.stack.pop())}onattribname(e,t){this.startIndex=e;const n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(e,t){this.attribvalue+=this.getSlice(e,t)}onattribentity(e){this.attribvalue+=Zv(e)}onattribend(e,t){var n,s;this.endIndex=t,null===(s=(n=this.cbs).onattribute)||void 0===s||s.call(n,this.attribname,this.attribvalue,e===ix.Double?'"':e===ix.Single?"'":e===ix.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const t=e.search(Sx);let n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`!${e}`,`!${n}`)}this.startIndex=t+1}onprocessinginstruction(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`?${e}`,`?${n}`)}this.startIndex=t+1}oncomment(e,t,n){var s,i,a,r;this.endIndex=t,null===(i=(s=this.cbs).oncomment)||void 0===i||i.call(s,this.getSlice(e,t-n)),null===(r=(a=this.cbs).oncommentend)||void 0===r||r.call(a),this.startIndex=t+1}oncdata(e,t,n){var s,i,a,r,o,c,l,u,p,d;this.endIndex=t;const h=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(s=this.cbs).oncdatastart)||void 0===i||i.call(s),null===(r=(a=this.cbs).ontext)||void 0===r||r.call(a,h),null===(c=(o=this.cbs).oncdataend)||void 0===c||c.call(o)):(null===(u=(l=this.cbs).oncomment)||void 0===u||u.call(l,`[CDATA[${h}]]`),null===(d=(p=this.cbs).oncommentend)||void 0===d||d.call(p)),this.startIndex=t+1}onend(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let e=this.stack.length;e>0;this.cbs.onclosetag(this.stack[--e],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)}reset(){var e,t,n,s;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(s=(n=this.cbs).onparserinit)||void 0===s||s.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);for(;t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))}end(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}class wx{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return Px(this,e)}}class Cx extends wx{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class Nx extends Cx{constructor(){super(...arguments),this.type=Am.Text}get nodeType(){return 3}}class Ix extends Cx{constructor(){super(...arguments),this.type=Am.Comment}get nodeType(){return 8}}class kx extends Cx{constructor(e,t){super(t),this.name=e,this.type=Am.Directive}get nodeType(){return 1}}class Ox extends wx{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class Dx extends Ox{constructor(){super(...arguments),this.type=Am.CDATA}get nodeType(){return 4}}class Rx extends Ox{constructor(){super(...arguments),this.type=Am.Root}get nodeType(){return 9}}class Lx extends Ox{constructor(e,t,n=[],s=("script"===e?Am.Script:"style"===e?Am.Style:Am.Tag)){super(n),this.name=e,this.attribs=t,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}}function Px(e,t=!1){let n;if(function(e){return e.type===Am.Text}(e))n=new Nx(e.data);else if(function(e){return e.type===Am.Comment}(e))n=new Ix(e.data);else if(function(e){return wm(e)}(e)){const s=t?Mx(e.children):[],i=new Lx(e.name,{...e.attribs},s);s.forEach((e=>e.parent=i)),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=i}else if(function(e){return e.type===Am.CDATA}(e)){const s=t?Mx(e.children):[],i=new Dx(s);s.forEach((e=>e.parent=i)),n=i}else if(function(e){return e.type===Am.Root}(e)){const s=t?Mx(e.children):[],i=new Rx(s);s.forEach((e=>e.parent=i)),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else{if(!function(e){return e.type===Am.Directive}(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new kx(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function Mx(e){const t=e.map((e=>Px(e,!0)));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}const Fx={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class Bx{constructor(e,t,n){this.dom=[],this.root=new Rx(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=Fx),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:Fx,this.elementCB=null!=n?n:null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new Rx(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,t){const n=this.options.xmlMode?Am.Tag:void 0,s=new Lx(e,t,void 0,n);this.addNode(s),this.tagStack.push(s)}ontext(e){const{lastNode:t}=this;if(t&&t.type===Am.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{const t=new Nx(e);this.addNode(t),this.lastNode=t}}oncomment(e){if(this.lastNode&&this.lastNode.type===Am.Comment)return void(this.lastNode.data+=e);const t=new Ix(e);this.addNode(t),this.lastNode=t}oncommentend(){this.lastNode=null}oncdatastart(){const e=new Nx(""),t=new Dx([e]);this.addNode(t),e.parent=t,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,t){const n=new kx(e,t);this.addNode(n)}handleCallback(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e}addNode(e){const t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null}}const Ux=function(e){return function(t,n,s,i){if("undefined"!=typeof Buffer&&Buffer.isBuffer(t)&&(t=t.toString()),"string"==typeof t)return e(t,n,s,i);const a=t;if(!Array.isArray(a)&&Km(a))return a;const r=new qm([]);return EE(a,r),r}}(((e,t,n,s)=>t.xmlMode||t._useHtmlParser2?function(e,t){const n=new Bx(void 0,t);return new Ax(n,t).end(e),n.root}(e,t):Yv(e,t,n,s))),Hx=function(e,t){return function n(s,i,a=!0){if(null==s)throw new Error("cheerio.load() expects a string");const r={...vm,...Sm(i)},o=e(s,r,a,null);class c extends PE{_make(e,t){const n=l(e,t);return n.prevObject=this,n}_parse(t,n,s,i){return e(t,n,s,i)}_render(e){return t(e,this.options)}}function l(t,n,s=o,i){if(t&&Ig(t))return t;const a={...r,...Sm(i)},l="string"==typeof s?[e(s,a,!1,null)]:"length"in s?s:[s],u=Ig(l)?l:new c(l,null,a);if(u._root=u,!t)return new c(void 0,u,a);const p="string"==typeof t&&Dg(t)?e(t,a,!1,null).children:(d=t).name||"root"===d.type||"text"===d.type||"comment"===d.type?[t]:Array.isArray(t)?t:void 0;var d;const h=new c(p,u,a);if(p)return h;if("string"!=typeof t)throw new Error("Unexpected type of selector");let f=t;const m=n?"string"==typeof n?Dg(n)?new c([e(n,a,!1,null)],u,a):(f=`${n} ${f}`,u):Ig(n)?n:new c(Array.isArray(n)?n:[n],u,a):u;return m?m.find(f):h}return Object.assign(l,Ng,{load:n,_root:o,_options:r,fn:c.prototype,prototype:c.prototype}),l}}(Ux,((e,t)=>t.xmlMode||t._useHtmlParser2?pg(e,t):function(e){const t="length"in e?e:[e];for(let e=0;e<t.length;e+=1){const n=t[e];Km(n)&&Array.prototype.splice.call(t,e,1,...n.children)}let n="";for(let e=0;e<t.length;e+=1)n+=Sv(t[e],zv);return n}(e)));Hx([]);const jx=class{constructor(){}async getApartmentList(){return await this.getRealItems()}async getCoordiantesFromAdress(e){const t=await Rs.get("https://nominatim.openstreetmap.org/search",{params:{q:e,format:"json"}});return t.data&&t.data.length>0?{latitude:t.data[0].lat,longitude:t.data[0].lon}:null}getImageUrlFromElement(e,t){var n;try{let s=e(t).find("div.mensaImag"),i=null==(n=null==s?void 0:s[0])?void 0:n.attribs,a=null==i?void 0:i.style;if(!a)return;const r=a.split("url(");if(r.length<2)return;const o=r[1];if(!o)return;let c=o.split(")")[0];if(!c)return;return jx.baseUrl+c}catch(e){return console.log("Error while fetching image url"),void console.log(e)}}async getRealItems(){try{let e=await Rs.get(jx.apartmentsUrl);const t=Hx(e.data);let n=[];return t("div.wohnheimListView").each(((e,s)=>{let i=t(s).find("h3").text().trim(),a=this.getImageUrlFromElement(t,s),r=jx.baseUrl+t(s).find("a").attr("href");n.push({basicData:{external_identifier:"apartment_"+i.replace(/\W+/g,"_"),available_from:null,handicapped_accessible:!1,family_friendly:!1,singleflat:!1},buildingData:{external_identifier:"building_"+i.replace(/\W+/g,"_"),url:r,alias:i,image_remote_url:a,year_of_construction:null}})})),n}catch(e){return console.log(e),[]}}};let Gx=jx;Gx.baseUrl="https://www.studentenwerk-hannover.de",Gx.apartmentsUrl=`${jx.baseUrl}/wohnen/wohnhaeuser`;const qx="housing_parse";var Yx=async({action:e,init:t},n)=>{if(!await er.checkAllTablesExistWithApiContext(qx,n))return;let s=null;switch(Yl.getSyncForCustomer()){case ql.TEST:s=null;break;case ql.HANNOVER:s=new Gx;break;case ql.OSNABRUECK:s=null}if(null===s)return void console.log("No ApartmentParserInterface found for SyncForCustomerEnum: "+Yl.getSyncForCustomer());const i=new Tm(n,s);let a=new Gl(n);t(cr.INIT_APP_STARTED,(async()=>{console.log(qx+": App started, resetting food parsing status and parsing hash"),await a.getAppSettingsHelper().setApartmentParsingStatus(Fl.FINISHED,null)})),e(Xa.APP_SETTINGS+".items.update",(async()=>{console.log(qx+" hook: update");try{await i.parse()}catch(e){console.log(e)}}))};const zx="WashingmachineParseSchedule";class Vx{constructor(e,t){this.apiContext=e,this.parser=t,this.myDatabaseHelper=new Gl(this.apiContext)}async setStatus(e){await this.myDatabaseHelper.getAppSettingsHelper().setWashingmachineParsingStatus(e,new Date)}async isEnabled(){return await this.myDatabaseHelper.getAppSettingsHelper().isWashingmachineParsingEnabled()}async getStatus(){return await this.myDatabaseHelper.getAppSettingsHelper().getWashingmachineParsingStatus()}async parse(){let e=await this.isEnabled(),t=await this.getStatus();if(e&&t===Fl.START){console.log("[Start] "+zx+" Parse Schedule"),await this.setStatus(Fl.RUNNING);try{let e=await this.parser.getWashingmachines();await this.updateWashingmachines(e),await this.setStatus(Fl.FINISHED)}catch(e){console.log("["+zx+"] Failed"),console.log(e),await this.setStatus(Fl.FAILED)}}}async updateWashingmachines(e){for(let t of e)await this.updateWashingmachine(t)}async updateWashingmachine(e){let t=this.myDatabaseHelper.getWashingmachinesHelper();const n={external_identifier:e.basicData.external_identifier},s=n;let i=await t.findOrCreateItem(n,s);if(i){const n=i.alias;let s=n&&n.length>0?n:e.basicData.alias;await t.updateOne(i.id,{...e.basicData,alias:s})}}}class Wx{constructor(){}async getWashingmachines(){let e=[],t="test_washingmachine_1",n="test_washingmachine_2",s=new Date;s.setMinutes(s.getMinutes()+(5-s.getMinutes()%5));let i=s.getMinutes()%10<5,a=i?n:t,r={external_identifier:i?t:n,date_finished:Ll.formatDateToIso8601WithoutTimezone(s)},o={external_identifier:a,date_finished:null};return e.push({basicData:r}),e.push({basicData:o}),e}}var Qx,Kx={},Zx={};function $x(){return Qx||(Qx=1,function(){Zx.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(C)),Zx}var Xx,Jx={},eS={},tS={};function nS(){return Xx||(Xx=1,function(){var e,t,n,s,i,a,r,o=[].slice,c={}.hasOwnProperty;e=function(){var e,t,n,s,a,r;if(r=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(e=0,n=a.length;e<n;e++)if(null!=(s=a[e]))for(t in s)c.call(s,t)&&(r[t]=s[t]);return r},i=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},a=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},n=function(e){return i(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},s=function(e){var t;if(n(e))return!e.length;for(t in e)if(c.call(e,t))return!1;return!0},r=function(e){var t,n;return a(e)&&(n=Object.getPrototypeOf(e))&&(t=n.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},t=function(e){return i(e.valueOf)?e.valueOf():e},tS.assign=e,tS.isFunction=i,tS.isObject=a,tS.isArray=n,tS.isEmpty=s,tS.isPlainObject=r,tS.getValue=t}.call(C)),tS}var sS,iS={exports:{}};function aS(){return sS||(sS=1,function(){iS.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}.call(C)),iS.exports}var rS,oS={exports:{}},cS={exports:{}},lS={exports:{}};function uS(){return rS||(rS=1,function(){lS.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}.call(C)),lS.exports}var pS,dS,hS={exports:{}};function fS(){return pS||(pS=1,function(){hS.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}.call(C)),hS.exports}function mS(){return dS||(dS=1,function(){var e,t;e=uS(),t=fS(),cS.exports=function(){function n(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},n.prototype.canSetParameter=function(e,t){return!0},n.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},n}()}.call(C)),cS.exports}var gS,yS={exports:{}},_S={exports:{}},ES={exports:{}};function bS(){return gS||(gS=1,function(){ES.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(C)),ES.exports}var TS,vS={exports:{}};function xS(){return TS||(TS=1,function(){var e;e=bS(),TA(),vS.exports=function(){function t(t,n,s){if(this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(s),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},t.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&(e.prefix===this.prefix&&(e.localName===this.localName&&e.value===this.value))},t}()}.call(C)),vS.exports}var SS,AS,wS={exports:{}};function CS(){return SS||(SS=1,function(){wS.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}.call(C)),wS.exports}function NS(){return AS||(AS=1,function(){var e,t,n,s,i,a,r,o,c={}.hasOwnProperty;o=nS(),r=o.isObject,a=o.isFunction,i=o.getValue,s=TA(),e=bS(),t=xS(),n=CS(),_S.exports=function(s){function o(t,n,s){var i,a,r,c;if(o.__super__.constructor.call(this,t),null==n)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(n),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,null!=s&&this.attribute(s),t.type===e.Document&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this,t.children))for(a=0,r=(c=t.children).length;a<r;a++)if((i=c[a]).type===e.DocType){i.name=this.name;break}}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(o,s),Object.defineProperty(o.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(o.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(o.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(o.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(o.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new n(this.attribs)),this.attributeMap}}),o.prototype.clone=function(){var e,t,n,s;for(t in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},s=this.attribs)c.call(s,t)&&(e=s[t],n.attribs[t]=e.clone());return n.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=n,n.children.push(t)})),n},o.prototype.attribute=function(e,n){var s,o;if(null!=e&&(e=i(e)),r(e))for(s in e)c.call(e,s)&&(o=e[s],this.attribute(s,o));else a(n)&&(n=n.apply()),this.options.keepNullAttributes&&null==n?this.attribs[e]=new t(this,e,""):null!=n&&(this.attribs[e]=new t(this,e,n));return this},o.prototype.removeAttribute=function(e){var t,n,s;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=i(e),Array.isArray(e))for(n=0,s=e.length;n<s;n++)t=e[n],delete this.attribs[t];else delete this.attribs[e];return this},o.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},o.prototype.att=function(e,t){return this.attribute(e,t)},o.prototype.a=function(e,t){return this.attribute(e,t)},o.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},o.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},o.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.setAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},o.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},o.prototype.setIdAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(e){var t,n,s;if(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=n=0,s=this.attribs.length-1;0<=s?n<=s:n>=s;t=0<=s?++n:--n)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},o}(s)}.call(C)),_S.exports}var IS,kS,OS={exports:{}},DS={exports:{}};function RS(){return IS||(IS=1,function(){var e,t={}.hasOwnProperty;e=TA(),DS.exports=function(e){function n(e){n.__super__.constructor.call(this,e),this.value=""}return function(e,n){for(var s in n)t.call(n,s)&&(e[s]=n[s]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(n,e),Object.defineProperty(n.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(n.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},n}(e)}.call(C)),DS.exports}function LS(){return kS||(kS=1,function(){var e,t,n={}.hasOwnProperty;e=bS(),t=RS(),OS.exports=function(t){function s(t,n){if(s.__super__.constructor.call(this,t),null==n)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(n)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},s}(t)}.call(C)),OS.exports}var PS,MS={exports:{}};function FS(){return PS||(PS=1,function(){var e,t,n={}.hasOwnProperty;e=bS(),t=RS(),MS.exports=function(t){function s(t,n){if(s.__super__.constructor.call(this,t),null==n)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(n)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},s}(t)}.call(C)),MS.exports}var BS,US={exports:{}};function HS(){return BS||(BS=1,function(){var e,t,n,s={}.hasOwnProperty;n=nS().isObject,t=TA(),e=bS(),US.exports=function(t){function i(t,s,a,r){var o;i.__super__.constructor.call(this,t),n(s)&&(s=(o=s).version,a=o.encoding,r=o.standalone),s||(s="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(s),null!=a&&(this.encoding=this.stringify.xmlEncoding(a)),null!=r&&(this.standalone=this.stringify.xmlStandalone(r))}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(i,t),i.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},i}(t)}.call(C)),US.exports}var jS,GS={exports:{}},qS={exports:{}};function YS(){return jS||(jS=1,function(){var e,t,n={}.hasOwnProperty;t=TA(),e=bS(),qS.exports=function(t){function s(t,n,i,a,r,o){if(s.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(n));if(!a)throw new Error("Missing DTD attribute type. "+this.debugInfo(n));if(!r)throw new Error("Missing DTD attribute default. "+this.debugInfo(n));if(0!==r.indexOf("#")&&(r="#"+r),!r.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(n));if(o&&!r.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(n));this.elementName=this.stringify.name(n),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(i),this.attributeType=this.stringify.dtdAttType(a),o&&(this.defaultValue=this.stringify.dtdAttDefault(o)),this.defaultValueType=r}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),s.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},s}(t)}.call(C)),qS.exports}var zS,VS={exports:{}};function WS(){return zS||(zS=1,function(){var e,t,n,s={}.hasOwnProperty;n=nS().isObject,t=TA(),e=bS(),VS.exports=function(t){function i(t,s,a,r){if(i.__super__.constructor.call(this,t),null==a)throw new Error("Missing DTD entity name. "+this.debugInfo(a));if(null==r)throw new Error("Missing DTD entity value. "+this.debugInfo(a));if(this.pe=!!s,this.name=this.stringify.name(a),this.type=e.EntityDeclaration,n(r)){if(!r.pubID&&!r.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(a));if(r.pubID&&!r.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(a));if(this.internal=!1,null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID)),null!=r.nData&&(this.nData=this.stringify.dtdNData(r.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(a))}else this.value=this.stringify.dtdEntityValue(r),this.internal=!0}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(i,t),Object.defineProperty(i.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(i.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(i.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(i.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(i.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(i.prototype,"xmlVersion",{get:function(){return null}}),i.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},i}(t)}.call(C)),VS.exports}var QS,KS={exports:{}};function ZS(){return QS||(QS=1,function(){var e,t,n={}.hasOwnProperty;t=TA(),e=bS(),KS.exports=function(t){function s(t,n,i){if(s.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(n),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),s.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},s}(t)}.call(C)),KS.exports}var $S,XS,JS={exports:{}};function eA(){return $S||($S=1,function(){var e,t,n={}.hasOwnProperty;t=TA(),e=bS(),JS.exports=function(t){function s(t,n,i){if(s.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD notation name. "+this.debugInfo(n));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(n));this.name=this.stringify.name(n),this.type=e.NotationDeclaration,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},s}(t)}.call(C)),JS.exports}function tA(){return XS||(XS=1,function(){var e,t,n,s,i,a,r,o,c={}.hasOwnProperty;o=nS().isObject,r=TA(),e=bS(),t=YS(),s=WS(),n=ZS(),i=eA(),a=CS(),GS.exports=function(r){function l(t,n,s){var i,a,r,c,u,p;if(l.__super__.constructor.call(this,t),this.type=e.DocType,t.children)for(a=0,r=(c=t.children).length;a<r;a++)if((i=c[a]).type===e.Element){this.name=i.name;break}this.documentObject=t,o(n)&&(n=(u=n).pubID,s=u.sysID),null==s&&(s=(p=[n,s])[0],n=p[1]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=s&&(this.sysID=this.stringify.dtdSysID(s))}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(l,r),Object.defineProperty(l.prototype,"entities",{get:function(){var t,n,s,i,r;for(i={},n=0,s=(r=this.children).length;n<s;n++)(t=r[n]).type!==e.EntityDeclaration||t.pe||(i[t.name]=t);return new a(i)}}),Object.defineProperty(l.prototype,"notations",{get:function(){var t,n,s,i,r;for(i={},n=0,s=(r=this.children).length;n<s;n++)(t=r[n]).type===e.NotationDeclaration&&(i[t.name]=t);return new a(i)}}),Object.defineProperty(l.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(l.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(l.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),l.prototype.element=function(e,t){var s;return s=new n(this,e,t),this.children.push(s),this},l.prototype.attList=function(e,n,s,i,a){var r;return r=new t(this,e,n,s,i,a),this.children.push(r),this},l.prototype.entity=function(e,t){var n;return n=new s(this,!1,e,t),this.children.push(n),this},l.prototype.pEntity=function(e,t){var n;return n=new s(this,!0,e,t),this.children.push(n),this},l.prototype.notation=function(e,t){var n;return n=new i(this,e,t),this.children.push(n),this},l.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},l.prototype.ele=function(e,t){return this.element(e,t)},l.prototype.att=function(e,t,n,s,i){return this.attList(e,t,n,s,i)},l.prototype.ent=function(e,t){return this.entity(e,t)},l.prototype.pent=function(e,t){return this.pEntity(e,t)},l.prototype.not=function(e,t){return this.notation(e,t)},l.prototype.up=function(){return this.root()||this.documentObject},l.prototype.isEqualNode=function(e){return!!l.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&(e.name===this.name&&(e.publicId===this.publicId&&e.systemId===this.systemId))},l}(r)}.call(C)),GS.exports}var nA,sA={exports:{}};function iA(){return nA||(nA=1,function(){var e,t,n={}.hasOwnProperty;e=bS(),t=TA(),sA.exports=function(t){function s(t,n){if(s.__super__.constructor.call(this,t),null==n)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(n)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},s}(t)}.call(C)),sA.exports}var aA,rA={exports:{}};function oA(){return aA||(aA=1,function(){var e,t,n={}.hasOwnProperty;e=bS(),t=RS(),rA.exports=function(t){function s(t,n){if(s.__super__.constructor.call(this,t),null==n)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(n)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var e,t,n;for(n="",t=this.previousSibling;t;)n=t.data+n,t=t.previousSibling;for(n+=this.data,e=this.nextSibling;e;)n+=e.data,e=e.nextSibling;return n}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},s.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(t)}.call(C)),rA.exports}var cA,lA={exports:{}};function uA(){return cA||(cA=1,function(){var e,t,n={}.hasOwnProperty;e=bS(),t=RS(),lA.exports=function(t){function s(t,n,i){if(s.__super__.constructor.call(this,t),null==n)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(n),this.name=this.target,i&&(this.value=this.stringify.insValue(i))}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},s.prototype.isEqualNode=function(e){return!!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},s}(t)}.call(C)),lA.exports}var pA,dA={exports:{}};function hA(){return pA||(pA=1,function(){var e,t,n={}.hasOwnProperty;t=TA(),e=bS(),dA.exports=function(t){function s(t){s.__super__.constructor.call(this,t),this.type=e.Dummy}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(s,t),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return""},s}(t)}.call(C)),dA.exports}var fA,mA={exports:{}};function gA(){return fA||(fA=1,function(){mA.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}.call(C)),mA.exports}var yA,_A,EA={exports:{}};function bA(){return yA||(yA=1,function(){EA.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(C)),EA.exports}function TA(){return _A||(_A=1,function(){var e,t,n,s,i,a,r,o,c,l,u,p,d,h,f,m,g,y={}.hasOwnProperty;g=nS(),m=g.isObject,f=g.isFunction,h=g.isEmpty,d=g.getValue,o=null,n=null,s=null,i=null,a=null,u=null,p=null,l=null,r=null,t=null,c=null,e=null,yS.exports=function(){function g(d){this.parent=d,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,o||(o=NS(),n=LS(),s=FS(),i=HS(),a=tA(),u=iA(),p=oA(),l=uA(),r=hA(),t=bS(),c=gA(),CS(),e=bA())}return Object.defineProperty(g.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(g.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(g.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(g.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new c(this.children)),this.childNodeList}}),Object.defineProperty(g.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(g.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(g.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(g.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(g.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(g.prototype,"textContent",{get:function(){var e,n,s,i,a;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(a="",n=0,s=(i=this.children).length;n<s;n++)(e=i[n]).textContent&&(a+=e.textContent);return a}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.setParent=function(e){var t,n,s,i,a;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),a=[],n=0,s=(i=this.children).length;n<s;n++)t=i[n],a.push(t.setParent(this));return a},g.prototype.element=function(e,t,n){var s,i,a,r,o,c,l,u,p,g,_;if(c=null,null===t&&null==n&&(t=(p=[{},null])[0],n=p[1]),null==t&&(t={}),t=d(t),m(t)||(n=(g=[t,n])[0],t=g[1]),null!=e&&(e=d(e)),Array.isArray(e))for(a=0,l=e.length;a<l;a++)i=e[a],c=this.element(i);else if(f(e))c=this.element(e.apply());else if(m(e)){for(o in e)if(y.call(e,o))if(_=e[o],f(_)&&(_=_.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===o.indexOf(this.stringify.convertAttKey))c=this.attribute(o.substr(this.stringify.convertAttKey.length),_);else if(!this.options.separateArrayItems&&Array.isArray(_)&&h(_))c=this.dummy();else if(m(_)&&h(_))c=this.element(o);else if(this.options.keepNullNodes||null!=_)if(!this.options.separateArrayItems&&Array.isArray(_))for(r=0,u=_.length;r<u;r++)i=_[r],(s={})[o]=i,c=this.element(s);else m(_)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===o.indexOf(this.stringify.convertTextKey)?c=this.element(_):(c=this.element(o)).element(_):c=this.element(o,_);else c=this.dummy()}else c=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),n):this.node(e,t,n):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c},g.prototype.insertBefore=function(e,t,n){var s,i,a,r,o;if(null!=e?e.type:void 0)return r=t,(a=e).setParent(this),r?(i=children.indexOf(r),o=children.splice(i),children.push(a),Array.prototype.push.apply(children,o)):children.push(a),a;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),s=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,o),s},g.prototype.insertAfter=function(e,t,n){var s,i,a;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i+1),s=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,a),s},g.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},g.prototype.node=function(e,t,n){var s,i;return null!=e&&(e=d(e)),t||(t={}),t=d(t),m(t)||(n=(i=[t,n])[0],t=i[1]),s=new o(this,e,t),null!=n&&s.text(n),this.children.push(s),s},g.prototype.text=function(e){var t;return m(e)&&this.element(e),t=new p(this,e),this.children.push(t),this},g.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},g.prototype.comment=function(e){var t;return t=new s(this,e),this.children.push(t),this},g.prototype.commentBefore=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},g.prototype.commentAfter=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},g.prototype.raw=function(e){var t;return t=new u(this,e),this.children.push(t),this},g.prototype.dummy=function(){return new r(this)},g.prototype.instruction=function(e,t){var n,s,i,a,r;if(null!=e&&(e=d(e)),null!=t&&(t=d(t)),Array.isArray(e))for(a=0,r=e.length;a<r;a++)n=e[a],this.instruction(n);else if(m(e))for(n in e)y.call(e,n)&&(s=e[n],this.instruction(n,s));else f(t)&&(t=t.apply()),i=new l(this,e,t),this.children.push(i);return this},g.prototype.instructionBefore=function(e,t){var n,s;return n=this.parent.children.indexOf(this),s=this.parent.children.splice(n),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,s),this},g.prototype.instructionAfter=function(e,t){var n,s;return n=this.parent.children.indexOf(this),s=this.parent.children.splice(n+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,s),this},g.prototype.declaration=function(e,n,s){var a,r;return a=this.document(),r=new i(a,e,n,s),0===a.children.length?a.children.unshift(r):a.children[0].type===t.Declaration?a.children[0]=r:a.children.unshift(r),a.root()||a},g.prototype.dtd=function(e,n){var s,i,r,o,c,l,u,p,d;for(s=this.document(),i=new a(s,e,n),r=o=0,l=(p=s.children).length;o<l;r=++o)if(p[r].type===t.DocType)return s.children[r]=i,i;for(r=c=0,u=(d=s.children).length;c<u;r=++c)if(d[r].isRoot)return s.children.splice(r,0,i),i;return s.children.push(i),i},g.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},g.prototype.root=function(){var e;for(e=this;e;){if(e.type===t.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},g.prototype.document=function(){var e;for(e=this;e;){if(e.type===t.Document)return e;e=e.parent}},g.prototype.end=function(e){return this.document().end(e)},g.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},g.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},g.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},g.prototype.debugInfo=function(e){var t,n;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},g.prototype.ele=function(e,t,n){return this.element(e,t,n)},g.prototype.nod=function(e,t,n){return this.node(e,t,n)},g.prototype.txt=function(e){return this.text(e)},g.prototype.dat=function(e){return this.cdata(e)},g.prototype.com=function(e){return this.comment(e)},g.prototype.ins=function(e,t){return this.instruction(e,t)},g.prototype.doc=function(){return this.document()},g.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},g.prototype.e=function(e,t,n){return this.element(e,t,n)},g.prototype.n=function(e,t,n){return this.node(e,t,n)},g.prototype.t=function(e){return this.text(e)},g.prototype.d=function(e){return this.cdata(e)},g.prototype.c=function(e){return this.comment(e)},g.prototype.r=function(e){return this.raw(e)},g.prototype.i=function(e,t){return this.instruction(e,t)},g.prototype.u=function(){return this.up()},g.prototype.importXMLBuilder=function(e){return this.importDocument(e)},g.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasChildNodes=function(){return 0!==this.children.length},g.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isSupported=function(e,t){return!0},g.prototype.hasAttributes=function(){return 0!==this.attribs.length},g.prototype.compareDocumentPosition=function(t){var n,s;return(n=this)===t?0:this.document()!==t.document()?(s=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?s|=e.Preceding:s|=e.Following,s):n.isAncestor(t)?e.Contains|e.Preceding:n.isDescendant(t)?e.Contains|e.Following:n.isPreceding(t)?e.Preceding:e.Following},g.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(e){var t,n,s;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=n=0,s=this.children.length-1;0<=s?n<=s:n>=s;t=0<=s?++n:--n)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},g.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setUserData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},g.prototype.isDescendant=function(e){var t,n,s,i;for(n=0,s=(i=this.children).length;n<s;n++){if(e===(t=i[n]))return!0;if(t.isDescendant(e))return!0}return!1},g.prototype.isAncestor=function(e){return e.isDescendant(this)},g.prototype.isPreceding=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t<n},g.prototype.isFollowing=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t>n},g.prototype.treePosition=function(e){var t,n;return n=0,t=!1,this.foreachTreeNode(this.document(),(function(s){if(n++,!t&&s===e)return t=!0})),t?n:-1},g.prototype.foreachTreeNode=function(e,t){var n,s,i,a,r;for(e||(e=this.document()),s=0,i=(a=e.children).length;s<i;s++){if(r=t(n=a[s]))return r;if(r=this.foreachTreeNode(n,t))return r}},g}()}.call(C)),yS.exports}var vA,xA={exports:{}};function SA(){return vA||(vA=1,function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty;xA.exports=function(){function n(n){var s,i,a;for(s in this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this),n||(n={}),this.options=n,this.options.version||(this.options.version="1.0"),i=n.stringify||{})t.call(i,s)&&(a=i[s],this[s]=a)}return n.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},n.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},n.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},n.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},n.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},n.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},n.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},n.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},n.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},n.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},n.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(e){var t,n;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+n.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+n.index);return e},n.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},n.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}.call(C)),xA.exports}var AA,wA,CA,NA,IA={exports:{}},kA={exports:{}},OA={exports:{}};function DA(){return AA||(AA=1,function(){OA.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(C)),OA.exports}function RA(){return wA||(wA=1,function(){var e,t,n,s={}.hasOwnProperty;n=nS().assign,e=bS(),HS(),tA(),LS(),FS(),NS(),iA(),oA(),uA(),hA(),YS(),ZS(),WS(),eA(),t=DA(),kA.exports=function(){function i(e){var t,n,i;for(t in e||(e={}),this.options=e,n=e.writer||{})s.call(n,t)&&(i=n[t],this["_"+t]=this[t],this[t]=i)}return i.prototype.filterOptions=function(e){var s,i,a,r,o,c,l,u;return e||(e={}),e=n({},this.options,e),(s={writer:this}).pretty=e.pretty||!1,s.allowEmpty=e.allowEmpty||!1,s.indent=null!=(i=e.indent)?i:"  ",s.newline=null!=(a=e.newline)?a:"\n",s.offset=null!=(r=e.offset)?r:0,s.dontPrettyTextNodes=null!=(o=null!=(c=e.dontPrettyTextNodes)?c:e.dontprettytextnodes)?o:0,s.spaceBeforeSlash=null!=(l=null!=(u=e.spaceBeforeSlash)?u:e.spacebeforeslash)?l:"",!0===s.spaceBeforeSlash&&(s.spaceBeforeSlash=" "),s.suppressPrettyCount=0,s.user={},s.state=t.None,s},i.prototype.indent=function(e,t,n){var s;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(s=(n||0)+t.offset+1)>0?new Array(s).join(t.indent):""},i.prototype.endline=function(e,t,n){return!t.pretty||t.suppressPrettyCount?"":t.newline},i.prototype.attribute=function(e,t,n){var s;return this.openAttribute(e,t,n),s=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,n),s},i.prototype.cdata=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s)+"<![CDATA[",n.state=t.InsideTag,i+=e.value,n.state=t.CloseTag,i+="]]>"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.comment=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s)+"\x3c!-- ",n.state=t.InsideTag,i+=e.value,n.state=t.CloseTag,i+=" --\x3e"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.declaration=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s)+"<?xml",n.state=t.InsideTag,i+=' version="'+e.version+'"',null!=e.encoding&&(i+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(i+=' standalone="'+e.standalone+'"'),n.state=t.CloseTag,i+=n.spaceBeforeSlash+"?>",i+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.docType=function(e,n,s){var i,a,r,o,c;if(s||(s=0),this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s),o+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(o+=" [",o+=this.endline(e,n,s),n.state=t.InsideTag,a=0,r=(c=e.children).length;a<r;a++)i=c[a],o+=this.writeChildNode(i,n,s+1);n.state=t.CloseTag,o+="]"}return n.state=t.CloseTag,o+=n.spaceBeforeSlash+">",o+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},i.prototype.element=function(n,i,a){var r,o,c,l,u,p,d,h,f,m,g,y,_,E;for(f in a||(a=0),m=!1,g="",this.openNode(n,i,a),i.state=t.OpenTag,g+=this.indent(n,i,a)+"<"+n.name,y=n.attribs)s.call(y,f)&&(r=y[f],g+=this.attribute(r,i,a));if(l=0===(c=n.children.length)?null:n.children[0],0===c||n.children.every((function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value})))i.allowEmpty?(g+=">",i.state=t.CloseTag,g+="</"+n.name+">"+this.endline(n,i,a)):(i.state=t.CloseTag,g+=i.spaceBeforeSlash+"/>"+this.endline(n,i,a));else if(!i.pretty||1!==c||l.type!==e.Text&&l.type!==e.Raw||null==l.value){if(i.dontPrettyTextNodes)for(u=0,d=(_=n.children).length;u<d;u++)if(((o=_[u]).type===e.Text||o.type===e.Raw)&&null!=o.value){i.suppressPrettyCount++,m=!0;break}for(g+=">"+this.endline(n,i,a),i.state=t.InsideTag,p=0,h=(E=n.children).length;p<h;p++)o=E[p],g+=this.writeChildNode(o,i,a+1);i.state=t.CloseTag,g+=this.indent(n,i,a)+"</"+n.name+">",m&&i.suppressPrettyCount--,g+=this.endline(n,i,a),i.state=t.None}else g+=">",i.state=t.InsideTag,i.suppressPrettyCount++,m=!0,g+=this.writeChildNode(l,i,a+1),i.suppressPrettyCount--,m=!1,i.state=t.CloseTag,g+="</"+n.name+">"+this.endline(n,i,a);return this.closeNode(n,i,a),g},i.prototype.writeChildNode=function(t,n,s){switch(t.type){case e.CData:return this.cdata(t,n,s);case e.Comment:return this.comment(t,n,s);case e.Element:return this.element(t,n,s);case e.Raw:return this.raw(t,n,s);case e.Text:return this.text(t,n,s);case e.ProcessingInstruction:return this.processingInstruction(t,n,s);case e.Dummy:return"";case e.Declaration:return this.declaration(t,n,s);case e.DocType:return this.docType(t,n,s);case e.AttributeDeclaration:return this.dtdAttList(t,n,s);case e.ElementDeclaration:return this.dtdElement(t,n,s);case e.EntityDeclaration:return this.dtdEntity(t,n,s);case e.NotationDeclaration:return this.dtdNotation(t,n,s);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},i.prototype.processingInstruction=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s)+"<?",n.state=t.InsideTag,i+=e.target,e.value&&(i+=" "+e.value),n.state=t.CloseTag,i+=n.spaceBeforeSlash+"?>",i+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.raw=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s),n.state=t.InsideTag,i+=e.value,n.state=t.CloseTag,i+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.text=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s),n.state=t.InsideTag,i+=e.value,n.state=t.CloseTag,i+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.dtdAttList=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s)+"<!ATTLIST",n.state=t.InsideTag,i+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(i+=" "+e.defaultValueType),e.defaultValue&&(i+=' "'+e.defaultValue+'"'),n.state=t.CloseTag,i+=n.spaceBeforeSlash+">"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.dtdElement=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s)+"<!ELEMENT",n.state=t.InsideTag,i+=" "+e.name+" "+e.value,n.state=t.CloseTag,i+=n.spaceBeforeSlash+">"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.dtdEntity=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s)+"<!ENTITY",n.state=t.InsideTag,e.pe&&(i+=" %"),i+=" "+e.name,e.value?i+=' "'+e.value+'"':(e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.nData&&(i+=" NDATA "+e.nData)),n.state=t.CloseTag,i+=n.spaceBeforeSlash+">"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.dtdNotation=function(e,n,s){var i;return this.openNode(e,n,s),n.state=t.OpenTag,i=this.indent(e,n,s)+"<!NOTATION",n.state=t.InsideTag,i+=" "+e.name,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?i+=' PUBLIC "'+e.pubID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),n.state=t.CloseTag,i+=n.spaceBeforeSlash+">"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),i},i.prototype.openNode=function(e,t,n){},i.prototype.closeNode=function(e,t,n){},i.prototype.openAttribute=function(e,t,n){},i.prototype.closeAttribute=function(e,t,n){},i}()}.call(C)),kA.exports}function LA(){return CA||(CA=1,function(){var e,t={}.hasOwnProperty;e=RA(),IA.exports=function(e){function n(e){n.__super__.constructor.call(this,e)}return function(e,n){for(var s in n)t.call(n,s)&&(e[s]=n[s]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(n,e),n.prototype.document=function(e,t){var n,s,i,a,r;for(t=this.filterOptions(t),a="",s=0,i=(r=e.children).length;s<i;s++)n=r[s],a+=this.writeChildNode(n,t,0);return t.pretty&&a.slice(-t.newline.length)===t.newline&&(a=a.slice(0,-t.newline.length)),a},n}(e)}.call(C)),IA.exports}function PA(){return NA||(NA=1,function(){var e,t,n,s,i,a,r,o={}.hasOwnProperty;r=nS().isPlainObject,n=aS(),t=mS(),s=TA(),e=bS(),a=SA(),i=LA(),oS.exports=function(s){function c(n){c.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new t,n||(n={}),n.writer||(n.writer=new i),this.options=n,this.stringify=new a(n)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(c,s),Object.defineProperty(c.prototype,"implementation",{value:new n}),Object.defineProperty(c.prototype,"doctype",{get:function(){var t,n,s,i;for(n=0,s=(i=this.children).length;n<s;n++)if((t=i[n]).type===e.DocType)return t;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c.prototype.end=function(e){var t;return t={},e?r(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},c.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},c.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.renameNode=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createNodeIterator=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTreeWalker=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},c}(s)}.call(C)),oS.exports}var MA,FA={exports:{}};function BA(){return MA||(MA=1,function(){var e,t,n,s,i,a,r,o,c,l,u,p,d,h,f,m,g,y,_,E,b,T,v,x={}.hasOwnProperty;v=nS(),b=v.isObject,E=v.isFunction,T=v.isPlainObject,_=v.getValue,e=bS(),p=PA(),d=NS(),s=LS(),i=FS(),f=iA(),y=oA(),h=uA(),l=HS(),u=tA(),a=YS(),o=WS(),r=ZS(),c=eA(),n=xS(),g=SA(),m=LA(),t=DA(),FA.exports=function(){function v(t,n,s){var i;this.name="?xml",this.type=e.Document,t||(t={}),i={},t.writer?T(t.writer)&&(i=t.writer,t.writer=new m):t.writer=new m,this.options=t,this.writer=t.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new g(t),this.onDataCallback=n||function(){},this.onEndCallback=s||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return v.prototype.createChildNode=function(t){var n,s,i,a,r,o,c,l;switch(t.type){case e.CData:this.cdata(t.value);break;case e.Comment:this.comment(t.value);break;case e.Element:for(s in i={},c=t.attribs)x.call(c,s)&&(n=c[s],i[s]=n.value);this.node(t.name,i);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(t.value);break;case e.Text:this.text(t.value);break;case e.ProcessingInstruction:this.instruction(t.target,t.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+t.constructor.name)}for(r=0,o=(l=t.children).length;r<o;r++)a=l[r],this.createChildNode(a),a.type===e.Element&&this.up();return this},v.prototype.dummy=function(){return this},v.prototype.node=function(e,t,n){var s;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=_(e),null==t&&(t={}),t=_(t),b(t)||(n=(s=[t,n])[0],t=s[1]),this.currentNode=new d(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},v.prototype.element=function(t,n,s){var i,a,r,o,c,l;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(t)||b(t)||E(t))for(o=this.options.noValidation,this.options.noValidation=!0,(l=new p(this.options).element("TEMP_ROOT")).element(t),this.options.noValidation=o,a=0,r=(c=l.children).length;a<r;a++)i=c[a],this.createChildNode(i),i.type===e.Element&&this.up();else this.node(t,n,s);return this},v.prototype.attribute=function(e,t){var s,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=_(e)),b(e))for(s in e)x.call(e,s)&&(i=e[s],this.attribute(s,i));else E(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new n(this,e,""):null!=t&&(this.currentNode.attribs[e]=new n(this,e,t));return this},v.prototype.text=function(e){var t;return this.openCurrent(),t=new y(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.cdata=function(e){var t;return this.openCurrent(),t=new s(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.comment=function(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.raw=function(e){var t;return this.openCurrent(),t=new f(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.instruction=function(e,t){var n,s,i,a,r;if(this.openCurrent(),null!=e&&(e=_(e)),null!=t&&(t=_(t)),Array.isArray(e))for(n=0,a=e.length;n<a;n++)s=e[n],this.instruction(s);else if(b(e))for(s in e)x.call(e,s)&&(i=e[s],this.instruction(s,i));else E(t)&&(t=t.apply()),r=new h(this,e,t),this.onData(this.writer.processingInstruction(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},v.prototype.declaration=function(e,t,n){var s;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return s=new l(this,e,t,n),this.onData(this.writer.declaration(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.doctype=function(e,t,n){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new u(this,t,n),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},v.prototype.dtdElement=function(e,t){var n;return this.openCurrent(),n=new r(this,e,t),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.attList=function(e,t,n,s,i){var r;return this.openCurrent(),r=new a(this,e,t,n,s,i),this.onData(this.writer.dtdAttList(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.entity=function(e,t){var n;return this.openCurrent(),n=new o(this,!1,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.pEntity=function(e,t){var n;return this.openCurrent(),n=new o(this,!0,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.notation=function(e,t){var n;return this.openCurrent(),n=new c(this,e,t),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},v.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},v.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},v.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},v.prototype.openNode=function(n){var s,i,a,r;if(!n.isOpen){if(this.root||0!==this.currentLevel||n.type!==e.Element||(this.root=n),i="",n.type===e.Element){for(a in this.writerOptions.state=t.OpenTag,i=this.writer.indent(n,this.writerOptions,this.currentLevel)+"<"+n.name,r=n.attribs)x.call(r,a)&&(s=r[a],i+=this.writer.attribute(s,this.writerOptions,this.currentLevel));i+=(n.children?">":"/>")+this.writer.endline(n,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,i=this.writer.indent(n,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+n.rootNodeName,n.pubID&&n.sysID?i+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(i+=' SYSTEM "'+n.sysID+'"'),n.children?(i+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,i+=">"),i+=this.writer.endline(n,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),n.isOpen=!0}},v.prototype.closeNode=function(n){var s;if(!n.isClosed)return s="",this.writerOptions.state=t.CloseTag,s=n.type===e.Element?this.writer.indent(n,this.writerOptions,this.currentLevel)+"</"+n.name+">"+this.writer.endline(n,this.writerOptions,this.currentLevel):this.writer.indent(n,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(n,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(s,this.currentLevel),n.isClosed=!0},v.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},v.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},v.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},v.prototype.ele=function(){return this.element.apply(this,arguments)},v.prototype.nod=function(e,t,n){return this.node(e,t,n)},v.prototype.txt=function(e){return this.text(e)},v.prototype.dat=function(e){return this.cdata(e)},v.prototype.com=function(e){return this.comment(e)},v.prototype.ins=function(e,t){return this.instruction(e,t)},v.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},v.prototype.dtd=function(e,t,n){return this.doctype(e,t,n)},v.prototype.e=function(e,t,n){return this.element(e,t,n)},v.prototype.n=function(e,t,n){return this.node(e,t,n)},v.prototype.t=function(e){return this.text(e)},v.prototype.d=function(e){return this.cdata(e)},v.prototype.c=function(e){return this.comment(e)},v.prototype.r=function(e){return this.raw(e)},v.prototype.i=function(e,t){return this.instruction(e,t)},v.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},v.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},v.prototype.ent=function(e,t){return this.entity(e,t)},v.prototype.pent=function(e,t){return this.pEntity(e,t)},v.prototype.not=function(e,t){return this.notation(e,t)},v}()}.call(C)),FA.exports}var UA,HA,jA,GA={exports:{}};function qA(){return UA||(UA=1,function(){var e,t,n,s={}.hasOwnProperty;e=bS(),n=RA(),t=DA(),GA.exports=function(n){function i(e,t){this.stream=e,i.__super__.constructor.call(this,t)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(i,n),i.prototype.endline=function(e,n,s){return e.isLastRootNode&&n.state===t.CloseTag?"":i.__super__.endline.call(this,e,n,s)},i.prototype.document=function(e,t){var n,s,i,a,r,o,c,l,u;for(s=i=0,r=(c=e.children).length;i<r;s=++i)(n=c[s]).isLastRootNode=s===e.children.length-1;for(t=this.filterOptions(t),u=[],a=0,o=(l=e.children).length;a<o;a++)n=l[a],u.push(this.writeChildNode(n,t,0));return u},i.prototype.attribute=function(e,t,n){return this.stream.write(i.__super__.attribute.call(this,e,t,n))},i.prototype.cdata=function(e,t,n){return this.stream.write(i.__super__.cdata.call(this,e,t,n))},i.prototype.comment=function(e,t,n){return this.stream.write(i.__super__.comment.call(this,e,t,n))},i.prototype.declaration=function(e,t,n){return this.stream.write(i.__super__.declaration.call(this,e,t,n))},i.prototype.docType=function(e,n,s){var i,a,r,o;if(s||(s=0),this.openNode(e,n,s),n.state=t.OpenTag,this.stream.write(this.indent(e,n,s)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,n,s)),n.state=t.InsideTag,a=0,r=(o=e.children).length;a<r;a++)i=o[a],this.writeChildNode(i,n,s+1);n.state=t.CloseTag,this.stream.write("]")}return n.state=t.CloseTag,this.stream.write(n.spaceBeforeSlash+">"),this.stream.write(this.endline(e,n,s)),n.state=t.None,this.closeNode(e,n,s)},i.prototype.element=function(n,i,a){var r,o,c,l,u,p,d,h,f;for(d in a||(a=0),this.openNode(n,i,a),i.state=t.OpenTag,this.stream.write(this.indent(n,i,a)+"<"+n.name),h=n.attribs)s.call(h,d)&&(r=h[d],this.attribute(r,i,a));if(l=0===(c=n.children.length)?null:n.children[0],0===c||n.children.every((function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value})))i.allowEmpty?(this.stream.write(">"),i.state=t.CloseTag,this.stream.write("</"+n.name+">")):(i.state=t.CloseTag,this.stream.write(i.spaceBeforeSlash+"/>"));else if(!i.pretty||1!==c||l.type!==e.Text&&l.type!==e.Raw||null==l.value){for(this.stream.write(">"+this.endline(n,i,a)),i.state=t.InsideTag,u=0,p=(f=n.children).length;u<p;u++)o=f[u],this.writeChildNode(o,i,a+1);i.state=t.CloseTag,this.stream.write(this.indent(n,i,a)+"</"+n.name+">")}else this.stream.write(">"),i.state=t.InsideTag,i.suppressPrettyCount++,this.writeChildNode(l,i,a+1),i.suppressPrettyCount--,i.state=t.CloseTag,this.stream.write("</"+n.name+">");return this.stream.write(this.endline(n,i,a)),i.state=t.None,this.closeNode(n,i,a)},i.prototype.processingInstruction=function(e,t,n){return this.stream.write(i.__super__.processingInstruction.call(this,e,t,n))},i.prototype.raw=function(e,t,n){return this.stream.write(i.__super__.raw.call(this,e,t,n))},i.prototype.text=function(e,t,n){return this.stream.write(i.__super__.text.call(this,e,t,n))},i.prototype.dtdAttList=function(e,t,n){return this.stream.write(i.__super__.dtdAttList.call(this,e,t,n))},i.prototype.dtdElement=function(e,t,n){return this.stream.write(i.__super__.dtdElement.call(this,e,t,n))},i.prototype.dtdEntity=function(e,t,n){return this.stream.write(i.__super__.dtdEntity.call(this,e,t,n))},i.prototype.dtdNotation=function(e,t,n){return this.stream.write(i.__super__.dtdNotation.call(this,e,t,n))},i}(n)}.call(C)),GA.exports}function YA(){return jA||(jA=1,function(){var e,t,n,s,i,a={}.hasOwnProperty;HA||(HA=1,function(){var e,t,n,s,i,a,r,o,c,l;l=nS(),o=l.assign,c=l.isFunction,n=aS(),s=PA(),i=BA(),r=LA(),a=qA(),e=bS(),t=DA(),eS.create=function(e,t,n,i){var a,r;if(null==e)throw new Error("Root element needs a name.");return i=o({},t,n,i),r=(a=new s(i)).element(e),i.headless||(a.declaration(i),null==i.pubID&&null==i.sysID||a.dtd(i)),r},eS.begin=function(e,t,n){var a;return c(e)&&(t=(a=[e,t])[0],n=a[1],e={}),t?new i(e,t,n):new s(e)},eS.stringWriter=function(e){return new r(e)},eS.streamWriter=function(e,t){return new a(e,t)},eS.implementation=new n,eS.nodeType=e,eS.writerState=t}.call(C)),e=eS,t=$x().defaults,s=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},i=function(e){return"<![CDATA["+n(e)+"]]>"},n=function(e){return e.replace("]]>","]]]]><![CDATA[>")},Jx.Builder=function(){function n(e){var n,s,i;for(n in this.options={},s=t[.2])a.call(s,n)&&(i=s[n],this.options[n]=i);for(n in e)a.call(e,n)&&(i=e[n],this.options[n]=i)}return n.prototype.buildObject=function(n){var r,o,c,l,u,p;return r=this.options.attrkey,o=this.options.charkey,1===Object.keys(n).length&&this.options.rootName===t[.2].rootName?n=n[u=Object.keys(n)[0]]:u=this.options.rootName,p=this,c=function(e,t){var n,l,u,d,h,f;if("object"!=typeof t)p.options.cdata&&s(t)?e.raw(i(t)):e.txt(t);else if(Array.isArray(t)){for(d in t)if(a.call(t,d))for(h in l=t[d])u=l[h],e=c(e.ele(h),u).up()}else for(h in t)if(a.call(t,h))if(l=t[h],h===r){if("object"==typeof l)for(n in l)f=l[n],e=e.att(n,f)}else if(h===o)e=p.options.cdata&&s(l)?e.raw(i(l)):e.txt(l);else if(Array.isArray(l))for(d in l)a.call(l,d)&&(e="string"==typeof(u=l[d])?p.options.cdata&&s(u)?e.ele(h).raw(i(u)).up():e.ele(h,u).up():c(e.ele(h),u).up());else"object"==typeof l?e=c(e.ele(h),l).up():"string"==typeof l&&p.options.cdata&&s(l)?e=e.ele(h).raw(i(l)).up():(null==l&&(l=""),e=e.ele(h,l.toString()).up());return e},l=e.create(u,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(l,n).end(this.options.renderOpts)},n}()}.call(C)),Jx}var zA,VA={},WA={};function QA(){return zA||(zA=1,function(e){e.parser=function(e,t){return new s(e,t)},e.SAXParser=s,e.SAXStream=a,e.createStream=function(e,t){return new a(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function s(t,i){if(!(this instanceof s))return new s(t,i);var a=this;!function(e){for(var t=0,s=n.length;t<s;t++)e[n[t]]=""}(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=i||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!(!t&&!a.opt.noscript),a.state=T.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(u)),void 0===a.opt.unquotedAttributeValues&&(a.opt.unquotedAttributeValues=!t),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),x(a,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),s.prototype={end:function(){N(this)},write:function(t){var s=this;if(this.error)throw this.error;if(s.closed)return C(s,"Cannot write after close. Assign an onready handler.");if(null===t)return N(s);"object"==typeof t&&(t=t.toString());for(var i=0,a="";a=F(t,i++),s.c=a,a;)switch(s.trackPosition&&(s.position++,"\n"===a?(s.line++,s.column=0):s.column++),s.state){case T.BEGIN:if(s.state=T.BEGIN_WHITESPACE,"\ufeff"===a)continue;M(s,a);continue;case T.BEGIN_WHITESPACE:M(s,a);continue;case T.TEXT:if(s.sawRoot&&!s.closedRoot){for(var c=i-1;a&&"<"!==a&&"&"!==a;)(a=F(t,i++))&&s.trackPosition&&(s.position++,"\n"===a?(s.line++,s.column=0):s.column++);s.textNode+=t.substring(c,i-1)}"<"!==a||s.sawRoot&&s.closedRoot&&!s.strict?(g(a)||s.sawRoot&&!s.closedRoot||I(s,"Text data outside of root node."),"&"===a?s.state=T.TEXT_ENTITY:s.textNode+=a):(s.state=T.OPEN_WAKA,s.startTagPosition=s.position);continue;case T.SCRIPT:"<"===a?s.state=T.SCRIPT_ENDING:s.script+=a;continue;case T.SCRIPT_ENDING:"/"===a?s.state=T.CLOSE_TAG:(s.script+="<"+a,s.state=T.SCRIPT);continue;case T.OPEN_WAKA:if("!"===a)s.state=T.SGML_DECL,s.sgmlDecl="";else if(g(a));else if(E(p,a))s.state=T.OPEN_TAG,s.tagName=a;else if("/"===a)s.state=T.CLOSE_TAG,s.tagName="";else if("?"===a)s.state=T.PROC_INST,s.procInstName=s.procInstBody="";else{if(I(s,"Unencoded <"),s.startTagPosition+1<s.position){var l=s.position-s.startTagPosition;a=new Array(l).join(" ")+a}s.textNode+="<"+a,s.state=T.TEXT}continue;case T.SGML_DECL:if(s.sgmlDecl+a==="--"){s.state=T.COMMENT,s.comment="",s.sgmlDecl="";continue}s.doctype&&!0!==s.doctype&&s.sgmlDecl?(s.state=T.DOCTYPE_DTD,s.doctype+="<!"+s.sgmlDecl+a,s.sgmlDecl=""):(s.sgmlDecl+a).toUpperCase()===r?(S(s,"onopencdata"),s.state=T.CDATA,s.sgmlDecl="",s.cdata=""):(s.sgmlDecl+a).toUpperCase()===o?(s.state=T.DOCTYPE,(s.doctype||s.sawRoot)&&I(s,"Inappropriately located doctype declaration"),s.doctype="",s.sgmlDecl=""):">"===a?(S(s,"onsgmldeclaration",s.sgmlDecl),s.sgmlDecl="",s.state=T.TEXT):y(a)?(s.state=T.SGML_DECL_QUOTED,s.sgmlDecl+=a):s.sgmlDecl+=a;continue;case T.SGML_DECL_QUOTED:a===s.q&&(s.state=T.SGML_DECL,s.q=""),s.sgmlDecl+=a;continue;case T.DOCTYPE:">"===a?(s.state=T.TEXT,S(s,"ondoctype",s.doctype),s.doctype=!0):(s.doctype+=a,"["===a?s.state=T.DOCTYPE_DTD:y(a)&&(s.state=T.DOCTYPE_QUOTED,s.q=a));continue;case T.DOCTYPE_QUOTED:s.doctype+=a,a===s.q&&(s.q="",s.state=T.DOCTYPE);continue;case T.DOCTYPE_DTD:"]"===a?(s.doctype+=a,s.state=T.DOCTYPE):"<"===a?(s.state=T.OPEN_WAKA,s.startTagPosition=s.position):y(a)?(s.doctype+=a,s.state=T.DOCTYPE_DTD_QUOTED,s.q=a):s.doctype+=a;continue;case T.DOCTYPE_DTD_QUOTED:s.doctype+=a,a===s.q&&(s.state=T.DOCTYPE_DTD,s.q="");continue;case T.COMMENT:"-"===a?s.state=T.COMMENT_ENDING:s.comment+=a;continue;case T.COMMENT_ENDING:"-"===a?(s.state=T.COMMENT_ENDED,s.comment=w(s.opt,s.comment),s.comment&&S(s,"oncomment",s.comment),s.comment=""):(s.comment+="-"+a,s.state=T.COMMENT);continue;case T.COMMENT_ENDED:">"!==a?(I(s,"Malformed comment"),s.comment+="--"+a,s.state=T.COMMENT):s.doctype&&!0!==s.doctype?s.state=T.DOCTYPE_DTD:s.state=T.TEXT;continue;case T.CDATA:"]"===a?s.state=T.CDATA_ENDING:s.cdata+=a;continue;case T.CDATA_ENDING:"]"===a?s.state=T.CDATA_ENDING_2:(s.cdata+="]"+a,s.state=T.CDATA);continue;case T.CDATA_ENDING_2:">"===a?(s.cdata&&S(s,"oncdata",s.cdata),S(s,"onclosecdata"),s.cdata="",s.state=T.TEXT):"]"===a?s.cdata+="]":(s.cdata+="]]"+a,s.state=T.CDATA);continue;case T.PROC_INST:"?"===a?s.state=T.PROC_INST_ENDING:g(a)?s.state=T.PROC_INST_BODY:s.procInstName+=a;continue;case T.PROC_INST_BODY:if(!s.procInstBody&&g(a))continue;"?"===a?s.state=T.PROC_INST_ENDING:s.procInstBody+=a;continue;case T.PROC_INST_ENDING:">"===a?(S(s,"onprocessinginstruction",{name:s.procInstName,body:s.procInstBody}),s.procInstName=s.procInstBody="",s.state=T.TEXT):(s.procInstBody+="?"+a,s.state=T.PROC_INST_BODY);continue;case T.OPEN_TAG:E(d,a)?s.tagName+=a:(k(s),">"===a?R(s):"/"===a?s.state=T.OPEN_TAG_SLASH:(g(a)||I(s,"Invalid character in tag name"),s.state=T.ATTRIB));continue;case T.OPEN_TAG_SLASH:">"===a?(R(s,!0),L(s)):(I(s,"Forward-slash in opening tag not followed by >"),s.state=T.ATTRIB);continue;case T.ATTRIB:if(g(a))continue;">"===a?R(s):"/"===a?s.state=T.OPEN_TAG_SLASH:E(p,a)?(s.attribName=a,s.attribValue="",s.state=T.ATTRIB_NAME):I(s,"Invalid attribute name");continue;case T.ATTRIB_NAME:"="===a?s.state=T.ATTRIB_VALUE:">"===a?(I(s,"Attribute without value"),s.attribValue=s.attribName,D(s),R(s)):g(a)?s.state=T.ATTRIB_NAME_SAW_WHITE:E(d,a)?s.attribName+=a:I(s,"Invalid attribute name");continue;case T.ATTRIB_NAME_SAW_WHITE:if("="===a)s.state=T.ATTRIB_VALUE;else{if(g(a))continue;I(s,"Attribute without value"),s.tag.attributes[s.attribName]="",s.attribValue="",S(s,"onattribute",{name:s.attribName,value:""}),s.attribName="",">"===a?R(s):E(p,a)?(s.attribName=a,s.state=T.ATTRIB_NAME):(I(s,"Invalid attribute name"),s.state=T.ATTRIB)}continue;case T.ATTRIB_VALUE:if(g(a))continue;y(a)?(s.q=a,s.state=T.ATTRIB_VALUE_QUOTED):(s.opt.unquotedAttributeValues||C(s,"Unquoted attribute value"),s.state=T.ATTRIB_VALUE_UNQUOTED,s.attribValue=a);continue;case T.ATTRIB_VALUE_QUOTED:if(a!==s.q){"&"===a?s.state=T.ATTRIB_VALUE_ENTITY_Q:s.attribValue+=a;continue}D(s),s.q="",s.state=T.ATTRIB_VALUE_CLOSED;continue;case T.ATTRIB_VALUE_CLOSED:g(a)?s.state=T.ATTRIB:">"===a?R(s):"/"===a?s.state=T.OPEN_TAG_SLASH:E(p,a)?(I(s,"No whitespace between attributes"),s.attribName=a,s.attribValue="",s.state=T.ATTRIB_NAME):I(s,"Invalid attribute name");continue;case T.ATTRIB_VALUE_UNQUOTED:if(!_(a)){"&"===a?s.state=T.ATTRIB_VALUE_ENTITY_U:s.attribValue+=a;continue}D(s),">"===a?R(s):s.state=T.ATTRIB;continue;case T.CLOSE_TAG:if(s.tagName)">"===a?L(s):E(d,a)?s.tagName+=a:s.script?(s.script+="</"+s.tagName,s.tagName="",s.state=T.SCRIPT):(g(a)||I(s,"Invalid tagname in closing tag"),s.state=T.CLOSE_TAG_SAW_WHITE);else{if(g(a))continue;b(p,a)?s.script?(s.script+="</"+a,s.state=T.SCRIPT):I(s,"Invalid tagname in closing tag."):s.tagName=a}continue;case T.CLOSE_TAG_SAW_WHITE:if(g(a))continue;">"===a?L(s):I(s,"Invalid characters in closing tag");continue;case T.TEXT_ENTITY:case T.ATTRIB_VALUE_ENTITY_Q:case T.ATTRIB_VALUE_ENTITY_U:var u,m;switch(s.state){case T.TEXT_ENTITY:u=T.TEXT,m="textNode";break;case T.ATTRIB_VALUE_ENTITY_Q:u=T.ATTRIB_VALUE_QUOTED,m="attribValue";break;case T.ATTRIB_VALUE_ENTITY_U:u=T.ATTRIB_VALUE_UNQUOTED,m="attribValue"}if(";"===a){var v=P(s);s.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(v)?(s.entity="",s.state=u,s.write(v)):(s[m]+=v,s.entity="",s.state=u)}else E(s.entity.length?f:h,a)?s.entity+=a:(I(s,"Invalid character in entity name"),s[m]+="&"+s.entity+a,s.entity="",s.state=u);continue;default:throw new Error(s,"Unknown state: "+s.state)}return s.position>=s.bufferCheckPosition&&function(t){for(var s=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,a=0,r=n.length;a<r;a++){var o=t[n[a]].length;if(o>s)switch(n[a]){case"textNode":A(t);break;case"cdata":S(t,"oncdata",t.cdata),t.cdata="";break;case"script":S(t,"onscript",t.script),t.script="";break;default:C(t,"Max buffer length exceeded: "+n[a])}i=Math.max(i,o)}var c=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=c+t.position}(s),s}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(e){A(e),""!==e.cdata&&(S(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(S(e,"onscript",e.script),e.script="")}(this)}};try{t=require("stream").Stream}catch(e){t=function(){}}t||(t=function(){});var i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function a(e,n){if(!(this instanceof a))return new a(e,n);t.apply(this),this._parser=new s(e,n),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,i.forEach((function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})}))}a.prototype=Object.create(t.prototype,{constructor:{value:a}}),a.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=m.StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(e,n){var s=this;return s._parser["on"+e]||-1===i.indexOf(e)||(s._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),s.emit.apply(s,t)}),t.prototype.on.call(s,e,n)};var r="[CDATA[",o="DOCTYPE",c="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",u={xml:c,xmlns:l},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function y(e){return'"'===e||"'"===e}function _(e){return">"===e||g(e)}function E(e,t){return e.test(t)}function b(e,t){return!E(e,t)}var T=0;for(var v in e.STATE={BEGIN:T++,BEGIN_WHITESPACE:T++,TEXT:T++,TEXT_ENTITY:T++,OPEN_WAKA:T++,SGML_DECL:T++,SGML_DECL_QUOTED:T++,DOCTYPE:T++,DOCTYPE_QUOTED:T++,DOCTYPE_DTD:T++,DOCTYPE_DTD_QUOTED:T++,COMMENT_STARTING:T++,COMMENT:T++,COMMENT_ENDING:T++,COMMENT_ENDED:T++,CDATA:T++,CDATA_ENDING:T++,CDATA_ENDING_2:T++,PROC_INST:T++,PROC_INST_BODY:T++,PROC_INST_ENDING:T++,OPEN_TAG:T++,OPEN_TAG_SLASH:T++,ATTRIB:T++,ATTRIB_NAME:T++,ATTRIB_NAME_SAW_WHITE:T++,ATTRIB_VALUE:T++,ATTRIB_VALUE_QUOTED:T++,ATTRIB_VALUE_CLOSED:T++,ATTRIB_VALUE_UNQUOTED:T++,ATTRIB_VALUE_ENTITY_Q:T++,ATTRIB_VALUE_ENTITY_U:T++,CLOSE_TAG:T++,CLOSE_TAG_SAW_WHITE:T++,SCRIPT:T++,SCRIPT_ENDING:T++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],s="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=s})),e.STATE)e.STATE[e.STATE[v]]=v;function x(e,t,n){e[t]&&e[t](n)}function S(e,t,n){e.textNode&&A(e),x(e,t,n)}function A(e){e.textNode=w(e.opt,e.textNode),e.textNode&&x(e,"ontext",e.textNode),e.textNode=""}function w(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function C(e,t){return A(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,x(e,"onerror",t),e}function N(e){return e.sawRoot&&!e.closedRoot&&I(e,"Unclosed root tag"),e.state!==T.BEGIN&&e.state!==T.BEGIN_WHITESPACE&&e.state!==T.TEXT&&C(e,"Unexpected end"),A(e),e.c="",e.closed=!0,x(e,"onend"),s.call(e,e.strict,e.opt),e}function I(e,t){if("object"!=typeof e||!(e instanceof s))throw new Error("bad call to strictFail");e.strict&&C(e,t)}function k(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,S(e,"onopentagstart",n)}function O(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),s=n[0],i=n[1];return t&&"xmlns"===e&&(s="xmlns",i=""),{prefix:s,local:i}}function D(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=O(e.attribName,!0),n=t.prefix,s=t.local;if("xmlns"===n)if("xml"===s&&e.attribValue!==c)I(e,"xml: prefix must be bound to "+c+"\nActual: "+e.attribValue);else if("xmlns"===s&&e.attribValue!==l)I(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[s]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,S(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function R(e,t){if(e.opt.xmlns){var n=e.tag,s=O(e.tagName);n.prefix=s.prefix,n.local=s.local,n.uri=n.ns[s.prefix]||"",n.prefix&&!n.uri&&(I(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=s.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){S(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,r=e.attribList.length;a<r;a++){var o=e.attribList[a],c=o[0],l=o[1],u=O(c,!0),p=u.prefix,d=u.local,h=""===p?"":n.ns[p]||"",f={name:c,value:l,prefix:p,local:d,uri:h};p&&"xmlns"!==p&&!h&&(I(e,"Unbound namespace prefix: "+JSON.stringify(p)),f.uri=p),e.tag.attributes[c]=f,S(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),S(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=T.TEXT:e.state=T.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function L(e){if(!e.tagName)return I(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=T.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=T.SCRIPT);S(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var s=n;t--&&e.tags[t].name!==s;)I(e,"Unexpected close tag");if(t<0)return I(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=T.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,S(e,"onclosetag",e.tagName);var r={};for(var o in a.ns)r[o]=a.ns[o];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==c.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];S(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=T.TEXT}function P(e){var t,n=e.entity,s=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[s]?e.ENTITIES[s]:("#"===(n=s).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(I(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function M(e,t){"<"===t?(e.state=T.OPEN_WAKA,e.startTagPosition=e.position):g(t)||(I(e,"Non-whitespace before first tag."),e.textNode=t,e.state=T.TEXT)}function F(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}T=e.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,s,i=[],a=-1,r=arguments.length;if(!r)return"";for(var o="";++a<r;){var c=Number(arguments[a]);if(!isFinite(c)||c<0||c>1114111||t(c)!==c)throw RangeError("Invalid code point: "+c);c<=65535?i.push(c):(n=55296+((c-=65536)>>10),s=c%1024+56320,i.push(n,s)),(a+1===r||i.length>16384)&&(o+=e.apply(null,i),i.length=0)}return o};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}(WA)),WA}var KA,ZA={};function $A(){return KA||(KA=1,function(){ZA.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}.call(C)),ZA}var XA,JA,ew={};function tw(){return XA||(XA=1,function(){var e;e=new RegExp(/(?!xmlns)^.*:/),ew.normalize=function(e){return e.toLowerCase()},ew.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ew.stripPrefix=function(t){return t.replace(e,"")},ew.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},ew.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}.call(C)),ew}function nw(){return JA||(JA=1,e=VA,function(){var n,s,i,a,r,o,c,l,u,p=function(e,t){return function(){return e.apply(t,arguments)}},d={}.hasOwnProperty;l=QA(),a=t,n=$A(),c=tw(),u=T.setImmediate,s=$x().defaults,r=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},o=function(e,t,n){var s,i;for(s=0,i=e.length;s<i;s++)t=(0,e[s])(t,n);return t},i=function(e,t,n){var s;return(s=Object.create(null)).value=n,s.writable=!0,s.enumerable=!0,s.configurable=!0,Object.defineProperty(e,t,s)},e.Parser=function(t){function a(t){var n,i,a;if(this.parseStringPromise=p(this.parseStringPromise,this),this.parseString=p(this.parseString,this),this.reset=p(this.reset,this),this.assignOrPush=p(this.assignOrPush,this),this.processAsync=p(this.processAsync,this),!(this instanceof e.Parser))return new e.Parser(t);for(n in this.options={},i=s[.2])d.call(i,n)&&(a=i[n],this.options[n]=a);for(n in t)d.call(t,n)&&(a=t[n],this.options[n]=a);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(c.normalize)),this.reset()}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(a,t),a.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),u(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},a.prototype.assignOrPush=function(e,t,n){return t in e?(e[t]instanceof Array||i(e,t,[e[t]]),e[t].push(n)):this.options.explicitArray?i(e,t,[n]):i(e,t,n)},a.prototype.reset=function(){var e,t,n,s,a;return this.removeAllListeners(),this.saxParser=l.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(a=this,function(e){if(a.saxParser.resume(),!a.saxParser.errThrown)return a.saxParser.errThrown=!0,a.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,s=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){return function(a){var r,c,l,u,p;if((l={})[t]="",!n.options.ignoreAttrs)for(r in p=a.attributes)d.call(p,r)&&(e in l||n.options.mergeAttrs||(l[e]={}),c=n.options.attrValueProcessors?o(n.options.attrValueProcessors,a.attributes[r],r):a.attributes[r],u=n.options.attrNameProcessors?o(n.options.attrNameProcessors,r):r,n.options.mergeAttrs?n.assignOrPush(l,u,c):i(l[e],u,c));return l["#name"]=n.options.tagNameProcessors?o(n.options.tagNameProcessors,a.name):a.name,n.options.xmlns&&(l[n.options.xmlnskey]={uri:a.uri,local:a.local}),s.push(l)}}(this),this.saxParser.onclosetag=function(e){return function(){var n,a,c,l,u,p,h,f,m,g;if(p=s.pop(),u=p["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete p["#name"],!0===p.cdata&&(n=p.cdata,delete p.cdata),m=s[s.length-1],p[t].match(/^\s*$/)&&!n?(a=p[t],delete p[t]):(e.options.trim&&(p[t]=p[t].trim()),e.options.normalize&&(p[t]=p[t].replace(/\s{2,}/g," ").trim()),p[t]=e.options.valueProcessors?o(e.options.valueProcessors,p[t],u):p[t],1===Object.keys(p).length&&t in p&&!e.EXPLICIT_CHARKEY&&(p=p[t])),r(p)&&(p="function"==typeof e.options.emptyTag?e.options.emptyTag():""!==e.options.emptyTag?e.options.emptyTag:a),null!=e.options.validator&&(g="/"+function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)l=s[e],n.push(l["#name"]);return n}().concat(u).join("/"),function(){var t;try{return p=e.options.validator(g,m&&m[u],p)}catch(n){return t=n,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof p)if(e.options.preserveChildrenOrder){if(m){for(c in m[e.options.childkey]=m[e.options.childkey]||[],h={},p)d.call(p,c)&&i(h,c,p[c]);m[e.options.childkey].push(h),delete p["#name"],1===Object.keys(p).length&&t in p&&!e.EXPLICIT_CHARKEY&&(p=p[t])}}else l={},e.options.attrkey in p&&(l[e.options.attrkey]=p[e.options.attrkey],delete p[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in p&&(l[e.options.charkey]=p[e.options.charkey],delete p[e.options.charkey]),Object.getOwnPropertyNames(p).length>0&&(l[e.options.childkey]=p),p=l;return s.length>0?e.assignOrPush(m,u,p):(e.options.explicitRoot&&(f=p,i(p={},u,f)),e.resultObject=p,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),n=function(e){return function(n){var i,a;if(a=s[s.length-1])return a[t]+=n,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==n.replace(/\\n/g,"").trim())&&(a[e.options.childkey]=a[e.options.childkey]||[],(i={"#name":"__text__"})[t]=n,e.options.normalize&&(i[t]=i[t].replace(/\s{2,}/g," ").trim()),a[e.options.childkey].push(i)),a}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(e){var t;if(t=n(e))return t.cdata=!0}},a.prototype.parseString=function(e,t){var s;null!=t&&"function"==typeof t&&(this.on("end",(function(e){return this.reset(),t(null,e)})),this.on("error",(function(e){return this.reset(),t(e)})));try{return""===(e=e.toString()).trim()?(this.emit("end",null),!0):(e=n.stripBOM(e),this.options.async?(this.remaining=e,u(this.processAsync),this.saxParser):this.saxParser.write(e).close())}catch(e){if(s=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",s),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw s}},a.prototype.parseStringPromise=function(e){return new Promise((t=this,function(n,s){return t.parseString(e,(function(e,t){return e?s(e):n(t)}))}));var t},a}(a),e.parseString=function(t,n,s){var i,a;return null!=s?("function"==typeof s&&(i=s),"object"==typeof n&&(a=n)):("function"==typeof n&&(i=n),a={}),new e.Parser(a).parseString(t,i)},e.parseStringPromise=function(t,n){var s;return"object"==typeof n&&(s=n),new e.Parser(s).parseStringPromise(t)}}.call(C)),VA;var e}(function(){var e,t,n,s,i={}.hasOwnProperty;t=$x(),e=YA(),n=nw(),s=tw(),Kx.defaults=t.defaults,Kx.processors=s,Kx.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(t,Error),t}(),Kx.Builder=e.Builder,Kx.Parser=n.Parser,Kx.parseString=n.parseString,Kx.parseStringPromise=n.parseStringPromise}).call(C);const sw=class{constructor(){}static getWasherExternalIdentifier(e,t){return"osnabrueck_"+e+"_"+t}async getWashingmachines(){let e=[],t=await sw.getAllTerminalFromIntercard();for(let n=0;n<t.length;n++){let s=t[n];if(s){let t=sw.getWasherExternalIdentifier(s.terminalNr,s.automateNr),n=null;if("true"===s.intercardStatus){let e=new Date;e.setMinutes(e.getMinutes()+s.expectedFreeTimeInMinutes),n=Ll.formatDateToIso8601WithoutTimezone(e)}else n=null;let i={external_identifier:t,alias:"Washingmachine "+s.terminalNr+" "+s.automateNr,date_updated:Ll.formatDateToIso8601WithoutTimezone(new Date),date_finished:n};e.push({basicData:i})}}return e}static async getAllTerminalFromIntercard(){let e=await sw.getAllTerminalsRawFromIntercard();return e?await sw.parseTerminalsRawFromIntercardToJSON(e):[]}static async getAllTerminalsRawFromIntercard(){let e=sw.getAllTerminalsUrl;try{let t=await Rs.get(e),n=t.data;if(n&&"string"==typeof n)return t.data}catch(e){}return null}static async parseTerminalsRawFromIntercardToJSON(e){let t=[];try{let n=(await Kx.parseStringPromise(e))["soap:Envelope"]["soap:Body"][0]["ns1:getAllTerminalsResponse"][0].return[0].list;for(let e=0;e<n.length;e++){let s=n[e],i={terminalNr:parseInt(s.terminalN5[0]),automateNr:parseInt(s.automatenNR[0]),intercardStatus:s.stateRunning[0],expectedFreeTimeInMinutes:parseInt(s.expectedFreeTime[0])};t.push(i)}}catch(e){}return t}};let iw=sw;iw.url="http://131.173.252.37:8080/smartWASH-WebService/JaxWsWashService/",iw.getAllTerminalsUrl=sw.url+"getAllTerminals";var aw=async({action:e,init:t},n)=>{const s="washingmachine_parse",i=Xa.APP_SETTINGS;if(!await er.checkAllTablesExistWithApiContext(s,n))return;let a=null;switch(Yl.getSyncForCustomer()){case ql.TEST:a=new Wx;break;case ql.HANNOVER:a=null;break;case ql.OSNABRUECK:a=new iw}if(!a)return void console.log("No Parser set for Washingmachine Sync");const r=new Vx(n,a);let o=new Gl(n);t(cr.INIT_APP_STARTED,(async()=>{console.log(s+": App started, resetting "+s+" parsing status and parsing hash"),await o.getAppSettingsHelper().setWashingmachineParsingStatus(Fl.FINISHED,null)})),e(i+".items.update",(async()=>{try{await r.parse()}catch(e){console.log(e)}}))};const rw="NewsParseSchedule";class ow{constructor(e,t){this.apiContext=e,this.myDatabaseHelper=new Gl(e),this.parser=t}async setStatus(e){await this.myDatabaseHelper.getAppSettingsHelper().setNewsParsingStatus(e)}async isEnabled(){return await this.myDatabaseHelper.getAppSettingsHelper().isNewsParsingEnabled()}async getStatus(){return await this.myDatabaseHelper.getAppSettingsHelper().getNewsParsingStatus()}async parse(){let e=await this.isEnabled(),t=await this.getStatus();if(e&&t===Fl.START){console.log("[Start] "+rw+" Parse Schedule"),await this.setStatus(Fl.RUNNING);try{let e=await this.parser.getNewsItems();await this.updateNews(e),console.log("Finished"),await this.setStatus(Fl.FINISHED)}catch(e){console.log(rw+" Failed"),console.log(e),await this.setStatus(Fl.FAILED)}}}async findOrCreateSingleNews(e){let t=await this.myDatabaseHelper.getNewsHelper(),n=(await t.readByQuery({filter:{external_identifier:{_eq:null==e?void 0:e.basicNews.external_identifier}}}))[0];if(!n){let s=await t.createOne({external_identifier:null==e?void 0:e.basicNews.external_identifier});n=await t.readOne(s)}return n}async updateNewsTranslations(e,t){await Wf.updateItemTranslations(e,t.translations,"news_id",Xa.NEWS,this.apiContext)}async updateOtherFields(e,t){let n=this.myDatabaseHelper.getNewsHelper();await n.updateOne(null==e?void 0:e.id,t.basicNews)}async updateNews(e){for(let t of e){let e=await this.findOrCreateSingleNews(t);e&&(null==e?void 0:e.id)&&(await this.updateOtherFields(e,t),await this.updateNewsTranslations(e,t))}}}class cw{constructor(){}async getNewsItems(){return[this.getDemoNewsItem("1"),this.getDemoNewsItem("2"),this.getDemoNewsItem("3")]}getDemoNewsItem(e){return{basicNews:{external_identifier:e,image_remote_url:"https://images.pexels.com/photos/1462630/pexels-photo-1462630.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",url:"https://www.pexels.com/de-de/foto/frau-die-im-flur-steht-wahrend-buch-halt-1462630/"},translations:{[Wf.LANGUAGE_CODE_DE]:{title:"Test News "+e,content:"Das ist ein Test News Artikel",be_source_for_translations:!0,let_be_translated:!1}}}}}const lw=class{constructor(){}async getNewsItems(e){return[...await this.getRealNewsItems(e)]}async getRealNewsItems(e){try{let t=await this.fetchNewsPage();return lw.parseNewsItems(t.data,e)}catch(e){return console.log(e),[]}}async fetchNewsPage(){return Rs.get(lw.newsUrl)}static async fetchArticlePage(e){return Rs.get(e)}static async parseNewsItems(e,t){const n=Hx(e);let s=[],i=n("div.article"),a=t?Math.min(t,i.length):i.length;for(let e=0;e<i.length&&e<a;e++){let t=i[e],a=lw.extractImageUrl(n,t),r=n(t).find("h3").text().trim(),o=n(t).find("div.news_slider-content_teaser").text().trim(),c=lw.extractArticleUrl(n,t),l=await lw.fetchArticleDate(c),u=lw.extractCategories(n,t);s.push({basicNews:{external_identifier:"news_"+r.replace(/\W+/g,"_"),image_remote_url:a,alias:r,date:l,url:c,categories:u},translations:{[Wf.LANGUAGE_CODE_DE]:{title:r,content:o,be_source_for_translations:!0,let_be_translated:!1}}})}return s.reverse(),s}static extractImageUrl(e,t){let n=e(t).find("div.news-slider-image").attr("style"),s=n?n.match(/url\(['"]?(.*?)['"]?\)/):null;return s?lw.baseUrl+s[1]:""}static extractArticleUrl(e,t){let n=e(t).find("a.articleLink").attr("href");if(n&&n.startsWith(lw.newsDetailArticleUrlStart))return lw.baseUrl+n}static async fetchArticleDate(e){if(!e)return null;try{let t=await this.fetchArticlePage(e);let n=Hx(t.data)(".news-list-date").text().trim().split("."),s=new Date(parseInt(n[2]),parseInt(n[1])-1,parseInt(n[0]));return s.setHours(12,0,0,0),s.toISOString()}catch(t){return console.log("Error fetching article page: "+e),null}}static extractCategories(e,t){let n={};return e(t).find("div.news_slider-content_categorie").each(((t,s)=>{let i=e(s).text().trim();i&&(n[i]=i)})),n}};let uw=lw;uw.baseUrl="https://www.studentenwerk-hannover.de",uw.newsUrl=`${lw.baseUrl}/unternehmen/news`,uw.newsDetailArticleUrlStart="/unternehmen/news";const pw=class{constructor(){}async getNewsItems(){return[...await this.getRealNewsItems()]}async getRealNewsItems(){try{let e=await Rs.get(pw.newsUrl),t=Hx(e.data),n=t("div.article"),s=[];return n.each(((e,n)=>{let i=t(n).find("img"),a=i.length?pw.baseUrl+i.attr("src"):"",r=t(n).find("a"),o=r.length?pw.baseUrl+r.attr("href"):"",c=t(n).find("span"),l=c.length?c.text().trim():"",u=t(n).find("div.teaser-text").find("div"),p=u.length?u.text().trim():"";p=p.replace(/Weiterlesen$/,"").trim(),p=p.replace(/\n$/,"").trim(),p=p.replace(/\t$/,"").trim(),p=p.replace(/&nbsp;/g," ").trim(),s.push({basicNews:{external_identifier:"news_"+l.replace(/\W+/g,"_"),image_remote_url:a,alias:l,date:(new Date).toISOString(),url:o,categories:{}},translations:{[Wf.LANGUAGE_CODE_DE]:{title:l,content:p,be_source_for_translations:!0,let_be_translated:!1}}})})),s.reverse(),s}catch(e){console.log(e)}return[]}};let dw=pw;dw.baseUrl="https://www.studentenwerk-osnabrueck.de/",dw.newsUrl="https://www.studentenwerk-osnabrueck.de/de/nachrichten.html";const hw="news_parse";var fw=async({action:e,init:t},n)=>{if(!await er.checkAllTablesExistWithApiContext(hw,n))return;let s=null;switch(Yl.getSyncForCustomer()){case ql.TEST:s=new cw;break;case ql.HANNOVER:s=new uw;break;case ql.OSNABRUECK:s=new dw}if(!s)return void console.log("No Parser set for News Sync");const i=new ow(n,s);let a=new Gl(n);t(cr.INIT_APP_STARTED,(async()=>{console.log(hw+": App started, resetting "+hw+" parsing status and parsing hash"),await a.getAppSettingsHelper().setNewsParsingStatus(Fl.FINISHED)})),e(Xa.APP_SETTINGS+".items.update",(async()=>{try{await i.parse()}catch(e){console.log(e)}}))};var mw=async({filter:e,schedule:t},n)=>{if(!await er.checkAllTablesExistWithApiContext("profile_create",n))return;const s=new Gl(n);let i=s.getUsersHelper(),a=s.getProfilesHelper();t("0 * * * * *",(async()=>{let e=await i.readByQuery({filter:{profile:{_null:!0}},limit:-1});if(e&&e.length>0){console.log("Users without profiles: "+e.length);for(let t of e)try{let e=await a.createOne({});e&&"string"==typeof e&&(console.log("Created profile for user: "+t.id),await i.updateOne(t.id,{profile:e}))}catch(e){console.log("profileCreateHook: Error while creating profile for user: "+t.id),console.log(e)}}})),e(ff.USERS_LOGIN_EVENT,(async(e,t,n)=>{const{database:s}=n;let r=t.user;const o=(await s(Xa.USERS).where({id:r}))[0];if(!o)throw new Error("profileCreateHook: No user found with id: "+r);if(null==o?void 0:o.profile)return e;try{console.log("Creating profile for user: "+r);let t=await a.createOne({});if(console.log("Created profile for user: "+r),t&&"string"==typeof t)return console.log("New profile id: "+t),await i.updateOne(r,{profile:t}),e}catch(t){return console.log("profileCreateHook: Error while creating profile for user: "+r),console.log(t),e}return e}))};var gw=async({filter:e},t)=>{const n=Xa.PUSH_NOTIFICATIONS;if(!await er.checkAllTablesExistWithApiContext("push_notification",t))return;const s=new Gl(t);async function i(e,t){console.log("Sending notification..."),console.log("Payload:"),console.log(e);let n,s,i,a=e.expo_push_tokens,r=e.expo_push_tokens;if("string"==typeof a?(console.log("expo_push_tokens is a string"),r=JSON.parse(a)):"object"==typeof a&&console.log("expo_push_tokens is an object"),!r)throw t.status="failed",t.status_log="expo_push_tokens is empty",new Error("expo_push_tokens is empty");console.log("expoPushTokens:"),console.log(r),e.message_title&&(n=e.message_title),e.message_body&&(s=e.message_body),e.message_data&&(i=e.message_data);const o=r.map((e=>({to:e,sound:"default",title:n,body:s,data:i})));console.log("Messages:"),console.log(o);try{await Rs.post("https://exp.host/--/api/v2/push/send",o)}catch(e){throw console.log(`Failed to send notification: ${e.message}`),t.status="failed",t.status_log=null==e?void 0:e.message.toString(),new Error(`Failed to send notification: ${e.message}`)}}e(n+".items.create",(async(e,{collection:t})=>("published"===e.status&&(await i(e,e),e.status="published"),e))),e(n+".items.update",(async(e,{keys:t,collection:n})=>{let a=s.getPushNotificationsHelper();if(!t||0===t.length)throw new Error("No keys provided for update");for(let n=0;n<t.length;n++){const s=t[n],r=await a.readByQuery({filter:{id:s}});if(!r||0===r.length)throw new Error(`Item with ID ${s} not found`);const o=r[0];if(o){for(const t in e)void 0!==e[t]&&(o[t]=e[t]);Rl.isStatusPublished(o)&&(await i(o,e),e=Rl.setStatusPublished(e))}}return e}))},yw=1e3,_w=60*yw,Ew=60*_w,bw=24*Ew,Tw=7*bw,vw=365.25*bw,xw=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*vw;case"weeks":case"week":case"w":return n*Tw;case"days":case"day":case"d":return n*bw;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ew;case"minutes":case"minute":case"mins":case"min":case"m":return n*_w;case"seconds":case"second":case"secs":case"sec":case"s":return n*yw;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=bw)return Sw(e,t,bw,"day");if(t>=Ew)return Sw(e,t,Ew,"hour");if(t>=_w)return Sw(e,t,_w,"minute");if(t>=yw)return Sw(e,t,yw,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=bw)return Math.round(e/bw)+"d";if(t>=Ew)return Math.round(e/Ew)+"h";if(t>=_w)return Math.round(e/_w)+"m";if(t>=yw)return Math.round(e/yw)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Sw(e,t,n,s){var i=t>=1.5*n;return Math.round(e/n)+" "+s+(i?"s":"")}var Aw=N(xw);class ww{static replaceAll(e,t,n){return e.replace(new RegExp(t,"g"),n)}}process.env.PUBLIC_URL;const Cw="WILDCARD_REPLACEMENT";function Nw(e,t){let n=t.split(Cw),s=n.length>1?n[0]:t;return s.endsWith("/")&&(s=s.slice(0,-1)),e.startsWith(s)}function Iw(e,t){if(!e)return!1;if("*"===e)return!0;const n=t.protocol,s=t.host,i=t.pathname,a=t.search;if(e.includes("://")){if(n.includes(Cw))return!1;{let t=ww.replaceAll(e,"\\*",Cw),r=new URL(t);const o=r.protocol,c=r.host,l=r.pathname,u=r.search;if(!Nw(n,o))return!1;if(!Nw(s,c))return!1;if(!Nw(i,l))return!1;return!!Nw(a,u)}}{let n="https://"+e,s=Iw("http://"+e,t),i=Iw(n,t);return s||i}}var kw={id:"redirect-with-token",handler:(e,t)=>{e.get("/",(async(e,n)=>{var s;if(!await er.checkAllTablesExistWithApiContext("redirect_with_token",t))return;const i=e.headers.referer+"";console.log("REFERER: "+i);if(!["https://accounts.google.com/","https://appleid.apple.com/"].includes(i))return void n.status(400).send("Invalid referer URL ("+i+"). Please contact the administrator: info@rocket-meals.de");console.log("redirect comes from valid referer");const{services:a,database:r,getSchema:o,env:c,logger:l}=t,u=new Gl(t);let p=!0,d=e.query.redirect;if(d&&"string"==typeof d){let e=function(e){try{return new URL(e)}catch(e){return null}}(d);if(e){const t=await u.getAppSettingsHelper().getRedirectWhitelist();if(t){let n=!1;0===t.length&&(n=!0);for(let s=0;s<t.length&&!n;s++){let i=t[s];try{if(Iw(i,e)){n=!0;break}}catch(t){console.log("Error in redirect with token endpoint"),console.log("redirectUrl: "+e),console.log("redirect_whitelist_entry: "+i),console.log(t)}}p=n}}else p=!1}else p=!1;if(!p)return void n.status(400).send("Invalid redirect URL ("+d+"). Please contact the administrator: info@rocket-meals.de");const h=e.cookies.directus_refresh_token;if(h){const e=d+h;return void n.redirect(e)}if(e.cookies.directus_session_token){const t=null==e?void 0:e.accountability,i=null==(s=null==e?void 0:e.accountability)?void 0:s.user;if(!i)return void n.status(400).send("No user found");const a=r,{nanoid:o}=await Promise.resolve().then((function(){return w})),l=o(64),u=Aw(String(c.REFRESH_TOKEN_TTL))||0,p=new Date(Date.now()+u);await a("directus_sessions").insert({token:l,user:i,expires:p,ip:null==t?void 0:t.ip,user_agent:null==t?void 0:t.userAgent,origin:null==t?void 0:t.origin}),await a("directus_sessions").delete().where("expires","<",new Date);const h=d+l;n.redirect(h)}else n.status(400).send("No token found")}))}};const Ow="WILDCARD_REPLACEMENT";class Dw{static isRedirectUrlAllowedForWhitelistEntriesWithSimpleWildcards(e,t){for(let n=0;n<e.length;n++){let s=e[n];try{if(Dw.isRedirectUrlAllowedForWhitelistEntry(s,t))return!0}catch(e){console.log("Error in redirect with token endpoint"),console.log("redirectUrl: "+t),console.log("redirect_whitelist_entry: "+s),console.log(e)}}return!1}static isRedirectUrlAllowedForWhitelistEntry(e,t){if(!e)return!1;if("*"===e)return!0;const n=t.protocol,s=t.host,i=t.pathname,a=t.search;if(e.includes("://")){if(n.includes(Ow))return!1;{let t=ww.replaceAll(e,"\\*",Ow),r=new URL(t);const o=r.protocol,c=r.host,l=r.pathname,u=r.search;if(!Dw.startsWithUntilWildcardReplacement(n,o))return!1;if(!Dw.startsWithUntilWildcardReplacement(s,c))return!1;if(!Dw.startsWithUntilWildcardReplacement(i,l))return!1;return!!Dw.startsWithUntilWildcardReplacement(a,u)}}{let n="http://"+e,s="https://"+e,i=Dw.isRedirectUrlAllowedForWhitelistEntry(n,t),a=Dw.isRedirectUrlAllowedForWhitelistEntry(s,t);return i||a}}static startsWithUntilWildcardReplacement(e,t){let n=t.split(Ow),s=n.length>1?n[0]:t;return s.endsWith("/")&&(s=s.slice(0,-1)),e.startsWith(s)}static getUrlFromString(e){try{return new URL(e)}catch(e){return null}}}const Rw=process.env,Lw=Rw.PUBLIC_URL||"";function Pw(...e){console.log(Bw+": ",e)}class Mw{constructor(e,t){this.kvImplementationCodeChallenge=new Ol(e,t,"pkce_code_challenge_"),this.kvImplementationSaveSession=new Ol(e,t,"pkce_save_session_")}async setCodeChallenge(e,t){Pw("associateCodeChallengeWithCode: state: "+e),Pw(JSON.stringify(t,null,2)),Pw("-----"),await this.kvImplementationCodeChallenge.set(e,JSON.stringify(t))}async getCodeChallenge(e){let t=await this.kvImplementationCodeChallenge.get(e);if(Pw("getAssociatedCodeChallengeFromCode: authorization_code: "+e),Pw(t),t){let e=JSON.parse(t);return Pw(JSON.stringify(e,null,2)),e}return null}async setStateInformation(e,t){Pw("setStateInformation: state: "+e),Pw(JSON.stringify(t,null,2)),Pw("-----"),await this.kvImplementationSaveSession.set(e,JSON.stringify(t))}async getStateInformation(e){let t=await this.kvImplementationSaveSession.get(e);if(Pw("getStateInformation: state: "+e),Pw(t),t){let e=JSON.parse(t);return Pw(JSON.stringify(e,null,2)),Pw("-----"),e}return null}async clearStateInformation(e){await this.kvImplementationSaveSession.del(e)}async clearAssociatedCodeChallengeFromCode(e){await this.kvImplementationCodeChallenge.del(e)}}class Fw{}Fw.METHOD_S256="S256",Fw.METHOD_plain="plain";const Bw="proof-key-code-exchange";async function Uw(e,t,n){const s=e.toString(),i=function(e){let t=null==Rw?void 0:Rw[function(e){return`AUTH_${e.toUpperCase()}_REDIRECT_ALLOW_LIST`}(e)];Pw("allowed_redirect_urls_raw"),Pw(t),Pw("type of: "+typeof t);let n=[];return t&&(n="string"==typeof t?null==t?void 0:t.split(","):t),Pw("allowed_redirect_urls"),Pw(n),n}(t);return!!s.startsWith(Lw)||Dw.isRedirectUrlAllowedForWhitelistEntriesWithSimpleWildcards(i,e)}function Hw(e){let t=function(){const e=null==Rw?void 0:Rw.AUTH_PROVIDERS;Pw("configured_auth_providers_raw:"),Pw(e),Pw("type of: "+typeof e);let t=[];return Array.isArray(e)?t=e:e&&(t=null==e?void 0:e.split(",")),t}();return Pw("configured_auth_providers"),Pw(t),t.includes(e)}var jw={id:Bw,handler:(e,t)=>{const{services:n,database:s,getSchema:i,env:a,logger:r}=t,o=new Mw(a,300);e.post("/authorize",(async(e,t)=>{Pw("Authorize Called");const{provider:n,code_challenge:s,redirect_url:i,code_challenge_method:a}=e.body;Pw(e.body);const r=s;if(!r)return Pw("Missing required parameters code_challenge."),t.status(400).json({error:"Missing required parameters code_challenge."});let c=a||Fw.METHOD_plain;if(c!==Fw.METHOD_S256&&c!==Fw.METHOD_plain)return Pw("Code challenge method provided "+c+" method has to be either "+Fw.METHOD_S256+" or "+Fw.METHOD_plain),t.status(400).json({error:`Code challenge method provided ${c} method has to be either "${Fw.METHOD_S256}" or "${Fw.METHOD_plain}"`});if(!n)return Pw("Missing required parameter provider"),t.status(400).json({error:"Missing required parameter provider. Has to be an auth provider configured in directus."});if(!Hw(n))return Pw(`Provider ${n} not listed in AUTH_PROVIDERS`),t.status(400).json({error:`Provider ${n} not listed in AUTH_PROVIDERS`});if(!i)return Pw("Missing required parameter redirect_url"),t.status(400).json({error:"Missing required parameter redirect_url"});let l=Dw.getUrlFromString(i);if(!l)return Pw(`Parameter redirect_url is not a well formed url: ${i}`),t.status(400).json({error:`Parameter redirect_url is not a well formed url: ${i}`});if(!Uw(l,n))return Pw(`Redirect url ${i} is not included in the redirect allow list for the provider ${n}`),t.status(400).json({error:`Redirect url ${i} is not included in the redirect allow list for the provider ${n}`});const p=function(e){const t=e||32;return u.randomBytes(t).toString("hex")}();await o.setCodeChallenge(p,{code_challenge:r,code_challenge_method:c,directus_refresh_token:null});const d=u.randomBytes(32).toString("hex");await o.setStateInformation(d,{authorization_code:p,redirect_url:l.toString()});const h=`${Lw}/${Bw}/save-session?state=${d}`,f=`${Lw}/auth/login/${n}?redirect=${h}`;return t.json({urlToProviderLogin:f})})),e.get("/save-session",(async(e,t)=>{var n;Pw("SAVE SESSION"),Pw(e.cookies);const{state:i}=e.query;if(!i)return Pw("Missing required parameter state."),t.status(400).json({error:"Missing required parameter state."});const a=i.toString(),r=e.cookies.directus_session_token;if(!r)return Pw("Missing directus_session_token in cookies."),t.status(400).json({error:"Missing directus_session_token in cookies."});let c=await o.getStateInformation(a);if(!c)return Pw("No information found for state. Might be too long"),t.status(400).json({error:"No information found for state. Might be too long"});const l=c.redirect_url,u=c.authorization_code;if(!u||!l)return Pw("No information found for state. Might be too long / outdated"),t.status(400).json({error:"No information found for state. Might be too long / outdated"});await o.clearStateInformation(a);const p=await o.getCodeChallenge(u);if(!p||!p.code_challenge_method||!p.code_challenge)return Pw("No information found for saved authorization code. Might be too long"),t.status(400).json({error:"No information found for saved authorization code. Might be too long"});const d=null==e?void 0:e.accountability,h=null==(n=null==e?void 0:e.accountability)?void 0:n.user;if(!d||!h)return Pw("No accountability or userId found."),t.status(400).json({error:"No accountability or userId found."});let f=await async function(e,t,n,s){if(Pw("Redirect with token endpoint: directus_session_token: "+e),Pw("Redirect with token endpoint: userId: "+n),!n)throw new Error("No user Id given");const i=s,{nanoid:a}=await Promise.resolve().then((function(){return w})),r=a(64),o=Aw(String(Rw.REFRESH_TOKEN_TTL))||0,c=new Date(Date.now()+o);return await i("directus_sessions").insert({token:r,user:n,expires:c,ip:null==t?void 0:t.ip,user_agent:null==t?void 0:t.userAgent,origin:null==t?void 0:t.origin}),await i("directus_sessions").delete().where("expires","<",new Date),r}(r,d,h,s);await o.setCodeChallenge(c.authorization_code,{code_challenge:null==p?void 0:p.code_challenge,code_challenge_method:null==p?void 0:p.code_challenge_method,directus_refresh_token:f});const m=l+"?code="+u;return Pw("Redirecting to: "+m),t.redirect(m)})),e.post("/token",(async(e,t)=>{console.log(Bw+" Token Called");const{code:n,code_verifier:s}=e.body;console.log(e.body);const i=s;if(!i)return Pw("Missing required parameter code_verifier."),t.status(400).json({error:"Missing required parameter: code_verifier."});const a=n,r=await o.getCodeChallenge(a);if(!r)return Pw("Invalid or expired state."),t.status(400).json({error:"Invalid or expired state."});try{let e=u.createHash("sha256").update(i).digest("base64url");if(r.code_challenge_method===Fw.METHOD_plain&&(Pw("Code Challenge Method is plain"),e=i),Pw("Token Called: generatedChallenge: "+e),!u.timingSafeEqual(Buffer.from(e),Buffer.from(r.code_challenge)))return Pw("Token Called: Invalid code verifier."),t.status(400).json({error:"Invalid code verifier."});Pw("Token Called: Valid code verifier.");const n=r.directus_refresh_token;return await o.clearAssociatedCodeChallengeFromCode(a),Pw("Token Called: Returning directus_refresh_token: "+n),t.json({message:"Validation successful",directus_refresh_token:n})}catch(e){return Pw("Error during validation:",e.toString()),t.status(500).json({error:"Internal server error.",message:e.toString()})}}))}};class Gw{static getAdminAccountability(e){const t=JSON.parse(JSON.stringify(e));return t.admin=!0,t}}class qw{static async deleteAvatarOfUser(e,t,n,s,i){const a=qw.getAdminFileServiceInstance(n,s,e);if(!i)throw new Error("deleteAvatarOfUser: No userId provided: ");const r=await t("directus_users").where({id:i}).first();if(!r)throw new Error("deleteAvatarOfUser: No user found with id: "+i);const o=r.avatar;o&&await a.deleteOne(o)}static getAdminFileServiceInstance(e,t,n){const{FilesService:s}=n;return new s({schema:e,accountability:Gw.getAdminAccountability(t)})}}var Yw=async({filter:e},t)=>{if(!await er.checkAllTablesExistWithApiContext("users_avatar_delete",t))return;const{services:n,database:s,getSchema:i,env:a,logger:r}=t;e(ff.USERS_DELETE_EVENT,(async(e,t,{database:s,schema:i,accountability:a})=>{const r=e;for(const e of r)await qw.deleteAvatarOfUser(n,s,i,a,e);return e}))};var zw=async({action:e,filter:t},n)=>{t(ff.USERS_CREATE_EVENT,(async(e,t,n)=>{const s=e;return function(e){const t=e.provider;if(t)return!(""===t||"default"===t);return!1}(s)&&(s.first_name=null,s.last_name=null,s.email=null),e=s}))};class Vw{constructor(e){this.apiContext=e,this.myDatabaseHelper=new Gl(this.apiContext)}async setStatus(e){await this.myDatabaseHelper.getAppSettingsHelper().setUtilizationForecastCalculationStatus(e,new Date)}async isEnabled(){return await this.myDatabaseHelper.getAppSettingsHelper().isUtilizationForecastCalculationEnabled()}async getStatus(){return await this.myDatabaseHelper.getAppSettingsHelper().getUtilizationForecastCalculationStatus()}async parse(){let e=await this.isEnabled(),t=await this.getStatus();if(e&&t===Fl.START){console.log("[Start] UtilizationSchedule Parse Schedule"),await this.setStatus(Fl.RUNNING);try{let e=await this.getAllCanteens();for(let t of e)await this.calcForecastForCanteen(t);console.log("Finished"),await this.setStatus(Fl.FINISHED)}catch(e){console.log("[UtilizationSchedule] Failed"),console.log(e),await this.setStatus(Fl.FAILED)}}}async calcForecastForCanteen(e){let t=await this.findOrCreateOrUpdateUtilizationGroupForCanteen(e);if(t){let n=await this.getAllCashregistersForCanteen(e),s=15,i=8,a=[],r=new Date;r.setDate(r.getDate()-1);for(let e=0;e<i;e++)a.push(new Date(r)),r.setDate(r.getDate()+1);for(let i of a)await this.updateUtilizationEntryForCanteenAtDate(e,t,n,i,s)}else console.log("Houston we got a problem at calcForecastForCanteen")}async createUtilizationEntry(e,t,n){let s=this.myDatabaseHelper.getUtilizationEntriesHelper();await s.createOne({utilization_group:null==e?void 0:e.id,date_start:Ll.formatDateToIso8601WithoutTimezone(t),date_end:Ll.formatDateToIso8601WithoutTimezone(n)})}async getUtilizationEntry(e,t,n){let s=this.myDatabaseHelper.getUtilizationEntriesHelper();return(await s.readByQuery({filter:{_and:[{utilization_group:{_eq:null==e?void 0:e.id}},{date_start:{_eq:Ll.formatDateToIso8601WithoutTimezone(t)}},{date_end:{_eq:Ll.formatDateToIso8601WithoutTimezone(n)}}]},fields:["*"],limit:-1}))[0]}async countCashRegistersTransactionsForInterval(e,t,n){let s=0,i=this.myDatabaseHelper.getCashregisterHelper();for(let a of e){s+=(await i.getTransactionIdsForCashregister(a.id,t,n,6e4)).length}return s}async updateUtilizationEntryForCanteenAtDate(e,t,n,s,i){let a=new Date,r=await this.getInterval(i,s);for(let s of r){let i=s.date_start,r=s.date_end,o=await this.getUtilizationEntry(t,i,r);if(o||(await this.createUtilizationEntry(t,i,r),o=await this.getUtilizationEntry(t,i,r)),o){let s=!1;if(i<a&&r<a&&(s=!0),s||(o.value_forecast_current=await this.predictUtilizationForInterval(t,n,e,i,r)),s){let e=await this.countCashRegistersTransactionsForInterval(n,i,r);if(o.value_real=e,!t.all_time_high||e>t.all_time_high&&0!==e){t.all_time_high=e;let n=this.myDatabaseHelper.getUtilizationGroupsHelper();await n.updateOne(t.id,{all_time_high:e})}}let c=this.myDatabaseHelper.getUtilizationEntriesHelper();await c.updateOne(o.id,o)}else console.log("Houston we got a problem")}}async predictUtilizationForInterval(e,t,n,s,i){let a=new Date(s);a.setDate(s.getDate()-7);let r=new Date(i);r.setDate(i.getDate()-7);let o=await this.getUtilizationEntry(e,a,r),c=null==o?void 0:o.value_forecast_current;return(null==o?void 0:o.value_real)||c}async getInterval(e,t){let n=[],s=new Date(t);s.setHours(0,0,0,0);for(let t=0;t<1440;t+=e){let i=new Date(s);i.setMinutes(t);let a=new Date(i);a.setMinutes(i.getMinutes()+e),n.push({date_start:i,date_end:a})}return n}async getAllCanteens(){let e=this.myDatabaseHelper.getCanteensHelper();return await e.readByQuery({limit:-1})}async getAllCashregistersForCanteen(e){return await this.myDatabaseHelper.getCashregisterHelper().getCashregistersForCanteen(e.id)}async findOrCreateOrUpdateUtilizationGroupForCanteen(e){const t=this.myDatabaseHelper.getCanteensHelper();let n=null==e?void 0:e.utilization_group,s=this.myDatabaseHelper.getUtilizationGroupsHelper(),i=null;if(n&&"string"==typeof n)i=await s.readOne(n);else{let n={},a=await s.createOne(n);i=await s.readOne(a),e.utilization_group=null==i?void 0:i.id,await t.updateOne(e.id,{utilization_group:null==i?void 0:i.id})}return i?(await s.updateOne(i.id,{alias:null==e?void 0:e.alias}),i=await s.readOne(i.id)):console.log("Error at findOrCreateOrUpdateUtilizationGroupForCanteen"),i}}const Ww="utilization_canteen";const Qw=[{name:"activity-auto-cleanup-schedule",config:or},{name:"admin-password-setup-from-env-hook",config:Vl},{name:"app-feedbacks-hook",config:Wl},{name:"auto-translation-hook",config:_f},{name:"cashregister-hook",config:xf},{name:"collections-last-update-hook",config:Sf},{name:"directus-file-owner-update-on-user-delete-hook",config:Af},{name:"food-feedback-rating-calculate-hook",config:Nf},{name:"food-feedback-report-schedule",config:Hf},{name:"food-notify-schedule-hook",config:Zf},{name:"food-sync-hook",config:bm},{name:"housing-sync-hook",config:Yx},{name:"washingmachines-sync-hook",config:aw},{name:"news-sync-hook",config:fw},{name:"profile-create-hook",config:mw},{name:"push-notification-hook",config:gw},{name:"users-avatar-delete-hook",config:Yw},{name:"users-sso-hide-identity-hook",config:zw},{name:"utilization-canteen-hook",config:async({init:e,action:t},n)=>{let s=Xa.APP_SETTINGS;if(!await er.checkAllTablesExistWithApiContext(Ww,n))return;const i=new Vw(n);let a=new Gl(n);e(cr.INIT_APP_STARTED,(async()=>{console.log(Ww+": App started, resetting "+Ww),await a.getAppSettingsHelper().setUtilizationForecastCalculationStatus(Fl.FINISHED,null)})),t(s+".items.update",(async()=>{try{await i.parse()}catch(e){console.log(e)}}))}}],Kw=[{name:"redirect-with-token-endpoint",config:kw},{name:"proof-key-code-exchange-endpoint",config:jw}],Zw=[];export{Kw as endpoints,Qw as hooks,Zw as operations};
